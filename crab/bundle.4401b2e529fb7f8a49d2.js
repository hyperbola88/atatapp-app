!function(e){function t(t){for(var r,a,u=t[0],s=t[1],c=t[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=s;i.push([176,1]),n()}({176:function(e,t,n){n(177),e.exports=n(388)},388:function(e,t,n){"use strict";n.r(t),n.d(t,"EGAAdAction",(function(){return _i})),n.d(t,"EGAAdError",(function(){return Oi})),n.d(t,"EGAAdType",(function(){return Si})),n.d(t,"EGAProgressionStatus",(function(){return ki})),n.d(t,"live",(function(){return Di})),n.d(t,"lang",(function(){return Fi})),n.d(t,"sendValueEvent",(function(){return Ni})),n.d(t,"sendProgressionEvent",(function(){return Gi})),n.d(t,"sendAdEvent",(function(){return Hi})),n.d(t,"sendEvent",(function(){return Ui})),n.d(t,"sendError",(function(){return Li})),n.d(t,"setLive",(function(){return Vi}));var r=n(6),o=n(15),i=n(64),a=n(46);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"states",void 0),s(this,"currentState",void 0),s(this,"stage",void 0),this.stage=t,this.states=new Map}var t,n,r;return t=e,(n=[{key:"add",value:function(e){this.states.set(e.constructor,e),e.create()}},{key:"start",value:function(e){var t=this.states.get(e);if(!t)throw new Error("No state ".concat(e));this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.start(r),this.currentState=t,this.stage.addChild(this.currentState)}},{key:"restart",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=this.currentState;this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState)),window.setTimeout((function(){o.start(n),e.currentState=o,e.stage.addChild(e.currentState)}),100)}}])&&u(t.prototype,n),r&&u(t,r),e}(),l={en:{"OH! NO!":"OH! NO!","QUEST!":"QUEST!",GAMEOVER:"BUT RELAX!\nYOU HAVE %p% HOURS\nAND %p1% MINUTES\nTO COMPLETE\nTHIS QUEST",WON:"NEED MORE?\nPLEASE COME BACK\nAFTER %p% HOURS\nAND %p1% MINUTES\nTO TRY A NEW\nCOOL QUEST!","WONDERFUL!":"WONDERFUL!","CONTINUE?":"CONTINUE?","WATCH VIDEO":"WATCH VIDEO","NO, THANKS":"NO, THANKS",TUT1:"PRESS ANY BLOCK\nTO DESTROY IT",TUT2:"REACH THE FISH\nTO SAVE HIM!",TUT3:"BE CAREFUL!\nDO NOT FALL!",TUT4:"OTHER PLAYERS\nCOULD GIVE YOU\nA BONUS!",TUTQ:"DAILY QUEST!\nTHE GOAL IS\nTO SAVE JUST\nONE FISH!",SHARE:"I just got %p% points in the Crab&Fish game! Can you do more?",SHARE_MENU:"My highscore in the game Crab&Fish is %p% points! Can you do more?"},ru:{"OH! NO!":"O, НЕТ!","QUEST!":"КВЕСТ!",GAMEOVER:"НО НИЧЕГО!\nУ ТЕБЯ ЕСТЬ ЕЩЕ\n%p% ЧАСОВ\nИ %p1% МИНУТ,\nЧТОБЫ ЗАКОНЧИТЬ\nЭТОТ КВЕСТ",WON:"ХОЧЕШЬ ЕЩЕ?\nВОЗВРАЩАЙСЯ\nЧЕРЕЗ %p% ЧАСОВ\nИ %p1% МИНУТ,\nПОПРОБОВАТЬ\nНОВЫЙ КВЕСТ!","WONDERFUL!":"ПРЕКРАСНО!","CONTINUE?":"ПРОДОЛЖИМ?","WATCH VIDEO":"СМОТРЕТЬ ВИДЕО","NO, THANKS":"НЕТ, СПАСИБО",TUT1:"НАЖМИ НА БЛОК,\nЧТОБЫ УДАЛИТЬ ЕГО",TUT2:"ДОЙДИ ДО РЫБА,\nЧТОБЫ СПАСТИ",TUT3:"БУДЬ ОСТОРОЖЕН!\nНЕ УПАДИ!",TUT4:"ДРУГИЕ ИГРОКИ\nМОГУТ ДАТЬ\nТЕБЕ БОНУС!",TUTQ:"КВЕСТ ДНЯ!\nТВОЯ ЗАДАЧА\nСПАСТИ ВСЕГО\nОДНОГО РЫБА!",SHARE:"Я набрал %p% очков в игре Краб и Рыб! Сможешь больше?",SHARE_MENU:"Мой рекорд в игре Краб и Рыб - %p% очков! Сможешь больше?"}},f=function(e,t,n){var r=l[Fi][e];return t&&(r=r.replace("%p%",t)),n&&(r=r.replace("%p1%",n)),r},p=n(1),h=n(163);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"path",void 0),y(this,"all",void 0),y(this,"musics",void 0),y(this,"mutedSounds",void 0),y(this,"mutedMusic",void 0)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this.path=e,this.all={},this.musics={},this.mutedSounds=!1,this.mutedMusic=!1}},{key:"muteMusic",get:function(){return this.mutedMusic},set:function(e){this.mutedMusic=e,this.musics.music.mute(e)}},{key:"muteSounds",get:function(){return this.mutedSounds},set:function(e){for(var t in this.mutedSounds=e,this.all)this.all[t]&&this.all[t].mute(e)}},{key:"add",value:function(e,t){var n=this;if(!this.all[e]){if(!this.path)throw new Error("setup path for sounds");var r=["mp3","ogg"].map((function(t){return"".concat(n.path,"/").concat(e,".").concat(t)})),o=new h.Howl({src:r,autoplay:null==t?void 0:t.autoplay,loop:null==t?void 0:t.loop,volume:(null==t?void 0:t.volume)||1});"music"!==e?this.all[e]=o:this.musics[e]=o}}},{key:"play",value:function(e){if(!this.all[e])throw new Error("no sound was found");this.all[e].play()}}])&&d(t.prototype,n),r&&d(t,r),e}());var m=n(18),b=n.n(m),w=n(164),g=n.n(w);function _(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,u,"next",e)}function u(e){_(i,r,o,a,u,"throw",e)}a(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E,P,T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,"params",void 0),R(this,"app_id",void 0),R(this,"access_token",void 0),R(this,"scopes",void 0),R(this,"axios",void 0),R(this,"query",void 0),this.params={},this.axios=g.a.create({baseURL:"https://crabnfish.atatapp.games"}),this.query=window.location.search.replace("?","")}var t,n,r,o,i,a,u,s;return t=e,(n=[{key:"parse",value:function(){var e=this,t=window.location.search.substr(1).split("&");t.length&&(t.forEach((function(t){var n=S(t.split("="),2),r=n[0],o=n[1];e.params[r]=o})),this.getParamsNeeded())}},{key:"getLeaderboard",value:(s=O(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tryToSend("apps.getLeaderboard","friends",{type:"score",extended:1,global:0,user_id:t,access_token:this.access_token,v:"5.131"});case 2:return n=e.sent,console.log("getLeaderboard",n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getScore",value:(u=O(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tryToSend("apps.getScore","friends",{user_id:t,access_token:this.access_token,v:"5.131"});case 2:return n=e.sent,console.log("getScore",n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"setScore",value:(a=O(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("setScore",t),e.prev=1,e.next=4,this.axios.get("/?s=".concat(t,"&").concat(this.query));case 4:n=e.sent,console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Li(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return a.apply(this,arguments)})},{key:"getFriends",value:(i=O(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tryToSend("friends.getAppUsers","friends",{access_token:this.access_token,v:"5.131"});case 2:if(!((t=e.sent)&&t.response&&t.response.length>0)){e.next=11;break}return e.next=6,this.tryToSend("users.get","friends",{user_ids:t.response.join(","),access_token:this.access_token,fields:"photo_200,id,first_name,last_name",v:"5.131"});case 6:if(!(n=e.sent)||!n.response){e.next=9;break}return e.abrupt("return",n.response);case 9:e.next=12;break;case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"tryToSend",value:(o=O(regeneratorRuntime.mark((function e(t,n,r){var o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(e,t){return b.a.send("VKWebAppCallAPIMethod",{method:e,request_id:"1234",params:t})},!b.a.supports("VKWebAppCheckAllowedScopes")||this.scopes.has(n)){e.next=12;break}return e.prev=2,e.next=5,b.a.send("VKWebAppCheckAllowedScopes",{scopes:n});case 5:i=e.sent,this.scopes.set(n,i.result.some((function(e){return e.scope===n&&e.allowed}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:if(this.scopes.get(n)){e.next=28;break}return e.prev=13,e.next=16,b.a.send("VKWebAppGetAuthToken",{app_id:this.app_id,scope:n});case 16:a=e.sent,this.access_token=a.access_token,this.scopes.set(n,!0),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(13),console.error(e.t1);case 24:return r.access_token=this.access_token,e.abrupt("return",o(t,r));case 28:return e.abrupt("return",o(t,r));case 29:case"end":return e.stop()}}),e,this,[[2,9],[13,21]])}))),function(e,t,n){return o.apply(this,arguments)})},{key:"getParamsNeeded",value:function(){this.app_id=parseInt(this.getParam("api_id")),this.access_token=this.getParam("access_token"),this.scopes=this.getAllowedScopes()}},{key:"getAllowedScopes",value:function(){var e=this.getParam("access_token_settings");if(!e)return new Map;var t=unescape(e).split(",");return!t||t.length<=0?new Map:new Map(t.map((function(e){return[e,!0]})))}},{key:"getParam",value:function(e){return void 0!==this.params[e]?this.params[e]:null}}])&&x(t.prototype,n),r&&x(t,r),e}();function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){j(i,r,o,a,u,"next",e)}function u(e){j(i,r,o,a,u,"throw",e)}a(void 0)}))}}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(n="player")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r,o,i,a,u,s,c,l,f,p,h,d;return t=e,(n=[{key:"showGlobalLeaders",value:(d=B(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.send("VKWebAppShowLeaderBoardBox",{user_result:t});case 2:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"shouldLeadersShow",value:function(){return!1}},{key:"atatappLink",value:function(){return"https://vk.com/atatapp"}},{key:"shouldPlayFirstAds",value:function(){return!1}},{key:"shouldShareShow",value:function(){return!0}},{key:"shouldScalePlayer",value:function(){return!0}},{key:"gameplayStart",value:function(){}},{key:"gameplayStop",value:function(){}},{key:"createShortcut",value:(h=B(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.send("VKWebAppAddToHomeScreenInfo");case 3:if(!(t=e.sent)||!t.is_feature_supported||t.is_added_to_home_screen){e.next=9;break}return e.next=7,b.a.send("VKWebAppAddToHomeScreen");case 7:e.next=12;break;case 9:if(t&&t.is_feature_supported){e.next=12;break}return e.next=12,b.a.send("VKWebAppAddToFavorites");case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])}))),function(){return h.apply(this,arguments)})},{key:"showInvitePage",value:function(){Di&&b.a.send("VKWebAppShowInviteBox",{})}},{key:"shareScore",value:function(e){Di&&b.a.send("VKWebAppShowWallPostBox",{message:e,attachments:"https://vk.com/app8046683"})}},{key:"startLoading",value:function(){}},{key:"finishLoading",value:(p=B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"loadingProgress",value:function(e){}},{key:"performHapticFeedback",value:function(){try{b.a.send("VKWebAppTapticNotificationOccurred",{type:"success"})}catch(e){}}},{key:"getFriends",value:(f=B(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,E.getLeaderboard(parseInt(this.player.player_id));case 4:n=e.sent,t=n.response.items,console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:return r=[],e.prev=13,e.next=16,E.getFriends();case 16:if((o=e.sent)&&o.length>0){i=C(o);try{for(u=function(){var e=a.value,n=0,o=t.find((function(t){return t.user_id===e.id}));o&&(n=o.score||0),0===n&&(n=Math.floor(1e4*Math.random())+100);var i={rank:1,score:n,friend:!0,player:{name:e.first_name+" "+e.last_name,photo:e.photo_200,player_id:e.id}};r.push(i)},i.s();!(a=i.n()).done;)u()}catch(e){i.e(e)}finally{i.f()}}e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),Li(e.t1);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this,[[1,9],[13,20]])}))),function(){return f.apply(this,arguments)})},{key:"getPlayerEntry",value:function(){if(Di)return!this.player&&P&&(this.player={name:P.first_name+" "+P.last_name,player_id:P.id.toString(),photo:P.photo_200}),this.player}},{key:"setScore",value:(l=B(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Di){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,E.setScore(t);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0),Li(e.t0);case 11:return e.next=13,this.setStorageData("score",t.toString());case 13:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return l.apply(this,arguments)})},{key:"getScore",value:(c=B(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Di){e.next=2;break}return e.abrupt("return",0);case 2:if(t=0,!this.player||!this.player.player_id){e.next=13;break}return e.prev=4,e.next=7,E.getScore(parseInt(this.player.player_id));case 7:t=e.sent.response,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),Li(e.t0);case 13:if(0!==t&&t){e.next=19;break}return e.t1=parseInt,e.next=17,this.getStorageData("score","0");case 17:e.t2=e.sent,t=(0,e.t1)(e.t2);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return c.apply(this,arguments)})},{key:"setStorageData",value:(s=B(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Di){e.next=2;break}return e.abrupt("return");case 2:b.a.send("VKWebAppStorageSet",{key:t,value:n});case 3:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)})},{key:"getStorageData",value:(u=B(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,e.next=4,b.a.send("VKWebAppStorageGet",{keys:[t]});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Li(e.t0);case 10:if(r&&(!r||0!==r.keys.length)){e.next=16;break}return e.next=13,b.a.send("VKWebAppStorageSet",{key:t,value:n});case 13:return e.abrupt("return",n);case 16:return e.abrupt("return",r.keys.find((function(e){return e.key===t})).value||n);case 17:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e,t){return u.apply(this,arguments)})},{key:"init",value:(a=B(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="72f259223556fc5ce732f0212865799b",n="7e2cf87503012b4c2e1f2346c99ac6e9c411b5ff",r="ru",(E=new T).parse(),e.next=7,b.a.send("VKWebAppInit",{});case 7:if(e.prev=7,!b.a.supports("VKWebAppCheckAllowedScopes")){e.next=13;break}return e.next=11,b.a.send("VKWebAppCheckAllowedScopes",{scopes:"notify"});case 11:e.sent||b.a.send("VKWebAppAllowNotifications");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),Li(e.t0),console.error(e.t0);case 19:return e.prev=19,e.next=22,b.a.send("VKWebAppGetUserInfo");case 22:o=e.sent,e.next=29;break;case 25:e.prev=25,e.t1=e.catch(19),Li(e.t1),o=void 0;case 29:if(!o){e.next=32;break}return P=o,e.abrupt("return",{success:!0,gameKey:t,secretKey:n,language:r});case 32:return P=void 0,e.abrupt("return",{success:!1,gameKey:t,secretKey:n,language:r});case 34:case"end":return e.stop()}}),e,null,[[7,15],[19,25]])}))),function(){return a.apply(this,arguments)})},{key:"showInter",value:(i=B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Di){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,b.a.send("VKWebAppShowNativeAds",{ad_format:"interstitial"});case 5:Hi(_i.Show,Si.Interstitial),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),Hi(_i.FailedShow,Si.Interstitial,Oi.Unknown),Li(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(){return i.apply(this,arguments)})},{key:"showReward",value:(o=B(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Di){e.next=2;break}return e.abrupt("return",!1);case 2:return t=!1,e.prev=3,e.next=6,b.a.send("VKWebAppShowNativeAds",{ad_format:"reward"});case 6:n=e.sent,Hi((t=n.result)?_i.RewardReceived:_i.Show,Si.RewardedVideo),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),Hi(_i.FailedShow,Si.RewardedVideo,Oi.Unknown),Li(e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(){return o.apply(this,arguments)})}])&&I(t.prototype,n),r&&I(t,r),e}();var F;function M(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){M(i,r,o,a,u,"next",e)}function u(e){M(i,r,o,a,u,"throw",e)}a(void 0)}))}}!function(e){e[e.RewardedVideo=2]="RewardedVideo",e[e.Interstitial=4]="Interstitial"}(F||(F={}));var G,H=function(){try{return localStorage}catch(e){return}},U=!0,L=function(){var e=N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){(G=new D)&&G.init().then((function(t){e(t)})).catch((function(e){Li(e),t()}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return n=e.sent,t>n&&(null===(r=H())||void 0===r||r.setItem("highscore",t.toString())),e.next=6,G.setScore(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=N(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getScore();case 2:return(t=e.sent)&&0!==t||(t=parseInt(null===(n=H())||void 0===n?void 0:n.getItem("highscore"))||0),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=N(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=H())||void 0===r||r.setItem(t,n),e.next=3,G.setStorageData(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=N(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getStorageData(t,n);case 2:return(r=e.sent)===n&&(r=(null===(o=H())||void 0===o?void 0:o.getItem(t))||n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=G.getPlayerEntry();return e||(e={name:"You",player_id:"999",photo:"assets/images/player26.jpg"}),e},Q=function(){var e=N(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<26;n++)t.push("assets/images/player".concat(n,".jpg"));return r=0,e.next=5,G.getFriends();case 5:for(o=e.sent,i=19-o.length,a=0;a<i;a++)r+=Math.floor(600*Math.random())+100,u={rank:1,score:r,player:{name:"Player".concat(a),photo:t.splice(Math.floor(Math.random()*t.length),1)[0],player_id:a.toString()}},o.push(u);return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,ji(),r=v.muteMusic,o=v.muteSounds,v.muteMusic=!0,v.muteSounds=!0,e.t0=t,e.next=e.t0===F.Interstitial?9:e.t0===F.RewardedVideo?13:17;break;case 9:return e.next=11,G.showInter();case 11:return n=!0,e.abrupt("break",17);case 13:return e.next=15,G.showReward();case 15:return n=e.sent,e.abrupt("break",17);case 17:return U=!1,Bi(),v.muteMusic=r,v.muteSounds=o,e.abrupt("return",n);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){G.performHapticFeedback()},Y=function(){var e=N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.finishLoading());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){return Di&&G.shouldScalePlayer()},J=function(){return G.shouldShareShow()},ee=function(){return U&&G.shouldPlayFirstAds()},te=function(e){G.shareScore(e)},ne=function(){G.showInvitePage()},re=function(){var e=N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,G.createShortcut();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){G.gameplayStart()},ie=function(){G.gameplayStop()},ae=function(){return G.atatappLink()};function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=de(e);if(t){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(s,e);var t,n,o,i,a,u=fe(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),ye(he(e=u.call(this)),"back",void 0),ye(he(e),"txt",void 0),ye(he(e),"corner",void 0),ye(he(e),"step",0),e.back=new r.NineSlicePlane(p.TextureCache.tutorial_back,100),e.addChild(e.back),e.corner=r.Sprite.from(p.TextureCache.tutorial_bottom),e.corner.anchor.set(.5,0),e.addChild(e.corner),e.txt=new r.BitmapText("",{fontName:Fi+"_font",fontSize:80,tint:6815838,align:"center"}),e.txt.anchor.set(.5),e.addChild(e.txt),e.hide(),e}return t=s,(n=[{key:"reset",value:function(){this.visible=!1,this.step=0}},{key:"showQuest",value:function(e){s.questShown||(this.show("down-right",f("TUTQ"),e),s.questShown=!0,K("tutorialQuest","1"))}},{key:"showNext",value:function(e){if(!s.shown){this.step++;var t=f("TUT"+this.step);this.show(void 0,t,e)}}},{key:"show",value:function(e,t,n){switch(this.txt.text=t,this.back.width=this.txt.width+150,this.back.height=this.txt.height+100,this.back.position.set(.5*-this.back.width,.5*-this.back.height),this.step){case 1:e="up",this.position.set(0,400);break;case 2:case 3:e=void 0,this.position.set(0,-400);break;case 4:e="right",this.position.set(-100,n.y);break;default:this.position.copyFrom(n)}e?(this.corner.visible=!0,this.corner.position.x="right"===e?.5*this.back.width-15:"down-right"===e?.3*this.back.width:0,this.corner.position.y="right"===e?0:"up"===e?.5*-this.back.height+15:.5*this.back.height-20,this.corner.angle="right"===e?-90:"up"===e?180:0):this.corner.visible=!1,this.visible=!0}},{key:"hide",value:(i=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.visible=!1,4!==this.step||s.shown||(s.shown=!0,K("tutorial","1"));case 2:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){se(o,n,r,a,u,"next",e)}function u(e){se(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&ce(t.prototype,n),o&&ce(t,o),s}(r.Container);function me(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){me(i,r,o,a,u,"next",e)}function u(e){me(i,r,o,a,u,"throw",e)}a(void 0)}))}}function we(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ye(ve,"shown",!1),ye(ve,"questShown",!1);var Se=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Oe(this,"_entries",void 0),Oe(this,"player",void 0),this._entries=[]}var t,n,r,o,i;return t=e,(n=[{key:"updateBonuses",value:function(){var e=X(),t=this.entries.length;if(t>0){if(this._entries.forEach((function(e){return e.hasBonus=!1})),!ve.shown){for(var n=this.entries.length-1,r=this.entries[n];r.player.player_id===e.player_id;)n--,r=this.entries[n];r.hasBonus=!0,r.score=200}for(;t>0;){var o,i=we(this._entries);try{for(i.s();!(o=i.n()).done;){var a=o.value;if((a.friend||a.player.player_id!==e.player_id&&Math.random()<.1)&&(t--,a.hasBonus=!0,0===t))break}}catch(e){i.e(e)}finally{i.f()}}}}},{key:"entries",get:function(){return this._entries}},{key:"getPlayerEntry",value:function(){return this.player}},{key:"setScore",value:(i=be(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.player.score=t,e.next=3,V(t);case 3:return this.player&&this.player.highscore<t&&(this.player.highscore=t,Ni("set","highscore",t)),this.updateRanks(),e.abrupt("return",this.player);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"load",value:(o=be(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("tutorial","0");case 2:return e.t0=e.sent,ve.shown="1"===e.t0,e.next=6,q("tutorialQuest","0");case 6:return e.t1=e.sent,ve.questShown="1"===e.t1,e.next=10,X();case 10:return t=e.sent,e.next=13,W();case 13:return n=e.sent,this.player={rank:1,score:0,highscore:n,player:t},this.addEntry(this.player),e.next=18,Q();case 18:r=e.sent,o=we(r);try{for(o.s();!(i=o.n()).done;)a=i.value,this.addEntry(a)}catch(e){o.e(e)}finally{o.f()}1===this.player.rank&&Math.random()<.7&&(this.entries[this.entries.length-1].score=Math.floor(500*Math.random())+this.player.highscore,this.updateRanks());case 22:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"addEntry",value:function(e){this._entries.push(e),this.updateRanks()}},{key:"updateRanks",value:function(){this._entries.sort((function(e,t){return t.score-e.score}));var e,t=1,n=we(this._entries);try{for(n.s();!(e=n.n()).done;)e.value.rank=t,t++}catch(e){n.e(e)}finally{n.f()}}}])&&_e(t.prototype,n),r&&_e(t,r),e}()),ke=n(3),xe=n(7),Re=n(9);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return(Te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ie(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ie(e);if(t){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Be(e)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(i,e);var t,n,r,o=Ae(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),De(Be(n=o.call(this)),"normalTexture",void 0),De(Be(n),"downTexture",void 0),De(Be(n),"isDisabled",!1),De(Be(n),"isDown",void 0),De(Be(n),"btn",void 0),n.normalTexture=""===e?ke.db.WHITE:ke.db.from(e),n.downTexture=""===e?ke.db.WHITE:ke.db.from(t),n.btn=Re.a.from(n.normalTexture),n.btn.anchor.set(.5,.5),n.addChild(n.btn),n.on("pointerdown",n.onButtonDown.bind(Be(n))).on("pointerup",n.onButtonUp.bind(Be(n))).on("pointerupoutside",n.onButtonUp.bind(Be(n))).on("pointerout",n.onButtonOut.bind(Be(n))),n.disabled=!1,n}return t=i,(n=[{key:"disabled",get:function(){return this.isDisabled},set:function(e){this.isDisabled=e,this.isDisabled?(this.interactive=!1,this.buttonMode=!1,this.btn.alpha=.5):(this.interactive=!0,this.buttonMode=!0,this.btn.alpha=1)}},{key:"onButtonOut",value:function(){this.isDisabled||this.isDown||(this.btn.texture=this.normalTexture)}},{key:"onButtonDown",value:function(e){this.isDisabled||(v.play("click"),this.isDown=!0,this.btn.texture=this.downTexture)}},{key:"onButtonUp",value:function(){this.isDisabled||(this.isDown=!1,this.btn.texture=this.normalTexture)}},{key:"destroy",value:function(e){this.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointerout"),Te(Ie(i.prototype),"destroy",this).call(this,e)}}])&&Pe(t.prototype,n),r&&Pe(t,r),i}(xe.b);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve(e);if(t){var o=Ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Le(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(i,e);var t,n,r,o=He(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),We(Le(n=o.call(this)),"buttonOn",void 0),We(Le(n),"buttonOff",void 0),n.buttonOn=e,n.buttonOff=t,n.addChild(n.buttonOn),n.addChild(n.buttonOff),n.buttonOn.visible=!1,n.buttonOff.on("pointerup",(function(){n.toggle(!1),n.emit("toggled")})),n.buttonOn.on("pointerup",(function(){n.toggle(!0),n.emit("toggled")})),n}return t=i,(n=[{key:"toggled",get:function(){return this.buttonOff.visible}},{key:"toggle",value:function(e){this.buttonOff.visible=e,this.buttonOn.visible=!e}}])&&Ne(t.prototype,n),r&&Ne(t,r),i}(r.Container);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(n,e);var t=Qe(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this)}return n}(xe.b);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ot(e);if(t){var o=ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(n,e);var t=tt(n);function n(e){var o,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Je(this,n),it(rt(o=t.call(this)),"entity",void 0),o.entity=e;var u=Math.floor(5*Math.random()),s=Re.a.from(p.TextureCache["box7_".concat(u)]);s.alpha=.7,s.anchor.set(.5,.5),s.scale.set(1,1.2),o.addChild(s);var c=Re.a.from(r.Texture.from(e.player.photo)),l=.55;$()&&!e.player.photo.includes("assets/images")&&(l=.88),c.anchor.set(.5,.5),c.scale.set(l,l),c.position.y=-17,o.addChild(c);var f=new r.BitmapText(i?e.score.toString():e.highscore.toString(),{fontName:"en_font",fontSize:70,tint:16776960});if(f.position.y=60,f.anchor.set(.5,0),o.addChild(f),a&&e.hasBonus){var h=Re.a.from(p.TextureCache.bonus2);h.anchor.set(.5,.5),h.scale.set(.8,.8),h.position.set(.5*s.width,.5*-s.height),o.addChild(h)}if(i){var d=new r.BitmapText(e.rank.toString(),{fontName:"en_font",fontSize:70,tint:16776960});d.position.set(.5*-s.width+20,.5*-s.height+20),d.anchor.set(.5,.5),o.addChild(d)}return o}return n}(r.Container);function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yt,vt,mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(a,e);var t,n,o,i=lt(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),dt(pt(e=i.call(this)),"currentTimer",void 0),dt(pt(e),"startName","hero_"),dt(pt(e),"idle",void 0),dt(pt(e),"idle0",void 0),dt(pt(e),"idle1",void 0),dt(pt(e),"idle2",void 0),dt(pt(e),"fight",void 0),dt(pt(e),"animations",void 0),e.animations=new Map,e.idle=r.AnimatedSprite.fromFrames(["hero_idle0_0001","hero_idle0_0002","hero_idle0_0003","hero_idle0_0004","hero_idle0_0005","hero_idle0_0006","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007","hero_idle0_0007"]),e.idle.anchor.set(.5,.6),e.idle.animationSpeed=.5,e.idle.loop=!1,e.addChild(e.idle),e.animations.set("idle",e.idle),e.idle0=r.AnimatedSprite.fromFrames(e.getFrames(24,"idle0",1,!1)),e.idle0.anchor.set(.5,.6),e.idle0.animationSpeed=.5,e.idle0.loop=!1,e.addChild(e.idle0),e.animations.set("idle0",e.idle0),e.idle1=r.AnimatedSprite.fromFrames(e.getFrames(23,"idle1",1,!1)),e.idle1.anchor.set(.5,.6),e.idle1.animationSpeed=.5,e.idle1.loop=!1,e.addChild(e.idle1),e.animations.set("idle1",e.idle1),e.idle2=r.AnimatedSprite.fromFrames(e.getFrames(24,"idle2",1,!0)),e.idle2.anchor.set(.5,.6),e.idle2.animationSpeed=.5,e.idle2.loop=!1,e.addChild(e.idle2),e.animations.set("idle2",e.idle2),e.fight=r.AnimatedSprite.fromFrames(e.getFrames(21,"fight",1,!1)),e.fight.anchor.set(.5,.6),e.fight.animationSpeed=.4,e.fight.loop=!1,e.addChild(e.fight),e.animations.set("fight",e.fight),e.idle.onComplete=e.onBaseIdleCompleted.bind(pt(e)),e.idle0.onComplete=e.onIdleCompleted.bind(pt(e)),e.idle1.onComplete=e.onIdleCompleted.bind(pt(e)),e.idle2.onComplete=e.onIdleCompleted.bind(pt(e)),e.fight.onComplete=e.onFightCompleted.bind(pt(e)),e.playAnimation("idle"),e}return t=a,(n=[{key:"onFightCompleted",value:function(){this.emit("onFightEnd")}},{key:"getFrames",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],i=n;i<=e;i++)o.push(this.startName+t+"_00"+(i<10?"0":"").toString()+i.toString());if(r)for(var a=e-1;a>=n+1;a--)o.push(this.startName+t+"_00"+(a<10?"0":"").toString()+a.toString());return o}},{key:"clearAnimations",value:function(){window.clearTimeout(this.currentTimer),this.animations.forEach((function(e){e.visible=!1,e.stop()}))}},{key:"playAnimation",value:function(e){var t=this;this.animations.forEach((function(e){e.visible=!1,e.stop()}));var n=this.animations.get(e);n&&(n.visible=!0,n.gotoAndPlay(0)),"fight"===e&&(window.setTimeout((function(){t.playHandSound()}),300),window.setTimeout((function(){t.playBoom()}),500))}},{key:"playHandSound",value:function(){v.play("crab_hand")}},{key:"playBoom",value:function(){v.play("crab_crack");var e=r.AnimatedSprite.fromFrames(["boom0001","boom0002","boom0003","boom0004","boom0005","boom0006"]);e.position.set(0,120),e.anchor.set(.5,1),e.animationSpeed=.2,e.loop=!1,this.addChild(e),e.play()}},{key:"onBaseIdleCompleted",value:function(){var e=this;window.clearTimeout(this.currentTimer),this.currentTimer=window.setTimeout((function(){e.playRandomIdle()}),6e3*Math.random())}},{key:"onIdleCompleted",value:function(){this.clearAnimations(),this.playAnimation("idle")}},{key:"playRandomIdle",value:function(){this.clearAnimations();var e=Math.floor(3*Math.random());this.playAnimation("idle"+e)}}])&&st(t.prototype,n),o&&st(t,o),a}(r.Container);!function(e){e[e.SIMPLE=0]="SIMPLE",e[e.STATIC=1]="STATIC",e[e.GOAL=2]="GOAL"}(yt||(yt={})),function(e){e[e.POINT=0]="POINT",e[e.TWO=1]="TWO",e[e.THREE=2]="THREE",e[e.CORNER=3]="CORNER",e[e.HORSE_LEFT=4]="HORSE_LEFT",e[e.HORSE_RIGHT=5]="HORSE_RIGHT",e[e.ZIGZAG_LEFT=6]="ZIGZAG_LEFT",e[e.ZIGZAG_RIGHT=7]="ZIGZAG_RIGHT",e[e.LINE=8]="LINE",e[e.BOX=9]="BOX",e[e.END=10]="END"}(vt||(vt={}));var bt=n(16),wt=n(4),gt=n(85);function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ot=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(n="all")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.all=[];for(var o=0;o<5;o++)this.all.push(new jt)}var t,n,r;return t=e,(n=[{key:"obtain",value:function(){return 0===this.all.length&&this.all.push(new jt),this.all.pop()}},{key:"release",value:function(e){e.clean(),this.all.push(e)}}])&&_t(t.prototype,n),r&&_t(t,r),e}();function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ct(e);if(t){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(s,e);var t,n,r,o,i,u=Et(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),At(Tt(e=u.call(this)),"bubble",void 0),At(Tt(e),"txt",void 0),e.bubble=new xe.b,e.addChild(e.bubble);var t=Re.a.from(p.TextureCache.bubble);return e.bubble.addChild(t),t.anchor.set(.5,.5),t.alpha=.5,e.bubble.scale.set(0,0),e.txt=new a.d("",{fontName:"en_font",fontSize:90,tint:16776960}),e.txt.anchor.set(.5,.5),e.bubble.addChild(e.txt),e}return t=s,n=[{key:"animate",value:(o=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.txt.text=t.toString(),gt.a.to(this.bubble.scale,{duration:.5,x:1,y:1,ease:"bounce.out"}),e.next=4,gt.a.to(this.bubble,{duration:1.5,y:-300});case 4:return e.next=6,gt.a.to(this.bubble,{duration:.3,alpha:0});case 6:s.pool.release(this);case 7:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){kt(i,n,r,a,u,"next",e)}function u(e){kt(i,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"clean",value:function(){this.bubble.scale.set(0,0),this.bubble.y=0,this.bubble.alpha=1}}],r=[{key:"init",value:function(){s.pool||(s.pool=new Ot)}},{key:"create",value:function(){return s.pool.obtain()}}],n&&xt(t.prototype,n),r&&xt(t,r),s}(xe.b);function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t,n){return(Mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ut(e)}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}At(jt,"pool",void 0);var Wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(a,e);var t,n,o,i=Gt(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Vt(Ut(t=i.call(this)),"scrollContainer",void 0),Vt(Ut(t),"posX",void 0),t.scrollContainer=new r.Container,t.addChild(t.scrollContainer);var n=new r.Graphics;n.beginFill(0,1),n.drawRect(.5*-xi,-200,xi,400),n.endFill(),t.addChild(n),t.scrollContainer.mask=n;var o,u=0,s=0,c=It(Se.entries);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=new at(l,!0);f.x=u,t.scrollContainer.addChild(f),l.player.player_id===e.player.player_id&&(f.scale.set(1.2,1.2),s=u-20),u+=240}}catch(e){c.e(e)}finally{c.f()}return bt.a.to(t.scrollContainer,{x:-s,duration:3,delay:1,ease:wt.a.easeInOut,onComplete:function(){t.enableScroll()}}),t}return t=a,(n=[{key:"enableScroll",value:function(){this.scrollContainer.interactive=!0,this.scrollContainer.on("pointerdown",this.onDragStart,this).on("pointerup",this.onDragEnd,this).on("pointerupoutside",this.onDragEnd,this).on("pointermove",this.onDragMove,this)}},{key:"onDragStart",value:function(e){this.posX=this.scrollContainer.x}},{key:"onDragEnd",value:function(e){this.posX=void 0}},{key:"onDragMove",value:function(e){if(this.posX){var t=e.data.getLocalPosition(this).x+this.posX;t>=0&&(t=1),t<=-this.scrollContainer.width+.5*xi-180&&(t=-this.scrollContainer.width+.5*xi-180-1),this.scrollContainer.x=t}}},{key:"destroy",value:function(e){this.scrollContainer.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointermove"),bt.a.killTweensOf(this.scrollContainer),Mt(Lt(a.prototype),"destroy",this).call(this,e)}}])&&Ft(t.prototype,n),o&&Ft(t,o),a}(r.Container);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zt(e);if(t){var o=Zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){if(t&&("object"===Kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(n,e);var t=Xt(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,"levelItem_right0","levelItem_right1"),e.anchor.set(.5,.5),r.addChild(e),r.scale.set(.7),r}return n}(Fe);function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Jt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$t(i,r,o,a,u,"next",e)}function u(e){$t(i,r,o,a,u,"throw",e)}a(void 0)}))}}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=on(e);if(t){var o=on(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rn(this,n)}}function rn(e,t){if(t&&("object"===Yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(a,e);var t,n,o,i=nn(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this),Ui("start","game","endPopup");var n=Re.a.from(ke.db.WHITE);n.anchor.set(.5),n.tint=0,n.alpha=.6,n.width=window.innerWidth/Ai.scale,n.height=window.innerHeight/Ai.scale,n.interactive=!0,t.addChild(n);var o=Re.a.from(p.TextureCache.completeBack);o.anchor.set(.5),o.scale.set(.9),t.addChild(o);var u=new Fe("homeButton0","homeButton1");u.scale.set(.75,.75),u.position.set(-260,400),t.addChild(u),u.on("pointerup",Jt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui("click","endPopup","home"),e.next=3,Z(F.Interstitial);case 3:Ai.paused=!1,t.destroy({children:!0}),ci.start(Vo);case 6:case"end":return e.stop()}}),e)}))));var s=new Fe("againButton0","againButton1");s.position.set(0,400),t.addChild(s),s.on("pointerup",Jt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui("click","endPopup","again"),e.next=3,Z(F.Interstitial);case 3:Ai.paused=!1,t.destroy({children:!0}),ci.restart();case 6:case"end":return e.stop()}}),e)}))));var c=new Ke(new Fe("settings_musicOff","settings_musicOff"),new Fe("settings_musicOn","settings_musicOn"));c.position.set(-120,.5*-Ri),t.addChild(c);var l=new Ke(new Fe("settings_soundOff","settings_soundOff"),new Fe("settings_soundOn","settings_soundOn"));l.position.set(120,.5*-Ri),t.addChild(l),l.toggle(!v.muteSounds),l.on("toggled",(function(){Ui("click","endPopup","sound"),v.muteSounds=!l.toggled})),c.toggle(!v.muteMusic),c.on("toggled",(function(){Ui("click","endPopup","music"),v.muteMusic=!c.toggled}));var h=new r.BitmapText(f("WONDERFUL!"),{fontName:Fi+"_font",fontSize:100,tint:6815838});h.anchor.set(.5,.5),h.position.set(0,-350),t.addChild(h);var d=new r.BitmapText("0",{fontName:"en_font",fontSize:150,tint:16776960});d.anchor.set(.5,.5),d.position.set(0,150),t.addChild(d);var y={score:0};if(bt.a.to(y,{score:e,delay:1,duration:3,ease:wt.a.easeInOut,onUpdate:function(){d.text=Math.floor(y.score).toString()}}),J()){var m=new zt(Re.a.from("assets/images/shareButton.png"));m.position.set(260,400),t.addChild(m),m.on("pointerup",(function(){Ui("click","endPopup","share"),te(f("SHARE",e.toString()))}));var b=new zt(Re.a.from("assets/images/friendsButton.png"));b.position.set(260,200),t.addChild(b),b.on("pointerup",(function(){Ui("click","endPopup","invite"),ne()}))}else u.scale.set(1,1),u.position.set(-150,400),s.position.set(150,400);return Se.setScore(e).then((function(){t.animate()})),t}return t=a,(n=[{key:"animate",value:function(){v.play("level_won");var e=Se.getPlayerEntry();Ni("levelRank","endPopup",e.rank);var t=new Wt(e);t.position.set(0,-100),this.addChild(t)}}])&&en(t.prototype,n),o&&en(t,o),a}(xe.b);function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yn(e);if(t){var o=yn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hn(this,n)}}function hn(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dn(e)}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(i,e);var t,n,r,o=pn(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),vn(dn(e=o.call(this)),"all",void 0),vn(dn(e),"playerId",void 0),e.all=[],Se.updateBonuses(),e.playerId=Se.getPlayerEntry().player.player_id,e}return t=i,(n=[{key:"getHighestPos",value:function(){if(this.all.length>0)return this.all[0].position}},{key:"updateScore",value:function(e){var t=this;if(this.all.length>0){var n,r=sn(this.all);try{var o=function(){var r=n.value,o=Math.min((r.entity.score-e)/i.minDepth,1);o>=0?bt.a.to(r,{y:o*Ri*.5,duration:.5}):bt.a.to(r,{y:-Ri,duration:.5,onComplete:function(){var e=t.all.indexOf(r);-1!==e&&(t.checkBonus(r.entity),t.all.splice(e,1),t.removeChild(r))}})};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}var a=Se.entries,u=a.filter((function(n){return!t.all.find((function(e){return e.entity.player.player_id===n.player.player_id}))&&n.score<=e+i.minDepth&&n.score>=e&&n.player.player_id!==t.playerId}));if(0===u.length&&0===this.all.length&&(u=a.filter((function(n){return n.score>=e&&n.player.player_id!==t.playerId}))).length>0&&(u=[u.pop()]),u.length>0){var s,c=sn(u);try{var l=function(){var n=s.value,r=new at(n,!0,!0);r.scale.set(.7,.7),r.position.set(.5*xi-30,Ri),t.addChild(r),t.all.push(r);var o=Math.min((n.score-e)/i.minDepth,1);o>=0?bt.a.to(r,{y:o*Ri*.5,duration:.5}):bt.a.to(r,{y:-Ri,duration:.5,onComplete:function(){var e=t.all.indexOf(r);-1!==e&&(t.checkBonus(r.entity),t.all.splice(e,1),t.removeChild(r))}})};for(c.s();!(s=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}}}},{key:"checkBonus",value:function(e){e.hasBonus&&this.emit("bonus")}}])&&ln(t.prototype,n),r&&ln(t,r),i}(r.Container);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sn(e);if(t){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _n(this,n)}}function _n(e,t){if(t&&("object"===bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return On(e)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}vn(mn,"minDepth",200);var kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(n,e);var t=gn(n);function n(e,o,i,a){var u,s,c,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),u=t.call(this,a?"levelItem_right1":"",a?"levelItem_right0":""),s=On(u),l=void 0,(c="txt")in s?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l,u.txt=new r.BitmapText(e,{fontName:Fi+"_font",fontSize:o,tint:i}),u.txt.anchor.set(.5,.5),u.addChild(u.txt),a?u.btn.scale.x=2:(u.btn.alpha=.001,u.btn.width=u.txt.width+140,u.btn.height=u.txt.height+140),u}return n}(Fe);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tn(e);if(t){var o=Tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pn(this,n)}}function Pn(e,t){if(t&&("object"===xn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(n,e);var t=En(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=t.call(this),Ui("start","game","revive");var o=Re.a.from(ke.db.WHITE);o.anchor.set(.5),o.tint=0,o.alpha=.6,o.width=window.innerWidth/Ai.scale,o.height=window.innerHeight/Ai.scale,o.interactive=!0,e.addChild(o);var i=Re.a.from(p.TextureCache.completeBack);i.anchor.set(.5),i.scale.set(.9),e.addChild(i);var a=new r.BitmapText(f("CONTINUE?"),{fontName:Fi+"_font",fontSize:120,tint:6815838});a.anchor.set(.5,.5),a.position.set(0,-350),e.addChild(a);var u=new kn(f("WATCH VIDEO"),80,16777215,!0);e.addChild(u),u.on("pointerup",(function(){Ui("click","revive","watch"),e.emit("watch"),e.destroy({children:!0})}));var s=new kn(f("NO, THANKS"),60,16777215);return s.position.y=300,e.addChild(s),s.on("pointerup",(function(){Ui("click","revive","cancel"),e.emit("cancel"),e.destroy({children:!0})})),v.play("level_failed"),e}return n}(xe.b);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){jn(i,r,o,a,u,"next",e)}function u(e){jn(i,r,o,a,u,"throw",e)}a(void 0)}))}}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mn(e);if(t){var o=Mn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fn(this,n)}}function Fn(e,t){if(t&&("object"===An(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(n,e);var t=Dn(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=t.call(this),Ui("start","game","settings"),ie();var r=Re.a.from(ke.db.WHITE);r.anchor.set(.5),r.tint=0,r.alpha=.6,r.width=window.innerWidth/Ai.scale,r.height=window.innerHeight/Ai.scale,r.interactive=!0,r.on("pointerup",(function(){Ai.paused=!1,oe(),e.destroy({children:!0})})),e.addChild(r);var o=Re.a.from(p.TextureCache.settings_logo);o.anchor.set(.5,1),o.position.set(0,.5*Ai.realHeight/Ai.scale),e.addChild(o),""!==ae()&&(o.interactive=!0,o.buttonMode=!0,o.on("pointerdown",(function(){window.open(ae(),"_blank")})));var i=new Fe("closeBtn0","closeBtn1");i.position.set(.5*xi-60,.5*-Ri-75),e.addChild(i),i.on("pointerup",(function(){Ui("click","settings","cancel"),Ai.paused=!1,oe(),e.destroy({children:!0})}));var a=new Fe("homeButton0","homeButton1");a.position.set(-270,0),e.addChild(a),a.on("pointerup",Bn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ui("click","settings","home"),e.emit("fail"),t.next=4,Z(F.Interstitial);case 4:Ai.paused=!1,e.destroy({children:!0}),ci.start(Vo);case 7:case"end":return t.stop()}}),t)}))));var u=new Fe("againButton0","againButton1");u.position.set(30,0),e.addChild(u),u.on("pointerup",Bn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ui("click","settings","again"),e.emit("fail"),t.next=4,Z(F.Interstitial);case 4:Ai.paused=!1,e.destroy({children:!0}),ci.restart();case 7:case"end":return t.stop()}}),t)}))));var s=new Fe("nextButton0","nextButton1");s.position.set(290,0),e.addChild(s),s.on("pointerup",(function(){Ui("click","settings","play"),Ai.paused=!1,oe(),e.destroy({children:!0})}));var c=new Ke(new Fe("settings_musicOff","settings_musicOff"),new Fe("settings_musicOn","settings_musicOn"));c.position.set(-120,-300),e.addChild(c);var l=new Ke(new Fe("settings_soundOff","settings_soundOff"),new Fe("settings_soundOn","settings_soundOn"));return l.position.set(120,-300),e.addChild(l),l.toggle(!v.muteSounds),l.on("toggled",(function(){Ui("click","settings","sound"),v.muteSounds=!l.toggled})),c.toggle(!v.muteMusic),c.on("toggled",(function(){Ui("click","settings","music"),v.muteMusic=!c.toggled})),e}return n}(xe.b),Gn=n(165),Hn=n(166);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zn(e);if(t){var o=Zn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xn(this,n)}}function Xn(e,t){if(t&&("object"===Un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qn(e)}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(i,e);var t,n,r,o=qn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),zn(Qn(t=o.call(this)),"body",void 0),zn(Qn(t),"view",void 0),zn(Qn(t),"cellY",void 0),t.view=e,t.view.anchor.set(.5,.5),t.addChild(t.view),t}return t=i,(n=[{key:"createBody",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pi(0,0),r=arguments.length>3?arguments[3]:void 0,o=new hi;if(o.type=t,this.view.alpha=1,o.position=n,r)for(var i in r)o[i]=r[i];if(this.body=bi.CreateBody(o),e instanceof yi)this.body.CreateFixture(e);else{var a,u=Ln(e);try{for(u.s();!(a=u.n()).done;){var s=a.value;this.body.CreateFixture(s)}}catch(e){u.e(e)}finally{u.f()}}this.body.SetUserData(this)}},{key:"clean",value:function(){this.destroyBody(),this.cellY=-1}},{key:"destroyBody",value:function(){this.body&&(Ci.push(this.body),this.body=void 0)}}])&&Wn(t.prototype,n),r&&Wn(t,r),i}(xe.b);function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function er(e,t,n){return(er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ir(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ir(e);if(t){var o=ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return or(e)}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(i,e);var t,n,r,o=nr(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ar(or(n=o.call(this,Re.a.from(p.TextureCache["".concat(e,"_").concat(t)]))),"_frameName",void 0),ar(or(n),"tapCount",void 0),ar(or(n),"pTexture",void 0),n.tapCount=1,n.alpha=.9,n._frameName=e,n}return t=i,(n=[{key:"frameName",get:function(){return this._frameName}},{key:"makeLineStatic",value:function(){this.pTexture=this.view.texture,this.view.texture=p.TextureCache.box6u_1}},{key:"backLineStatic",value:function(){this.pTexture&&(this.view.texture=this.pTexture,this.pTexture=void 0)}},{key:"onTap",value:function(){return this.tapCount-=1,v.play("pop"+Math.floor(3*Math.random())),0===this.tapCount}},{key:"getBlockPrice",value:function(){return this.getBlockCount()*Ti.BOX_REMOVE_SCORE}},{key:"getBlockCount",value:function(){var e=0;switch(this._frameName){case"box0":e=1;break;case"box1":e=2;break;case"box2":e=3;break;case"box3":case"box4":e=4;break;case"box5":e=3;break;case"box6":e=5;break;case"box7":case"box8":case"box9":e=4}return e}},{key:"clean",value:function(){this.tapCount=1,er(ir(i.prototype),"clean",this).call(this)}}])&&Jn(t.prototype,n),r&&Jn(t,r),i}(Yn);function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cr=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(n="all")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.all=new Map,this.generateBoxes("box0",10),this.generateBoxes("box1",10),this.generateBoxes("box2",10),this.generateBoxes("box3",10),this.generateBoxes("box4",10),this.generateBoxes("box5",10),this.generateBoxes("box6",10),this.generateBoxes("box7",10),this.generateBoxes("box8",10),this.generateBoxes("box9",10)}var t,n,r;return t=e,(n=[{key:"obtain",value:function(e){var t=this.all.get(e);return 0===t.length&&(this.generateBoxes(e,1),t=this.all.get(e)),t.pop()}},{key:"release",value:function(e){e.backLineStatic(),this.all.get(e.frameName).push(e)}},{key:"generateBoxes",value:function(e,t){for(var n=[],r=0;r<t;r++)n.push(new ur(e,Math.floor(5*Math.random())));this.all.set(e,n)}}])&&sr(t.prototype,n),r&&sr(t,r),e}();function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e,t){return(pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vr(e);if(t){var o=vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dr(this,n)}}function dr(e,t){if(t&&("object"===lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yr(e)}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pr(e,t)}(i,e);var t,n,r,o=hr(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),mr(yr(e=o.call(this,Re.a.from(p.TextureCache.hexagon))),"playingFight",void 0),mr(yr(e),"hex",void 0),mr(yr(e),"hero",void 0),mr(yr(e),"_killed",void 0),e.hex=e.view,e.hex.anchor.set(.5),e.addChild(e.hex),e._killed=!1,e}return t=i,(n=[{key:"addHero",value:function(e,t){if(this.hero=new mt,this.hero.on("onDead",this.onDeadComplete.bind(this)),this.hero.on("onFightEnd",this.onFightComplete.bind(this)),this.playAnimation("idle0"),this.addChild(this.hero),!i.fixtureDef){var n=new yi;n.friction=.8,n.density=1,n.restitution=0,n.linearDamping=.5,n.angularDamping=.3,n.shape=new vi,n.shape.SetAsArray([new pi(-133/Pi,0),new pi(-66/Pi,-119/Pi),new pi(66/Pi,-119/Pi),new pi(133/Pi,0),new pi(66/Pi,119/Pi),new pi(-66/Pi,119/Pi)]),i.fixtureDef=n}this.createBody(i.fixtureDef,di.b2_dynamicBody,new pi(e/Pi,(t+.5*Ei)/Pi))}},{key:"onFightComplete",value:function(){this.playingFight=!1,this.emit("onFightEnd")}},{key:"onDeadComplete",value:function(){this.emit("onDead")}},{key:"clearAnimations",value:function(){this.hero.clearAnimations()}},{key:"playAnimation",value:function(e){"fight"===e&&(this.playingFight=!0,this.hero.clearAnimations()),this.hero.playAnimation(e)}},{key:"playRandomIdle",value:function(){this._killed||this.hero.playRandomIdle()}},{key:"flip",value:function(){this.hero.scale.x=-1}}])&&fr(t.prototype,n),r&&fr(t,r),i}(Yn);function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e){return function(e){if(Array.isArray(e))return _r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Er(e);if(t){var o=Er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xr(this,n)}}function xr(e,t){if(t&&("object"===wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rr(e)}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}mr(br,"fixtureDef",void 0);var Tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(a,e);var t,n,o,i=kr(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Pr(Rr(e=i.call(this,new Re.a)),"landed",void 0),Pr(Rr(e),"startName","fish_"),Pr(Rr(e),"animations",void 0),Pr(Rr(e),"idle0",void 0),Pr(Rr(e),"idle1",void 0),Pr(Rr(e),"idle2",void 0),Pr(Rr(e),"idle3",void 0),Pr(Rr(e),"idle4",void 0),Pr(Rr(e),"won",void 0),Pr(Rr(e),"currentTimer",void 0),Pr(Rr(e),"cell",void 0),Pr(Rr(e),"smoke",void 0),e.landed=!1,e.animations=new Map,e.idle0=r.AnimatedSprite.fromFrames([].concat(gr(e.getFrames(8,"idle0",1)),gr(e.getSameFrames("fish_idle0_0008",10)),gr(e.getFrames(8,"idle0",1,!1,!0)))),e.idle0.anchor.set(.5,.5),e.idle0.animationSpeed=.5,e.idle0.loop=!1,e.addChild(e.idle0),e.animations.set("idle0",e.idle0),e.idle1=r.AnimatedSprite.fromFrames(e.getFrames(5,"idle1",1,!0)),e.idle1.anchor.set(.5,.5),e.idle1.animationSpeed=.5,e.idle1.loop=!1,e.addChild(e.idle1),e.animations.set("idle1",e.idle1);for(var t=[],n=0;n<12;n++)t.push.apply(t,gr(e.getFrames(5,"idle2",1)));e.idle2=r.AnimatedSprite.fromFrames(t),e.idle2.anchor.set(.5,.5),e.idle2.animationSpeed=.5,e.idle2.loop=!1,e.addChild(e.idle2),e.animations.set("idle2",e.idle2),e.idle3=r.AnimatedSprite.fromFrames(e.getFrames(5,"idle3",1,!0)),e.idle3.anchor.set(.5,.5),e.idle3.animationSpeed=.5,e.idle3.loop=!1,e.addChild(e.idle3),e.animations.set("idle3",e.idle3);for(var o=[],u=0;u<7;u++)o.push.apply(o,gr(e.getFrames(9,"idle4",1)));e.idle4=r.AnimatedSprite.fromFrames(o),e.idle4.anchor.set(.5,.5),e.idle4.animationSpeed=.5,e.idle4.loop=!1,e.addChild(e.idle4),e.animations.set("idle4",e.idle4);for(var s=[],c=0;c<3;c++)s.push.apply(s,gr(e.getFrames(27,"won",1)));return e.won=r.AnimatedSprite.fromFrames(s),e.won.anchor.set(.5,.5),e.won.animationSpeed=.5,e.won.loop=!1,e.addChild(e.won),e.animations.set("won",e.won),e.addCell(),e.idle0.onComplete=e.onIdleCompleted.bind(Rr(e)),e.idle1.onComplete=e.onIdleCompleted.bind(Rr(e)),e.idle2.onComplete=e.onIdleCompleted.bind(Rr(e)),e.idle3.onComplete=e.onIdleCompleted.bind(Rr(e)),e.idle4.onComplete=e.onIdleCompleted.bind(Rr(e)),e.playAnimation("idle0"),e}return t=a,(n=[{key:"playAnimation",value:function(e){this.animations.forEach((function(e){e.visible=!1,e.stop()}));var t=this.animations.get(e);t&&(t.visible=!0,t.gotoAndPlay(0))}},{key:"finishAnimate",value:function(){window.clearTimeout(this.currentTimer),this.destroyBody(),this.cell.play(),this.smoke.play(),this.smoke.visible=!0}},{key:"clearAnimations",value:function(){window.clearTimeout(this.currentTimer),this.animations.forEach((function(e){e.visible=!1,e.stop()}))}},{key:"addCell",value:function(){this.cell=r.AnimatedSprite.fromFrames(["cell_boom0001","cell_boom0002","cell_boom0003","cell_boom0004","cell_boom0005","cell_boom0006","cell_boom0007","cell_boom0008","cell_boom0009","cell_boom0010"]),this.cell.anchor.set(.5,.5),this.cell.animationSpeed=.3,this.cell.loop=!1,this.addChild(this.cell),this.cell.onComplete=this.onFinishAnimated.bind(this),this.smoke=r.AnimatedSprite.fromFrames(["cell_explode00005","cell_explode00005","cell_explode00005","cell_explode00005","cell_explode00005","cell_explode00000","cell_explode00001","cell_explode00002","cell_explode00003","cell_explode00004","cell_explode00005"]),this.smoke.position.set(0,120),this.smoke.anchor.set(.5,1),this.smoke.animationSpeed=.3,this.smoke.loop=!1,this.smoke.visible=!1,this.addChild(this.smoke),this.smoke.onComplete=this.onFinishAnimatedExpl.bind(this)}},{key:"onFinishAnimated",value:function(){this.clearAnimations(),v.play("won"),this.playAnimation("won"),this.onWonCompleted()}},{key:"onFinishAnimatedExpl",value:function(){this.smoke.visible=!1}},{key:"onWonCompleted",value:function(){this.emit("onGoalAnimated",this,!0)}},{key:"onIdleCompleted",value:function(){var e=this;window.clearTimeout(this.currentTimer),this.currentTimer=window.setTimeout((function(){e.playRandomIdle()}),5e3*Math.random())}},{key:"playRandomIdle",value:function(){this.clearAnimations();var e=Math.floor(5*Math.random());this.playAnimation("idle"+e)}},{key:"getSameFrames",value:function(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}},{key:"getFrames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[];if(!o)for(var a=n;a<=e;a++)i.push(this.startName+t+"_00"+(a<10?"0":"").toString()+a.toString());if(r||o)for(var u=e-1;u>=n+1;u--)i.push(this.startName+t+"_00"+(u<10?"0":"").toString()+u.toString());return i}}])&&Or(t.prototype,n),o&&Or(t,o),a}(Yn),Cr=n(27);function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nr(e);if(t){var o=Nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fr(this,n)}}function Fr(e,t){if(t&&("object"===Ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mr(e)}function Mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(a,e);var t,n,o,i=Dr(a);function a(){var e;jr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gr(Mr(e=i.call.apply(i,[this].concat(n))),"boxPool",void 0),Gr(Mr(e),"score",void 0),Gr(Mr(e),"hero",void 0),Gr(Mr(e),"gameOver",void 0),Gr(Mr(e),"all",void 0),Gr(Mr(e),"goals",void 0),Gr(Mr(e),"viewport",void 0),Gr(Mr(e),"emitters",void 0),Gr(Mr(e),"staticPlatform",void 0),Gr(Mr(e),"pauseButton",void 0),Gr(Mr(e),"scoreBack",void 0),Gr(Mr(e),"boundX",350),e}return t=a,(n=[{key:"create",value:function(){this.score=0,this.gameOver=!1,this.viewport=new Hn.a({screenWidth:xi,screenHeight:Ri}),this.viewport.setZoom(1.3),this.addChild(this.viewport),this.emitters=[];for(var e=0;e<4;e++)this.createEmitterAndPush();this.createUI(),this.boxPool=new cr}},{key:"start",value:function(){oe(),Ui("start","game","level"),this.sendStart(),v.play("level"),jt.init(),this.all=[],this.goals=[],this.gameOver=!1,Ai.paused=!1,this.generateBlocks(),this.createHero(),wi.stage.on("pointerdown",this.onClick,this),r.Ticker.shared.add(this.update,this)}},{key:"sendStart",value:function(){Gi(Cr.EGAProgressionStatus.Start)}},{key:"sendFinish",value:function(e){Gi(e?Cr.EGAProgressionStatus.Complete:Cr.EGAProgressionStatus.Fail,e?this.score:0)}},{key:"close",value:function(){var e=this;Ui("close","game","level"),wi.stage.off("pointerdown",this.onClick,this),r.Ticker.shared.remove(this.update,this),this.viewport.position.set(0,0),this.emitters.forEach((function(e){e.emit=!1})),this.all.forEach((function(t){t&&e.removeObject(t,!0)})),this.all=void 0,this.goals.forEach((function(t){t&&(e.viewport.removeChild(t),t.clean(),t.destroy({children:!0}))})),this.goals=void 0,this.hero.clean(),this.hero.destroy({children:!0}),this.hero=void 0,this.staticPlatform=void 0,this.pauseButton.visible=!0,this.scoreBack.visible=!0}},{key:"createUI",value:function(){var e=this,t=.5*-Ri-50;this.scoreBack=r.Sprite.from(p.TextureCache.score_panel),this.scoreBack.anchor.set(.5,.5),this.scoreBack.position.set(-100,t),this.addChild(this.scoreBack),this.pauseButton=new Fe("pause_gameBtn0","pause_gameBtn1"),this.pauseButton.position.set(.5*xi-60,t-25),this.addChild(this.pauseButton),this.pauseButton.on("pointerup",(function(){Ai.paused=!0;var t=new Nn;t.on("fail",(function(){t.off("fail"),e.sendFinish(!1)})),e.addChild(t)}))}},{key:"createEmitterAndPush",value:function(){var e=new Gn.a(this.viewport,["emitter0","emitter1","emitter2","emitter3","emitter4"],Ai.particlesConfig);e.autoUpdate=!0,e.emit=!1,this.emitters.push(e)}},{key:"createObject",value:function(e){var t,n=e.x*Ei,o=e.y*Ei,i=e.brickType==yt.STATIC?di.b2_staticBody:di.b2_dynamicBody;if(e.brickType===yt.GOAL){n+=Ei/2,o+=Ei/2;var a=t=new Tr;if(!Jr.goalFixDef){var u=new yi;u.shape=new vi,u.density=2,u.friction=2,u.linearDamping=.5,u.angularDamping=.5,u.restitution=0,u.shape.SetAsArray([new pi(-Ei/Pi,-Ei/Pi),new pi(Ei/Pi,-Ei/Pi),new pi(Ei/Pi,Ei/Pi),new pi(-Ei/Pi,Ei/Pi)]),Jr.goalFixDef=u}t.createBody(Jr.goalFixDef,i,{x:n/Pi,y:o/Pi}),a.on("onGoalAnimated",this.onGoalAnimated,this)}else{var s=Jr.allFixDef.get(e.type);switch(e.type){case vt.POINT:if(t=this.boxPool.obtain("box0"),!s){var c=new yi;c.shape=new vi,c.density=2,c.friction=2,c.linearDamping=.5,c.angularDamping=.5,c.restitution=0,c.shape.SetAsArray([new pi(.5*-Ei/Pi,.5*-Ei/Pi),new pi(.5*Ei/Pi,.5*-Ei/Pi),new pi(.5*Ei/Pi,.5*Ei/Pi),new pi(.5*-Ei/Pi,.5*Ei/Pi)]),s=[c],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi});break;case vt.TWO:if(0==(d=e.rotate%2)?n+=Ei/2:o+=Ei/2,t=this.boxPool.obtain("box1"),!s){var l=new yi;l.shape=new vi,l.density=2,l.friction=2,l.linearDamping=.5,l.angularDamping=.5,l.restitution=0,l.shape.SetAsArray([new pi(-Ei/Pi,.5*-Ei/Pi),new pi(Ei/Pi,.5*-Ei/Pi),new pi(Ei/Pi,.5*Ei/Pi),new pi(-Ei/Pi,.5*Ei/Pi)]),s=[l],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.THREE:if(0==(d=e.rotate%2)?n+=Ei:o+=Ei,t=this.boxPool.obtain("box2"),!s){var f=new yi;f.shape=new vi,f.density=2,f.friction=2,f.linearDamping=.5,f.angularDamping=.5,f.restitution=0,f.shape.SetAsArray([new pi(1.5*-Ei/Pi,.5*-Ei/Pi),new pi(1.5*Ei/Pi,.5*-Ei/Pi),new pi(1.5*Ei/Pi,.5*Ei/Pi),new pi(1.5*-Ei/Pi,.5*Ei/Pi)]),s=[f],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.LINE:if(0==(d=e.rotate%2)?n+=2*Ei:o+=2*Ei,t=this.boxPool.obtain("box6"),!s){var p=new yi;p.shape=new vi,p.density=2,p.friction=2,p.linearDamping=.5,p.angularDamping=.5,p.restitution=0,p.shape.SetAsArray([new pi(2.5*-Ei/Pi,.5*-Ei/Pi),new pi(2.5*Ei/Pi,.5*-Ei/Pi),new pi(2.5*Ei/Pi,.5*Ei/Pi),new pi(2.5*-Ei/Pi,.5*Ei/Pi)]),s=[p],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.BOX:if(n+=Ei/2,o+=Ei/2,t=this.boxPool.obtain("box7"),!s){var h=new yi;h.shape=new vi,h.density=2,h.friction=2,h.linearDamping=.5,h.angularDamping=.5,h.restitution=0,h.shape.SetAsArray([new pi(-Ei/Pi,-Ei/Pi),new pi(Ei/Pi,-Ei/Pi),new pi(Ei/Pi,Ei/Pi),new pi(-Ei/Pi,Ei/Pi)]),s=[h],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi});break;case vt.CORNER:var d=e.rotate%4;if(n+=Ei/2,o+=Ei/2,t=this.boxPool.obtain("box5"),!s){var y=new yi;y.shape=new vi,y.density=2,y.friction=2,y.linearDamping=.5,y.angularDamping=.5,y.restitution=0,y.shape.SetAsArray([new pi(-Ei/Pi,-Ei/Pi),new pi(Ei/Pi,-Ei/Pi),new pi(Ei/Pi,0),new pi(-Ei/Pi,0)]);var v=new yi;v.shape=new vi,v.density=2,v.friction=2,v.linearDamping=.5,v.angularDamping=.5,y.restitution=0,v.shape.SetAsArray([new pi(-Ei/Pi,0),new pi(0,0),new pi(0,Ei/Pi),new pi(-Ei/Pi,Ei/Pi)]),s=[y,v],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.HORSE_LEFT:if(0==(d=e.rotate%4)?(n+=Ei/2,o+=Ei):1==d?(n-=Ei,o+=Ei/2):2==d?(n-=Ei/2,o-=Ei):3==d&&(n+=Ei,o-=Ei/2),t=this.boxPool.obtain("box3"),!s){var m=new yi;m.shape=new vi,m.density=2,m.friction=2,m.linearDamping=.5,m.angularDamping=.5,m.restitution=0,m.shape.SetAsArray([new pi(-Ei/Pi,1.5*-Ei/Pi),new pi(Ei/Pi,1.5*-Ei/Pi),new pi(Ei/Pi,.5*-Ei/Pi),new pi(-Ei/Pi,.5*-Ei/Pi)]);var b=new yi;b.shape=new vi,b.density=2,b.friction=2,b.linearDamping=.5,b.angularDamping=.5,m.restitution=0,b.shape.SetAsArray([new pi(0,.5*-Ei/Pi),new pi(Ei/Pi,.5*-Ei/Pi),new pi(Ei/Pi,1.5*Ei/Pi),new pi(0,1.5*Ei/Pi)]),s=[m,b],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.HORSE_RIGHT:if(0==(d=e.rotate%4)?(n-=Ei/2,o+=Ei):1==d?(n-=Ei,o-=Ei/2):2==d?(n+=Ei/2,o-=Ei):3==d&&(n+=Ei,o+=Ei/2),t=this.boxPool.obtain("box8"),!s){var w=new yi;w.shape=new vi,w.density=2,w.friction=2,w.linearDamping=.5,w.angularDamping=.5,w.restitution=0,w.shape.SetAsArray([new pi(-Ei/Pi,1.5*-Ei/Pi),new pi(Ei/Pi,1.5*-Ei/Pi),new pi(Ei/Pi,.5*-Ei/Pi),new pi(-Ei/Pi,.5*-Ei/Pi)]);var g=new yi;g.shape=new vi,g.density=2,g.friction=2,g.linearDamping=.5,g.angularDamping=.5,w.restitution=0,g.shape.SetAsArray([new pi(-Ei/Pi,.5*-Ei/Pi),new pi(0,.5*-Ei/Pi),new pi(0,1.5*Ei/Pi),new pi(-Ei/Pi,1.5*Ei/Pi)]),s=[w,g],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.ZIGZAG_LEFT:if(0==(d=e.rotate%2)?(n+=Ei,o+=Ei/2):(n-=Ei/2,o+=Ei),t=this.boxPool.obtain("box4"),!s){var _=new yi;_.shape=new vi,_.density=2,_.friction=2,_.linearDamping=.5,_.angularDamping=.5,_.restitution=0,_.shape.SetAsArray([new pi(1.5*-Ei/Pi,-Ei/Pi),new pi(.5*Ei/Pi,-Ei/Pi),new pi(.5*Ei/Pi,0),new pi(1.5*-Ei/Pi,0)]);var O=new yi;O.shape=new vi,O.density=2,O.friction=2,O.linearDamping=.5,O.angularDamping=.5,_.restitution=0,O.shape.SetAsArray([new pi(.5*-Ei/Pi,0),new pi(1.5*Ei/Pi,0),new pi(1.5*Ei/Pi,Ei/Pi),new pi(.5*-Ei/Pi,Ei/Pi)]),s=[_,O],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d);break;case vt.ZIGZAG_RIGHT:if(0==(d=e.rotate%2)?(n-=Ei,o+=Ei/2):(n+=Ei/2,o+=Ei),t=this.boxPool.obtain("box9"),!s){var S=new yi;S.shape=new vi,S.density=2,S.friction=2,S.linearDamping=.5,S.angularDamping=.5,S.restitution=0,S.shape.SetAsArray([new pi(.5*-Ei/Pi,-Ei/Pi),new pi(1.5*Ei/Pi,-Ei/Pi),new pi(1.5*Ei/Pi,0),new pi(.5*-Ei/Pi,0)]);var k=new yi;k.shape=new vi,k.density=2,k.friction=2,k.linearDamping=.5,k.angularDamping=.5,S.restitution=0,k.shape.SetAsArray([new pi(1.5*-Ei/Pi,0),new pi(.5*Ei/Pi,0),new pi(.5*Ei/Pi,Ei/Pi),new pi(1.5*-Ei/Pi,Ei/Pi)]),s=[S,k],Jr.allFixDef.set(e.type,s)}t.createBody(s,i,{x:n/Pi,y:o/Pi}),t.body.SetAngle(90*r.DEG_TO_RAD*d)}}return t.cellY=e.y,t.body.SetUserData(t),t instanceof ur?this.all.push(t):t instanceof Tr&&this.goals.push(t),this.viewport.addChild(t),t}},{key:"onClick",value:function(e){if(!Ai.paused){var t=this.viewport.toLocal(e.data.global),n=new pi(t.x/Pi,t.y/Pi),r=new mi;r.lowerBound.Set(n.x-.001,n.y-.001),r.upperBound.Set(n.x+.001,n.y+.001);var o=null;if(bi.QueryAABB((function(e){return e.GetBody().GetType()==di.b2_staticBody||!e.GetShape().TestPoint(e.GetBody().GetTransform(),n)||(o=e.GetBody(),!1)}),r),o){var i=o.GetUserData();if(i instanceof ur&&i.onTap()){var a=i.position;a.x,a.y,this.removeObject(i,!1)}}}}},{key:"removeObject",value:function(e,t){var n=this;e.clean(),this.viewport.removeChild(e);var r=-1;if(this.all&&(r=this.all.indexOf(e)),-1!==r&&(this.boxPool.release(e),this.all[r]=void 0),!t){0===this.emitters.length&&this.createEmitterAndPush();var o=this.emitters.pop();o.emit=!0,o.updateOwnerPos(e.position.x,e.position.y),window.setTimeout((function(){o.emit=!1,n.emitters.push(o)}),2e3)}}},{key:"createHero",value:function(){this.hero=new br,this.hero.on("onDead",this.onHeroDead.bind(this)),this.viewport.addChild(this.hero)}},{key:"onHeroDead",value:function(){console.log("dead")}},{key:"update",value:function(){Ai.paused||this.hero&&(this.gameOver?this.isLevelEnd()&&this.levelEnd(!1):(this.updateViewport(),(this.hero.x<-this.boundX||this.hero.x>this.boundX)&&(this.gameOver=!0)))}},{key:"updateViewport",value:function(){this.viewport.x=-70,this.viewport.y=-this.hero.y*this.viewport.scale.y}},{key:"isLevelEnd",value:function(){return this.hero.y+this.viewport.y/this.viewport.scale.y>900}},{key:"levelEnd",value:function(e){Ai.paused=!0,this.hideUI(),ie()}},{key:"hideUI",value:function(){this.pauseButton.visible=!1,this.scoreBack.visible=!1}},{key:"showEnd",value:function(e){this.sendFinish(e)}}])&&Br(t.prototype,n),o&&Br(t,o),a}(Ye);function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Lr(i,r,o,a,u,"next",e)}function u(e){Lr(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e,t,n){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xr(e,t){return(Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yr(e);if(t){var o=Yr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zr(this,n)}}function Zr(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zr(e)}function zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gr(Hr,"goalFixDef",void 0),Gr(Hr,"allFixDef",new Map);var Jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xr(e,t)}(s,e);var t,n,o,i,a,u=Qr(s);function s(){var e;Wr(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $r(zr(e=u.call.apply(u,[this].concat(n))),"scoreTxt",void 0),$r(zr(e),"leaders",void 0),$r(zr(e),"tutorial",void 0),e}return t=s,(n=[{key:"start",value:function(){qr(Yr(s.prototype),"start",this).call(this),this.leaders=new mn,this.leaders.on("bonus",this.onBonus,this),this.addChild(this.leaders),this.score=0,this.updateScore(),this.tutorial||(this.tutorial=new ve,this.addChild(this.tutorial)),ve.shown||this.tutorial.showNext(void 0)}},{key:"close",value:function(){qr(Yr(s.prototype),"close",this).call(this),this.scoreTxt.visible=!0,this.leaders.off("bonus",this.onBonus,this),this.leaders.destroy({children:!0}),this.leaders=void 0}},{key:"createHero",value:function(){qr(Yr(s.prototype),"createHero",this).call(this),this.hero.addHero(0,0)}},{key:"onBonus",value:function(){var e=this,t=r.Sprite.from(p.TextureCache.bonus2);t.anchor.set(.5,.5),t.scale.set(.6,.6),t.position.set(.5*xi-60,-60),this.addChild(t),bt.a.to(t,{duration:.6,x:this.hero.x,ease:wt.d.easeInOut,onComplete:function(){bt.a.killTweensOf(t),t.destroy({children:!0}),e.applyBonus()}}),bt.a.to(t,{duration:.3,y:-500,repeat:1,yoyo:!0,ease:wt.d.easeInOut}),bt.a.to(t.scale,{duration:.6,y:1,x:1,ease:wt.c.easeNone})}},{key:"applyBonus",value:(a=Vr(regeneratorRuntime.mark((function e(){var t,n,r,o=this,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],!this.gameOver){e.next=3;break}return e.abrupt("return");case 3:Ai.paused=!0,v.play("boom"),z(),this.hero.body.SetLinearVelocity(new pi(0,0)),this.hero.body.SetAngularVelocity(0),n=Number.MAX_SAFE_INTEGER,this.all.forEach((function(e){e&&e.body&&e.body.GetPosition().y<n&&(n=e.body.GetPosition().y),e&&e.body.GetType()!==di.b2_staticBody&&o.removeObject(e,!1)})),this.all=[],r=t?new pi(0,n-3*Ei/Pi):this.hero.body.GetPosition(),this.hero.body.SetTransform({position:r,GetAngle:function(){return 0}}),this.goals.forEach((function(e){e&&e.finishAnimate()})),this.goals=[],bt.a.delayedCall(2,(function(){v.play("tutorial"),Ai.paused=!1}));case 16:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"updateScore",value:function(){this.scoreTxt.text=this.score.toString(),this.leaders.updateScore(this.score)}},{key:"createUI",value:function(){qr(Yr(s.prototype),"createUI",this).call(this);var e=.5*-Ri-50;this.scoreTxt=new r.BitmapText("0",{fontName:"en_font",fontSize:100,tint:16776960}),this.scoreTxt.anchor.set(.5,.5),this.scoreTxt.position.set(-100,e-25),this.addChild(this.scoreTxt)}},{key:"update",value:function(){qr(Yr(s.prototype),"update",this).call(this),Ai.paused||this.staticPlatform.y+this.viewport.y/this.viewport.scale.y<700&&this.generateBlocks()}},{key:"levelEnd",value:function(e){var t=this;qr(Yr(s.prototype),"levelEnd",this).call(this,e);var n=new Cn;n.on("watch",(function(){t.showAd()})),n.on("cancel",(function(){t.showEnd()})),this.addChild(n)}},{key:"hideUI",value:function(){qr(Yr(s.prototype),"hideUI",this).call(this),this.scoreTxt.visible=!1}},{key:"showAd",value:(i=Vr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(F.RewardedVideo);case 2:e.sent?this.revive():this.showEnd();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"showEnd",value:function(){qr(Yr(s.prototype),"showEnd",this).call(this,!0);var e=new an(this.score);this.addChild(e)}},{key:"revive",value:function(){var e=this;Ui("revive","game","success"),this.gameOver=!1,this.pauseButton.visible=!0,this.scoreBack.visible=!0,this.scoreTxt.visible=!0,this.hero.body.SetLinearVelocity(new pi(0,0)),this.hero.body.SetAngularVelocity(0),window.setTimeout((function(){e.applyBonus(!0),oe()}),1)}},{key:"onClick",value:function(e){this.tutorial.hide(),this.goals.length>0&&this.tutorial.showNext(this.leaders.getHighestPos()),qr(Yr(s.prototype),"onClick",this).call(this,e)}},{key:"removeObject",value:function(e,t){t||this.addScore(Ti.BOX_REMOVE_SCORE*e.getBlockCount(),e.position),qr(Yr(s.prototype),"removeObject",this).call(this,e,t)}},{key:"addScore",value:function(e,t){this.score+=e,this.updateScore();var n=jt.create();n.position.set(t.x,t.y),this.viewport.addChild(n),n.animate(e)}},{key:"generateBlocks",value:function(){if(!Ai.paused){var e=this.staticPlatform?this.staticPlatform.cellY:2,t=[],n={x:-2,y:7+e,type:vt.LINE,rotate:0,brickType:yt.STATIC};t.push(n);var r=[[8,8,8,8,8],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[8,8,8,8,8]];n={x:-2,y:e,type:vt.LINE,rotate:0,brickType:yt.SIMPLE},t.push(n);var o=Math.floor(4*Math.random());n={x:o-2,y:7+e-2,type:vt.BOX,rotate:0,brickType:yt.GOAL},r[5][o]=9,r[5][o+1]=9,r[6][o]=9,r[6][o+1]=9,t.push(n);for(var i=0,a=1;r.flat().includes(-1);)if(-1===r[a][i]){var u=Math.floor(Math.random()*vt.END),c=u===vt.LINE||u===vt.THREE?0:Math.floor(4*Math.random()),l=!0;switch(u){case vt.POINT:r[a][i]=u;break;case vt.BOX:if(!r[a+1]||-1!==r[a][i+1]||-1!==r[a+1][i]||-1!==r[a+1][i+1])continue;r[a][i+1]=u,r[a+1][i]=u,r[a+1][i+1]=u,r[a][i]=u;break;case vt.TWO:var f=c%2;if(0===f){if(-1!==r[a][i+1])continue;r[a][i+1]=u}else{if(!r[a+1]||-1!==r[a+1][i])continue;r[a+1][i]=u}r[a][i]=u;break;case vt.THREE:if(0==(f=c%2)){if(-1!==r[a][i+1]||-1!==r[a][i+2])continue;r[a][i+1]=u,r[a][i+2]=u}else{if(!r[a+1]||-1!==r[a+1][i]||!r[a+2]||-1!==r[a+2][i])continue;r[a+1][i]=u,r[a+2][i]=u}r[a][i]=u;break;case vt.LINE:if(0==(f=c%2)){if(-1!==r[a][i+1]||-1!==r[a][i+2]||-1!==r[a][i+3]||-1!==r[a][i+4])continue;r[a][i+1]=u,r[a][i+2]=u,r[a][i+3]=u,r[a][i+4]=u}else{if(!(r[a+1]&&r[a+2]&&r[a+3]&&r[a+4]&&-1===r[a+1][i]&&-1===r[a+2][i]&&-1===r[a+3][i]&&-1===r[a+4][i]))continue;r[a+1][i]=u,r[a+2][i]=u,r[a+3][i]=u,r[a+4][i]=u}r[a][i]=u;break;case vt.ZIGZAG_LEFT:if(0==(f=c%2)){if(!r[a+1]||-1!==r[a][i+1]||-1!==r[a+1][i+1]||-1!==r[a+1][i+2])continue;r[a][i+1]=u,r[a+1][i+1]=u,r[a+1][i+2]=u}else{if(!r[a+1]||!r[a+2]||-1!==r[a+1][i]||-1!==r[a+1][i-1]||-1!==r[a+2][i-1])continue;r[a+1][i]=u,r[a+1][i-1]=u,r[a+2][i-1]=u}r[a][i]=u;break;case vt.ZIGZAG_RIGHT:if(0==(f=c%2)){if(!r[a+1]||-1!==r[a][i-1]||-1!==r[a+1][i-1]||-1!==r[a+1][i-2])continue;r[a][i-1]=u,r[a+1][i-1]=u,r[a+1][i-2]=u}else{if(!r[a+1]||!r[a+2]||-1!==r[a+1][i]||-1!==r[a+1][i+1]||-1!==r[a+2][i+1])continue;r[a+1][i]=u,r[a+1][i+1]=u,r[a+2][i+1]=u}r[a][i]=u;break;case vt.CORNER:if(0==(f=c%4)){if(-1!==r[a][i+1]||!r[a+1]||-1!==r[a+1][i])continue;r[a][i+1]=u,r[a+1][i]=u,r[a][i]=u}else if(1===f){if(-1!==r[a][i+1]||!r[a+1]||-1!==r[a+1][i+1])continue;r[a][i+1]=u,r[a+1][i+1]=u,r[a][i]=u}else if(2===f){if(-1!==r[a][i+1]||!r[a+1]||-1!==r[a+1][i+1]||-1!==r[a+1][i])continue;r[a][i+1]=u,r[a+1][i+1]=u,r[a+1][i]=u,l=!1}else if(3===f){if(!r[a+1]||-1!==r[a+1][i+1]||-1!==r[a+1][i])continue;r[a+1][i]=u,r[a+1][i+1]=u,r[a][i]=u}break;case vt.HORSE_LEFT:if(0==(f=c%4)){if(!r[a+1]||!r[a+2]||-1!==r[a][i+1]||-1!==r[a+1][i+1]||-1!==r[a+2][i+1])continue;r[a][i+1]=u,r[a+1][i+1]=u,r[a+2][i+1]=u}else if(1===f){if(!r[a+1]||-1!==r[a+1][i]||-1!==r[a+1][i-1]||-1!==r[a+1][i-2])continue;r[a+1][i]=u,r[a+1][i-1]=u,r[a+1][i-2]=u}else if(2===f){if(!r[a-1]||!r[a-2]||-1!==r[a][i-1]||-1!==r[a-1][i-1]||-1!==r[a-2][i-1])continue;r[a][i-1]=u,r[a-1][i-1]=u,r[a-2][i-1]=u}else if(3===f){if(!r[a-1]||-1!==r[a-1][i]||-1!==r[a-1][i+1]||-1!==r[a-1][i+2])continue;r[a-1][i]=u,r[a-1][i+1]=u,r[a-1][i+2]=u}r[a][i]=u;break;case vt.HORSE_RIGHT:if(0==(f=c%4)){if(!r[a+1]||!r[a+2]||-1!==r[a][i-1]||-1!==r[a+1][i-1]||-1!==r[a+2][i-1])continue;r[a][i-1]=u,r[a+1][i-1]=u,r[a+2][i-1]=u}else if(1===f){if(!r[a-1]||-1!==r[a-1][i]||-1!==r[a-1][i-1]||-1!==r[a-1][i-2])continue;r[a-1][i]=u,r[a-1][i-1]=u,r[a-1][i-2]=u}else if(2===f){if(!r[a-1]||!r[a-2]||-1!==r[a][i+1]||-1!==r[a-1][i+1]||-1!==r[a-2][i+1])continue;r[a][i+1]=u,r[a-1][i+1]=u,r[a-2][i+1]=u}else if(3===f){if(!r[a+1]||-1!==r[a+1][i]||-1!==r[a+1][i+1]||-1!==r[a+1][i+2])continue;r[a+1][i]=u,r[a+1][i+1]=u,r[a+1][i+2]=u}r[a][i]=u}n={x:i-2+0,y:a+e+0,type:u,rotate:c,brickType:yt.SIMPLE},t.push(n),l&&5==++i&&(i=0,a++)}else 5==++i&&(i=0,a++);for(var p=void 0,h=0;h<t.length;h++){var d=t[h];if(this.staticPlatform&&d.y===e){var y=s.allFixDef.get(d.type);this.staticPlatform.clean();var v=d.x*Ei+2*Ei,m=d.y*Ei;this.staticPlatform.createBody(y,di.b2_dynamicBody,{x:v/Pi,y:m/Pi})}else{var b=this.createObject(d);d.brickType===yt.STATIC&&(p=b)}}this.staticPlatform=p}}},{key:"onGoalAnimated",value:function(e,t){var n=this;if(t){this.addScore(Ti.BOX_REMOVE_GOAL,e.position);var r=e.x;bt.a.to(e,{duration:.5,x:r-800,onComplete:function(){var t=n.goals.indexOf(e);-1!==t&&(n.goals[t]=void 0),bt.a.killTweensOf(e),e.destroy({children:!0})}})}}}])&&Kr(t.prototype,n),o&&Kr(t,o),s}(Hr);function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return no(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oo(e,t,n){return(oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=co(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=co(e);if(t){var o=co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return uo(this,n)}}function uo(e,t){if(t&&("object"===eo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return so(e)}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(e){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}(i,e);var t,n,r,o=ao(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),lo(so(e=o.call(this)),"logo",void 0),lo(so(e),"item0",void 0),lo(so(e),"item1",void 0),lo(so(e),"item2",void 0),lo(so(e),"item3",void 0),lo(so(e),"item4",void 0),lo(so(e),"item5",void 0),lo(so(e),"item6",void 0),lo(so(e),"item7",void 0),lo(so(e),"item8",void 0),lo(so(e),"item9",void 0),lo(so(e),"item10",void 0),lo(so(e),"cont",void 0),lo(so(e),"tweens",void 0),e.tweens=[],e.cont=new xe.b,e.addChild(e.cont),e.item5=Re.a.from(p.TextureCache.item_5),e.item5.anchor.set(.5,.5),e.cont.addChild(e.item5),e.item7=Re.a.from(p.TextureCache.item_7),e.item7.anchor.set(.5,.5),e.cont.addChild(e.item7),e.item9=Re.a.from(p.TextureCache.item_9),e.item9.anchor.set(.5,.5),e.cont.addChild(e.item9),e.logo=Re.a.from(p.TextureCache.logo_txt),e.logo.anchor.set(.5,.5),e.cont.addChild(e.logo),e.item0=Re.a.from(p.TextureCache.item_1),e.item0.anchor.set(.5,.5),e.cont.addChild(e.item0),e.item1=Re.a.from(p.TextureCache.item_1),e.item1.anchor.set(.5,.5),e.cont.addChild(e.item1),e.item2=Re.a.from(p.TextureCache.item_2),e.item2.anchor.set(.5,.5),e.cont.addChild(e.item2),e.item3=Re.a.from(p.TextureCache.item_3),e.item3.anchor.set(.5,.5),e.cont.addChild(e.item3),e.item4=Re.a.from(p.TextureCache.item_4),e.item4.anchor.set(.5,.5),e.cont.addChild(e.item4),e.item6=Re.a.from(p.TextureCache.item_6),e.item6.anchor.set(.5,.5),e.cont.addChild(e.item6),e.item8=Re.a.from(p.TextureCache.item_8),e.item8.anchor.set(.5,.5),e.cont.addChild(e.item8),e.item10=Re.a.from(p.TextureCache.item_10),e.item10.anchor.set(.5,.5),e.cont.addChild(e.item10),e.resetPositions(),e}return t=i,(n=[{key:"start",value:function(){var e=this;this.tweens=[],this.tweens.push(bt.a.to(this.cont.position,{duration:1,y:0,ease:"bounce.out"})),this.tweens.push(bt.a.to({y:0},{duration:.3,y:1,onComplete:function(){e.startItems()}}))}},{key:"stop",value:function(){var e,t=to(this.tweens);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.kill()}}catch(e){t.e(e)}finally{t.f()}this.tweens=void 0,this.resetPositions()}},{key:"resetPositions",value:function(){this.cont.y=-200,this.item5.position.set(78,161),this.item7.position.set(-30,161),this.item9.position.set(-46,161),this.item0.position.set(128,161),this.item1.position.set(-6,161),this.item2.position.set(-105,161),this.item3.position.set(-32,161),this.item4.position.set(78,161),this.item6.position.set(12,161),this.item8.position.set(48,161),this.item10.position.set(-65,161)}},{key:"startItems",value:function(){this.doItem(this.item0,270,-72),this.doItem(this.item1,46,163),this.doItem(this.item2,-134,-164),this.doItem(this.item3,-124,152),this.doItem(this.item4,246,18),this.doItem(this.item5,200,119),this.doItem(this.item6,46,-20),this.doItem(this.item7,-5,-155),this.doItem(this.item8,140,-178),this.doItem(this.item9,-248,-20),this.doItem(this.item10,-174,43)}},{key:"doItem",value:function(e,t,n){this.tweens.push(bt.a.to(e,{duration:1,x:t,ease:"exponential.out"})),this.tweens.push(bt.a.to(e,{duration:1.3,y:n,ease:"elastic.out"}))}},{key:"destroy",value:function(e){var t,n=to(this.tweens);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&r.kill()}}catch(e){n.e(e)}finally{n.f()}this.tweens=void 0,oo(co(i.prototype),"destroy",this).call(this,e)}}])&&ro(t.prototype,n),r&&ro(t,r),i}(xe.b);function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ho(i,r,o,a,u,"next",e)}function u(e){ho(i,r,o,a,u,"throw",e)}a(void 0)}))}}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wo(e);if(t){var o=wo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bo(this,n)}}function bo(e,t){if(t&&("object"===po(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(n,e);var t=mo(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this),Ui("start","game","gameoverPopup");var i=Re.a.from(ke.db.WHITE);i.anchor.set(.5),i.tint=0,i.alpha=.6,i.width=window.innerWidth/Ai.scale,i.height=window.innerHeight/Ai.scale,i.interactive=!0,o.addChild(i);var a=Re.a.from(p.TextureCache.completeBack);a.anchor.set(.5),a.scale.set(.9),o.addChild(a);var u=new Fe("homeButton0","homeButton1");u.scale.set(.75,.75),u.position.set(-260,400),o.addChild(u),u.on("pointerup",yo(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui("click","gameoverPopup","home"),e.next=3,Z(F.Interstitial);case 3:Ai.paused=!1,o.destroy({children:!0}),ci.start(Vo);case 6:case"end":return e.stop()}}),e)}))));var s=new Fe("againButton0","againButton1");s.position.set(0,400),o.addChild(s),s.on("pointerup",yo(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui("click","gameoverPopup","again"),e.next=3,Z(F.Interstitial);case 3:Ai.paused=!1,o.destroy({children:!0}),ci.restart();case 6:case"end":return e.stop()}}),e)}))));var c=new Ke(new Fe("settings_musicOff","settings_musicOff"),new Fe("settings_musicOn","settings_musicOn"));c.position.set(-120,.5*-Ri),o.addChild(c);var l=new Ke(new Fe("settings_soundOff","settings_soundOff"),new Fe("settings_soundOn","settings_soundOn"));l.position.set(120,.5*-Ri),o.addChild(l),l.toggle(!v.muteSounds),l.on("toggled",(function(){Ui("click","gameoverPopup","sound"),v.muteSounds=!l.toggled})),c.toggle(!v.muteMusic),c.on("toggled",(function(){Ui("click","gameoverPopup","music"),v.muteMusic=!c.toggled}));var h=f(e?"WONDERFUL!":"OH! NO!"),d=new r.BitmapText(h,{fontName:Fi+"_font",fontSize:110,tint:6815838});d.anchor.set(.5,.5),d.position.set(0,-400),o.addChild(d);var y=new Date,m=new Date;m.setHours(24,0,0,0);var b=(m.getTime()-y.getTime())/1e3,w=Math.floor(b/60/60),g=Math.floor(b/60)-60*w+1,_=f(e?"WON":"GAMEOVER",w.toString(),g.toString()),O=new r.BitmapText(_,{fontName:Fi+"_font",fontSize:80,tint:6815838,align:"center"});return O.anchor.set(.5,.5),O.position.set(0,-40),o.addChild(O),u.scale.set(1,1),u.position.set(-150,400),s.position.set(150,400),v.play("level_failed"),o}return n}(xe.b);function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return So(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return So(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function So(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ro(e,t,n){return(Ro="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Co(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Co(e);if(t){var o=Co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return To(this,n)}}function To(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Co(e){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eo(e,t)}(a,e);var t,n,o,i=Po(a);function a(){return ko(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"create",value:function(){this.boundX=430,Ro(Co(a.prototype),"create",this).call(this),this.viewport.setZoom(1)}},{key:"start",value:function(){var e=new Date;Ai.dateString="".concat(e.getFullYear()).concat(e.getMonth()+1).concat(e.getDate());var t=Ai.allQuests.all.find((function(e){return e.date===Ai.dateString}));Ai.quest=t||void 0,Ai.quest.level.viewport?(this.viewport.x=Ai.quest.level.viewport.x,this.viewport.y=Ai.quest.level.viewport.y):(this.viewport.x=-100,this.viewport.y=500),Ro(Co(a.prototype),"start",this).call(this)}},{key:"generateBlocks",value:function(){for(var e=Ai.quest.level.tiles,t=0;t<e.length;t++){var n=e[t];this.createObject(n)}}},{key:"onGoalAnimated",value:function(e,t){var n=this,r=e.x;bt.a.to(e,{duration:.5,x:r-800,onComplete:function(){var t=n.goals.indexOf(e);-1!==t&&(n.goals[t]=void 0),bt.a.killTweensOf(e),e.destroy({children:!0}),n.gameOver=!0,n.levelEnd(!0)}})}},{key:"createHero",value:function(){Ro(Co(a.prototype),"createHero",this).call(this);var e=Ai.quest.level.hero,t=e.x,n=e.y;this.hero.addHero(t*Ei,n*Ei)}},{key:"levelEnd",value:function(e){Ro(Co(a.prototype),"levelEnd",this).call(this,e),this.showEnd(e)}},{key:"sendStart",value:function(){Gi(ki.Start,void 0,Ai.dateString)}},{key:"sendFinish",value:function(e){Gi(e?ki.Complete:ki.Fail,e?1:0,Ai.dateString)}},{key:"showEnd",value:function(e){Ro(Co(a.prototype),"showEnd",this).call(this,e);var t=new go(e);this.addChild(t)}},{key:"createUI",value:function(){Ro(Co(a.prototype),"createUI",this).call(this);var e=.5*-Ri-50,t=new r.BitmapText(f("QUEST!"),{fontName:Fi+"_font",fontSize:100,tint:16776960});t.anchor.set(.5,.5),t.position.set(-100,e-25),this.addChild(t)}},{key:"createObject",value:function(e){var t=Ro(Co(a.prototype),"createObject",this).call(this,e);return e.type===vt.LINE&&e.brickType===yt.STATIC&&t.makeLineStatic(),t}},{key:"isLevelEnd",value:function(){var e=Ro(Co(a.prototype),"isLevelEnd",this).call(this);if(!e){var t,n=Oo(this.goals);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r&&r.y+this.viewport.y/this.viewport.scale.y>1e3){e=!0;break}}}catch(e){n.e(e)}finally{n.f()}}return e}},{key:"updateViewport",value:function(){}},{key:"update",value:function(){if(Ro(Co(a.prototype),"update",this).call(this),!Ai.paused&&this.hero){var e,t=Oo(this.goals);try{for(t.s();!(e=t.n()).done;){var n=e.value;(n&&n.x<-this.boundX||n.x>this.boundX)&&(this.gameOver=!0)}}catch(e){t.e(e)}finally{t.f()}}}}])&&xo(t.prototype,n),o&&xo(t,o),a}(Hr);function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bo(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Bo(i,r,o,a,u,"next",e)}function u(e){Bo(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Do(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(e,t){return(Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function No(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Uo(e);if(t){var o=Uo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Go(this,n)}}function Go(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ho(e)}function Ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uo(e){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(c,e);var t,n,o,i,a,u,s=No(c);function c(){var e;Do(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Lo(Ho(e=s.call.apply(s,[this].concat(n))),"logo",void 0),Lo(Ho(e),"playBtn",void 0),Lo(Ho(e),"hero",void 0),Lo(Ho(e),"player",void 0),Lo(Ho(e),"tutorial",void 0),Lo(Ho(e),"questBtn",void 0),e}return t=c,(n=[{key:"create",value:function(){var e=this;this.logo=new fo,this.logo.position.y=-Ri/6,this.addChild(this.logo),this.playBtn=new Fe("playButton0","playButton1"),this.playBtn.hitArea=new r.Polygon([{x:-230,y:-400},{x:370,y:0},{x:-230,y:300}]),this.playBtn.position.y=Ri/3-30,this.addChild(this.playBtn),this.playBtn.on("pointerup",(function(){Ui("click","menu","play"),e.onPlayClicked()})),this.hero=new mt,this.hero.position.y=this.playBtn.position.y,this.addChild(this.hero);var t=this.playBtn.y+.5*this.playBtn.height+50,n=new Ke(new Fe("settings_musicOff","settings_musicOff"),new Fe("settings_musicOn","settings_musicOn"));n.position.set(-330,t),this.addChild(n);var o=new Ke(new Fe("settings_soundOff","settings_soundOff"),new Fe("settings_soundOn","settings_soundOn"));o.position.set(-110,t),this.addChild(o),o.toggle(!v.muteSounds),o.on("toggled",(function(){Ui("click","menu","sound"),v.muteSounds=!o.toggled})),n.toggle(!v.muteMusic),n.on("toggled",(function(){Ui("click","menu","music"),v.muteMusic=!n.toggled})),this.questBtn=new Fe("playButton0","playButton1"),this.questBtn.scale.set(.4),this.questBtn.hitArea=new r.Polygon([{x:-230,y:-400},{x:370,y:0},{x:-230,y:300}]),this.questBtn.position.set(260,Ri/9),this.addChild(this.questBtn);var i=r.AnimatedSprite.fromFrames(["fish_idle3_0001","fish_idle3_0002","fish_idle3_0003","fish_idle3_0004","fish_idle3_0005","fish_idle3_0004","fish_idle3_0003","fish_idle3_0002","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001","fish_idle3_0001"]);if(i.anchor.set(.5,.5),i.scale.set(1.2),i.position.x=-20,i.position.y=-30,i.animationSpeed=.4,i.loop=!0,this.questBtn.addChild(i),i.play(),this.tutorial=new ve,this.addChild(this.tutorial),this.questBtn.on("pointerup",(function(){Ui("click","menu","quest"),e.onQuestClicked()})),J()){var a=new zt(r.Sprite.from("assets/images/shareButton.png"));a.position.set(110,t),this.addChild(a),a.on("pointerup",(function(){Ui("click","menu","share"),te(f("SHARE_MENU",e.player.entity.highscore.toString()))}));var u=new zt(r.Sprite.from("assets/images/friendsButton.png"));u.position.set(330,t),this.addChild(u),u.on("pointerup",(function(){Ui("click","menu","invite"),ne()}))}else n.position.set(-110,t),o.position.set(110,t)}},{key:"start",value:(u=Io(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui("start","menu","level"),this.logo.start(),t=Se.getPlayerEntry(),console.log(t),this.player=new at(t),this.player.scale.set(1.2,1.2),n=G.shouldLeadersShow()?-70:0,this.player.position.set(n,.5*-Ri-30),this.addChild(this.player),this.questBtn.interactive=void 0!==Ai.quest,this.questBtn.alpha=void 0!==Ai.quest?1:.5,ve.questShown||this.tutorial.showQuest({x:30,y:-180}),e.next=14,re();case 14:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"close",value:function(){Ui("close","menu","level"),this.logo.stop(),this.player.destroy({children:!0})}},{key:"onQuestClicked",value:(a=Io(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee()){e.next=3;break}return e.next=3,Z(F.Interstitial);case 3:ci.start(Ao);case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"onPlayClicked",value:(i=Io(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee()){e.next=3;break}return e.next=3,Z(F.Interstitial);case 3:ci.start(Jr);case 4:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}])&&Fo(t.prototype,n),o&&Fo(t,o),c}(Ye);function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xo(e,t){return(Xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zo(e);if(t){var o=zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zo(this,n)}}function Zo(e,t){if(t&&("object"===Wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xo(e,t)}(i,e);var t,n,r,o=Qo(i);function i(){return Ko(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"BeginContact",value:function(e){var t=e.GetFixtureA(),n=e.GetFixtureB(),r=t.GetBody().GetUserData(),o=n.GetBody().GetUserData();if(r instanceof br||o instanceof br){var i=r instanceof br?r:o,a=r instanceof br?o:r;a instanceof Tr&&!i.playingFight?(v.play("collide"),i.playAnimation("fight"),i.on("onFightEnd",(function(){i.clearAnimations(),i.playRandomIdle(),a.finishAnimate(),i.off("onFightEnd")}))):a instanceof ur&&v.play("collide")}}}])&&qo(t.prototype,n),r&&qo(t,r),i}(n(158).Dynamics.b2ContactListener);function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oi(e);if(t){var o=oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ni(this,n)}}function ni(e,t){if(t&&("object"===$o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ri(e)}function ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(i,e);var t,n,r,o=ti(i);function i(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this),t=ri(e),r=void 0,(n="sprite")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r;var a=Re.a.from(ke.db.WHITE);return a.anchor.set(.5),a.tint=0,a.alpha=.6,a.width=2*xi,a.height=2*Ri,a.interactive=!0,e.addChild(a),e.sprite=Re.a.from("assets/preloader.png"),e.sprite.anchor.set(.5,.5),e.addChild(e.sprite),e}return t=i,(n=[{key:"show",value:function(){this.visible=!0,this.rotate()}},{key:"hide",value:function(){this.visible=!1,bt.a.killTweensOf(this.sprite)}},{key:"rotate",value:function(){var e=this;this.sprite.rotation=0,bt.a.to(this.sprite,{rotation:2*Math.PI,duration:5,ease:wt.c.easeNone,onComplete:function(){e.rotate()}})}}])&&Jo(t.prototype,n),r&&Jo(t,r),i}(xe.b);function ai(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ui(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ai(i,r,o,a,u,"next",e)}function u(e){ai(i,r,o,a,u,"throw",e)}a(void 0)}))}}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ci,li=n(158),fi=li.Dynamics.b2World,pi=li.Common.Math.b2Vec2,hi=li.Dynamics.b2BodyDef,di=li.Dynamics.b2Body,yi=li.Dynamics.b2FixtureDef,vi=(li.Dynamics.b2Fixture,li.Collision.Shapes.b2PolygonShape),mi=(li.Dynamics.b2DebugDraw,li.Collision.b2AABB);r.Application.registerPlugin(o.a),o.b.registerPlugin(i.b),o.b.registerPlugin(a.c);var bi,wi,gi,_i,Oi,Si,ki,xi=756,Ri=1344,Ei=100,Pi=50,Ti={BOX_REMOVE_SCORE:5,BOX_REMOVE_GOAL:50},Ci=[],Ai={paused:!1,particlesConfig:void 0,scale:1,realHeight:1,allQuests:void 0,quest:void 0,dateString:""},ji=function(){gi&&gi.show()},Bi=function(){gi&&gi.hide()},Ii=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={width:xi,height:Ri,autoDensity:!0,resolution:Math.min(Math.floor(window.devicePixelRatio),3)};wi=new r.Application(t),document.body.appendChild(wi.view),r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,wi.view.style.left="0%",wi.view.style.top="0%",wi.view.style.width="100%",wi.view.style.height="100%",wi.renderer.plugins.interaction,wi.stage.interactive=!0,wi.ticker.maxFPS=60;var n=new xe.b;wi.stage.addChild(n),(bi=new fi(new pi(0,10),!0)).SetContactListener(new Yo),wi.ticker.add((function(){if(!Ai.paused){bi.Step(1/30,10,10);for(var e=bi.GetBodyList();e&&0!=e.a;){var t=e.GetUserData();if(t&&t.transform){var n=e.GetPosition();t.position.set(n.x*Pi,n.y*Pi),t instanceof br?t.hex.rotation=e.GetAngle():t.rotation=e.GetAngle()}e=e.GetNext()}bi.ClearForces(),Ci.forEach((function(e){return bi.DestroyBody(e)})),Ci=[]}})),this.start(wi,n),(gi=new ii).hide(),n.addChild(gi)}var t,n,i,a,u;return t=e,(n=[{key:"start",value:(u=ui(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new xe.b,n.addChild(r),o=new xe.b,n.addChild(o),ci=new c(o),e.next=7,this.load();case 7:i=Re.a.from("back"),r.addChild(i),ci.add(new Vo),ci.add(new Jr),ci.add(new Ao),ci.start(Vo),a=function(){return{width:innerWidth,height:innerHeight}},u=function(){var e=a(),n=e.width,i=e.height;t.renderer.resize(n,i);var u=n/i>.5625?n/1080:i/1920;r.scale.set(u,u),r.position.set(.5*n-.5*r.width,.5*i-.5*r.height),Ai.realHeight=i,gi.height=i,gi.scale.x=gi.scale.y;var s=i/1920;Ai.scale=s,o.scale.set(s,s),o.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height),gi.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height)},window.addEventListener("resize",u),u();case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"load",value:(a=ui(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){v.init("assets/sounds"),G.startLoading();var n=new o.b;n.add("base","assets/atlases/base.json"),n.add("fish","assets/atlases/fish.json"),n.add("hero","assets/atlases/hero.json"),n.add("back","assets/images/back.jpg"),n.add("mainfont","assets/fonts/en_font.fnt"),n.add("mainfont1","assets/fonts/ru_font.fnt"),n.add("particles","assets/particles.json"),n.add("daily","https://atatapp.games/crab/daily.json"),v.add("music",{autoplay:!0,loop:!0,volume:.6}),v.add("click",{volume:1}),v.add("pop0",{volume:.6}),v.add("pop1",{volume:.6}),v.add("pop2",{volume:.6}),v.add("collide",{volume:.2}),v.add("boom",{volume:1}),v.add("crab_crack",{volume:1}),v.add("crab_hand",{volume:1}),v.add("won",{volume:.4}),v.add("tutorial",{volume:.4}),v.add("level_failed",{volume:1}),v.add("level_won",{volume:1}),v.add("level",{volume:.4}),n.onProgress.add((function(e){var t;t=e.progress,G.loadingProgress(t)})),n.onError.add((function(e){Li(e),t()})),n.load(ui(regeneratorRuntime.mark((function t(){var r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=document.getElementById("preloader"))&&(r.style.display="none"),Ai.particlesConfig=n.resources.particles.data,Ai.allQuests=n.resources.daily.data,Ai.allQuests&&(o=new Date,Ai.dateString="".concat(o.getFullYear()).concat(o.getMonth()+1).concat(o.getDate()),i=Ai.allQuests.all.find((function(e){return e.date===Ai.dateString})),Ai.quest=i||void 0),t.next=7,Y();case 7:return t.next=9,Se.load();case 9:e();case 10:case"end":return t.stop()}}),t)}))))})));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})}])&&si(t.prototype,n),i&&si(t,i),e}();!function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(_i||(_i={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(Oi||(Oi={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(Si||(Si={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(ki||(ki={})),Cr.GameAnalytics.setEnabledInfoLog(!1);var Di=!1,Fi="en";function Mi(e,t){Cr.GameAnalytics.initialize(e,t),console.log("Network: ".concat("2",", live: ").concat(Di)),Ui("set","network","2",Di?1:0),Ui("start","app","game"),new Ii}function Ni(e,t,n){Cr.GameAnalytics.addDesignEvent("".concat(e,":").concat(t),n),gtag("event",e,{event_category:t,value:n})}function Gi(e,t,n){Cr.GameAnalytics.addProgressionEvent(e,"level",n,void 0,t),gtag("event","progression",{event_category:e===ki.Start?"start":e!==ki.Fail?"complete":"fail",value:t})}function Hi(e,t,n){void 0===n?Cr.GameAnalytics.addAdEvent(e,t,"2","ad"):Cr.GameAnalytics.addAdEventWithNoAdReason(e,t,"2","ad",n);var r="",o="";switch(t){case Si.Interstitial:o="inter";break;case Si.RewardedVideo:o="reward"}switch(e){case _i.FailedShow:r="showError";break;case _i.Show:r="show";break;case _i.RewardReceived:r="success"}gtag("event",r,{event_category:o})}function Ui(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Cr.GameAnalytics.addDesignEvent("".concat(e,":").concat(t,":").concat(n),r),gtag("event",e,{event_category:t,event_label:n,value:r})}function Li(e){var t=JSON.stringify(e);Cr.GameAnalytics.addErrorEvent(Cr.EGAErrorSeverity.Error,t),gtag("event","show",{event_category:"error",event_label:"error",value:t})}function Vi(e){Di=e}window.onfocus=function(){Howler.mute(!1)},window.onblur=function(){Howler.mute(!0)},window.onload=function(){L().then((function(e){Fi=e.language,Di=e.success,Mi(e.gameKey,e.secretKey)})).catch((function(e){Fi="en",Di=!1,Mi("72f259223556fc5ce732f0212865799b","7e2cf87503012b4c2e1f2346c99ac6e9c411b5ff")}))}}});
//# sourceMappingURL=bundle.4401b2e529fb7f8a49d2.js.map