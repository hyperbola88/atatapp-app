!function(t){function e(e){for(var r,a,u=e[0],c=e[1],s=e[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;i.push([201,1]),n()}({201:function(t,e,n){n(202),t.exports=n(409)},409:function(t,e,n){"use strict";n.r(e),n.d(e,"EGAAdAction",(function(){return Wi})),n.d(e,"EGAAdError",(function(){return Hi})),n.d(e,"EGAAdType",(function(){return Ui})),n.d(e,"EGAProgressionStatus",(function(){return zi})),n.d(e,"live",(function(){return Ji})),n.d(e,"lang",(function(){return qi})),n.d(e,"sendValueEvent",(function(){return Qi})),n.d(e,"sendProgressionEvent",(function(){return Zi})),n.d(e,"sendAdEvent",(function(){return ta})),n.d(e,"sendEvent",(function(){return ea})),n.d(e,"sendError",(function(){return na})),n.d(e,"setLive",(function(){return ra}));var r=n(43),o=n(10),i=n.n(o),a=n(193);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"path",void 0),c(this,"all",void 0),c(this,"musics",void 0),c(this,"mutedSounds",void 0),c(this,"mutedMusic",void 0)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.path=t,this.all={},this.musics={},this.mutedSounds=!1,this.mutedMusic=!1}},{key:"muteMusic",get:function(){return this.mutedMusic},set:function(t){this.mutedMusic=t,this.musics.music.mute(t)}},{key:"muteSounds",get:function(){return this.mutedSounds},set:function(t){for(var e in this.mutedSounds=t,this.all)this.all[e]&&this.all[e].mute(t)}},{key:"add",value:function(t,e){var n=this;if(!this.all[t]){if(!this.path)throw new Error("setup path for sounds");var r=["mp3","ogg"].map((function(e){return"".concat(n.path,"/").concat(t,".").concat(e)})),o=new a.Howl({src:r,autoplay:null==e?void 0:e.autoplay,loop:null==e?void 0:e.loop,volume:(null==e?void 0:e.volume)||1});"music"!==t?this.all[t]=o:this.musics[t]=o}}},{key:"play",value:function(t){this.all[t]?this.all[t].play():console.error("no sound was found")}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()),l=n(16),f=n(70),p=n(71),h=n(51);function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"states",void 0),d(this,"currentState",void 0),d(this,"stage",void 0),this.stage=e,this.states=new Map}var e,n,r;return e=t,(n=[{key:"activeState",get:function(){return this.currentState}},{key:"add",value:function(t){this.states.set(t.constructor,t),t.create()}},{key:"start",value:function(t){var e=this.states.get(t);if(!e)throw new Error("No state ".concat(t));this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.start(r),this.currentState=e,this.stage.addChild(this.currentState)}},{key:"restart",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=this.currentState;this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState)),window.setTimeout((function(){o.start(n),t.currentState=o,t.stage.addChild(t.currentState)}),100)}}])&&y(e.prototype,n),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),v=n(1),m=n(9),w=n(21),g=n(3),x=n(5),k=n(7);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return T(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C,_,E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(i,t);var e,n,r,o=R(i);function i(t,e){var n,r,a,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=T(n),u=void 0,(a="sprite")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u;var c=w.a.from(g.db.WHITE);return c.anchor.set(.5),c.tint=0,c.alpha=.6,c.width=2*t,c.height=2*e,c.interactive=!0,n.addChild(c),n.sprite=w.a.from("assets/preloader.png"),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n}return e=i,(n=[{key:"show",value:function(){this.visible=!0,this.rotate()}},{key:"hide",value:function(){this.visible=!1,x.a.killTweensOf(this.sprite)}},{key:"rotate",value:function(){var t=this;this.sprite.rotation=0,x.a.to(this.sprite,{rotation:2*Math.PI,duration:5,ease:k.f.easeNone,onComplete:function(){t.rotate()}})}}])&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.b);function M(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}h.a.registerPlugin(l.a),l.b.registerPlugin(f.b),l.b.registerPlugin(p.c);var D,L,I=[],N={started:!1,paused:!1,scale:1,realHeight:1,originalWidth:1,originalHeight:1,levels:[],material:void 0,slowmo:!1},F=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a={width:e,height:n,autoDensity:!0,resolution:2,backgroundColor:12309476};N.originalWidth=e,N.originalHeight=n,_=new h.a(a),document.body.appendChild(_.view),v.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,_.view.style.left="0%",_.view.style.top="0%",_.view.style.width="100%",_.view.style.height="100%",_.renderer.plugins.interaction,_.stage.interactive=!0,_.ticker.maxFPS=60;var u=new m.b;_.stage.addChild(u),C=new i.a.World({gravity:[0,-10]}),this.initContactListener();var c=new o.Material;N.material=c,C.addContactMaterial(new o.ContactMaterial(c,c,{restitution:0})),C.emitImpactEvent=!1,_.ticker.add((function(){if(!N.paused){var t=1/(N.slowmo?400:60);C.step(t,.1,3),C.bodies.forEach((function(t){var e=t.userData;if(e&&e.transform){var n=t.position;e.position.set(50*n[0],50*n[1]),e.rotation=t.angle}})),r.customLogic(t)}})),this.start(_,u),(L=new E(e,n)).hide(),u.addChild(L)}var e,n,r,a,u;return e=t,(n=[{key:"customLogic",value:function(t){I.forEach((function(t){return C.removeBody(t)})),this.clearBodyArray()}},{key:"clearBodyArray",value:function(){I=[]}},{key:"start",value:(a=regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new m.b,n.addChild(r),o=new m.b,n.addChild(o),D=new b(o),t.next=7,this.load();case 7:i=w.a.from(v.Texture.from("back1.png")),r.addChild(i),this.createStates(),a=function(){return{width:innerWidth,height:innerHeight}},u=function(){var t=a(),n=t.width,i=t.height;e.renderer.resize(n,i),N.realHeight=i,L.height=i,L.scale.x=L.scale.y;var u=i/N.originalHeight;N.scale=u,o.scale.set(u,u),r.scale.set(u,u),r.position.set(.5*n-.5*r.width,.5*i-.5*r.height),o.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height),L.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height)},window.addEventListener("resize",u),u();case 14:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){M(o,n,r,i,u,"next",t)}function u(t){M(o,n,r,i,u,"throw",t)}i(void 0)}))},function(t,e){return u.apply(this,arguments)})}])&&A(e.prototype,n),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function H(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){W(i,r,o,a,u,"next",t)}function u(t){W(i,r,o,a,u,"throw",t)}a(void 0)}))}}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,o,i,a,u,c,s,l,f,p,h;return e=t,(n=[{key:"showGlobalLeaders",value:function(t){}},{key:"shouldLeadersShow",value:function(){return!1}},{key:"shouldPlayFirstAds",value:function(){return!1}},{key:"shouldShareShow",value:function(){return!1}},{key:"shouldScalePlayer",value:function(){return!1}},{key:"gameplayStart",value:function(){}},{key:"gameplayStop",value:function(){}},{key:"createShortcut",value:(h=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"showInvitePage",value:function(){}},{key:"shareScore",value:function(t){}},{key:"startLoading",value:function(){}},{key:"finishLoading",value:(p=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"loadingProgress",value:function(t){}},{key:"performHapticFeedback",value:function(){}},{key:"getFriends",value:(f=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getPlayerEntry",value:function(){}},{key:"setStorageData",value:(l=H(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"getStorageData",value:(s=H(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})},{key:"setScore",value:(c=H(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"getScore",value:(u=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"init",value:(a=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:!0,language:"en",gameKey:"",secretKey:""});case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"showInter",value:(i=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"showReward",value:(o=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"atatappLink",value:function(){return""}}])&&U(e.prototype,n),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Y;function G(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){G(i,r,o,a,u,"next",t)}function u(t){G(i,r,o,a,u,"throw",t)}a(void 0)}))}}!function(t){t[t.RewardedVideo=2]="RewardedVideo",t[t.Interstitial=4]="Interstitial"}(Y||(Y={}));var K,X=function(){try{return localStorage}catch(t){return}},J=!0,q=function(){var t=V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){(K=new z)&&K.init().then((function(e){t(e)})).catch((function(t){na({error:"initSocial"}),e()}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=V(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(r=X())||void 0===r||r.setItem(e,n),t.next=3,K.setStorageData(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Q=function(){var t=V(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getStorageData(e,n);case 2:return(r=t.sent)===n&&(r=(null===(o=X())||void 0===o?void 0:o.getItem(e))||n),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Z=function(){var t=V(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,L&&L.show(),r=s.muteMusic,o=s.muteSounds,s.muteMusic=!0,s.muteSounds=!0,t.t0=e,t.next=t.t0===Y.Interstitial?9:t.t0===Y.RewardedVideo?13:17;break;case 9:return t.next=11,K.showInter();case 11:return n=!0,t.abrupt("break",17);case 13:return t.next=15,K.showReward();case 15:return n=t.sent,t.abrupt("break",17);case 17:return J=!1,L&&L.hide(),s.muteMusic=r,s.muteSounds=o,t.abrupt("return",n);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt=function(){var t=V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",K.finishLoading());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),et=function(){K.gameplayStart()};function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ut(t);if(e){var o=ut(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}function at(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(i,t);var e,n,r,o=it(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,n&&rt(e.prototype,n),r&&rt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(m.b);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=pt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function pt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vt(t)););return t}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vt(t);if(e){var o=vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dt(this,n)}}function dt(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(i,t);var e,n,r,o=yt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),mt(bt(n=o.call(this)),"normalTexture",void 0),mt(bt(n),"downTexture",void 0),mt(bt(n),"isDisabled",!1),mt(bt(n),"isDown",void 0),mt(bt(n),"btn",void 0),n.normalTexture=""===t?g.db.WHITE:g.db.from(t),n.downTexture=""===t?g.db.WHITE:g.db.from(e),n.btn=w.a.from(n.normalTexture),n.btn.anchor.set(.5,.5),n.addChild(n.btn),n.on("pointerdown",n.onButtonDown.bind(bt(n))).on("pointerup",n.onButtonUp.bind(bt(n))).on("pointerupoutside",n.onButtonUp.bind(bt(n))).on("pointerout",n.onButtonOut.bind(bt(n))),n.disabled=!1,n}return e=i,(n=[{key:"disabled",get:function(){return this.isDisabled},set:function(t){this.isDisabled=t,this.isDisabled?(this.interactive=!1,this.buttonMode=!1,this.btn.alpha=.5):(this.interactive=!0,this.buttonMode=!0,this.btn.alpha=1)}},{key:"onButtonOut",value:function(){this.isDisabled||this.isDown||(this.btn.texture=this.normalTexture)}},{key:"onButtonDown",value:function(t){this.isDisabled||(s.play("click"),this.isDown=!0,this.btn.texture=this.downTexture)}},{key:"onButtonUp",value:function(){this.isDisabled||(this.isDown=!1,this.btn.texture=this.normalTexture)}},{key:"destroy",value:function(t){this.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointerout"),ft(vt(i.prototype),"destroy",this).call(this,t)}}])&&lt(e.prototype,n),r&&lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.b);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rt(t);if(e){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return St(t)}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kt(t,e)}(a,t);var e,n,r,i=Ot(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),jt(St(e=i.call(this)),"body",void 0),jt(St(e),"shape",void 0),jt(St(e),"type",void 0),jt(St(e),"view",void 0),e.type=t,e.view=e.createView(),e.view.anchor.set(.5,.5),e.addChild(e.view),e}return e=a,(n=[{key:"createBody",value:function(t){this.view.alpha=1;var e=[this.position.x/50,this.position.y/50];this.shape=this.createShape(),this.body=new o.Body({type:t,position:e,mass:5,damping:0,angularDamping:0}),this.body.addShape(this.shape),C.addBody(this.body),this.body.userData=this}},{key:"clean",value:function(){this.destroyBody(),this.parent&&this.parent.removeChild(this)}},{key:"destroyBody",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.body&&(t?C.removeBody(this.body):I.push(this.body),this.body=void 0)}},{key:"correctType",value:function(){return 0!==this.type&&(this.type<20||250===this.type||251===this.type)}}])&&xt(e.prototype,n),r&&xt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(m.b);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(){return(Et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Mt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Mt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nt(t)););return t}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nt(t);if(e){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(t,e){if(e&&("object"===Bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return It(t)}function It(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(a,t);var e,n,r,i=Dt(a);function a(t,e,n){var r,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Ct(this,a),Ft(It(r=i.call(this,n)),"sameColorNeighbors",new Map),Ft(It(r),"stepsAmount",3),Ft(It(r),"steps",1),Ft(It(r),"_kinematic",!1),Ft(It(r),"busy",!1),Ft(It(r),"sensorShape",void 0),r.position.set(t,e),u&&r.createBody(o.Body.DYNAMIC),r}return e=a,(n=[{key:"kinematic",get:function(){return this._kinematic},set:function(t){this._kinematic=t}},{key:"createBody",value:function(t){Et(Nt(a.prototype),"createBody",this).call(this,t),this.sensorShape=new o.Circle({radius:(this.getRadius()+5)/50}),this.sensorShape.sensor=!0,this.sensorShape.material=N.material,this.sensorShape.data=!0,this.body.addShape(this.sensorShape)}},{key:"animateAndDestroy",value:function(){var t=this;x.a.killTweensOf(this.view.scale),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}},{key:"clean",value:function(){this.busy=!1,Et(Nt(a.prototype),"clean",this).call(this)}},{key:"boom",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.increase(this.stepsAmount-this.steps,t)}},{key:"getRadius",value:function(){return 35}},{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("".concat(this.type,".png")));return t.scale.set(.5,.5),t}},{key:"createShape",value:function(){var t=new o.Circle({radius:this.getRadius()/50});return t.material=N.material,t}},{key:"increase",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.busy||!this.body)return 0;var r=0;if(this.busy=!0,t+=Math.max(0,this.sameColorNeighbors.size-1),this.steps+=t,this.steps>=this.stepsAmount)n&&(r=1),x.a.killTweensOf(this.view.scale),this.sameColorNeighbors.forEach((function(t,o){if(o!==e){var i=o.increase(e.stepsAmount-o.steps,n);n&&(r+=i)}})),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){e.clean()}}),this.destroyBody(n);else{var o=a.scaleFactor*this.steps;x.a.to(this.view.scale,{x:o,y:o,duration:.2,onUpdate:function(){e.shape.radius=e.getRadius()/a.scaleFactor*e.view.scale.x/50,e.shape.updateBoundingRadius(),e.sensorShape.radius=(e.getRadius()+5)/a.scaleFactor*e.view.scale.x/50,e.sensorShape.updateBoundingRadius(),e.body.updateBoundingRadius(),e.body.updateMassProperties(),e.busy=!1}})}return r}}])&&_t(e.prototype,n),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Tt);Ft(Wt,"goalType",1e3),Ft(Wt,"endType",500),Ft(Wt,"scaleFactor",.5);var Ht=n(2);function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kt(t);if(e){var o=Kt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vt(this,n)}}function Vt(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(a,t);var e,n,r,i=Gt(a);function a(t,e,n,r,u){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,0)).position.set(t,e),c.view.width=n,c.view.height=r,c.createBody(o.Body.STATIC),c.body.mass=0,c.body.angle=Ht.b*u,c}return e=a,(n=[{key:"createShape",value:function(){return new o.Box({width:this.view.width/50,height:this.view.height/50})}},{key:"createView",value:function(){var t=new w.a(v.Texture.WHITE);return t.anchor.set(.5),t.tint=0,t.visible=!1,t.alpha=0,t}},{key:"isObstacle",value:function(){return!1}},{key:"correctType",value:function(){return!1}},{key:"animateAndDestroy",value:function(){var t=this;x.a.killTweensOf(this.view.scale),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}}])&&zt(e.prototype,n),r&&zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Tt);function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=te(t);if(e){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(t,e){if(e&&("object"===Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$t(t,e)}(i,t);var e,n,r,o=Qt(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var e=new v.Graphics;return e.beginFill(16711680,1),e.drawCircle(0,0,70),t.addChild(e),t.scale.set(0,0),t.animate(),t}return e=i,(n=[{key:"animate",value:function(){var t=this;x.a.to(this.scale,{x:1.5,y:1.5,duration:.3,onComplete:function(){t.destroy()}}),x.a.to(this,{alpha:0,delay:.12,duration:.18})}}])&&qt(e.prototype,n),r&&qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=se(t);if(e){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){if(e&&("object"===ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ce(t)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ie(t,e)}(c,t);var e,n,r,i,a,u=ae(c);function c(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),le(ce(i=u.call(this,300)),"rocket",!0),le(ce(i),"startX",void 0),le(ce(i),"startY",void 0),le(ce(i),"endX",void 0),le(ce(i),"endY",void 0),i.startX=t,i.startY=e,i.endX=n,i.endY=r,i.position.set(t,e),t!==n&&(i.view.angle=90),i.createBody(o.Body.DYNAMIC),i}return e=c,(n=[{key:"createShape",value:function(){var t=new o.Box({width:4,height:4});return t.sensor=!0,t}},{key:"createView",value:function(){return new v.Sprite(v.Texture.from("powerup_rocket.png"))}},{key:"animate",value:(i=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n={x:e.startX,y:e.startY};x.a.to(n,{x:e.endX,y:e.endY,duration:1,ease:k.b.easeIn,onComplete:function(){e.clean(),t()},onUpdate:function(){e.body.position=[n.x/50,n.y/50]}})})));case 1:case"end":return t.stop()}}),t)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){re(o,n,r,a,u,"next",t)}function u(t){re(o,n,r,a,u,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&oe(e.prototype,n),r&&oe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(Tt);function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function de(){return(de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=be(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function be(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xe(t)););return t}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xe(t);if(e){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){if(e&&("object"===pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ge(t)}function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ve(t,e)}(i,t);var e,n,r,o=me(i);function i(t,e,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return he(this,i),ke(ge(r=o.call(this,t,e,n,a)),"delay",void 0),r}return e=i,(n=[{key:"resetDeathCounter",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0)}},{key:"startCountDeath",value:function(){var t=this;this.delay||(this.delay=x.a.delayedCall(4,(function(){t.delay=void 0,t.emit("gameover")})))}},{key:"destroyBody",value:function(t){this.resetDeathCounter(),this.off("gameover"),de(xe(i.prototype),"destroyBody",this).call(this,t)}},{key:"createView",value:function(){return new v.Sprite(v.Texture.from("hero.png"))}},{key:"getRadius",value:function(){return 50}}])&&ye(e.prototype,n),r&&ye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Wt);function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ce(t);if(e){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(t,e){if(e&&("object"===Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Be(t)}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Re(t,e)}(i,t);var e,n,r,o=je(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),_e(Be(t=o.call(this,"","")),"_id",void 0),_e(Be(t),"icon",void 0),t}return e=i,(n=[{key:"id",get:function(){return this._id}},{key:"setData",value:function(t,e,n){this._id=t,this.normalTexture=e,this.downTexture=n,this.btn.texture=this.normalTexture,this.scale.set(.6,.6)}}])&&Se(e.prototype,n),r&&Se(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(wt);function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fe(t);if(e){var o=Fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(t,e){if(e&&("object"===Me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ne(t)}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&De(t,e)}(i,t);var e,n,r,o=Le(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),We(Ne(t=o.call(this)),"bar",void 0),We(Ne(t),"barMask",void 0),We(Ne(t),"initialWidth",600),We(Ne(t),"isFrozen",void 0),We(Ne(t),"delay",void 0),We(Ne(t),"bell",void 0);var e=new v.NineSlicePlane(v.Texture.from("progress_back.png"),6,4,6,4);return e.width=t.initialWidth,e.height=15,t.addChild(e),t.bar=new v.NineSlicePlane(v.Texture.from("progress_bar.png"),6,4,6,4),t.bar.width=t.initialWidth,t.bar.height=15,t.addChild(t.bar),t.barMask=new v.Sprite(v.Texture.WHITE),t.barMask.width=0,t.barMask.height=t.bar.height,t.addChild(t.barMask),t.bar.mask=t.barMask,t.bell=new v.AnimatedSprite([v.Texture.from("bell0.png"),v.Texture.from("bell1.png")],!0),t.bell.animationSpeed=.1,t.bell.anchor.set(.5,.5),t.bell.position.set(440,21),t.addChild(t.bell),t.bell.loop=!0,t.bell.visible=!1,t}return e=i,(n=[{key:"setProgress",value:function(t){var e=this;this.barMask.width=this.initialWidth*t,1===t&&(this.bell.play(),x.a.delayedCall(2,(function(){e.bell.gotoAndStop(0)})))}},{key:"unFreeze",value:function(){this.isFrozen=!1}},{key:"freeze",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.isFrozen=!0,this.delay&&this.delay.kill(),-1!==e&&(this.delay=x.a.delayedCall(e,(function(){t.isFrozen=!1})))}},{key:"clear",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0),this.isFrozen=!1}}])&&Ae(e.prototype,n),r&&Ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ye(t,e){return(Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xe(t);if(e){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(t,e){if(e&&("object"===Ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ke(t)}function Ke(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e)}(i,t);var e,n,r,o=Ge(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Je(Ke(t=o.call(this)),"bar",void 0),Je(Ke(t),"max",void 0),Je(Ke(t),"current",void 0),Je(Ke(t),"initialWidth",170),Je(Ke(t),"barMask",void 0),Je(Ke(t),"barBorder",void 0),Je(Ke(t),"barShine",void 0);var e=v.Sprite.from(v.Texture.from("battery_empty.png"));return t.addChild(e),t.bar=v.Sprite.from(v.Texture.from("battery_full.png")),t.addChild(t.bar),t.barMask=new v.Sprite(v.Texture.WHITE),t.barMask.width=0,t.barMask.height=t.bar.height,t.barMask.x=27,t.addChild(t.barMask),t.barBorder=v.Sprite.from(v.Texture.from("battery_border.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.barShine=new v.AnimatedSprite([v.Texture.from("battery_charging0.png"),v.Texture.from("battery_charging1.png"),v.Texture.from("battery_charging2.png"),v.Texture.from("battery_charging1.png")]),t.addChild(t.barShine),t.barShine.animationSpeed=.3,t.barShine.visible=!1,t.bar.mask=t.barMask,t.current=0,t.max=10,t}return e=i,(n=[{key:"maximum",set:function(t){this.max=t}},{key:"reset",value:function(){x.a.killTweensOf(this.barMask),this.current=0,x.a.to(this.barMask,{width:0,duration:.1}),this.barBorder.visible=!1}},{key:"update",value:function(t){var e=this;if(t<2)return!1;this.current+=t,this.current=Math.min(this.current,this.max),this.barShine.visible=!0,this.barShine.gotoAndPlay(0);var n=this.current>=this.max,r=this.current/this.max;return this.barBorder.visible=r>.05&&r<.9,x.a.killTweensOf(this.barMask),x.a.to(this.barMask,{width:this.initialWidth*r,duration:.2}),x.a.to(this.barBorder,{x:this.barMask.x+this.initialWidth*r,duration:.2,onComplete:function(){e.barShine.visible=!1,e.barShine.stop()}}),n&&(this.barShine.visible=!1,this.barShine.stop(),this.current=0,x.a.to(this.barMask,{width:0,delay:.2,duration:.2}),x.a.to(this.barBorder,{x:this.barMask.x,duration:.2,onUpdate:function(){e.barBorder.visible=r>.05&&r<.9}})),n}}])&&ze(e.prototype,n),r&&ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rn(t);if(e){var o=rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(t,e){if(e&&("object"===$e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nn(t)}function nn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var an=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ze(t,e)}(i,t);var e,n,r,o=tn(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),on(nn(t=o.call(this)),"back",void 0),on(nn(t),"blocks",void 0),on(nn(t),"startX",void 0),on(nn(t),"startY",void 0),on(nn(t),"txt",void 0),t.blocks=[],t.back=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50),t.back.width=.96*N.originalWidth,t.back.height=300,t.back.position.set(.5*-t.back.width,0),t.addChild(t.back),t.txt=new v.Text("From: Leopold",{fontSize:25,fill:0,fontWeight:"bold",align:"left"}),t.txt.anchor.set(0,.5),t.txt.position.set(.5*-t.back.width+40,30),t.addChild(t.txt),t.clear(),t}return e=i,(n=[{key:"setLines",value:function(t,e){this.txt.text="From: "+e;var n=t.length;this.back.height=75*n+70,this.startX=-300,this.startY=95;for(var r=0;r<n;r++){for(var o=this.startX,i=0;i<t[r].length;i++){var a=new Wt(o,this.startY,t[r][i],!1);this.addBlock(a),o+=74}this.startY+=70}}},{key:"addBlock",value:function(t){this.blocks.push(t),this.addChild(t),t.visible=!1}},{key:"show",value:function(){this.blocks.forEach((function(t){t.visible=!0}))}},{key:"clear",value:function(){var t=this;this.blocks.forEach((function(e){t.removeChild(e)})),this.blocks=[]}}])&&Qe(e.prototype,n),r&&Qe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hn(t);if(e){var o=hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fn(this,n)}}function fn(t,e){if(e&&("object"===un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pn(t)}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}(i,t);var e,n,r,o=ln(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=pn(t),r=void 0,(n="txt")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);return a.width=140,a.height=140,a.pivot.set(70,70),t.addChild(a),t.txt=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:60,fill:0,align:"center",fontWeight:"bold"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"letter",set:function(t){" "===t&&(t="_"),this.txt.text=t}}])&&cn(e.prototype,n),r&&cn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mn(t,e){return(mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kn(t);if(e){var o=kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gn(this,n)}}function gn(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xn(t)}function xn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function On(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mn(t,e)}(u,t);var e,n,r,o,i,a=wn(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),On(xn(t=a.call(this)),"bound",new v.Rectangle),On(xn(t),"back",void 0),On(xn(t),"letters",void 0),On(xn(t),"getPoint",void 0),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.addChild(t.back);var e=t.getLetters();t.letters=[];for(var n=0;n<e.length;n++){var r=new yn;r.visible=!1,t.addChild(r),t.letters.push(r)}return t}return e=u,(n=[{key:"start",value:(o=regeneratorRuntime.mark((function t(e){var n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.getPoint=e,this.visible=!0,this.back.alpha=0,n=this.getLetters(),r=[],o=0,i=0;i<n.length;i++)o++," "===n[i]&&(r.push(o),o=0);return 0===r.length?r.push(n.length):r.push(o),t.abrupt("return",new Promise((function(t){x.a.to(a.back,{alpha:.7,duration:1});for(var e=0,o=-30,i=r[e],u=60/(i-1),c=100*i,s=.5*-c,l=c/(i-1),f=-400,p=[],h=0;h<n.length;h++){var y=a.letters.pop();p.push(y),y.visible=!0,y.letter=n[h],y.position.set(-400,700),y.scale.set(.1,.1),y.angle=o-30,x.a.to(y,{angle:o,x:s,y:f,delay:.1*h,duration:.5}),x.a.to(y.scale,{x:1,y:1,delay:.1*h,duration:.5})," "===n[h]?(e++,o=-30,u=60/((i=r[e])-1),s=.5*-(c=100*i),f+=140,l=c/(i-1)):(o+=u,s+=l)}x.a.to(a.back,{alpha:0,delay:1.2,duration:.5}),x.a.delayedCall(1+.1*(n.length-1),(function(){a.animate(p).then((function(){t()}))}))})));case 9:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){bn(i,n,r,a,u,"next",t)}function u(t){bn(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"clean",value:function(){this.getPoint=void 0,x.a.killTweensOf(this.back)}},{key:"goOut",value:function(){}}])&&vn(e.prototype,n),r&&vn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(){return(Tn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Bn(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Bn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=An(t)););return t}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=An(t);if(e){var o=An(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){if(e&&("object"===Sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mn(t)}function Mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ln=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cn(t,e)}(i,t);var e,n,r,o=_n(i);function i(){var t;Rn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Dn(Mn(t=o.call.apply(o,[this].concat(n))),"points",[]),t}return e=i,(n=[{key:"activeBound",get:function(){if(this.points.length>0){for(var t=[],e=0;e<this.points.length;e++){var n=this.points[e];t.push(new v.Rectangle(n[0]-1,n[1]-1,2,2))}return this.points=[],t}}},{key:"clean",value:function(){this.points=[],Tn(An(i.prototype),"clean",this).call(this)}},{key:"getLetters",value:function(){return["B","O","O","M"," ","B","O","N","U","S"]}},{key:"animate",value:function(t){var e=this;return this.points=[],new Promise((function(n){if(e.getPoint){for(var r=function(n){var r=e.getPoint();if(!r)return"continue";x.a.to(t[n].scale,{x:0,y:0,duration:.2}),x.a.to(t[n],{x:50*r[0],y:50*r[1],duration:.2,onComplete:function(){e.points.push(r)}})},o=0;o<t.length;o++)r(o);x.a.delayedCall(.25,(function(){n()}))}else n()}))}}])&&jn(e.prototype,n),r&&jn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Pn);function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fn(t,e){return(Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zn(t);if(e){var o=zn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){if(e&&("object"===In(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Un(t)}function Un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zn(t){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fn(t,e)}(i,t);var e,n,r,o=Wn(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Yn(Un(t=o.call(this)),"scoreTxt",void 0),Yn(Un(t),"scoreNumber",void 0);var e=v.Sprite.from(v.Texture.from("score_place.png"));return t.addChild(e),t.scoreNumber=0,t.scoreTxt=new v.Text(t.scoreFormatted(0),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:16777215,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.position.set(.5*e.width,.5*e.height),t.addChild(t.scoreTxt),t}return e=i,(n=[{key:"score",set:function(t){var e=this,n={score:this.scoreNumber};this.scoreTxt.text=this.scoreFormatted(this.scoreNumber),x.a.to(n,{score:t,duration:.1,ease:k.f.easeNone,onUpdate:function(){e.scoreTxt.text=e.scoreFormatted(Math.floor(n.score))}}),this.scoreNumber=t}},{key:"scoreFormatted",value:function(t){for(var e=t.toString(),n=6-e.length,r=0;r<n;r++)e="0"+e;return e}}])&&Nn(e.prototype,n),r&&Nn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$n(t);if(e){var o=$n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){if(e&&("object"===Vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xn(t,e)}(i,t);var e,n,r,o=Jn(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"pause_button.png","pause_button.png")}return e=i,n&&Kn(e.prototype,n),r&&Kn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(wt);function Zn(t){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ir(t);if(e){var o=ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){if(e&&("object"===Zn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return or(t)}function or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ur=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&er(t,e)}(i,t);var e,n,r,o=nr(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ar(or(t=o.call(this)),"rect",void 0),ar(or(t),"laser",void 0),t.laser=v.Sprite.from(v.Texture.WHITE),t.laser.width=500,t.laser.height=10,t.laser.tint=5085951,t.laser.alpha=0,t.laser.anchor.set(.5,.5),t.addChild(t.laser),t.laser.visible=!1,t}return e=i,(n=[{key:"activeBound",get:function(){if(this.rect)return[this.rect]}},{key:"getLetters",value:function(){return["{","}"]}},{key:"animate",value:function(t){var e=this;return new Promise((function(n){if(e.getPoint||2!==t.length){var r=e.getPoint();x.a.to(t[0],{x:-300,angle:0,y:50*r,duration:.2}),x.a.to(t[1],{x:300,angle:0,y:50*r,duration:.2}),x.a.delayedCall(.2,(function(){e.laser.visible=!0,e.laser.y=50*r,e.rect=new v.Rectangle(-7,r-.5,14,1),x.a.to(e.laser,{alpha:.6,duration:.1}),x.a.delayedCall(.1,(function(){e.rect=void 0,x.a.to(t[0],{alpha:0,duration:.1}),x.a.to(t[1],{alpha:0,duration:.1}),x.a.to(e.laser,{alpha:0,duration:.1}),x.a.delayedCall(.1,(function(){n()}))}))}))}else n()}))}}])&&tr(e.prototype,n),r&&tr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Pn);function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yr(t);if(e){var o=yr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hr(this,n)}}function hr(t,e){if(e&&("object"===cr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fr(t,e)}(i,t);var e,n,r,o=pr(i);function i(){return sr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"getLetters",value:function(){return["S","U","P","E","R"," ","P","U","P","E","R"," ","B","O","O","M"]}}])&&lr(e.prototype,n),r&&lr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ln);function br(t){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xr(this,n)}}function xr(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wr(t,e)}(i,t);var e,n,r,o=gr(i);function i(){return vr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"isObstacle",value:function(){return!0}}])&&mr(e.prototype,n),r&&mr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Xt);function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rr(t,e){return(Rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Br(t);if(e){var o=Br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tr(this,n)}}function Tr(t,e){if(e&&("object"===Pr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rr(t,e)}(a,t);var e,n,r,i=jr(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t[0],t[1],100,100,0)).view.scale.set(1,1),e.type=250,e}return e=a,(n=[{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("app_static.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new o.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&Sr(e.prototype,n),r&&Sr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Or);function _r(t){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dr(this,n)}}function Dr(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lr(t)}function Lr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fr,Wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mr(t,e)}(a,t);var e,n,r,i=Ar(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Nr(Lr(n=i.call(this,t[0],t[1],100,100,0)),"moving",!1),Nr(Lr(n),"lives",void 0),Nr(Lr(n),"txt",void 0),n.type=251,n.lives=e,n.txt=new v.Text(n.lives.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),n.txt.anchor.set(.5,.5),n.txt.y=20,n.view.addChild(n.txt),n.view.scale.set(1,1),n}return e=a,(n=[{key:"changePosition",value:function(){var t=this;if(!this.moving){this.lives--;var e=this.lives<=0;this.moving=!0;var n=this.view.scale.x;x.a.to(this.view.scale,{x:.01,y:.01,duration:.1,onUpdate:function(){t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),t.body.updateBoundingRadius(),t.body.updateMassProperties()},onComplete:function(){if(e)t.clean();else{t.txt.text=t.lives.toString();var r=9*Math.random()-4.5,o=5*-Math.random();t.body.position=[r,o],x.a.to(t.view.scale,{x:n,y:n,duration:.4,onUpdate:function(){t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),t.body.updateBoundingRadius(),t.body.updateMassProperties()},onComplete:function(){t.moving=!1}})}}})}}},{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("app_random.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new o.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&Er(e.prototype,n),r&&Er(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Or);function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||zr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t,e){if(t){if("string"==typeof t)return Yr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yr(t,e):void 0}}function Yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vr(t,e){return(Vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qr(t);if(e){var o=qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xr(this,n)}}function Xr(t,e){if(e&&("object"===Hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jr(t)}function Jr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.Begin="begin",t.Moving="moving",t.Heart="heart",t.NewLine="newLine",t.Recharge="recharge",t.Unbreak="unbreak",t.IAPBonus="iapbonus",t.IAPBonus2="iapbonus2",t.ChangePosition="changed"}(Fr||(Fr={}));var Qr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vr(t,e)}(i,t);var e,n,r,o=Kr(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),$r(Jr(t=o.call(this)),"allConditions",void 0),$r(Jr(t),"textMap",void 0),$r(Jr(t),"tutorial",void 0),$r(Jr(t),"txt",void 0),$r(Jr(t),"back",void 0),t.allConditions=new Map,t.textMap=new Map,t.textMap.set(Fr.Begin,"Save the Heart by moving it to the top!"),t.textMap.set(Fr.Moving,"Tap the screen and move your finger to aim. Release to shoot."),t.textMap.set(Fr.Heart,"The Heart is free and happy now!"),t.textMap.set(Fr.NewLine,"It's time for a new emoji load!"),t.textMap.set(Fr.Recharge,"Charge it fully to get a bonus!"),t.textMap.set(Fr.Unbreak,"This app is invincible!"),t.textMap.set(Fr.IAPBonus,"but this bonuses will help you."),t.textMap.set(Fr.IAPBonus2,"and this one too!"),t.textMap.set(Fr.ChangePosition,"This app should be destroyed! Aim to it!"),t.back=v.Sprite.from(v.Texture.WHITE),t.back.interactive=!0,t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.addChild(t.back),t.back.position.set(.5*-t.back.width,.5*-t.back.height),t.back.tint=0,t.back.alpha=.3,t.tutorial=new v.NineSlicePlane(v.Texture.from("tutorial.png"),52,52,90,93),t.addChild(t.tutorial),t.txt=new v.Text("",{fontSize:50,fontWeight:"bold",fill:16777215,wordWrap:!0,wordWrapWidth:300}),t.addChild(t.txt),t.visible=!1,t}return e=i,(n=[{key:"addCondition",value:function(t,e){this.allConditions.set(t,e)}},{key:"update",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=zr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.allConditions);try{for(e.s();!(t=e.n()).done;){var n=Ur(t.value,2),r=n[0],o=(0,n[1])();if(o.success){this.show(r,o.data),this.allConditions.delete(r);break}}}catch(t){e.e(t)}finally{e.f()}}},{key:"isDone",value:function(t){return void 0===this.allConditions.get(t)}},{key:"show",value:function(t,e){var n=this,r=this.textMap.get(t);this.txt.text=r,this.tutorial.scale.set(1,1),this.tutorial.pivot.set(this.txt.width+100,this.txt.height+100),this.tutorial.width=this.txt.width+100,this.tutorial.height=this.txt.height+100,this.tutorial.scale.set(0,0);var o={x:1,y:1},i=e.pos,a=e.scale;o.x*=a.x,o.y*=a.y,this.tutorial.position.copyFrom(i),this.txt.position.copyFrom(i),1===a.x?this.txt.x-=60+this.txt.width:this.txt.x+=60,1===a.y?this.txt.y-=60+this.txt.height:this.txt.y+=52,this.txt.scale.set(0,0),this.back.alpha=0,x.a.to(this.back,{alpha:.3,duration:.3}),x.a.to(this.tutorial.scale,{x:o.x,y:o.y,duration:.3}),x.a.to(this.txt.scale,{x:1,y:1,duration:.3}),this.visible=!0,Ki(!0,!0),window.setTimeout((function(){Ki(!1,!0),x.a.globalTimeline.pause(),N.paused=!0,n.back.on("pointerup",(function(t){t.stopPropagation(),t.stopped=!0,n.hide()}))}),400)}},{key:"hide",value:function(){var t=this;x.a.to(this,{alpha:0,duration:.3,onComplete:function(){t.visible=!1,t.alpha=1}}),N.paused=!1,x.a.globalTimeline.resume(),this.back.off("pointerup")}}])&&Gr(e.prototype,n),r&&Gr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Zr(t){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t,e){return(eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function no(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=io(t);if(e){var o=io(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ro(this,n)}}function ro(t,e){if(e&&("object"===Zr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oo(t)}function oo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ao(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e)}(i,t);var e,n,r,o=no(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ao(oo(t=o.call(this)),"back",void 0),ao(oo(t),"popup",void 0),ao(oo(t),"callback",void 0),ao(oo(t),"scoreTxt",void 0),ao(oo(t),"stars",void 0),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.back.tint=0,t.back.alpha=0,t.addChild(t.back),t.popup=new v.Container,t.popup.scale.set(0,0),t.addChild(t.popup);var e=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);e.pivot.set(300,400),e.width=600,e.height=800,t.popup.addChild(e);var n=new v.Text("Well done!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});n.anchor.set(.5,.5),n.position.y=-340,t.popup.addChild(n),t.scoreTxt=new v.Text("0",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:120,fill:0,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.y=40,t.popup.addChild(t.scoreTxt),t.stars=[];for(var r=-120,a=0;a<3;a++){var u=v.Sprite.from(v.Texture.from("like.png"));u.anchor.set(.5,.5),u.position.set(r,-150),t.popup.addChild(u),t.stars.push(u),u.visible=!1,r+=120}t.popup.addChild(t.stars[1]);var c=new wt("ok_button.png","ok_button.png");return c.on("pointerup",(function(){t.hide()})),c.position.y=300,t.popup.addChild(c),t}return e=i,(n=[{key:"show",value:function(t,e,n){for(var r=this,o=0;o<this.stars.length;o++){var i=this.stars[o];i.visible=!0,i.scale.set(0,0),i.showed=!1}this.callback=n,this.visible=!0,this.back.alpha=0,this.popup.scale.set(0,0);var a={s:0};this.scoreTxt.text="0",x.a.to(a,{s:t,delay:1,duration:2,onUpdate:function(){r.scoreTxt.text=Math.round(a.s).toString();for(var t=0;t<e.length;t++){var n=r.stars[t];if(a.s>=e[t]&&!n.showed){n.showed=!0;var o=1===t?1.5:1;x.a.to(n.scale,{x:o,y:o,duration:.2,ease:k.a.easeOut})}}}}),x.a.to(this.back,{alpha:.5,duration:.5}),x.a.to(this.popup.scale,{x:1,y:1,duration:1,ease:k.a.easeOut})}},{key:"hide",value:function(){var t=this;x.a.to(this.back,{alpha:0,duration:.2}),x.a.to(this.popup.scale,{x:0,y:0,duration:.2,onComplete:function(){t.visible=!1,t.callback()}})}}])&&to(e.prototype,n),r&&to(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lo(t,e){return(lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yo(t);if(e){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(t,e){if(e&&("object"===co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ho(t)}function ho(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yo(t){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e)}(i,t);var e,n,r,o=fo(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),bo(ho(t=o.call(this)),"iconL0",void 0),bo(ho(t),"iconR0",void 0),bo(ho(t),"iconL1",void 0),bo(ho(t),"iconR1",void 0);var e=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);e.tint=0,e.width=370,e.height=250,e.pivot.set(185,100),t.addChild(e),e.y=-50;var n=new v.Text("level powerups:",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:35,fill:16777215,align:"center",fontWeight:"bold"});n.anchor.set(.5,.5),n.position.set(0,-115),t.addChild(n);var r=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);r.pivot.set(80,80),r.width=160,r.height=160,t.addChild(r);var a=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);a.pivot.set(80,80),a.width=160,a.height=160,t.addChild(a),r.position.set(-85,0),a.position.set(85,0);var u=new v.Container,c=new v.Container;t.addChild(u),t.addChild(c),u.position.x=-85,c.position.x=85;var s=v.Sprite.from(v.Texture.WHITE);s.anchor.set(0,.5),s.width=140,s.height=140,t.addChild(s);var l=v.Sprite.from(v.Texture.WHITE);return l.anchor.set(0,.5),l.width=140,l.height=140,t.addChild(l),s.position.x=-145,l.position.x=5,u.mask=s,c.mask=l,t.iconL0=v.Sprite.from(i.randomTexture),t.iconL0.anchor.set(.5,.5),t.iconL0.scale.set(.5,.5),u.addChild(t.iconL0),t.iconR0=v.Sprite.from(i.randomTexture),t.iconR0.anchor.set(.5,.5),t.iconR0.scale.set(.5,.5),c.addChild(t.iconR0),t.iconL1=v.Sprite.from(i.randomTexture),t.iconL1.anchor.set(.5,.5),t.iconL1.scale.set(.5,.5),u.addChild(t.iconL1),t.iconL1.y=140,t.iconR1=v.Sprite.from(i.randomTexture),t.iconR1.anchor.set(.5,.5),t.iconR1.scale.set(.5,.5),c.addChild(t.iconR1),t.iconR1.y=140,t}return e=i,r=[{key:"prepareTextures",value:function(){this.allTextures=new Map,this.allTextures.set(jo.RocketUp,v.Texture.from("powerup_rocket.png")),this.allTextures.set(jo.Kill,v.Texture.from("powerup_bomb.png")),this.allTextures.set(jo.Freeze,v.Texture.from("powerup_freeze.png"))}},{key:"getTexture",value:function(t){return this.allTextures.get(t)}},{key:"randomTexture",get:function(){var t=Array.from(this.allTextures.keys()),e=t[Math.floor(Math.random()*t.length)];return this.getTexture(e)}}],(n=[{key:"start",value:function(t){var e=this;x.a.to({a:0},{a:1,duration:2,onUpdate:function(){if(e.iconL0.y>=140){e.iconL0.texture=i.randomTexture,e.iconR0.texture=i.randomTexture;var t=e.iconL0;e.iconL0=e.iconL1,e.iconL1=t,t=e.iconR0,e.iconR0=e.iconR1,e.iconR1=t,e.iconL0.y=0,e.iconR0.y=0}e.iconL0.y+=10,e.iconR0.y+=10,e.iconL1.y=e.iconL0.y-140,e.iconR1.y=e.iconR0.y-140},onComplete:function(){e.iconL0.y=0,e.iconR0.y=0,e.iconR1.y=140,e.iconL1.y=140,e.iconL0.texture=i.getTexture(t[0]),e.iconR0.texture=i.getTexture(t[1])}})}}])&&so(e.prototype,n),r&&so(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xo(t,e){return(xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ko(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=So(t);if(e){var o=So(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oo(this,n)}}function Oo(t,e){if(e&&("object"===mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Po(t)}function Po(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ro(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}bo(vo,"allTextures",void 0);var jo,To,Bo,Co=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}(u,t);var e,n,r,o,i,a=ko(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Ro(Po(t=a.call(this)),"texts",void 0),Ro(Po(t),"usingTexts",void 0),Ro(Po(t),"back",void 0),Ro(Po(t),"wheelbox",void 0),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.back.alpha=0,t.addChild(t.back),t.texts=[],t.usingTexts=[];for(var e=0;e<4;e++){var n=t.getNewText();t.texts.push(n)}return t.wheelbox=new vo,t.addChild(t.wheelbox),t.visible=!1,t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r.visible=!0,r.back.alpha=0,r.wheelbox.position.y=1e3;var o=n&&n.length>0?5:3;x.a.to(r.back,{alpha:.7,duration:.5});for(var i=e.name.split(" "),a=-70*i.length/2-100,u=function(t){var e=i[t],n=void 0;(n=r.texts.length>0?r.texts.pop():r.getNewText()).alpha=1,n.visible=!0,n.text=e,r.addChild(n),r.usingTexts.push(n),n.y=a,n.x=t%2?-500-n.width/2:500+n.width/2,x.a.to(n,{x:0,duration:1,ease:k.d.easeOut}),x.a.to(n,{alpha:0,delay:o-1,duration:.5,onComplete:function(){r.texts.push(n)}}),a+=70},c=0;c<i.length;c++)u(c);x.a.to(r.back,{alpha:0,delay:o-1,duration:.5}),n&&n.length>0&&(r.wheelbox.visible=!0,r.wheelbox.alpha=1,x.a.to(r.wheelbox,{y:a+120,delay:1,duration:.5,ease:k.d.easeOut,onComplete:function(){r.wheelbox.start(n)}}),x.a.to(r.wheelbox,{alpha:0,delay:o-1,duration:.5})),x.a.delayedCall(o,(function(){r.usingTexts=[],r.visible=!1,t()}))})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){wo(i,n,r,a,u,"next",t)}function u(t){wo(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"getNewText",value:function(){var t=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:0,align:"center",fontWeight:"bold"});return t.anchor.set(.5,.5),t}}])&&go(e.prototype,n),r&&go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eo(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Mo(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Eo(i,r,o,a,u,"next",t)}function u(t){Eo(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ao(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Do(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lo(t,e){return(Lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wo(t);if(e){var o=Wo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return No(this,n)}}function No(t,e){if(e&&("object"===_o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fo(t)}function Fo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ho(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.Kill=1]="Kill",t[t.Freeze=2]="Freeze",t[t.RocketUp=3]="RocketUp"}(jo||(jo={})),function(t){t[t.None=0]="None",t[t.BoomLetters=1]="BoomLetters",t[t.LaserLetters=2]="LaserLetters",t[t.BigBoomLetters=3]="BigBoomLetters",t[t.All=4]="All"}(To||(To={})),function(t){t[t.None=0]="None",t[t.Random=1]="Random",t[t.Static=2]="Static"}(Bo||(Bo={}));var Uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lo(t,e)}(w,t);var e,n,r,i,a,u,c,s,l,f,p,h,y,d,b,m=Io(w);function w(){var t;Ao(this,w);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ho(Fo(t=m.call.apply(m,[this].concat(n))),"gameContainer",void 0),Ho(Fo(t),"frontContainer",void 0),Ho(Fo(t),"backContainer",void 0),Ho(Fo(t),"moveBox",void 0),Ho(Fo(t),"staticBox",void 0),Ho(Fo(t),"bottomOpenWall",void 0),Ho(Fo(t),"activeBlock",void 0),Ho(Fo(t),"maxY",void 0),Ho(Fo(t),"tick",0),Ho(Fo(t),"moving",void 0),Ho(Fo(t),"isActivePowerup",void 0),Ho(Fo(t),"preview",void 0),Ho(Fo(t),"preview2",void 0),Ho(Fo(t),"mousePressed",void 0),Ho(Fo(t),"nextLines",void 0),Ho(Fo(t),"previewBlocks",void 0),Ho(Fo(t),"nextType",void 0),Ho(Fo(t),"nextBlock",void 0),Ho(Fo(t),"isTransition",void 0),Ho(Fo(t),"powerup1",void 0),Ho(Fo(t),"powerup2",void 0),Ho(Fo(t),"nextTimer",void 0),Ho(Fo(t),"randomBodiesPositions",void 0),Ho(Fo(t),"activeBonus",void 0),Ho(Fo(t),"boomMeter",void 0),Ho(Fo(t),"scorePlace",void 0),Ho(Fo(t),"pad",void 0),Ho(Fo(t),"padRect",void 0),Ho(Fo(t),"downRect",void 0),Ho(Fo(t),"topRect",void 0),Ho(Fo(t),"levelId",void 0),Ho(Fo(t),"meterBonus",void 0),Ho(Fo(t),"obstacles",void 0),Ho(Fo(t),"score",void 0),Ho(Fo(t),"tutorial",void 0),Ho(Fo(t),"goalBlock",void 0),Ho(Fo(t),"boltsActive",void 0),Ho(Fo(t),"levelFinished",void 0),Ho(Fo(t),"levelStart",void 0),t}return e=w,(n=[{key:"create",value:function(){var t=this;vo.prepareTextures(),this.backContainer=new v.Container,this.addChild(this.backContainer),this.gameContainer=new v.Container,this.addChild(this.gameContainer),this.frontContainer=new v.Container,this.addChild(this.frontContainer),this.levelFinished=new uo,this.frontContainer.addChild(this.levelFinished),this.levelFinished.visible=!1,this.pad=new v.Sprite(v.Texture.from("launchpad.png")),this.pad.anchor.set(.5,1),this.pad.position.y=.5*N.originalHeight-30,this.gameContainer.addChild(this.pad);var e=new v.NineSlicePlane(v.Texture.from("phone.png"),104,100,104,100);e.width=N.originalWidth+50,e.height=N.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e);var n=new v.Container;n.position.set(0,.5*-N.originalHeight+40),this.gameContainer.addChild(n);var r=new Qn;r.position.set(-230,30),r.on("pointerup",(function(){D.start(li)})),n.addChild(r),this.powerup1=new Ee,this.powerup1.position.set(-255,620),this.gameContainer.addChild(this.powerup1),this.powerup1.on("pointerup",(function(){t.startPowerup(t.powerup1.id)})),this.powerup2=new Ee,this.powerup2.position.set(255,620),this.gameContainer.addChild(this.powerup2),this.powerup2.on("pointerup",(function(){t.startPowerup(t.powerup2.id)})),this.powerup1.visible=!1,this.powerup2.visible=!1,this.preview=v.Sprite.from(v.Texture.from("direction.png")),this.preview.anchor.set(.5,1),this.gameContainer.addChild(this.preview),this.preview.height=1200,this.preview.visible=!1,this.preview2=v.Sprite.from(v.Texture.from("direction.png")),this.preview2.anchor.set(.5,1),this.gameContainer.addChild(this.preview2),this.preview2.height=600,this.preview2.alpha=.8,this.preview2.visible=!1,this.previewBlocks=new an,this.gameContainer.addChild(this.previewBlocks),this.previewBlocks.y=-900-this.previewBlocks.height;var o=new v.NineSlicePlane(v.Texture.from("progress_bar.png"),6,4,6,4);o.width=600,o.height=15,o.position.set(-300,500),this.gameContainer.addChild(o),this.nextTimer=new He,this.nextTimer.position.set(-300,-610),this.gameContainer.addChild(this.nextTimer),this.boomMeter=new qe,this.boomMeter.position.set(165,-725),this.boomMeter.scale.set(.85,.85),this.gameContainer.addChild(this.boomMeter),this.scorePlace=new Gn,this.scorePlace.position.set(-150,-725),this.gameContainer.addChild(this.scorePlace),this.padRect=new v.Rectangle(-140,610,280,150),this.downRect=new v.Rectangle(-400,500,800,300),this.topRect=new v.Rectangle(.5*-N.originalWidth,.5*-N.originalHeight,N.originalWidth,180),this.tutorial=new Qr,this.frontContainer.addChild(this.tutorial),this.levelStart=new Co,this.frontContainer.addChild(this.levelStart),this.tutorial.addCondition(Fr.Begin,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible&&(null==n?void 0:n.y)<-100,data:{pos:n,scale:{x:(null==n?void 0:n.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Fr.Moving,(function(){return{success:t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible,data:{pos:{x:40,y:0},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Fr.Heart,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.isTransition,data:{pos:n,scale:{x:(null==n?void 0:n.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Fr.NewLine,(function(){return{success:t.moving,data:{pos:{x:290,y:-550},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Fr.Recharge,(function(){return{success:t.boltsActive,data:{pos:{x:300,y:-650},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Fr.Unbreak,(function(){return{success:t.bottomOpenWall&&t.powerup1.visible&&3===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Fr.IAPBonus,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Fr.Unbreak)&&t.bottomOpenWall&&t.powerup1.visible&&3===t.levelId&&1===t.obstacles.length,data:{pos:{x:-255,y:620},scale:{x:-1,y:1}}}})),this.tutorial.addCondition(Fr.IAPBonus2,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Fr.IAPBonus)&&t.bottomOpenWall&&t.powerup1.visible&&3===t.levelId&&1===t.obstacles.length,data:{pos:{x:255,y:620},scale:{x:1,y:1}}}})),this.tutorial.addCondition(Fr.ChangePosition,(function(){return{success:t.bottomOpenWall&&t.powerup1.visible&&4===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}}))}},{key:"start",value:(b=Mo(regeneratorRuntime.mark((function t(){var e,n,r,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(et(),this.boltsActive=!1,this.score=0,this.scorePlace.score=0,e=i.length,n=new Array(e),r=0;r<e;r++)n[r]=i[r];return this.levelId=n[0][0],this.activeBonus=To.None,this.randomBodiesPositions=[],this.obstacles=[],this.isTransition=!1,this.nextType=void 0,this.nextLines=[],this.isActivePowerup=!1,this.generateLineBlocks(),this.tick=0,this.maxY=-800,this.moving=!1,ea("start","game","level"),Zi(zi.Start),N.paused=!1,t.next=22,this.generateStartBlocks();case 22:return o=this.generateIAPS(),t.next=25,this.levelStart.show(this.currentLevelData,o);case 25:this.currentLevelData.iaps&&(this.powerup1.setData(o[0],vo.getTexture(o[0]),vo.getTexture(o[0])),this.powerup2.setData(o[1],vo.getTexture(o[1]),vo.getTexture(o[1])),this.powerup1.visible=!0,this.powerup2.visible=!0),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.addActiveBlock(),_.stage.on("pointerup",this.onClick,this),_.stage.on("pointerdown",this.onTapStart,this);case 30:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"generateIAPS",value:function(){if(this.currentLevelData.iaps){for(var t=[jo.Kill,jo.RocketUp,jo.Freeze],e=[],n=0;n<2;n++){var r=Math.floor(Math.random()*t.length);e.push(t[r]),t.splice(r,1)}return e}}},{key:"unusedBlocksRemoved",value:function(t,e){if(!this.isTransition){var n=5*t;if(t>=5&&e&&(this.fireMissle(1,e),n+=50),this.addScore(n),!this.activeBonus){var r=this.boomMeter.update(t);if(this.levelId>1&&this.playBolts(t,e),r){var o=this.getRandomBonus();this.setActiveBonus(o)}}}}},{key:"playBolts",value:(d=Mo(regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<2)&&n){t.next=2;break}return t.abrupt("return");case 2:this.boltsActive=!0,e=Math.min(e,6),r=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(4*Math.random()),(o=new v.Sprite(v.Texture.from("bolt".concat(r,".png")))).anchor.set(.5,.5),o.scale.set(.1,.1),o.rotation=Math.PI/2+Math.atan2(-680-n.y,270-n.x),o.position.copyFrom(n),i.gameContainer.addChild(o),x.a.to(o.scale,{x:1.5,y:1.5,duration:.25,ease:k.f.easeNone}),x.a.to(o.scale,{x:0,y:0,delay:.25,duration:.25,ease:k.f.easeNone}),x.a.to(o.position,{x:270,y:-680,duration:.5,ease:k.f.easeNone,onComplete:function(){i.gameContainer.removeChild(o)}}),t.next=12,i.delay(.1);case 12:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<e)){t.next=12;break}return t.delegateYield(r(o),"t0",9);case 9:o++,t.next=7;break;case 12:this.boltsActive=!1;case 13:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)})},{key:"addScore",value:function(t){this.score+=t,this.scorePlace.score=this.score}},{key:"currentLevelData",get:function(){return N.levels[this.levelId]}},{key:"getRandomPosition",value:function(){if(!this.isTransition){var t=Math.floor(Math.random()*this.randomBodiesPositions.length),e=this.randomBodiesPositions[t];if(this.randomBodiesPositions.splice(t,1),!(Math.abs(e[1])>=20))return e}}},{key:"setActiveBonus",value:(y=Mo(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.activeBonus=e,this.nextTimer.freeze(),this.addScore(100),n=void 0,t.t0=e,t.next=t.t0===To.BoomLetters||t.t0===To.BigBoomLetters?7:t.t0===To.LaserLetters?10:13;break;case 7:return this.meterBonus=e===To.BoomLetters?new Ln:new dr,n=function(){return r.getRandomPosition()},t.abrupt("break",14);case 10:return this.meterBonus=new ur,n=function(){var t=r.getRandomPosition();if(t)return t[1]},t.abrupt("break",14);case 13:return t.abrupt("return");case 14:return this.frontContainer.addChild(this.meterBonus),t.next=17,this.meterBonus.start(n);case 17:this.clearMeterBonus(!1),this.nextTimer.unFreeze();case 19:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"getRandomBonus",value:function(){var t=this.currentLevelData.bonuses;return t[Math.floor(Math.random()*t.length)]}},{key:"fireMissle",value:(h=Mo(regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isTransition){t.next=2;break}return t.abrupt("return");case 2:Ki(!0),e=Math.min(e,this.randomBodiesPositions.length),r=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i.getRandomPosition())&&!i.isTransition){t.next=3;break}return t.abrupt("return","continue");case 3:return(o=new v.Sprite(v.Texture.from("like.png"))).anchor.set(.5,.5),o.scale.set(.1,.1),o.position.copyFrom(n),i.gameContainer.addChild(o),x.a.to(o.scale,{x:1.5,y:1.5,duration:.5,ease:k.f.easeNone}),x.a.to(o.scale,{x:0,y:0,delay:.5,duration:.5,ease:k.f.easeNone}),x.a.to(o.position,{x:50*r[0],y:50*r[1],duration:1,ease:k.f.easeNone,onComplete:function(){i.createExplosion(o.position),Gi.push(r),i.gameContainer.removeChild(o)}}),t.next=13,i.delay(.2);case 13:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<e)){t.next=15;break}return t.delegateYield(r(o),"t0",9);case 9:if("continue"!==t.t0){t.next=12;break}return t.abrupt("continue",12);case 12:o++,t.next=7;break;case 15:x.a.delayedCall(.2,(function(){Ki(!1)}));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"createExplosion",value:function(t){var e=new ee;e.position.copyFrom(t),this.gameContainer.addChild(e)}},{key:"clearActiveBlocks",value:function(){this.nextBlock&&(this.pad.removeChild(this.nextBlock),this.nextBlock.clean()),this.activeBlock&&(this.gameContainer.removeChild(this.activeBlock),this.activeBlock.clean(),this.preview.visible=!1,this.preview2.visible=!1),this.activeBlock=void 0,this.nextBlock=void 0,this.nextType=void 0}},{key:"stopBonuses",value:function(){this.activeBonus=To.None,this.clearActiveBlocks()}},{key:"levelComplete",value:function(){this.stopBonuses(),this.isTransition=!0,this.moving=!1,this.previewBlocks&&this.previewBlocks.clear(),this.bottomOpenWall&&this.bottomOpenWall.animateAndDestroy(),this.bottomOpenWall=void 0,this.moveBox&&this.moveBox.animateAndDestroy(),this.staticBox&&this.staticBox.animateAndDestroy(),this.mousePressed=!1}},{key:"moveBalls",value:function(){var t=this;if(!this.isTransition){this.moving=!0;var e=this.nextLines.length,n=this.moveBox.body.position,r={x:n[0],y:n[1]};this.previewBlocks.show(),x.a.to(this.previewBlocks,{y:-570,duration:1.1}),x.a.to(r,{y:(70*e-500)/50,delay:.1,duration:1,ease:k.f.easeNone,onUpdate:function(){t.moveBox.body?t.moveBox.body.position=[r.x,r.y]:x.a.killTweensOf(r)},onComplete:function(){t.moveBox.body.position=[0,-11.5],t.addLineBlocks(),t.generateLineBlocks(),x.a.to(t.previewBlocks,{y:-900-t.previewBlocks.height,duration:.5}),t.moving=!1}})}}},{key:"update",value:function(t){var e=this;if(!N.paused){this.drawMouse();var n=this.meterBonus&&this.meterBonus.activeBound||void 0;this.maxY=-800;var r=!1,i=!1,a=void 0,u=[];if(this.randomBodiesPositions=[],C.bodies.forEach((function(t){var c=t.position;t.type===o.Body.KINEMATIC&&t!==e.moveBox.body&&(c[0]<-6.3||c[0]>6.3?(t.position=[c[0]<0?-6.3:6.3,c[1]],t.velocity[0]*=-1):(c[1]<-9.1||c[1]>(w.BottomPoint+10)/50)&&(t.position=[c[0],c[1]<-9.1?-9.1:(w.BottomPoint+10)/50],t.type=o.Body.DYNAMIC)),t.type===o.Body.DYNAMIC&&c[1]>-w.BottomPoint/50&&t.userData&&t.userData.type!==Wt.goalType&&e.randomBodiesPositions.push(t.position),!e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]>e.maxY&&(e.maxY=c[1]),e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]>-w.BottomPoint/50&&(r=!0),e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]<3*-w.BottomPoint/50&&t.userData.clean(),t.type===o.Body.DYNAMIC&&t.userData&&t.userData.type===Wt.goalType&&(a=t.userData,!e.isTransition&&c[1]>9&&(i=!0)),!e.isTransition&&n&&t.type===o.Body.DYNAMIC&&t.userData&&t.userData.type!==Wt.goalType&&n.forEach((function(e){e.contains(c[0],c[1])&&u.push(t)}))})),a&&!i&&a.resetDeathCounter(),this.goalBlock=a,this.tutorial.update(),!this.isTransition||r||this.levelFinished.visible||(this.nextTimer.clear(),this.boomMeter.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1,this.levelFinished.show(this.score,this.currentLevelData.starsConditions,(function(){e.moveToNextLevel()})),this.nextTimer.freeze(),this.obstacles.forEach((function(t){t.clean()})),this.obstacles=[]),!this.moving&&!this.isTransition){if(a&&i&&a.startCountDeath(),!this.nextTimer.isFrozen){this.tick+=Math.floor(60*t);var c=this.tick%this.currentLevelData.time;this.nextTimer.setProgress(c/this.currentLevelData.time),0===c&&(this.nextTimer.setProgress(1),u=[],this.moveBalls())}if(u.length>0){var s=0;u.forEach((function(t){s+=t.userData.boom(!1)})),console.log(s),this.unusedBlocksRemoved(s)}}}}},{key:"moveToNextLevel",value:function(){var t=this;console.log("finished",this.score),N.levels.length>this.levelId+1&&((this.score>this.currentLevelData.score||!this.currentLevelData.score)&&(this.currentLevelData.score=this.score,$(this.currentLevelData.name,this.score.toString()),console.log("set score")),this.levelId+=1,this.currentLevelData.score||0===this.currentLevelData.score||(this.currentLevelData.score=0,$(this.currentLevelData.name,"0"))),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.score=0,this.scorePlace.score=0,this.createMoveWalls(),this.generateNewBlocks().then((function(){var e=t.generateIAPS();t.levelStart.show(t.currentLevelData,e).then((function(){t.currentLevelData.iaps&&(t.powerup1.setData(e[0],vo.getTexture(e[0]),vo.getTexture(e[0])),t.powerup2.setData(e[1],vo.getTexture(e[1]),vo.getTexture(e[1])),t.powerup1.visible=!0,t.powerup2.visible=!0),t.generateLineBlocks(),t.addActiveBlock(),t.nextTimer.unFreeze()}))})),this.isTransition=!1,N.paused=!1}},{key:"startPowerup",value:(p=Mo(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.isActivePowerup||N.paused||this.isTransition)){t.next=2;break}return t.abrupt("return");case 2:this.isActivePowerup=!0,t.t0=e,t.next=t.t0===jo.RocketUp?6:t.t0===jo.Kill?9:t.t0===jo.Freeze?12:14;break;case 6:return t.next=8,this.startVerticalRocket();case 8:return t.abrupt("break",14);case 9:return n=this.getRandomType(),C.bodies.forEach((function(t){var e=t.userData;e&&e.type===n&&e.boom()})),t.abrupt("break",14);case 12:return this.nextTimer.freeze(10),t.abrupt("break",14);case 14:this.isActivePowerup=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"startVerticalRocket",value:(f=Mo(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=560*Math.random()-280,t.next=3,this.startRocket(e,w.BottomPoint,e,-450);case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"startRocket",value:(l=Mo(regeneratorRuntime.mark((function t(e,n,r,o){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new fe(e,n,r,o),this.gameContainer.addChild(i),t.next=4,i.animate();case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return l.apply(this,arguments)})},{key:"generateActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextBlock&&this.pad.removeChild(this.nextBlock),this.nextType=-1!==t?t:this.getRandomType(),this.nextBlock=new Wt(-90,-20,this.nextType,!1),this.pad.addChild(this.nextBlock),-1===t&&(this.nextBlock.alpha=0,x.a.to(this.nextBlock,{alpha:1,duration:.3}))}},{key:"getRandomType",value:function(){return Math.floor(Math.random()*this.currentLevelData.blocks)+1}},{key:"addActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextType||(this.nextType=this.getRandomType()),this.activeBlock=new Wt(0,w.BottomPoint,this.nextType,!1),this.activeBlock.kinematic=!0,this.gameContainer.addChild(this.activeBlock),this.generateActiveBlock(t),this.preview.position.copyFrom(this.activeBlock.position),this.preview.visible=!0,-1===t&&(this.activeBlock.alpha=0,this.preview.alpha=0,x.a.to(this.activeBlock,{alpha:1,duration:.3}),x.a.to(this.preview,{alpha:.8,duration:.3}))}},{key:"switchBlockes",value:(s=Mo(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.activeBlock.type,n=this.nextType,t.next=4,new Promise((function(t){x.a.to(r.nextBlock,{x:0,y:-50,duration:.2}),x.a.to(r.activeBlock,{x:-90,y:700,duration:.2,onComplete:function(){t()}})}));case 4:this.clearActiveBlocks(),this.nextType=n,this.addActiveBlock(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"drawMouse",value:function(){if(this.mousePressed){var t=w.BottomPoint,e=this.toLocal(_.renderer.plugins.interaction.eventData.data.global),n=Math.atan2(e.y-t,e.x);this.preview.rotation=n+Math.PI/2;var r=1200*Math.cos(n),o=t+1200*Math.sin(n),i=1200;r<-315||r>315?(r=(i=Math.abs(r)/r*315/Math.cos(n))*Math.cos(n),o=t+i*Math.sin(n),this.preview2.visible=!0,this.preview2.position.set(r,o),this.preview2.rotation=-n-Math.PI/2):this.preview2.visible=!1,this.preview.height=i}}},{key:"onTapStart",value:function(t){var e=this.toLocal(t.data.global);this.isTransition||N.paused||!this.activeBlock||this.isActivePowerup||this.topRect.contains(e.x,e.y)||(this.padRect.contains(e.x,e.y)?this.switchBlockes():this.downRect.contains(e.x,e.y)||(this.mousePressed=!0,this.drawMouse()))}},{key:"onClick",value:function(t){var e=this,n=this.toLocal(t.data.global);if(!(this.isTransition||N.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(n.x,n.y)||this.topRect.contains(n.x,n.y))){this.activeBlock.createBody(o.Body.DYNAMIC);var r=this.activeBlock;this.activeBlock=void 0,this.preview.visible=!1,this.preview2.visible=!1;var i=Math.atan2((n.y-w.BottomPoint)/50,n.x/50);r.body.type=o.Body.KINEMATIC,r.body.velocity=[10*Math.cos(i),10*Math.sin(i)],this.mousePressed=!1,x.a.delayedCall(.2,(function(){e.addActiveBlock()}))}}},{key:"generateLineBlocks",value:function(){var t=this.currentLevelData.lines;this.previewBlocks.clear(),this.nextLines=[];for(var e=0;e<t;e++){this.nextLines[e]=[];for(var n=0;n<9;n++)this.nextLines[e][n]=Math.floor(Math.random()*this.currentLevelData.blocks)+1}this.previewBlocks.setLines(this.nextLines,this.currentLevelData.name)}},{key:"addLineBlocks",value:function(){for(var t,e=-500,n=0;n<this.nextLines.length;n++){t=-300;for(var r=0;r<this.nextLines[n].length;r++){var o=new Wt(t,e,this.nextLines[n][r]);this.gameContainer.addChild(o),t+=74}e+=70}}},{key:"delay",value:(c=Mo(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){x.a.delayedCall(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"generateNewBlocks",value:(u=Mo(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,c,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.currentLevelData,n=e.startAmount,r=e.blocks,(o=e.obstacles)&&o.length>0&&o.forEach((function(t){s.createObstacle(t)})),i=0;case 3:if(!(i<n)){t.next=12;break}return a=Math.floor(Math.random()*r)+1,u=new Wt(50*Math.random()-25,900,a),this.gameContainer.addChild(u),t.next=9,this.delay(.001);case 9:i++,t.next=3;break;case 12:return t.next=14,this.delay(1);case 14:return(c=new Oe(0,1100,Wt.goalType)).on("gameover",this.onGameOver),this.gameContainer.addChild(c),t.next=19,this.delay(1);case 19:this.createBottomExit();case 20:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"createObstacle",value:function(t){var e=void 0;switch(t.type){case Bo.Static:e=new Cr(t.position);break;case Bo.Random:e=new Wr(t.position,t.lives)}this.gameContainer.addChild(e),this.obstacles.push(e)}},{key:"onGameOver",value:function(){D.start(Ci)}},{key:"generateStartBlocks",value:(a=Mo(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.createMoveWalls(),e=new Xt(-400,-50,100,1800,0),this.gameContainer.addChild(e),n=new Xt(400,-50,100,1800,0),this.gameContainer.addChild(n),r=new Xt(-225,800,250,100,0),this.gameContainer.addChild(r),o=new Xt(225,800,250,100,0),this.gameContainer.addChild(o),i=new Xt(-150,1100,100,500,0),this.gameContainer.addChild(i),a=new Xt(150,1100,100,500,0),this.gameContainer.addChild(a),u=new Xt(0,1300,200,100,0),this.gameContainer.addChild(u),t.next=17,this.generateNewBlocks();case 17:N.started=!0;case 18:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"createMoveWalls",value:function(){this.moveBox=new Xt(0,-575,700,50,0),this.moveBox.type=Wt.endType,this.gameContainer.addChild(this.moveBox),this.staticBox=new Xt(0,-625,700,50,0),this.gameContainer.addChild(this.staticBox)}},{key:"createBottomExit",value:function(){this.bottomOpenWall=new Xt(0,800,200,100,0),this.gameContainer.addChild(this.bottomOpenWall)}},{key:"close",value:function(){_.stage.off("pointerup"),_.stage.off("pointerdown"),this.moveBox&&this.moveBox.clean(),this.staticBox&&this.staticBox.clean(),this.bottomOpenWall&&this.bottomOpenWall.clean(),this.activeBlock&&this.activeBlock.clean(),this.tick=0,this.moving=!1,this.isActivePowerup=!1,this.mousePressed=!1,this.previewBlocks&&this.previewBlocks.clear(),this.nextBlock&&this.nextBlock.clean(),C.bodies.forEach((function(t){t&&t.userData&&t.userData.clean()}))}},{key:"clearMeterBonus",value:(i=Mo(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!(n.length>0&&void 0!==n[0])||n[0],!this.meterBonus){t.next=6;break}if(e){t.next=5;break}return t.next=5,this.meterBonus.goOut();case 5:this.meterBonus&&(this.meterBonus.clean(),this.frontContainer.removeChild(this.meterBonus),this.meterBonus=void 0);case 6:this.activeBonus=To.None;case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}])&&Do(e.prototype,n),r&&Do(e,r),Object.defineProperty(e,"prototype",{writable:!1}),w}(ct);Ho(Uo,"BottomPoint",670);var zo=n(198);function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vo(t,e){return(Vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ko(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qo(t);if(e){var o=qo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xo(this,n)}}function Xo(t,e){if(e&&("object"===Yo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jo(t)}function Jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qo(t){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vo(t,e)}(i,t);var e,n,r,o=Ko(i);function i(t,e,n,r){var a,u,c,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),a=o.call(this,"",""),u=Jo(a),s=void 0,(c="id")in u?Object.defineProperty(u,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[c]=s,a.id=t,a.btn.anchor.set(0,0);var l=new v.Text(e,{fontFamily:"Arial",fontSize:40,fill:0,fontWeight:"bold"});l.position.set(20,10),a.addChild(l);var f=new v.Text(n,{fontFamily:"Arial",fontSize:33,fill:0});return f.position.set(20,5+l.height+15),a.addChild(f),a.btn.tint=r?13421772:16777215,a.btn.width=N.originalWidth-30,a.btn.height=5+l.height+20+f.height+5,a}return e=i,n&&Go(e.prototype,n),r&&Go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(wt);function Qo(t){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ti(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ti(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ei(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ni(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oi(t,e){return(oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ci(t);if(e){var o=ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ai(this,n)}}function ai(t,e){if(e&&("object"===Qo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ui(t)}function ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var li=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oi(t,e)}(u,t);var e,n,r,o,i,a=ii(u);function u(){var t;ni(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return si(ui(t=a.call.apply(a,[this].concat(n))),"scrollbox",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=new v.Text("TODO List",{fontFamily:"Arial",fontSize:75,fill:16777215,fontWeight:"bold"});t.position.set(.5*-N.originalWidth+30,.5*-N.originalHeight+40),this.addChild(t),this.scrollbox=new zo.a({boxWidth:N.originalWidth-30,boxHeight:N.originalHeight-160}),this.scrollbox.position.set(.5*-N.originalWidth+18,.5*-N.originalHeight+130),this.addChild(this.scrollbox);var e=new v.NineSlicePlane(v.Texture.from("phone.png"),104,100,104,100);e.width=N.originalWidth+50,e.height=N.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e)}},{key:"start",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ea("start","map","level"),e=N.levels,n=0,r=0,o=Zo(e),t.prev=5,a=regeneratorRuntime.mark((function t(){var e,o,a,c,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.value,t.next=3,Q(e.name,"");case 3:o=t.sent,a=void 0,""!==o&&(e.score=parseInt(o),a=Vi(e.score,e.starsConditions)),c=0!==r&&void 0===a,s="",s=0===r&&0===a?"Let's start from here. Tap to play.":c?"...":0===a?"This is a good task to do today.":"The task is done: "+"★ ".repeat(a),(l=new $o(r,e.name,s,r%2!=0)).on("pointerup",(function(){ea("click","map","play"),D.start(Uo,l.id)})),l.disabled=c,l.y=n,u.scrollbox.content.addChild(l),n+=l.height,r++;case 16:case"end":return t.stop()}}),t)})),o.s();case 8:if((i=o.n()).done){t.next=12;break}return t.delegateYield(a(),"t0",10);case 10:t.next=8;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(5),o.e(t.t1);case 17:return t.prev=17,o.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[5,14,17,20]])})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){ei(i,n,r,a,u,"next",t)}function u(t){ei(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"close",value:function(){ea("close","map","level"),this.scrollbox.content.removeChildren()}}])&&ri(e.prototype,n),r&&ri(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(ct);function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vi(t);if(e){var o=vi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return di(this,n)}}function di(t,e){if(e&&("object"===fi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bi(t)}function bi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vi(t){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hi(t,e)}(i,t);var e,n,r,o=yi(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),mi(bi(t=o.call(this)),"explosion",void 0),mi(bi(t),"face",void 0),mi(bi(t),"logo",void 0),t.explosion=v.Sprite.from(v.Texture.from("splash_explosion.png")),t.explosion.anchor.set(.5),t.explosion.scale.set(0,0),t.explosion.position.y=.5*-N.originalHeight+516,t.explosion.alpha=0,t.addChild(t.explosion),t.face=v.Sprite.from(v.Texture.from("splash_logo_face.png")),t.face.position.set(-131,-350),t.face.alpha=0,t.addChild(t.face),t.logo=v.Sprite.from(v.Texture.from("splash_logo.png")),t.logo.anchor.set(.5),t.logo.position.set(0,-260),t.logo.scale.set(3,3),t.logo.alpha=0,t.addChild(t.logo),t}return e=i,(n=[{key:"start",value:function(){this.explosion.position.y=.5*-N.originalHeight+516,this.explosion.scale.set(0,0),this.explosion.alpha=0,this.face.position.set(-131,-350),this.face.alpha=0,this.logo.position.set(0,-260),this.logo.scale.set(3,3),this.logo.alpha=0,x.a.to(this.explosion,{alpha:1,duration:.2}),x.a.to(this.explosion.scale,{x:1,y:1,duration:1,ease:k.c.easeOut}),x.a.to(this.logo,{alpha:1,delay:.2,duration:.2}),x.a.to(this.logo.scale,{x:1,y:1,delay:.2,duration:1,ease:k.a.easeOut}),x.a.to(this.face,{alpha:1,delay:1.09,duration:.1}),x.a.to(this.face,{y:-448,delay:1.1,duration:2,ease:k.f.easeNone})}},{key:"stop",value:function(){x.a.killTweensOf(this.explosion),x.a.killTweensOf(this.explosion.scale),x.a.killTweensOf(this.logo),x.a.killTweensOf(this.logo.scale),x.a.killTweensOf(this.face)}}])&&pi(e.prototype,n),r&&pi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pi(t,e){return(Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Si(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ti(t);if(e){var o=Ti(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ri(this,n)}}function Ri(t,e){if(e&&("object"===gi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ji(t)}function ji(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ti(t){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ci=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pi(t,e)}(u,t);var e,n,r,o,i,a=Si(u);function u(){var t;ki(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Bi(ji(t=a.call.apply(a,[this].concat(n))),"logo",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=this;this.logo=new wi,this.addChild(this.logo);var e=new wt("start_button.png","start_button.png");e.position.y=N.originalHeight/3-30,this.addChild(e),e.on("pointerup",(function(){ea("click","menu","play"),t.onPlayClicked()}))}},{key:"start",value:function(){ea("start","menu","level"),this.logo.start()}},{key:"close",value:function(){ea("close","menu","level"),this.logo.stop()}},{key:"onPlayClicked",value:(o=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!J||!K.shouldPlayFirstAds()){t.next=3;break}return t.next=3,Z(Y.Interstitial);case 3:D.start(li);case 4:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){xi(i,n,r,a,u,"next",t)}function u(t){xi(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&Oi(e.prototype,n),r&&Oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(ct),_i=n(200);function Ei(t){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ai(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Mi(i,r,o,a,u,"next",t)}function u(t){Mi(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Li(t,e){return(Li=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fi(t);if(e){var o=Fi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ni(this,n)}}function Ni(t,e){if(e&&("object"===Ei(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wi,Hi,Ui,zi,Yi=[],Gi=[],Vi=function(t,e){for(var n=0,r=0;r<e.length&&t>e[r];r++)n++;return n},Ki=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N.slowmo=t,e||x.a.globalTimeline.timeScale(N.slowmo?.3:1)},Xi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Li(t,e)}(f,t);var e,n,r,i,a,u,c=Ii(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.call(this,720,1500)}return e=f,(n=[{key:"createStates",value:function(){D.add(new Ci),D.add(new li),D.add(new Uo),D.start(Ci)}},{key:"initContactListener",value:function(){var t=this;C.on("endContact",(function(t){if(t.shapeA.data&&t.shapeB.data){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;r.correctType&&o.correctType&&r.type===o.type&&0!==r.type&&(r.sameColorNeighbors.delete(o),o.sameColorNeighbors.delete(r))}})),C.on("beginContact",(function(e){var n=e.bodyA,r=e.bodyB,i=n.userData,a=r.userData;if(i.type===Wt.goalType&&a.type===Wt.endType||a.type===Wt.goalType&&i.type===Wt.endType)t.levelComplete();else{if(i.rocket||a.rocket){var u=void 0,c=void 0;i.rocket&&a.correctType()&&a.type!==Wt.goalType?(u=n,c=a):a.rocket&&i.correctType()&&i.type!==Wt.goalType&&(u=r,c=i),console.log(i.rocket,a.type,a.correctType(),a.rocket,i.type,i.correctType()),u&&c&&c.boom()}if(e.shapeA.data&&e.shapeB.data&&i.correctType&&a.correctType){i.type===a.type&&0!==i.type&&(i.sameColorNeighbors.set(a,!0),a.sameColorNeighbors.set(i,!0));var s=void 0,l=void 0,f=void 0;if(n.type===o.Body.KINEMATIC&&0!==i.type?(s=n,l=i,f=a):r.type===o.Body.KINEMATIC&&0!==a.type&&(s=r,l=a,f=i),s){if(s.type=o.Body.DYNAMIC,251===f.type&&f.changePosition(),i.type===a.type){var p=l.steps;l.animateAndDestroy(),Yi.push({block:l===i?a:i,steps:p})}}else if(i.type===a.type&&0!==i.type&&(i.steps!==a.steps||i.kinematic||a.kinematic))if(i.kinematic){var h=i.steps;i.animateAndDestroy(),Yi.push({block:a,steps:h})}else{var y=a.steps;a.animateAndDestroy(),Yi.push({block:i,steps:y})}else(i.kinematic&&251===a.type||a.kinematic&&251===i.type)&&(251===a.type?a.changePosition():i.changePosition())}}}))}},{key:"customLogic",value:function(t){var e=D.activeState;if(e&&e.unusedBlocksRemoved){e.update(t);var n=I.length,r=void 0;if(n>0){var o=I[Math.floor(Math.random()*n)];o&&(r=o.userData.position)}I.forEach((function(t){C.removeBody(t)})),this.clearBodyArray(),Yi.forEach((function(t){return t.block.increase(t.steps)})),Yi=[],Gi.forEach((function(t){var e=C.hitTest(t,C.bodies,0);if(e&&e.length>0){var r=e[0].userData;r&&r.correctType&&r.type!==Wt.goalType&&r.boom&&(n+=r.boom())}})),n>0&&e.unusedBlocksRemoved(n,r),Gi=[]}}},{key:"levelComplete",value:function(){D.activeState.levelComplete()}},{key:"load",value:(u=Ai(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){s.init("assets/sounds"),K.startLoading();var r=new l.b;r.add("base","assets/atlases/base.json"),r.add("levels","assets/levels.json"),r.onProgress.add((function(t){})),r.onError.add((function(t,e,r){na({error:"loading (".concat(r.url,")")}),n()})),r.load(Ai(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadFonts();case 2:return N.levels=r.resources.levels.data.levels,n.next=5,e.startAfterLoading();case 5:t();case 6:case"end":return n.stop()}}),n)}))))})));case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"loadFonts",value:(a=Ai(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){_i.load({custom:{families:["FontsFree-Net-AmericanTypewriterBold"],urls:["assets/fonts/font.css"]},active:function(){t()},timeout:6e4})})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"startAfterLoading",value:(i=Ai(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.getElementById("preloader"))&&(e.style.display="none"),t.next=4,tt();case 4:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})}])&&Di(e.prototype,n),r&&Di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(F);!function(t){t[t.Undefined=0]="Undefined",t[t.Clicked=1]="Clicked",t[t.Show=2]="Show",t[t.FailedShow=3]="FailedShow",t[t.RewardReceived=4]="RewardReceived"}(Wi||(Wi={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unknown=1]="Unknown",t[t.Offline=2]="Offline",t[t.NoFill=3]="NoFill",t[t.InternalError=4]="InternalError",t[t.InvalidRequest=5]="InvalidRequest",t[t.UnableToPrecache=6]="UnableToPrecache"}(Hi||(Hi={})),function(t){t[t.Undefined=0]="Undefined",t[t.Video=1]="Video",t[t.RewardedVideo=2]="RewardedVideo",t[t.Playable=3]="Playable",t[t.Interstitial=4]="Interstitial",t[t.OfferWall=5]="OfferWall",t[t.Banner=6]="Banner"}(Ui||(Ui={})),function(t){t[t.Undefined=0]="Undefined",t[t.Start=1]="Start",t[t.Complete=2]="Complete",t[t.Fail=3]="Fail"}(zi||(zi={})),r.GameAnalytics.setEnabledInfoLog(!1);var Ji=!1,qi="en";function $i(t,e){r.GameAnalytics.initialize(t,e),console.log("Network: ".concat("0",", live: ").concat(Ji)),ea("set","network","0",Ji?1:0),ea("start","app","game"),new Xi}function Qi(t,e,n){r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e),n),gtag("event",t,{event_category:e,value:n})}function Zi(t,e,n){r.GameAnalytics.addProgressionEvent(t,"level",n,void 0,e),gtag("event","progression",{event_category:t===zi.Start?"start":t!==zi.Fail?"complete":"fail",value:e})}function ta(t,e,n){void 0===n?r.GameAnalytics.addAdEvent(t,e,"0","ad"):r.GameAnalytics.addAdEventWithNoAdReason(t,e,"0","ad",n);var o="",i="";switch(e){case Ui.Interstitial:i="inter";break;case Ui.RewardedVideo:i="reward"}switch(t){case Wi.FailedShow:o="showError";break;case Wi.Show:o="show";break;case Wi.RewardReceived:o="success"}gtag("event",o,{event_category:i})}function ea(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e,":").concat(n),o),gtag("event",t,{event_category:e,event_label:n,value:o})}function na(t){var e=JSON.stringify(t);r.GameAnalytics.addErrorEvent(r.EGAErrorSeverity.Error,e),gtag("event","show",{event_category:"error",event_label:"error",value:e})}function ra(t){Ji=t}window.onfocus=function(){Howler.mute(!1)},window.onblur=function(){Howler.mute(!0)},window.onload=function(){q().then((function(t){qi=t.language,Ji=t.success,$i(t.gameKey,t.secretKey)})).catch((function(t){qi="en",Ji=!1,$i("858dec355a72c9195a2a9d7b5b236599","da73f2e7aa8cb82c345aa88235b57abb415e1cd5")}))},o.Broadphase.canCollide=function(t,e){var n,r,i=o.Body.KINEMATIC,a=o.Body.STATIC,u=t.type,c=e.type,s=null===(n=t.userData)||void 0===n?void 0:n.type,l=null===(r=e.userData)||void 0===r?void 0:r.type;return(u!==a||c!==a)&&(u===i&&c===a||u===a&&c===i?s>=250&&s<=260&&l<20||l>=250&&l<=260&&s<20:(u!==i||c!==i)&&((t.sleepState!==o.Body.SLEEPING||e.sleepState!==o.Body.SLEEPING)&&!(t.sleepState===o.Body.SLEEPING&&c===a||e.sleepState===o.Body.SLEEPING&&u===a)))}}});
//# sourceMappingURL=bundle.8c694ddc393bd9adac85.js.map