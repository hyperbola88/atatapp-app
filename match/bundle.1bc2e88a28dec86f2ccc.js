!function(t){function e(e){for(var r,a,u=e[0],c=e[1],s=e[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;i.push([200,1]),n()}({200:function(t,e,n){n(201),t.exports=n(408)},408:function(t,e,n){"use strict";n.r(e),n.d(e,"EGAAdAction",(function(){return Ha})),n.d(e,"EGAAdError",(function(){return Ga})),n.d(e,"EGAAdType",(function(){return Ka})),n.d(e,"EGAProgressionStatus",(function(){return Va})),n.d(e,"live",(function(){return $a})),n.d(e,"lang",(function(){return Za})),n.d(e,"sendValueEvent",(function(){return tu})),n.d(e,"sendProgressionEvent",(function(){return eu})),n.d(e,"sendAdEvent",(function(){return nu})),n.d(e,"sendEvent",(function(){return ru})),n.d(e,"sendError",(function(){return ou})),n.d(e,"setLive",(function(){return iu}));var r=n(43),o=n(193);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"path",void 0),a(this,"all",void 0),a(this,"musics",void 0),a(this,"mutedSounds",void 0),a(this,"mutedMusic",void 0)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.path=t,this.all={},this.musics={},this.mutedSounds=!1,this.mutedMusic=!1}},{key:"muteMusic",get:function(){return this.mutedMusic},set:function(t){var e;this.mutedMusic=t,null===(e=this.musics.music)||void 0===e||e.mute(t)}},{key:"muteSounds",get:function(){return this.mutedSounds},set:function(t){for(var e in this.mutedSounds=t,this.all)this.all[e]&&this.all[e].mute(t)}},{key:"add",value:function(t,e){var n=this;if(!this.all[t]){if(!this.path)throw new Error("setup path for sounds");var r=["mp3","ogg"].map((function(e){return"".concat(n.path,"/").concat(t,".").concat(e)})),i=new o.Howl({src:r,autoplay:null==e?void 0:e.autoplay,loop:null==e?void 0:e.loop,volume:(null==e?void 0:e.volume)||1});"music"!==t?this.all[t]=i:this.musics[t]=i}}},{key:"playRandom",value:function(t,e){for(var n=Math.floor(Math.random()*e),r=!1,o=0;o<e;o++)if(this.all[t+o.toString()].playing()){r=!0;break}r||this.play(t+n.toString())}},{key:"play",value:function(t){this.all[t]?this.all[t].play():console.error("no sound was found")}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()),c=n(16),s=n(69),l=n(70),f=n(51);function p(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"states",void 0),y(this,"currentState",void 0),y(this,"stage",void 0),this.stage=e,this.states=new Map}var e,n,r,o,i;return e=t,(n=[{key:"activeState",get:function(){return this.currentState}},{key:"add",value:function(t){this.states.set(t.constructor,t),t.create()}},{key:"start",value:function(t){var e=this.states.get(t);if(!e)throw new Error("No state ".concat(t));this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.start(r),this.currentState=e,this.stage.addChild(this.currentState)}},{key:"restart",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=a.length,n=new Array(e),r=0;r<e;r++)n[r]=a[r];if(o=this.currentState,!this.currentState){t.next=6;break}return t.next=5,this.currentState.close();case 5:this.stage.removeChild(this.currentState);case 6:window.setTimeout((function(){o.start(n),i.currentState=o,i.stage.addChild(i.currentState)}),100);case 7:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){p(i,n,r,a,u,"next",t)}function u(t){p(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&h(e.prototype,n),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),v=n(1),b=n(9),m=n(21),w=n(3),g=n(2),k=n(7);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R,C,j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(i,t);var e,n,r,o=T(i);function i(t,e){var n,r,a,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=B(n),u=void 0,(a="sprite")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u;var c=m.a.from(w.db.WHITE);return c.anchor.set(.5),c.tint=0,c.alpha=.6,c.width=2*t,c.height=2*e,c.interactive=!0,n.addChild(c),n.sprite=m.a.from("assets/preloader.png"),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n}return e=i,(n=[{key:"show",value:function(){this.visible=!0,this.rotate()}},{key:"hide",value:function(){this.visible=!1,g.a.killTweensOf(this.sprite)}},{key:"rotate",value:function(){var t=this;this.sprite.rotation=0,g.a.to(this.sprite,{rotation:2*Math.PI,duration:5,ease:k.f.easeNone,onComplete:function(){t.rotate()}})}}])&&O(e.prototype,n),r&&O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b.b),E=n(10),A=n.n(E);function L(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}f.a.registerPlugin(c.a),c.b.registerPlugin(s.b),c.b.registerPlugin(l.c);var I,D,N=[],Y={started:!1,paused:!1,scale:1,realHeight:1,originalWidth:1,originalHeight:1,levels:[],particles:void 0,material:new E.Material,bounceMaterial:new E.Material,activeBallMaterial:new E.Material,slowmo:!1},F=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o={width:e,height:n,autoDensity:!0,resolution:2,backgroundColor:12309476};Y.originalWidth=e,Y.originalHeight=n,C=new f.a(o),document.body.appendChild(C.view),v.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,C.view.style.left="0%",C.view.style.top="0%",C.view.style.width="100%",C.view.style.height="100%",C.renderer.plugins.interaction,C.stage.interactive=!0,C.ticker.maxFPS=60;var i=new b.b;C.stage.addChild(i),R=new A.a.World({gravity:[0,-10]}),this.initContactListener();var a=new E.Material,u=new E.Material,c=new E.Material;Y.material=a,Y.bounceMaterial=c,Y.activeBallMaterial=u,R.addContactMaterial(new E.ContactMaterial(a,a,{restitution:0,stiffness:E.Equation.DEFAULT_STIFFNESS/3})),R.addContactMaterial(new E.ContactMaterial(u,c,{restitution:1,stiffness:E.Equation.DEFAULT_STIFFNESS/3})),R.emitImpactEvent=!1,C.ticker.add((function(){if(!Y.paused){var t=1/(Y.slowmo?400:60);R.step(t,.1,3),R.bodies.forEach((function(t){var e=t.userData;if(e&&e.transform){var n=t.position;e.position.set(50*n[0],50*n[1]),e.rotateView?e.rotateView(t.angle):e.rotation=t.angle}})),r.customLogic(t)}})),this.start(C,i),(D=new j(e,n)).hide(),i.addChild(D)}var e,n,r,o,i;return e=t,(n=[{key:"customLogic",value:function(t){var e=this.preCleanUnused(t);this.cleanUnusedBobies(),this.postCleanUnused(e)}},{key:"cleanUnusedBobies",value:function(){N.forEach((function(t){return R.removeBody(t)})),N=[]}},{key:"start",value:(o=regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new b.b,n.addChild(r),o=new b.b,n.addChild(o),I=new d(o),t.next=7,this.load();case 7:i=m.a.from(v.Texture.from("back1.png")),r.addChild(i),this.createStates(),a=function(){return{width:innerWidth,height:innerHeight}},u=function(){var t=a(),n=t.width,i=t.height;e.renderer.resize(n,i),Y.realHeight=i,D.height=i,D.scale.x=D.scale.y;var u=i/Y.originalHeight;Y.scale=u,o.scale.set(u,u),r.scale.set(u,u),r.position.set(.5*n-.5*r.width,.5*i-.5*r.height),o.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height),D.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height)},window.addEventListener("resize",u),u();case 14:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){L(i,n,r,a,u,"next",t)}function u(t){L(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})}])&&M(e.prototype,n),r&&M(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function W(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){U(i,r,o,a,u,"next",t)}function u(t){U(i,r,o,a,u,"throw",t)}a(void 0)}))}}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,o,i,a,u,c,s,l,f,p,h;return e=t,(n=[{key:"showGlobalLeaders",value:function(t){}},{key:"shouldLeadersShow",value:function(){return!1}},{key:"shouldPlayFirstAds",value:function(){return!1}},{key:"shouldShareShow",value:function(){return!1}},{key:"shouldScalePlayer",value:function(){return!1}},{key:"gameplayStart",value:function(){}},{key:"gameplayStop",value:function(){}},{key:"createShortcut",value:(h=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"showInvitePage",value:function(){}},{key:"shareScore",value:function(t){}},{key:"startLoading",value:function(){}},{key:"finishLoading",value:(p=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"loadingProgress",value:function(t){}},{key:"performHapticFeedback",value:function(){}},{key:"getFriends",value:(f=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getPlayerEntry",value:function(){}},{key:"setStorageData",value:(l=W(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"getStorageData",value:(s=W(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})},{key:"setScore",value:(c=W(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"getScore",value:(u=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"init",value:(a=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:!0,language:"en",gameKey:"",secretKey:""});case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"showInter",value:(i=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"showReward",value:(o=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"atatappLink",value:function(){return""}}])&&z(e.prototype,n),r&&z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var G;function K(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){K(i,r,o,a,u,"next",t)}function u(t){K(i,r,o,a,u,"throw",t)}a(void 0)}))}}!function(t){t[t.RewardedVideo=2]="RewardedVideo",t[t.Interstitial=4]="Interstitial"}(G||(G={}));var X,J=function(){try{return localStorage}catch(t){return}},q=!0,$=function(){var t=V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){(X=new H)&&X.init().then((function(e){t(e)})).catch((function(t){ou({error:"initSocial"}),e()}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(){var t=V(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(r=J())||void 0===r||r.setItem(e,n),t.next=3,X.setStorageData(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Q=function(){var t=V(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getStorageData(e,n);case 2:return(r=t.sent)===n&&(r=(null===(o=J())||void 0===o?void 0:o.getItem(e))||n),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),tt=function(){var t=V(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,D&&D.show(),r=u.muteMusic,o=u.muteSounds,u.muteMusic=!0,u.muteSounds=!0,t.t0=e,t.next=t.t0===G.Interstitial?9:t.t0===G.RewardedVideo?13:17;break;case 9:return t.next=11,X.showInter();case 11:return n=!0,t.abrupt("break",17);case 13:return t.next=15,X.showReward();case 15:return n=t.sent,t.abrupt("break",17);case 17:return q=!1,D&&D.hide(),u.muteMusic=r,u.muteSounds=o,t.abrupt("return",n);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",X.finishLoading());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nt=function(){X.gameplayStart()};function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,t);var e,n,r,o=at(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,n&&ot(e.prototype,n),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(b.b);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ht(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ht(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mt(t)););return t}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt,kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(i,t);var e,n,r,o=dt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),wt(bt(n=o.call(this)),"normalTexture",void 0),wt(bt(n),"downTexture",void 0),wt(bt(n),"isDisabled",!1),wt(bt(n),"isDown",void 0),wt(bt(n),"btn",void 0),n.normalTexture=""===t?w.db.WHITE:w.db.from(t),n.downTexture=""===t?w.db.WHITE:w.db.from(e),n.btn=m.a.from(n.normalTexture),n.btn.anchor.set(.5,.5),n.addChild(n.btn),n.on("pointerdown",n.onButtonDown.bind(bt(n))).on("pointerup",n.onButtonUp.bind(bt(n))).on("pointerupoutside",n.onButtonUp.bind(bt(n))).on("pointerout",n.onButtonOut.bind(bt(n))),n.disabled=!1,n}return e=i,(n=[{key:"disabled",get:function(){return this.isDisabled},set:function(t){this.isDisabled=t,this.isDisabled?(this.interactive=!1,this.buttonMode=!1,this.btn.alpha=.5):(this.interactive=!0,this.buttonMode=!0,this.btn.alpha=1)}},{key:"onButtonOut",value:function(){this.isDisabled||this.isDown||(this.btn.texture=this.normalTexture)}},{key:"onButtonDown",value:function(t){this.isDisabled||(u.play("click"),this.isDown=!0,this.btn.texture=this.downTexture)}},{key:"onButtonUp",value:function(){this.isDisabled||(this.isDown=!1,this.btn.texture=this.normalTexture)}},{key:"destroy",value:function(t){this.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointerout"),pt(mt(i.prototype),"destroy",this).call(this,t)}}])&&ft(e.prototype,n),r&&ft(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b.b);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_t(t);if(e){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bt(t)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.NO=0]="NO",t[t.WALLS=Math.pow(2,0)]="WALLS",t[t.BALLS=Math.pow(2,1)]="BALLS",t[t.MOVER=Math.pow(2,2)]="MOVER",t[t.OBSTACLES=Math.pow(2,3)]="OBSTACLES"}(gt||(gt={}));var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(i,t);var e,n,r,o=Tt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Rt(Bt(e=o.call(this)),"body",void 0),Rt(Bt(e),"shape",void 0),Rt(Bt(e),"type",void 0),Rt(Bt(e),"view",void 0),e.type=t,e.view=e.createView(),e.view.anchor.set(.5,.5),e.addChild(e.view),e}return e=i,(n=[{key:"createBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.view.alpha=1;var n=[this.position.x/50,this.position.y/50];this.shape=this.createShape(),this.body=new E.Body({type:t,position:n,mass:e,damping:0,angularDamping:0}),this.body.addShape(this.shape),R.addBody(this.body),this.body.userData=this}},{key:"clean",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyBody(t),this.parent&&this.parent.removeChild(this)}},{key:"isGoal",value:function(){return!1}},{key:"destroyBody",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.body&&(t?R.removeBody(this.body):N.push(this.body),this.body=void 0)}},{key:"correctType",value:function(){return 0!==this.type&&(this.type<20||this.type===Wt.STATIC_OBSTACLE_TYPE||this.type===Wt.RANDOM_OBSTACLE_TYPE||this.type===Wt.SKULL_TYPE||this.type===Wt.ANY_TYPE)}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b.b);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Mt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Mt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ft(t);if(e){var o=Ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yt(t)}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(i,t);var e,n,r,o=Dt(i);function i(t,e,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Et(this,i),Ut(Yt(r=o.call(this,n)),"sameColorNeighbors",new Map),Ut(Yt(r),"steps",1),Ut(Yt(r),"stepsAmount",3),Ut(Yt(r),"view2",void 0),Ut(Yt(r),"savedType",-1),Ut(Yt(r),"skullMeter",1),Ut(Yt(r),"_kinematic",!1),Ut(Yt(r),"permanentSkull",!1),Ut(Yt(r),"busy",!1),Ut(Yt(r),"sensorShape",void 0),r.permanentSkull=n===i.SKULL_TYPE,r.position.set(t,e),a&&r.createBody(E.Body.DYNAMIC),r.view2=r.createView2(),r.view2.anchor.set(.5,.5),r.addChild(r.view2),r}return e=i,(n=[{key:"rotateView",value:function(t){this.view.rotation=t}},{key:"kinematic",get:function(){return this._kinematic},set:function(t){this._kinematic=t}},{key:"createBody",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;Lt(Ft(i.prototype),"createBody",this).call(this,t,n),this.sensorShape=new E.Circle({radius:(this.getRadius()+5)/50}),this.sensorShape.sensor=!0,this.sensorShape.material=Y.material,this.sensorShape.data=!0,null===(e=this.body)||void 0===e||e.addShape(this.sensorShape)}},{key:"enableGravity",value:function(){this.body&&(this.body.gravityScale=1,this.body.mass=5,this.body.updateMassProperties(),this.shape.material=Y.material)}},{key:"animateAndDestroy",value:function(){var t=this;this.killTween(),g.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),g.a.to(this.view2.scale,{x:0,y:0,duration:.2}),this.destroyBody()}},{key:"killTween",value:function(){g.a.killTweensOf(this.view.scale),g.a.killTweensOf(this.view2.scale)}},{key:"clean",value:function(){this.busy=!1,Lt(Ft(i.prototype),"clean",this).call(this)}},{key:"decreaseSkullMeter",value:function(){this.type!==i.SKULL_TYPE||this.permanentSkull||(this.skullMeter-=1,-1===this.skullMeter&&this.removeSkull())}},{key:"isSkull",value:function(){return this.type===i.SKULL_TYPE}},{key:"setSkull",value:function(){this.savedType=this.type,this.skullMeter=3,this.kinematic=!1,this.body&&(this.body.gravityScale=1),this.type=i.SKULL_TYPE,this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2()}},{key:"removeSkull",value:function(){this.type=this.savedType,this.savedType=-1,this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2(),this.view2.visible=!0}},{key:"setBomb",value:function(){var t=this;this.busy||(this.type=i.BOMB_TYPE,this.view.texture=v.Texture.from("bomb.png"),this.view2.visible=!1,this.killTween(),this.busy=!0,g.a.to(this.view.scale,{x:.4,y:.4,duration:1,onUpdate:function(){t.updateShape()}}),g.a.to(this.view.scale,{x:1.2,y:1.2,delay:1,duration:.2,onUpdate:function(){t.updateShape()},onComplete:function(){var e=zi.obtain();t.addChild(e),e.animate().then((function(){zi.release(e)})),t.animateAndDestroy()}}))}},{key:"boom",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.increase(this.stepsAmount-this.steps,t)}},{key:"getRadius",value:function(){return 35}},{key:"getTexture",value:function(){return v.Texture.from("".concat(this.type,".png"))}},{key:"getTexture2",value:function(){return v.Texture.from("".concat(this.type,"_.png"))}},{key:"createView",value:function(){var t=new v.Sprite(this.getTexture());return t.scale.set(.5,.5),t}},{key:"createView2",value:function(){var t=new v.Sprite(this.getTexture2());return t.scale.set(.5,.5),t}},{key:"createShape",value:function(){var t=new E.Circle({radius:this.getRadius()/50});return t.material=Y.material,t}},{key:"increase",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.busy||!this.body)return 0;var r=0;this.busy=!0;var o=this.steps;if(t+=Math.max(0,this.sameColorNeighbors.size-1),this.steps+=t,this.steps>=this.stepsAmount){if(n&&(r=1),this.killTween(),this.sameColorNeighbors.forEach((function(t,o){if(o!==e){var i=o.increase(e.stepsAmount-o.steps,n);n&&(r+=i)}})),o<2)g.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){e.clean()}}),g.a.to(this.view2.scale,{x:0,y:0,duration:.2});else{var a=this.view.width/2,u=0;g.a.to(this.view.scale,{x:0,y:0,duration:.3,onUpdate:function(){e.view.position.set(Math.cos(u)*a,Math.sin(u)*a),u+=Math.PI/15,a-=1},onComplete:function(){e.clean()}}),this.view2.scale.set(0,0)}this.destroyBody(n)}else{var c=i.SCALE_FACTOR*this.steps;g.a.to(this.view.scale,{x:c,y:c,duration:.2,onUpdate:function(){e.updateShape()},onComplete:function(){e.busy=!1}}),g.a.to(this.view2.scale,{x:c,y:c,duration:.2})}return r}},{key:"updateShape",value:function(){var t,e;this.shape.radius=this.getRadius()/i.SCALE_FACTOR*this.view.scale.x/50,this.shape.updateBoundingRadius(),this.sensorShape.radius=(this.getRadius()+5)/i.SCALE_FACTOR*this.view.scale.x/50,this.sensorShape.updateBoundingRadius(),null===(t=this.body)||void 0===t||t.updateBoundingRadius(),null===(e=this.body)||void 0===e||e.updateMassProperties()}}])&&At(e.prototype,n),r&&At(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ct);Ut(Wt,"BALL_SCORE",5),Ut(Wt,"BONUS_SCORE",100),Ut(Wt,"EXPLOSION_SCORE",50),Ut(Wt,"GOAL_TYPE",1e3),Ut(Wt,"END_TYPE",500),Ut(Wt,"STATIC_OBSTACLE_TYPE",250),Ut(Wt,"RANDOM_OBSTACLE_TYPE",251),Ut(Wt,"BOMB_TYPE",2e3),Ut(Wt,"SKULL_TYPE",3e3),Ut(Wt,"RAINBOW_TYPE",4e3),Ut(Wt,"ANY_TYPE",5e3),Ut(Wt,"SCALE_FACTOR",.5);var zt=n(4);function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xt(this,n)}}function Xt(t,e){if(e&&("object"===Ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(i,t);var e,n,r,o=Vt(i);function i(t,e,n,r,a){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,0)).position.set(t,e),u.view.width=n,u.view.height=r,u.createBody(E.Body.STATIC),u.body&&(u.body.mass=0,u.body.angle=zt.b*a),u}return e=i,(n=[{key:"createShape",value:function(){return new E.Box({width:this.view.width/50,height:this.view.height/50})}},{key:"createView",value:function(){var t=new m.a(v.Texture.WHITE);return t.anchor.set(.5),t.tint=0,t.visible=!1,t.alpha=0,t}},{key:"isObstacle",value:function(){return!1}},{key:"correctType",value:function(){return!1}},{key:"animateAndDestroy",value:function(){var t=this;g.a.killTweensOf(this.view.scale),g.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}}])&&Gt(e.prototype,n),r&&Gt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ct);function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oe(t);if(e){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return re(t)}function re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}(u,t);var e,n,r,o,i,a=ee(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),ie(re(t=a.call(this,300)),"startX",void 0),ie(re(t),"startY",void 0),ie(re(t),"endX",void 0),ie(re(t),"endY",void 0),t.createBody(E.Body.DYNAMIC),t.reset(),t}return e=u,(n=[{key:"createShape",value:function(){var t=new E.Box({width:4,height:4});return t.sensor=!0,t}},{key:"createView",value:function(){return new v.Sprite(v.Texture.from("powerup_rocket.png"))}},{key:"animate",value:(o=regeneratorRuntime.mark((function t(e,n,r,o){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){i.visible=!0,i.startX=e,i.startY=n,i.endX=r,i.endY=o,i.position.set(e,n),e!==r&&(i.view.angle=90);var a={x:i.startX,y:i.startY};i.body.position=[a.x/50,a.y/50],g.a.to(a,{x:i.endX,y:i.endY,duration:1,ease:k.b.easeIn,onComplete:function(){i.reset(),t()},onUpdate:function(){i.body.position=[a.x/50,a.y/50]}})})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Zt(i,n,r,a,u,"next",t)}function u(t){Zt(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n,r){return i.apply(this,arguments)})},{key:"reset",value:function(){this.body.gravityScale=0,this.visible=!1,this.body.position=[-40,-40]}}])&&Qt(e.prototype,n),r&&Qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(Ct);function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(){return(se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=le(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function le(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=de(t)););return t}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(t,e){if(e&&("object"===ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(i,t);var e,n,r,o=pe(i);function i(t,e){var n,r,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,Wt.GOAL_TYPE,!0),r=ye(n),u=void 0,(a="delay")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u,n}return e=i,(n=[{key:"resetDeathCounter",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0)}},{key:"startCountDeath",value:function(){var t=this;this.delay||(this.delay=g.a.delayedCall(4,(function(){t.delay=void 0,t.emit("gameover")})))}},{key:"destroyBody",value:function(t){this.resetDeathCounter(),this.off("gameover"),se(de(i.prototype),"destroyBody",this).call(this,t)}},{key:"setSkull",value:function(){se(de(i.prototype),"setSkull",this).call(this),this.view.texture=v.Texture.from("3001.png"),this.view2.texture=v.Texture.from("3001_.png")}},{key:"createView",value:function(){return new v.Sprite(this.getTexture())}},{key:"createView2",value:function(){return new v.Sprite(this.getTexture2())}},{key:"getTexture",value:function(){return v.Texture.from("hero.png")}},{key:"getTexture2",value:function(){return v.Texture.from("hero_.png")}},{key:"getRadius",value:function(){return 50}},{key:"isGoal",value:function(){return!0}}])&&ce(e.prototype,n),r&&ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Wt);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pe(t);if(e){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(t,e){if(e&&("object"===be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Oe(t)}function Oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ge(t,e)}(u,t);var e,n,r,o,i,a=ke(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Te(Oe(t=a.call(this,"","")),"_id",void 0),Te(Oe(t),"icon",void 0),Te(Oe(t),"txt",void 0),Te(Oe(t),"amount",void 0),t.amount=1,t.txt=new v.Text(t.amount.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,.5),t.txt.x=90,t.txt.y=90,t.addChild(t.txt),t.icon=v.Sprite.from(v.Texture.from("bonus_ads.png")),t.icon.x=15,t.icon.y=35,t.addChild(t.icon),t.icon.visible=!1,t.on("pointerup",(function(){t.onPressed()})),t}return e=u,n=[{key:"id",get:function(){return this._id}},{key:"setData",value:(o=regeneratorRuntime.mark((function t(e,n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._id=e,this.normalTexture=n,this.downTexture=r,this.btn.texture=this.normalTexture,this.icon.visible=!1,t.next=7,Q(u.getStorageId(this.id),void 0);case 7:if(void 0!==(o=t.sent)){t.next=12;break}return o="1",t.next=12,Z(u.getStorageId(this.id),o);case 12:this.amount=parseInt(o),this.txt.text=o,this.updateTxt(),this.scale.set(.6,.6);case 16:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){me(i,n,r,a,u,"next",t)}function u(t){me(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n){return i.apply(this,arguments)})},{key:"updateTxt",value:function(){0===this.amount?(this.btn.alpha=.6,this.icon.visible=!0,this.txt.visible=!1):(this.btn.alpha=1,this.icon.visible=!1,this.txt.visible=!0),this.txt.text=this.amount.toString()}},{key:"onPressed",value:function(){this.amount>0?(this.amount--,Z(u.getStorageId(this.id),this.amount.toString()),this.updateTxt(),this.emit("activate",this.id)):(Y.paused=!0,Y.paused=!1,this.emit("activate",this.id))}}],r=[{key:"getStorageId",value:function(t){return"powerup_"+t.toString()}}],n&&we(e.prototype,n),r&&we(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(kt);function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ae(t);if(e){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}function je(t,e){if(e&&("object"===Be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ee(t)}function Ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Re(t,e)}(i,t);var e,n,r,o=Ce(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Le(Ee(t=o.call(this)),"bar",void 0),Le(Ee(t),"barMask",void 0),Le(Ee(t),"initialWidth",596),Le(Ee(t),"isFrozen",void 0),Le(Ee(t),"delay",void 0),Le(Ee(t),"frozen",void 0),Le(Ee(t),"frozenBack",void 0),Le(Ee(t),"back",void 0),Le(Ee(t),"barBorder",void 0),t.back=v.Sprite.from(v.Texture.from("timer_1.png")),t.addChild(t.back),t.frozenBack=v.Sprite.from(v.Texture.from("timer_frozen_1.png")),t.frozenBack.visible=!1,t.addChild(t.frozenBack),t.bar=v.Sprite.from(v.Texture.from("timer_2.png")),t.addChild(t.bar),t.barMask=new v.Sprite(v.Texture.WHITE),t.barMask.x=16,t.barMask.width=0,t.barMask.height=t.bar.height,t.addChild(t.barMask),t.bar.mask=t.barMask,t.barBorder=v.Sprite.from(v.Texture.from("timer_0.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.x=100,t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.frozen=new v.Sprite(v.Texture.from("timer_frozen_0.png")),t.frozen.visible=!1,t.addChild(t.frozen),t}return e=i,(n=[{key:"setProgress",value:function(t){this.barMask.width=this.initialWidth*t,this.barBorder.visible=t>.01&&t<.99,this.barBorder.x=this.barMask.x+this.initialWidth*t}},{key:"unFreeze",value:function(){var t=this;this.isFrozen=!1,g.a.killTweensOf(this.frozen),g.a.to(this.frozenBack,{alpha:0,duration:.3}),g.a.to(this.back,{alpha:1,duration:.3}),g.a.to(this.frozen,{alpha:0,duration:.3,onComplete:function(){t.frozen.visible=!1,t.frozenBack.visible=!1}})}},{key:"freeze",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.isFrozen=!0,this.frozen.visible=!0,this.frozen.alpha=0,this.frozenBack.visible=!0,this.frozenBack.alpha=0,g.a.killTweensOf(this.frozen),g.a.killTweensOf(this.frozenBack),g.a.killTweensOf(this.back),g.a.to(this.frozen,{alpha:1,duration:.3}),g.a.to(this.frozenBack,{alpha:1,duration:.3}),g.a.to(this.back,{alpha:0,duration:.3}),this.delay&&this.delay.kill(),-1!==e&&(this.delay=g.a.delayedCall(e,(function(){t.unFreeze()})))}},{key:"clear",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0),g.a.killTweensOf(this.frozen),this.frozen.visible=!1,this.frozenBack.visible=!1,this.back.alpha=1,this.isFrozen=!1}}])&&_e(e.prototype,n),r&&_e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=We(t);if(e){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ue(t)}function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}(i,t);var e,n,r,o=Ye(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ze(Ue(t=o.call(this)),"bar",void 0),ze(Ue(t),"max",void 0),ze(Ue(t),"current",void 0),ze(Ue(t),"initialWidth",170),ze(Ue(t),"barMask",void 0),ze(Ue(t),"barBorder",void 0),ze(Ue(t),"barShine",void 0);var e=v.Sprite.from(v.Texture.from("battery_empty.png"));return t.addChild(e),t.bar=v.Sprite.from(v.Texture.from("battery_full.png")),t.addChild(t.bar),t.barMask=new v.Sprite(v.Texture.WHITE),t.barMask.width=0,t.barMask.height=t.bar.height,t.barMask.x=27,t.addChild(t.barMask),t.barBorder=v.Sprite.from(v.Texture.from("battery_border.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.barShine=new v.AnimatedSprite([v.Texture.from("battery_charging0.png"),v.Texture.from("battery_charging1.png"),v.Texture.from("battery_charging2.png"),v.Texture.from("battery_charging1.png")]),t.addChild(t.barShine),t.barShine.animationSpeed=.3,t.barShine.visible=!1,t.bar.mask=t.barMask,t.current=0,t.max=10,t}return e=i,(n=[{key:"maximum",set:function(t){this.max=t}},{key:"reset",value:function(t){g.a.killTweensOf(this.barMask),this.current=0,t?this.barMask.width=0:g.a.to(this.barMask,{width:0,duration:.1}),this.barBorder.visible=!1}},{key:"update",value:function(t){var e=this;this.current+=t,this.current=Math.min(this.current,this.max),this.barShine.visible=!0,this.barShine.gotoAndPlay(0);var n=this.current>=this.max,r=this.current/this.max;return this.barBorder.visible=r>.05&&r<.9,g.a.killTweensOf(this.barMask),g.a.to(this.barMask,{width:this.initialWidth*r,duration:.2}),g.a.to(this.barBorder,{x:this.barMask.x+this.initialWidth*r,duration:.2,onComplete:function(){e.barShine.visible=!1,e.barShine.stop()}}),n&&(this.barShine.visible=!1,this.barShine.stop(),this.current=0,g.a.to(this.barMask,{width:0,delay:.2,duration:.2}),g.a.to(this.barBorder,{x:this.barMask.x,duration:.2,onUpdate:function(){e.barBorder.visible=r>.05&&r<.9}})),n}}])&&De(e.prototype,n),r&&De(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$e(t);if(e){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(t,e){if(e&&("object"===Ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qe(t)}function qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}(i,t);var e,n,r,o=Xe(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ze(qe(t=o.call(this)),"back",void 0),Ze(qe(t),"blocks",void 0),Ze(qe(t),"startX",void 0),Ze(qe(t),"startY",void 0),Ze(qe(t),"txt",void 0),t.blocks=[],t.back=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50),t.back.width=.96*Y.originalWidth,t.back.height=300,t.back.position.set(.5*-t.back.width,0),t.addChild(t.back),t.txt=new v.Text("From: Leopold",{fontSize:25,fill:0,fontWeight:"bold",align:"left"}),t.txt.anchor.set(0,.5),t.txt.position.set(.5*-t.back.width+40,30),t.addChild(t.txt),t.clear(),t}return e=i,(n=[{key:"setLines",value:function(t){this.txt.text="From: "+i.senders[Math.floor(Math.random()*i.senders.length)];var e=t.length;this.back.height=75*e+70,this.startX=-300,this.startY=95;for(var n=0;n<e;n++){for(var r=this.startX,o=0;o<t[n].length;o++){var a=new Wt(r,this.startY,t[n][o],!1);this.addBlock(a),r+=74}this.startY+=70}}},{key:"addBlock",value:function(t){this.blocks.push(t),this.addChild(t),t.visible=!1}},{key:"show",value:function(){this.blocks.forEach((function(t){t.visible=!0}))}},{key:"clear",value:function(){var t=this;this.blocks.forEach((function(e){t.removeChild(e)})),this.blocks=[]}}])&&Ke(e.prototype,n),r&&Ke(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=un(t);if(e){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return on(this,n)}}function on(t,e){if(e&&("object"===tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return an(t)}function an(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ze(Qe,"senders",["Mom","Dad","Boss","Red Hair","Stupid guy","Handsome stranger","Vampire","Lady Hamilton","Dude","Sis","Bro","Grany","Kurt","Kristin","Leo Di","Emergency"]);var cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}(i,t);var e,n,r,o=rn(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=an(t),r=void 0,(n="txt")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=new v.Sprite(v.Texture.from("letter_button.png"));return a.anchor.set(.5,.5),t.addChild(a),t.txt=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:60,fill:0,align:"center",fontWeight:"bold"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"letter",set:function(t){this.txt.text=t}}])&&en(e.prototype,n),r&&en(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vn(t);if(e){var o=vn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yn(this,n)}}function yn(t,e){if(e&&("object"===sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dn(t)}function dn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e)}(u,t);var e,n,r,o,i,a=hn(u);function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),bn(dn(e=a.call(this)),"bound",new v.Rectangle),bn(dn(e),"back",void 0),bn(dn(e),"letters",void 0),bn(dn(e),"stringLetters",void 0),bn(dn(e),"getPoint",void 0),e.back=v.Sprite.from(v.Texture.WHITE),e.back.anchor.set(.5,.5),e.back.width=Y.originalWidth,e.back.height=Y.originalHeight,e.addChild(e.back),e.stringLetters=e.getLetters(t),e.letters=[];for(var n=0;n<e.stringLetters.length;n++){var r=new cn;r.visible=!1,e.addChild(r),e.letters.push(r)}return e}return e=u,(n=[{key:"start",value:(o=regeneratorRuntime.mark((function t(e){var n,r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.getPoint=e,this.visible=!0,this.back.alpha=0,n=[],r=0,o=0;o<this.stringLetters.length;o++)r++," "===this.stringLetters[o]&&(n.push(r),r=0);return 0===n.length?n.push(this.stringLetters.length):n.push(r),t.abrupt("return",new Promise((function(t){g.a.to(i.back,{alpha:.7,duration:1});for(var e=0,r=-30,o=n[e],a=60/(o-1),u=100*o,c=.5*-u,s=u/(o-1),l=-400,f=[],p=i.stringLetters.length,h=0;h<p;h++){var y=i.letters.pop();y&&(f.push(y),y.visible=!0,y.letter=i.stringLetters[h],y.position.set(-400,700),y.scale.set(.1,.1),y.angle=r-30,g.a.to(y,{angle:r,x:c,y:l,delay:.1*h,duration:.5}),g.a.to(y.scale,{x:1,y:1,delay:.1*h,duration:.5})," "===i.stringLetters[h]?(e++,r=-30,a=60/((o=n[e])-1),c=.5*-(u=100*o),l+=140,s=u/(o-1)):(r+=a,c+=s))}g.a.to(i.back,{alpha:0,delay:1.2,duration:.5}),g.a.delayedCall(1+.1*(i.stringLetters.length-1),(function(){i.animate(f).then((function(){t()}))}))})));case 8:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){ln(i,n,r,a,u,"next",t)}function u(t){ln(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"clean",value:function(){this.getPoint=void 0,g.a.killTweensOf(this.back)}}])&&fn(e.prototype,n),r&&fn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(){return(xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=On(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function On(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_n(t)););return t}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_n(t);if(e){var o=_n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sn(this,n)}}function Sn(t,e){if(e&&("object"===wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bn(t)}function Bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _n(t){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pn(t,e)}(i,t);var e,n,r,o=Tn(i);function i(){var t;gn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Rn(Bn(t=o.call.apply(o,[this].concat(n))),"points",[]),t}return e=i,r=[{key:"getAllByAmount",value:function(t){if(0===t)return[];i.allTexts||(i.allTexts=new Map,["BANG!","BONUS","SMASH","KABOOM","CRASH","CLANK","THUMP","WHAM!","SUPER BOOM","SUPER BONUS","LET'S JAZZ","YOU ARE JUST GREAT","YOU ARE GREAT","SUPER PUPER BOOM","WISH YOU LUCK, DUDE!","THAT WAS DOOM!","OH MY GOD!"].forEach((function(t){var e=t.length>=17?3:t.length>=10?2:1,n=[];i.allTexts.get(e)&&(n=i.allTexts.get(e)),n.push(t),i.allTexts.set(e,n)})),console.log(i.allTexts));var e=i.allTexts.get(t);return e[Math.floor(Math.random()*e.length)].split("")}}],(n=[{key:"activeBound",get:function(){if(this.points.length>0){for(var t=[],e=0;e<this.points.length;e++){var n=this.points[e];t.push(new v.Rectangle(n[0]-1,n[1]-1,2,2))}return this.points=[],t}}},{key:"clean",value:function(){this.points=[],xn(_n(i.prototype),"clean",this).call(this)}},{key:"getLetters",value:function(t){return i.getAllByAmount(t)}},{key:"animate",value:function(t){var e=this;return this.points=[],new Promise((function(n){if(e.getPoint){for(var r=function(n){var r=e.getPoint();if(!r)return"continue";g.a.to(t[n].scale,{x:0,y:0,duration:.2}),g.a.to(t[n],{x:50*r[0],y:50*r[1],duration:.2,onComplete:function(){e.points.push(r)}})},o=0;o<t.length;o++)r(o);g.a.delayedCall(.25,(function(){n()}))}else n()}))}}])&&kn(e.prototype,n),r&&kn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(mn);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e){return(An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dn(t);if(e){var o=Dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mn(this,n)}}function Mn(t,e){if(e&&("object"===jn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return In(t)}function In(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Rn(Cn,"allTexts",void 0);var Yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&An(t,e)}(i,t);var e,n,r,o=Ln(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Nn(In(t=o.call(this)),"scoreTxt",void 0),Nn(In(t),"scoreNumber",void 0);var e=v.Sprite.from(v.Texture.from("score_place.png"));return t.addChild(e),t.scoreNumber=0,t.scoreTxt=new v.Text(t.scoreFormatted(0),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:16777215,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.position.set(.5*e.width,.5*e.height),t.addChild(t.scoreTxt),t}return e=i,(n=[{key:"score",set:function(t){var e=this,n={score:this.scoreNumber};this.scoreTxt.text=this.scoreFormatted(this.scoreNumber),g.a.to(n,{score:t,duration:.1,ease:k.f.easeNone,onUpdate:function(){e.scoreTxt.text=e.scoreFormatted(Math.floor(n.score))}}),this.scoreNumber=t}},{key:"scoreFormatted",value:function(t){for(var e=t.toString(),n=6-e.length,r=0;r<n;r++)e="0"+e;return e}}])&&En(e.prototype,n),r&&En(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wn(t,e){return(Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gn(t);if(e){var o=Gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){if(e&&("object"===Fn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wn(t,e)}(i,t);var e,n,r,o=zn(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"pause_button.png","pause_button.png")}return e=i,n&&Un(e.prototype,n),r&&Un(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(kt);function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qn(t);if(e){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $n(this,n)}}function $n(t,e){if(e&&("object"===Vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zn(t)}function Zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jn(t,e)}(i,t);var e,n,r,o=qn(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),tr(Zn(t=o.call(this,0)),"rect",void 0),tr(Zn(t),"laser",void 0),t.laser=v.Sprite.from(v.Texture.from("direction.png")),t.laser.height=500,t.laser.rotation=Math.PI/2,t.laser.alpha=0,t.laser.anchor.set(.5,.5),t.addChild(t.laser),t.laser.visible=!1,t}return e=i,(n=[{key:"activeBound",get:function(){if(this.rect)return[this.rect]}},{key:"getLetters",value:function(){return["{","}"]}},{key:"animate",value:function(t){var e=this;return new Promise((function(n){if(void 0!==e.getPoint||2!==t.length){var r=e.getPoint();g.a.to(t[0],{x:-300,angle:0,y:50*r,duration:.2}),g.a.to(t[1],{x:300,angle:0,y:50*r,duration:.2}),g.a.delayedCall(.2,(function(){e.laser.visible=!0,e.laser.y=50*r,e.rect=new v.Rectangle(-7,r-.5,14,1),g.a.to(e.laser,{alpha:1,duration:.2}),g.a.delayedCall(.2,(function(){e.rect=void 0,g.a.to(t[0],{alpha:0,duration:.2}),g.a.to(t[1],{alpha:0,duration:.2}),g.a.to(e.laser,{alpha:0,duration:.2}),g.a.delayedCall(.2,(function(){n()}))}))}))}else n()}))}}])&&Xn(e.prototype,n),r&&Xn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(mn);function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function or(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cr(t);if(e){var o=cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ur(this,n)}}function ur(t,e){if(e&&("object"===nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ir(t,e)}(i,t);var e,n,r,o=ar(i);function i(){return rr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"isObstacle",value:function(){return!0}}])&&or(e.prototype,n),r&&or(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(qt);function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pr(t,e){return(pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dr(t);if(e){var o=dr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yr(this,n)}}function yr(t,e){if(e&&("object"===lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pr(t,e)}(i,t);var e,n,r,o=hr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t[0],t[1],100,100,0)).view.scale.set(1,1),e.type=Wt.STATIC_OBSTACLE_TYPE,e}return e=i,(n=[{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("app_static.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new E.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&fr(e.prototype,n),r&&fr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(sr);function br(t){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Or(t);if(e){var o=Or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}function kr(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xr(t)}function xr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Or(t){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tr,Sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wr(t,e)}(i,t);var e,n,r,o=gr(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Pr(xr(n=o.call(this,t[0],t[1],100,100,0)),"moving",!1),Pr(xr(n),"lives",void 0),Pr(xr(n),"txt",void 0),Pr(xr(n),"explosion",void 0),n.type=Wt.RANDOM_OBSTACLE_TYPE,n.lives=e,n.txt=new v.Text(n.lives.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),n.txt.anchor.set(.5,.5),n.txt.y=20,n.view.addChild(n.txt),n.view.scale.set(1,1),n.explosion=zi.obtain(),n.explosion.visible=!1,n.addChild(n.explosion),n}return e=i,(n=[{key:"changePosition",value:function(){var t=this;if(!this.moving){this.lives--;var e=this.lives<=0;this.moving=!0;var n=this.view.scale.x;g.a.to(this.view.scale,{x:.01,y:.01,duration:.1,onUpdate:function(){var e,n;t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),null===(e=t.body)||void 0===e||e.updateBoundingRadius(),null===(n=t.body)||void 0===n||n.updateMassProperties()},onComplete:function(){if(e)t.destroyBody(),t.explosion.visible=!0,t.explosion.animate().then((function(){zi.release(t.explosion),t.clean()}));else{t.txt.text=t.lives.toString();var r=9*Math.random()-4.5,o=5*-Math.random();t.body&&(t.body.position=[r,o]),g.a.to(t.view.scale,{x:n,y:n,duration:.4,onUpdate:function(){var e,n;t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),null===(e=t.body)||void 0===e||e.updateBoundingRadius(),null===(n=t.body)||void 0===n||n.updateMassProperties()},onComplete:function(){t.moving=!1}})}}})}}},{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("app_random.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new E.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&mr(e.prototype,n),r&&mr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(sr);function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||Rr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(t,e){if(t){if("string"==typeof t)return Cr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cr(t,e):void 0}}function Cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(t,e){if(e&&("object"===Br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mr(t)}function Mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.Begin="begin",t.Moving="moving",t.Heart="heart",t.NewLine="newLine",t.Recharge="recharge",t.Unbreak="unbreak",t.IAPBonus="iapbonus",t.IAPBonus2="iapbonus2",t.ChangePosition="changed",t.Skull="skull",t.AnyType="anytype",t.RainbowType="rainbowtype"}(Tr||(Tr={}));var Nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e)}(i,t);var e,n,r,o=Ar(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Dr(Mr(t=o.call(this)),"allConditions",void 0),Dr(Mr(t),"textMap",void 0),Dr(Mr(t),"tutorial",void 0),Dr(Mr(t),"txt",void 0),Dr(Mr(t),"back",void 0),t.allConditions=new Map,t.textMap=new Map,t.textMap.set(Tr.Begin,"Save the Heart by moving it to the top!"),t.textMap.set(Tr.Moving,"Tap the screen and move your finger to aim. Release to shoot."),t.textMap.set(Tr.Heart,"The Heart is free and happy now!"),t.textMap.set(Tr.NewLine,"It's time for a new emoji load!"),t.textMap.set(Tr.Recharge,"Charge it fully to get a bonus!"),t.textMap.set(Tr.Unbreak,"This app is invincible!"),t.textMap.set(Tr.IAPBonus,"but this bonuses will help you."),t.textMap.set(Tr.IAPBonus2,"and this one too!"),t.textMap.set(Tr.ChangePosition,"This app should be destroyed! Aim to it!"),t.textMap.set(Tr.Skull,"Do not touch this Skulls by Heart or by throwed Emoji!"),t.textMap.set(Tr.AnyType,"This ball is matching with any emoji!"),t.textMap.set(Tr.RainbowType,"This ball is destroying everything!"),t.back=v.Sprite.from(v.Texture.WHITE),t.back.interactive=!0,t.back.width=Y.originalWidth,t.back.height=Y.originalHeight,t.addChild(t.back),t.back.position.set(.5*-t.back.width,.5*-t.back.height),t.back.tint=0,t.back.alpha=.3,t.tutorial=new v.NineSlicePlane(v.Texture.from("tutorial.png"),52,52,90,93),t.addChild(t.tutorial),t.txt=new v.Text("",{fontSize:50,fontWeight:"bold",fill:16777215,wordWrap:!0,wordWrapWidth:300}),t.addChild(t.txt),t.visible=!1,t}return e=i,(n=[{key:"addCondition",value:function(t,e){this.allConditions.set(t,e)}},{key:"update",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Rr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.allConditions);try{for(e.s();!(t=e.n()).done;){var n=_r(t.value,2),r=n[0],o=(0,n[1])();if(o.success){this.show(r,o.data),this.allConditions.delete(r);break}}}catch(t){e.e(t)}finally{e.f()}}},{key:"isDone",value:function(t){return void 0===this.allConditions.get(t)}},{key:"show",value:function(t,e){var n=this,r=this.textMap.get(t);if(r){this.txt.text=r,this.tutorial.scale.set(1,1),this.tutorial.pivot.set(this.txt.width+80,this.txt.height+80),this.tutorial.width=this.txt.width+80,this.tutorial.height=this.txt.height+80,this.tutorial.scale.set(0,0);var o={x:1,y:1},i=e.pos,a=e.scale;o.x*=a.x,o.y*=a.y,this.tutorial.position.copyFrom(i),this.txt.position.copyFrom(i),1===a.x?this.txt.x-=60+this.txt.width:this.txt.x+=60,1===a.y?this.txt.y-=60+this.txt.height:this.txt.y+=52,this.txt.scale.set(0,0),this.back.alpha=0;var u=o.x/15,c=o.y/15,s=window.setInterval((function(){n.back.alpha+=.02,n.tutorial.scale.x+=u,n.tutorial.scale.y+=c,n.txt.scale.x+=1/15,n.txt.scale.y+=1/15,n.back.alpha>=.3&&window.clearInterval(s)}),10);this.visible=!0,Ja(!0,!0),window.setTimeout((function(){Ja(!1,!0),g.a.globalTimeline.pause(),Y.paused=!0,n.back.on("pointerup",(function(t){t.stopPropagation(),t.stopped=!0,n.hide()}))}),200)}}},{key:"hide",value:function(){var t=this;Y.paused=!1,g.a.globalTimeline.resume(),g.a.to(this,{alpha:0,duration:.3,onComplete:function(){t.visible=!1,t.alpha=1}}),this.back.off("pointerup")}}])&&jr(e.prototype,n),r&&jr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container),Yr=n(198);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kr(t);if(e){var o=Kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr(this,n)}}function Hr(t,e){if(e&&("object"===Fr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gr(t)}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kr(t){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wr(t,e)}(i,t);var e,n,r,o=zr(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Vr(Gr(t=o.call(this)),"iconL0",void 0),Vr(Gr(t),"iconR0",void 0),Vr(Gr(t),"iconL1",void 0),Vr(Gr(t),"iconR1",void 0);var e=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);e.tint=0,e.width=370,e.height=250,e.pivot.set(185,100),t.addChild(e),e.y=-50;var n=new v.Text("level powerups:",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:35,fill:16777215,align:"center",fontWeight:"bold"});n.anchor.set(.5,.5),n.position.set(0,-115),t.addChild(n);var r=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);r.pivot.set(80,80),r.width=160,r.height=160,t.addChild(r);var a=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);a.pivot.set(80,80),a.width=160,a.height=160,t.addChild(a),r.position.set(-85,0),a.position.set(85,0);var u=new v.Container,c=new v.Container;t.addChild(u),t.addChild(c),u.position.x=-85,c.position.x=85;var s=v.Sprite.from(v.Texture.WHITE);s.anchor.set(0,.5),s.width=140,s.height=140,t.addChild(s);var l=v.Sprite.from(v.Texture.WHITE);return l.anchor.set(0,.5),l.width=140,l.height=140,t.addChild(l),s.position.x=-145,l.position.x=5,u.mask=s,c.mask=l,t.iconL0=v.Sprite.from(i.randomTexture),t.iconL0.anchor.set(.5,.5),t.iconL0.scale.set(.5,.5),u.addChild(t.iconL0),t.iconR0=v.Sprite.from(i.randomTexture),t.iconR0.anchor.set(.5,.5),t.iconR0.scale.set(.5,.5),c.addChild(t.iconR0),t.iconL1=v.Sprite.from(i.randomTexture),t.iconL1.anchor.set(.5,.5),t.iconL1.scale.set(.5,.5),u.addChild(t.iconL1),t.iconL1.y=140,t.iconR1=v.Sprite.from(i.randomTexture),t.iconR1.anchor.set(.5,.5),t.iconR1.scale.set(.5,.5),c.addChild(t.iconR1),t.iconR1.y=140,t}return e=i,r=[{key:"prepareTextures",value:function(){this.allTextures=new Map,this.allTextures.set(Si.RocketUp,v.Texture.from("powerup_rocket.png")),this.allTextures.set(Si.Kill,v.Texture.from("powerup_bomb.png")),this.allTextures.set(Si.Freeze,v.Texture.from("powerup_freeze.png"))}},{key:"getTexture",value:function(t){var e=this.allTextures.get(t);return e||v.Texture.EMPTY}},{key:"randomTexture",get:function(){var t=Array.from(this.allTextures.keys()),e=t[Math.floor(Math.random()*t.length)];return this.getTexture(e)}}],(n=[{key:"start",value:function(t){var e=this;g.a.to({a:0},{a:1,duration:1,onUpdate:function(){if(e.iconL0.y>=140){e.iconL0.texture=i.randomTexture,e.iconR0.texture=i.randomTexture;var t=e.iconL0;e.iconL0=e.iconL1,e.iconL1=t,t=e.iconR0,e.iconR0=e.iconR1,e.iconR1=t,e.iconL0.y=0,e.iconR0.y=0}e.iconL0.y+=20,e.iconR0.y+=20,e.iconL1.y=e.iconL0.y-140,e.iconR1.y=e.iconR0.y-140},onComplete:function(){e.iconL0.y=0,e.iconR0.y=0,e.iconR1.y=140,e.iconL1.y=140,e.iconL0.texture=i.getTexture(t[0]),e.iconR0.texture=i.getTexture(t[1])}})}}])&&Ur(e.prototype,n),r&&Ur(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qr(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function $r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zr(t,e){return(Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=no(t);if(e){var o=no(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return to(this,n)}}function to(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return eo(t)}function eo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function no(t){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ro(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Vr(Xr,"allTextures",void 0);var oo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(u,t);var e,n,r,o,i,a=Qr(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),ro(eo(t=a.call(this)),"back",void 0),ro(eo(t),"popup",void 0),ro(eo(t),"callback",void 0),ro(eo(t),"scoreTxt",void 0),ro(eo(t),"timeBonusTxt",void 0),ro(eo(t),"title",void 0),ro(eo(t),"stars",void 0),ro(eo(t),"emitter",void 0),ro(eo(t),"prizeIcon",void 0),ro(eo(t),"heart",void 0),ro(eo(t),"onTickEvent",(function(e){t.emitter.update(e/70)})),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=Y.originalWidth,t.back.height=Y.originalHeight,t.back.tint=0,t.back.alpha=0,t.addChild(t.back);var e=new v.Container;t.addChild(e),t.popup=new v.Container,t.popup.scale.set(0,0),t.addChild(t.popup);var n=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);n.pivot.set(300,400),n.width=600,n.height=800,t.popup.addChild(n),t.title=new v.Text("Well done!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"}),t.title.anchor.set(.5,.5),t.title.position.y=-310,t.popup.addChild(t.title),t.scoreTxt=new v.Text("0",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:120,fill:0,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.y=80,t.popup.addChild(t.scoreTxt),t.timeBonusTxt=new v.Text("+ Time Bonus!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:40,fill:6242531,align:"center"}),t.timeBonusTxt.anchor.set(.5,.5),t.popup.addChild(t.timeBonusTxt),t.timeBonusTxt.visible=!1,t.heart=new v.Container;var r=new v.Sprite(v.Texture.from("hero.png"));r.anchor.set(.5,.5),t.heart.addChild(r);var o=new v.Sprite(v.Texture.from("hero_.png"));o.anchor.set(.5,.5),t.heart.addChild(o),t.heart.scale.set(1.3,1.3),t.heart.position.y=-1e3,t.addChild(t.heart),t.stars=[];for(var i=-120,c=0;c<3;c++){var s=v.Sprite.from(v.Texture.from("like.png"));s.anchor.set(.5,.5),s.position.set(i,-150),t.popup.addChild(s),t.stars.push(s),s.visible=!1,i+=120}t.popup.addChild(t.stars[1]),t.prizeIcon=new v.Sprite,t.prizeIcon.anchor.set(.5,.5),t.prizeIcon.scale.set(.5,.5),t.prizeIcon.position.copyFrom(t.stars[2]),t.prizeIcon.x+=50,t.prizeIcon.y-=50,t.popup.addChild(t.prizeIcon),t.prizeIcon.visible=!1;var l=new kt("ok_button.png","ok_button.png");return l.on("pointerup",(function(){t.hide()})),l.position.y=300,t.popup.addChild(l),t.emitter=new Yr.a(e,"like.png",Y.particles),t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n,r,o,i,a,u){var c,s,l,f,p,h,y,d,b=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timeBonusTxt.visible=!1,this.heart.position.y=-1e3,this.heart.alpha=1,console.log(a.toString(),u,r),this.title.text=e?"Well done!":"So sorry...",!((c=u!==Si.None?u[0]:Si.None)!==Si.None&&n+r>=o[2])){t.next=23;break}return t.next=9,Q("powerupDone"+a.toString(),"0");case 9:if(s=t.sent,console.log("pd",s),"0"!==s){t.next=23;break}return this.prizeIcon.visible=!0,this.prizeIcon.scale.set(0,0),this.prizeIcon.texture=Xr.getTexture(c),t.next=17,Q(Se.getStorageId(c),"0");case 17:return l=t.sent,f=parseInt(l),t.next=21,Z(Se.getStorageId(c),(f+1).toString());case 21:return t.next=23,Z("powerupDone"+a.toString(),"1");case 23:for(p=0;p<this.stars.length;p++)(h=this.stars[p]).visible=!0,h.scale.set(0,0),h.showed=!1;this.callback=i,this.visible=!0,this.back.alpha=0,this.popup.scale.set(0,0),y={s:0},this.scoreTxt.text="0",d=function(){b.scoreTxt.text=Math.round(y.s).toString();for(var t=0;t<o.length;t++){var e=b.stars[t];if(y.s>=o[t]&&!e.showed){e.showed=!0;var n=1===t?1.5:1;g.a.to(e.scale,{x:n,y:n,duration:.2,ease:k.a.easeOut}),b.prizeIcon.visible&&2===t&&g.a.to(b.prizeIcon.scale,{x:.5,y:.5,duration:.2,ease:k.a.easeOut})}}},g.a.to(y,{s:n,delay:1,duration:2,onUpdate:d,onComplete:function(){y.s=n,r>0&&(n+=r,b.timeBonusTxt.visible=!0,b.timeBonusTxt.scale.set(5,5),g.a.to(b.timeBonusTxt.scale,{x:1,y:1,duration:.5,onComplete:function(){g.a.to(y,{s:n,duration:1,onUpdate:d})}}))}}),g.a.to(this.back,{alpha:.5,duration:.5}),g.a.to(this.popup.scale,{x:1,y:1,duration:1,ease:k.a.easeOut}),e&&(g.a.to(this.heart,{y:-410,delay:1,duration:1.5,ease:k.a.easeOut}),g.a.delayedCall(1,(function(){b.emitter.emit=!0,v.Ticker.shared.add(b.onTickEvent)})));case 35:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){qr(i,n,r,a,u,"next",t)}function u(t){qr(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n,r,o,a,u){return i.apply(this,arguments)})},{key:"hide",value:function(){var t=this;g.a.to(this.back,{alpha:0,duration:.2}),g.a.to(this.heart,{alpha:0,duration:.2}),g.a.to(this.popup.scale,{x:0,y:0,duration:.2,onComplete:function(){t.emitter.emit=!1,t.emitter.cleanup(),v.Ticker.shared.remove(t.onTickEvent),t.prizeIcon.visible=!1,t.visible=!1,t.callback()}})}}])&&$r(e.prototype,n),r&&$r(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return uo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function co(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lo(t,e){return(lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yo(t);if(e){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(t,e){if(e&&("object"===io(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ho(t)}function ho(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yo(t){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e)}(u,t);var e,n,r,o,i,a=fo(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),vo(ho(t=a.call(this)),"texts",void 0),vo(ho(t),"usingTexts",void 0),vo(ho(t),"back",void 0),vo(ho(t),"wheelbox",void 0),vo(ho(t),"tween",void 0),vo(ho(t),"nameBack",void 0),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=Y.originalWidth,t.back.height=Y.originalHeight,t.back.alpha=0,t.addChild(t.back),t.nameBack=new v.NineSlicePlane(v.Texture.from("name_back.png"),80,80,80,80),t.nameBack.width=600,t.nameBack.alpha=0,t.addChild(t.nameBack),t.texts=[],t.usingTexts=[];for(var e=0;e<4;e++){var n=t.getNewText();t.texts.push(n)}return t.wheelbox=new Xr,t.addChild(t.wheelbox),t.visible=!1,t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r.visible=!0,r.back.alpha=0,r.nameBack.alpha=0,r.wheelbox.position.y=1e3;var o=n!==Si.None,i=o?3:1.4;g.a.to(r.back,{alpha:.7,duration:.2}),g.a.to(r.nameBack,{alpha:1,duration:.2});for(var a=e.name.split(" "),u=-70*a.length/2+35-100,c=u,s=function(t){var e=a[t],n=void 0;(n=r.texts.length>0?r.texts.pop():r.getNewText()).alpha=1,n.visible=!0,n.text=e,r.addChild(n),r.usingTexts.push(n),n.y=u,n.x=t%2?-500-n.width/2:500+n.width/2,g.a.to(n,{x:0,duration:.5,ease:k.d.easeOut}),g.a.to(n,{alpha:0,delay:i-.2,duration:.5,onComplete:function(){r.texts.push(n)}}),u+=70},l=0;l<a.length;l++)s(l);g.a.to(r.back,{alpha:0,delay:i-.2,duration:.5}),g.a.to(r.nameBack,{alpha:0,delay:i-.2,duration:.5}),o&&(r.wheelbox.visible=!0,r.wheelbox.alpha=1,g.a.to(r.wheelbox,{y:u+140,delay:.6,duration:.5,ease:k.d.easeOut,onComplete:function(){r.wheelbox.start(n)}}),g.a.to(r.wheelbox,{alpha:0,delay:i-.2,duration:.5}),u+=120+r.wheelbox.height/2);var f=Math.max(400,u-c+100);r.nameBack.pivot.set(300,f/2),r.nameBack.height=f,r.nameBack.y=o?c-80+f/2:-100,r.tween=g.a.delayedCall(i,(function(){r.usingTexts=[],r.visible=!1,r.tween=void 0,t()}))})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){co(i,n,r,a,u,"next",t)}function u(t){co(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"clear",value:function(){this.tween&&(this.tween.kill(),this.tween=void 0),g.a.killTweensOf(this.wheelbox),g.a.killTweensOf(this.back);var t,e=ao(this.usingTexts);try{for(e.s();!(t=e.n()).done;){var n=t.value;g.a.killTweensOf(n),this.removeChild(n)}}catch(t){e.e(t)}finally{e.f()}this.visible=!1}},{key:"getNewText",value:function(){var t=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});return t.anchor.set(.5,.5),t}}])&&so(e.prototype,n),r&&so(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function go(t,e){return(go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ko(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Po(t);if(e){var o=Po(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xo(this,n)}}function xo(t,e){if(e&&("object"===mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Oo(t)}function Oo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var To=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&go(t,e)}(i,t);var e,n,r,o=ko(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=Oo(t),r=void 0,(n="callback")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=v.Sprite.from(v.Texture.WHITE);a.anchor.set(.5,.5),a.width=Y.originalWidth,a.height=Y.originalHeight,a.tint=0,a.alpha=.6,t.addChild(a);var u=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);u.width=500,u.height=360,u.pivot.set(250,180),t.addChild(u);var c=new v.Text("Exit?",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});c.anchor.set(.5,.5),c.position.y=-120,t.addChild(c);var s=new kt("ok_button.png","ok_button.png");s.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!0)})),s.position.set(-110,110),s.scale.set(.8,.8),t.addChild(s);var l=new kt("x_button.png","x_button.png");return l.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!1)})),l.position.set(110,110),l.scale.set(.8,.8),t.addChild(l),t.visible=!1,t}return e=i,(n=[{key:"show",value:function(t){this.callback=t,this.alpha=1,this.visible=!0}},{key:"hide",value:function(t){var e=this;this.callback&&this.callback(t),this.callback=void 0,g.a.to(this,{alpha:0,duration:.4,onComplete:function(){e.visible=!1}})}}])&&wo(e.prototype,n),r&&wo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function So(t){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _o(t,e){return(_o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ro(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Eo(t);if(e){var o=Eo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Co(this,n)}}function Co(t,e){if(e&&("object"===So(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jo(t)}function jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ao(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_o(t,e)}(i,t);var e,n,r,o=Ro(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ao(jo(t=o.call(this)),"part0",void 0),Ao(jo(t),"part1",void 0),t.part0=v.Sprite.from(v.Texture.from("direction.png")),t.part0.anchor.set(.5,1),t.addChild(t.part0),t.part0.height=1200,t.part1=v.Sprite.from(v.Texture.from("direction.png")),t.part1.anchor.set(.5,1),t.addChild(t.part1),t.part1.height=700,t}return e=i,(n=[{key:"draw",value:function(t){var e=Gi.BottomPoint,n=Math.atan2(t.y-e,t.x);this.part0.rotation=n+Math.PI/2;var r=1200*Math.cos(n),o=e+1200*Math.sin(n),i=1200;r<-315||r>315?(r=(i=Math.abs(r)/r*315/Math.cos(n))*Math.cos(n),o=i*Math.sin(n),this.part1.visible=!0,this.part1.position.set(r,o),this.part1.rotation=-n-Math.PI/2):this.part1.visible=!1,this.part0.height=i+8}}])&&Bo(e.prototype,n),r&&Bo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Do(){return(Do="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=No(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function No(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zo(t)););return t}function Yo(t,e){return(Yo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zo(t);if(e){var o=zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Uo(this,n)}}function Uo(t,e){if(e&&("object"===Mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wo(t)}function Wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zo(t){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ho(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Go=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yo(t,e)}(i,t);var e,n,r,o=Fo(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ho(Wo(r=o.call(this,t,e,Wt.ANY_TYPE,n)),"currentIcon",void 0),Ho(Wo(r),"temp",void 0),r.reGenerateTextures(),r}return e=i,(n=[{key:"reGenerateTextures",value:function(){var t=this;this.currentIcon?this.currentIcon++:this.currentIcon=1,this.currentIcon>7&&(this.currentIcon=1),this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2(),this.temp=0,g.a.to(this,{temp:1,duration:.15,onComplete:function(){t.reGenerateTextures()}})}},{key:"getTexture",value:function(){return v.Texture.from("".concat(this.currentIcon||1,".png"))}},{key:"getTexture2",value:function(){return v.Texture.from("".concat(this.currentIcon||1,"_.png"))}},{key:"clean",value:function(){g.a.killTweensOf(this),Do(zo(i.prototype),"clean",this).call(this)}}])&&Io(e.prototype,n),r&&Io(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Wt);function Ko(t){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xo(t,e){return(Xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zo(t);if(e){var o=Zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qo(this,n)}}function qo(t,e){if(e&&("object"===Ko(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $o(t)}function $o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zo(t){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ti=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xo(t,e)}(i,t);var e,n,r,o=Jo(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Qo($o(t=o.call(this)),"txt",void 0),Qo($o(t),"score",void 0),t.txt=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:40,fill:4073878,align:"center"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"start",value:function(t,e,n){var r=this;this.score=n,this.txt.text="+"+n.toString(),this.x=t,this.y=e,g.a.to(this,{x:0,y:-700,duration:.7,delay:.15*Math.random(),ease:k.d.easeIn,onComplete:function(){r.finish()}})}},{key:"finish",value:function(){g.a.killTweensOf(this),this.emit("done",this.score)}},{key:"clean",value:function(){g.a.killTweensOf(this),this.off("done"),this.score=0,this.alpha=1,this.txt.text=""}}])&&Vo(e.prototype,n),r&&Vo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ni=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="all")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.all=[];for(var i=0;i<e;i++)this.all.push(new ti)}var e,n,r;return e=t,(n=[{key:"obtain",value:function(){return 0===this.all.length&&(console.log("Score pool exceed"),this.all.push(new ti)),this.all.pop()}},{key:"release",value:function(t){t.clean(),this.all.push(t)}}])&&ei(e.prototype,n),r&&ei(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=si(t);if(e){var o=si(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ui(this,n)}}function ui(t,e){if(e&&("object"===ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ci(t)}function ci(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var li=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ii(t,e)}(i,t);var e,n,r,o=ai(i);function i(t){var e,n,r,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,v.Texture.from("bolt".concat(t,".png"))),n=ci(e),a=void 0,(r="_id")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e._id=t,e}return e=i,(n=[{key:"id",get:function(){return this._id}}])&&oi(e.prototype,n),r&&oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Sprite);function fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pi=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(n="all")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;this.all=new Map;for(var o=0;o<4;o++){for(var i=[],a=0;a<20;a++)i.push(new li(o));this.all.set(o,i)}}var e,n,r;return e=t,(n=[{key:"obtain",value:function(t){var e=this.all.get(t);return e&&0===e.length&&(console.log("Bolts pool exceed"),e.push(new li(t))),null==e?void 0:e.pop()}},{key:"release",value:function(t){this.all.get(t.id).push(t)}}])&&fi(e.prototype,n),r&&fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yi=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="all")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.all=[];for(var i=0;i<e;i++)this.all.push(t.createMissle())}var e,n,r;return e=t,r=[{key:"createMissle",value:function(){return new v.Sprite(v.Texture.from("like.png"))}}],(n=[{key:"obtain",value:function(){return 0===this.all.length&&(console.log("Missles pool exceed"),this.all.push(t.createMissle())),this.all.pop()}},{key:"release",value:function(t){this.all.push(t)}}])&&hi(e.prototype,n),r&&hi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function bi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xi(t);if(e){var o=xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gi(this,n)}}function gi(t,e){if(e&&("object"===di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ki(t)}function ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xi(t){return(xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mi(t,e)}(u,t);var e,n,r,o,i,a=wi(u);function u(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=a.call(this),e=ki(t),r=void 0,(n="art")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t.art=v.Sprite.from(Ri.getTexture(0)),t.art.anchor.set(.5,.5),t.addChild(t.art),t.scale.set(0,0),t}return e=u,(n=[{key:"animate",value:(o=regeneratorRuntime.mark((function t(){var e,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.abrupt("return",new Promise((function(t){var r=0,o={a:0};g.a.to(o,{a:1,delay:e,duration:e+.4,onUpdate:function(){var t=Math.floor(2*o.a);t!==r&&(r=t,n.art.texture=Ri.getTexture(r))}}),g.a.to(n.scale,{x:1,y:1,duration:e+.1}),g.a.to(n.scale,{x:1.3,y:1.3,delay:e+.2,duration:.3}),g.a.to(n,{alpha:0,delay:e+.2,duration:.5,onComplete:function(){t()}})})));case 2:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){vi(i,n,r,a,u,"next",t)}function u(t){vi(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"clean",value:function(){this.art.texture=Ri.getTexture(0),this.scale.set(0,0),this.alpha=1,this.visible=!0,g.a.killTweensOf(this.scale),g.a.killTweensOf(this)}}])&&bi(e.prototype,n),r&&bi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function Pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ti(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Si,Bi,_i,Ri=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ti(this,"all",void 0),this.all=[];for(var n=0;n<e;n++)this.all.push(new Oi)}var e,n,r;return e=t,r=[{key:"getTexture",value:function(e){return t._textures[e]}},{key:"createTextures",value:function(){t._textures||(t._textures=[v.Texture.from("game_explosion_0.png"),v.Texture.from("game_explosion_1.png"),v.Texture.from("game_explosion_2.png")])}}],(n=[{key:"obtain",value:function(){return 0===this.all.length&&(console.log("Missles pool exceed"),this.all.push(new Oi)),this.all.pop()}},{key:"release",value:function(t){t.clean(),this.all.push(t)}}])&&Pi(e.prototype,n),r&&Pi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ci(t){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ei(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ji(i,r,o,a,u,"next",t)}function u(t){ji(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ai(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Li(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Li(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Li(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ni(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ui(t);if(e){var o=Ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yi(this,n)}}function Yi(t,e){if(e&&("object"===Ci(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fi(t)}function Fi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ui(t){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ti(Ri,"_textures",void 0),function(t){t[t.None=0]="None",t[t.Kill=1]="Kill",t[t.Freeze=2]="Freeze",t[t.RocketUp=3]="RocketUp"}(Si||(Si={})),function(t){t[t.None=0]="None",t[t.BoomLetters=1]="BoomLetters",t[t.LaserLetters=2]="LaserLetters",t[t.BigBoomLetters=3]="BigBoomLetters",t[t.SmallBoomLetters=4]="SmallBoomLetters",t[t.All=5]="All"}(Bi||(Bi={})),function(t){t[t.None=0]="None",t[t.Random=1]="Random",t[t.Static=2]="Static",t[t.HeartMiddle=3]="HeartMiddle",t[t.Skulls=4]="Skulls"}(_i||(_i={}));var zi,Hi=[0,.2,.3,.1,.4],Gi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Di(t,e)}(O,t);var e,n,r,o,i,a,c,s,l,f,p,h,y,d,b,m,w,x=Ni(O);function O(){var t;Mi(this,O);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wi(Fi(t=x.call.apply(x,[this].concat(n))),"gameContainer",void 0),Wi(Fi(t),"fxContainer",void 0),Wi(Fi(t),"frontContainer",void 0),Wi(Fi(t),"backContainer",void 0),Wi(Fi(t),"moveBox",void 0),Wi(Fi(t),"staticBox",void 0),Wi(Fi(t),"bottomOpenWall",void 0),Wi(Fi(t),"activeBlock",void 0),Wi(Fi(t),"maxY",void 0),Wi(Fi(t),"tick",0),Wi(Fi(t),"levelStartTime",void 0),Wi(Fi(t),"moving",void 0),Wi(Fi(t),"isActivePowerup",void 0),Wi(Fi(t),"preview",void 0),Wi(Fi(t),"nextLines",void 0),Wi(Fi(t),"previewBlocks",void 0),Wi(Fi(t),"nextType",void 0),Wi(Fi(t),"nextBlock",void 0),Wi(Fi(t),"isTransition",void 0),Wi(Fi(t),"powerup1",void 0),Wi(Fi(t),"powerup2",void 0),Wi(Fi(t),"nextTimer",void 0),Wi(Fi(t),"randomBodiesPositions",void 0),Wi(Fi(t),"activeBonus",void 0),Wi(Fi(t),"boomMeter",void 0),Wi(Fi(t),"scorePlace",void 0),Wi(Fi(t),"pad",void 0),Wi(Fi(t),"padRect",void 0),Wi(Fi(t),"downRect",void 0),Wi(Fi(t),"topRect",void 0),Wi(Fi(t),"levelId",void 0),Wi(Fi(t),"meterBonus",void 0),Wi(Fi(t),"obstacles",void 0),Wi(Fi(t),"score",void 0),Wi(Fi(t),"tutorial",void 0),Wi(Fi(t),"goalBlock",void 0),Wi(Fi(t),"boltsActive",void 0),Wi(Fi(t),"levelFinished",void 0),Wi(Fi(t),"levelStart",void 0),Wi(Fi(t),"pausePopup",void 0),Wi(Fi(t),"waitForOver",void 0),Wi(Fi(t),"activeBlockDelay",void 0),Wi(Fi(t),"scorePool",void 0),Wi(Fi(t),"boltsPool",void 0),Wi(Fi(t),"misslesPool",void 0),Wi(Fi(t),"increaseBlocks",[]),Wi(Fi(t),"explodePoints",[]),Wi(Fi(t),"allScore",void 0),Wi(Fi(t),"rocketPowerup",void 0),t}return e=O,n=[{key:"create",value:function(){var t=this;Xr.prepareTextures(),Ri.createTextures(),zi=new Ri(90),this.scorePool=new ni(80),this.boltsPool=new pi,this.misslesPool=new yi(3),this.allScore=new Map,this.backContainer=new v.Container,this.addChild(this.backContainer),this.gameContainer=new v.Container,this.addChild(this.gameContainer),this.fxContainer=new v.Container,this.addChild(this.fxContainer),this.frontContainer=new v.Container,this.addChild(this.frontContainer),this.levelFinished=new oo,this.frontContainer.addChild(this.levelFinished),this.levelFinished.visible=!1,this.pad=new v.Sprite(v.Texture.from("launchpad.png")),this.pad.anchor.set(.5,1),this.pad.position.y=.5*Y.originalHeight-30,this.gameContainer.addChild(this.pad);var e=new v.NineSlicePlane(v.Texture.from("phone.png"),104,100,104,100);e.width=Y.originalWidth+50,e.height=Y.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e);var n=new v.Container;n.position.set(0,.5*-Y.originalHeight+40),this.gameContainer.addChild(n);var r=new Kn;r.position.set(-230,30),r.on("pointerup",(function(){t.showPause()})),n.addChild(r),this.powerup1=new Se,this.powerup1.position.set(-255,620),this.gameContainer.addChild(this.powerup1),this.powerup1.on("activate",(function(e){t.startPowerup(e)})),this.powerup2=new Se,this.powerup2.position.set(255,620),this.gameContainer.addChild(this.powerup2),this.powerup2.on("activate",(function(e){t.startPowerup(e)})),this.powerup1.visible=!1,this.powerup2.visible=!1,this.preview=new Lo,this.gameContainer.addChild(this.preview),this.preview.visible=!1,this.previewBlocks=new Qe,this.gameContainer.addChild(this.previewBlocks),this.previewBlocks.y=-900-this.previewBlocks.height;var o=new v.NineSlicePlane(v.Texture.from("progress_bar.png"),6,4,6,4);o.width=600,o.height=15,o.position.set(-300,500),this.gameContainer.addChild(o),this.nextTimer=new Me,this.nextTimer.position.set(-316,-637),this.gameContainer.addChild(this.nextTimer),this.boomMeter=new He,this.boomMeter.position.set(165,-725),this.boomMeter.scale.set(.85,.85),this.gameContainer.addChild(this.boomMeter),this.scorePlace=new Yn,this.scorePlace.position.set(-150,-725),this.gameContainer.addChild(this.scorePlace),this.padRect=new v.Rectangle(-140,610,280,150),this.downRect=new v.Rectangle(-400,500,800,300),this.topRect=new v.Rectangle(.5*-Y.originalWidth,.5*-Y.originalHeight,Y.originalWidth,180),this.tutorial=new Nr,this.frontContainer.addChild(this.tutorial),this.levelStart=new bo,this.frontContainer.addChild(this.levelStart),this.pausePopup=new To,this.frontContainer.addChild(this.pausePopup),this.tutorial.addCondition(Tr.Begin,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:!!t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible&&!!n&&n.y<-100,data:{pos:n,scale:{x:n&&n.x<-10?-1:1,y:-1}}}})),this.tutorial.addCondition(Tr.Moving,(function(){return{success:!!t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible,data:{pos:{x:40,y:0},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Tr.Heart,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.isTransition,data:{pos:n,scale:{x:n&&n.x<-10?-1:1,y:-1}}}})),this.tutorial.addCondition(Tr.NewLine,(function(){return{success:t.moving,data:{pos:{x:290,y:-550},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Tr.Recharge,(function(){return{success:t.boltsActive,data:{pos:{x:300,y:-650},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Tr.Unbreak,(function(){return{success:!!t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Tr.IAPBonus,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Tr.Unbreak)&&!!t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:-255,y:620},scale:{x:-1,y:1}}}})),this.tutorial.addCondition(Tr.IAPBonus2,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Tr.IAPBonus)&&!!t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:255,y:620},scale:{x:1,y:1}}}})),this.tutorial.addCondition(Tr.ChangePosition,(function(){return{success:!!t.bottomOpenWall&&t.powerup1.visible&&6===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Tr.Skull,(function(){var e,n,r={x:25,y:-125},o=Ai(R.bodies);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i&&i.userData&&i.userData.type===Wt.SKULL_TYPE){r=i.userData.position;break}}}catch(t){o.e(t)}finally{o.f()}return{success:!!t.bottomOpenWall&&12===t.levelId&&!t.levelStart.visible,data:{pos:r,scale:{x:(null===(e=r)||void 0===e?void 0:e.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Tr.AnyType,(function(){var e={x:-100,y:O.BottomPoint+20};return{success:!!t.bottomOpenWall&&t.powerup1.visible&&t.levelId>8&&t.nextType===Wt.ANY_TYPE,data:{pos:e,scale:{x:-1,y:1}}}})),this.tutorial.addCondition(Tr.RainbowType,(function(){var e={x:-100,y:O.BottomPoint+20};return{success:!!t.bottomOpenWall&&t.powerup1.visible&&t.levelId>8&&t.nextType===Wt.RAINBOW_TYPE,data:{pos:e,scale:{x:-1,y:1}}}}))}},{key:"start",value:(w=Ei(regeneratorRuntime.mark((function t(){var e,n,r,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(nt(),this.waitForOver=!1,this.boltsActive=!1,this.score=0,this.scorePlace.score=0,e=i.length,n=new Array(e),r=0;r<e;r++)n[r]=i[r];return this.levelId=n[0][0],this.activeBonus=Bi.None,this.randomBodiesPositions=[],this.obstacles=[],this.isTransition=!1,this.nextType=void 0,this.nextLines=[],this.isActivePowerup=!1,this.generateLineBlocks(),this.tick=0,this.maxY=-800,this.moving=!1,this.nextTimer.freeze(),ru("start","game","level"),eu(Va.Start),Y.paused=!1,t.next=24,this.generateStartBlocks();case 24:return o=this.generateIAPS(),t.next=27,this.levelStart.show(this.currentLevelData,o);case 27:this.currentLevelData.iaps&&(this.powerup1.setData(o[0],Xr.getTexture(o[0]),Xr.getTexture(o[0])),this.powerup2.setData(o[1],Xr.getTexture(o[1]),Xr.getTexture(o[1])),this.powerup1.visible=!0,this.powerup2.visible=!0,this.powerup1.disabled=!1,this.powerup2.disabled=!1),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.addActiveBlock(),this.nextTimer.unFreeze(),this.levelStartTime=(new Date).getTime(),this.rocketPowerup=new ae,C.stage.on("pointerup",this.onClick,this),C.stage.on("pointerdown",this.onTapStart,this);case 35:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"close",value:(m=Ei(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){C.stage.off("pointerup"),C.stage.off("pointerdown"),Y.paused=!1,e.waitForOver=!0,Ja(!1),e.allScore.clear(),e.boltsActive=!1,e.nextTimer.clear(),e.boomMeter.reset(!0),e.levelStart.clear(),e.moveBox&&e.moveBox.clean(),e.staticBox&&e.staticBox.clean(),e.bottomOpenWall&&e.bottomOpenWall.clean(),e.activeBlock&&e.activeBlock.clean(),e.activeBonus=Bi.None,e.tick=0,e.moving=!1,e.isActivePowerup=!1,e.previewBlocks&&e.previewBlocks.clear(),e.nextBlock&&e.nextBlock.clean(),e.preview.visible=!1,e.powerup1.visible=!1,e.powerup2.visible=!1,e.nextLines=[],e.randomBodiesPositions=[],e.obstacles=[],e.fxContainer.removeChildren(),R.bodies.forEach((function(t){t&&t.userData&&t.userData.clean()}));for(var n=e.gameContainer.children.length-1;n>=0;n--){var r=e.gameContainer.children[n];r.createBody&&e.gameContainer.removeChild(r)}g.a.globalTimeline.clear();var o=window.setInterval((function(){var e=R.bodies.filter((function(t){return t&&t.userData}));0===e.length?(window.clearInterval(o),t()):console.log(e)}),50)})));case 1:case"end":return t.stop()}}),t)}))),function(){return m.apply(this,arguments)})},{key:"showPause",value:function(){g.a.globalTimeline.pause(),Y.paused=!0,this.pausePopup.show((function(t){Y.paused=!1,g.a.globalTimeline.resume(),t&&I.start(Oa)}))}},{key:"generateIAPS",value:function(){if(!this.currentLevelData.iaps)return Si.None;for(var t=[Si.Kill,Si.RocketUp,Si.Freeze],e=[],n=0;n<2;n++){var r=Math.floor(Math.random()*t.length);e.push(t[r]),t.splice(r,1)}return e}},{key:"unusedBlocksRemoved",value:function(t){var e=this;if(!this.isTransition){var n=t[Math.floor(Math.random()*t.length)],r=t.length;t.forEach((function(t){e.addScoreItem(t.x,t.y,Wt.BALL_SCORE)})),r>=5&&n&&(this.fireMissle(1,n),this.addScoreItem(n.x,n.y,Wt.EXPLOSION_SCORE)),this.activeBonus||this.levelId>1&&this.playBolts(r,n)}}},{key:"addToBoomMeter",value:function(t){if(!this.activeBonus&&this.boomMeter.update(t)){var e=this.getRandomBonus();this.setActiveBonus(e)}}},{key:"playBolts",value:(b=Ei(regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<2)&&n){t.next=2;break}return t.abrupt("return");case 2:this.boltsActive=!0,r=e,e=Math.min(e,6),o=r/e,i=regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(4*Math.random()),(i=u.boltsPool.obtain(r)).anchor.set(.5,.5),i.scale.set(.1,.1),i.rotation=Math.PI/2+Math.atan2(-680-n.y,270-n.x),i.position.copyFrom(n),u.fxContainer.addChild(i),g.a.to(i.scale,{x:1.5,y:1.5,duration:.4,ease:k.f.easeNone}),g.a.to(i.scale,{x:0,y:0,delay:.4,duration:.4,ease:k.f.easeNone}),g.a.to(i.position,{x:270,y:-680,duration:.8,ease:k.f.easeNone,onComplete:function(){u.addToBoomMeter(o),u.fxContainer.removeChild(i),u.boltsPool.release(i)}}),t.next=12,u.delay(.1);case 12:case"end":return t.stop()}}),t)})),a=0;case 9:if(!(a<e)){t.next=14;break}return t.delegateYield(i(a),"t0",11);case 11:a++,t.next=9;break;case 14:this.boltsActive=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return b.apply(this,arguments)})},{key:"addScore",value:function(t){this.score+=t,this.scorePlace.score=this.score}},{key:"addScoreItem",value:function(t,e,n){var r=this,o=this.scorePool.obtain();this.allScore.set(o,!0),this.fxContainer.addChild(o),o.on("done",(function(t){r.addScore(t),r.scorePool.release(o),r.allScore.delete(o)})),o.start(t,e,n)}},{key:"currentLevelData",get:function(){return Y.levels[this.levelId]}},{key:"getRandomPosition",value:function(){if(!this.isTransition){var t=Math.floor(Math.random()*this.randomBodiesPositions.length),e=this.randomBodiesPositions[t];if(this.randomBodiesPositions.splice(t,1),e&&!(Math.abs(e[1])>=20))return e}}},{key:"getLettersAmount",value:function(t){return t===Bi.SmallBoomLetters?1:t===Bi.BoomLetters?2:t===Bi.BigBoomLetters?3:0}},{key:"setActiveBonus",value:(d=Ei(regeneratorRuntime.mark((function t(e){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.activeBonus=e,this.nextTimer.freeze(),this.addScoreItem(0,0,Wt.BONUS_SCORE),n=void 0,r=this.getLettersAmount(e),console.log("set bonus",e,r),t.t0=e,t.next=t.t0===Bi.SmallBoomLetters||t.t0===Bi.BoomLetters||t.t0===Bi.BigBoomLetters?9:t.t0===Bi.LaserLetters?12:15;break;case 9:return this.meterBonus=new Cn(r),n=function(){return o.getRandomPosition()},t.abrupt("break",16);case 12:return this.meterBonus=new er,n=function(){var t=o.getRandomPosition();if(t)return t[1]},t.abrupt("break",16);case 15:return t.abrupt("return");case 16:return this.frontContainer.addChild(this.meterBonus),t.next=19,this.meterBonus.start(n);case 19:this.clearMeterBonus(),this.nextTimer.unFreeze();case 21:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"getRandomBonus",value:function(){for(var t=this.currentLevelData.bonuses,e=[],n=0,r=0;r<t.length;r++)n+=Hi[t[r]],e.push(n);var o=Math.random()*n;return t[e.filter((function(t){return o>=t})).length]}},{key:"fireMissle",value:(y=Ei(regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isTransition){t.next=2;break}return t.abrupt("return");case 2:Ja(!0),e=Math.min(e,this.randomBodiesPositions.length),r=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i.getRandomPosition())&&!i.isTransition){t.next=3;break}return t.abrupt("return","continue");case 3:return(o=i.misslesPool.obtain()).anchor.set(.5,.5),o.scale.set(.1,.1),o.position.copyFrom(n),i.fxContainer.addChild(o),g.a.to(o.scale,{x:1.5,y:1.5,duration:.5,ease:k.f.easeNone}),g.a.to(o.scale,{x:0,y:0,delay:.5,duration:.5,ease:k.f.easeNone}),g.a.to(o.position,{x:50*r[0],y:50*r[1],duration:1,ease:k.f.easeNone,onComplete:function(){i.createExplosion(o.position,0),i.explodePoints.push(r),i.fxContainer.removeChild(o),i.misslesPool.release(o)}}),t.next=13,i.delay(.2);case 13:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<e)){t.next=15;break}return t.delegateYield(r(o),"t0",9);case 9:if("continue"!==t.t0){t.next=12;break}return t.abrupt("continue",12);case 12:o++,t.next=7;break;case 15:g.a.delayedCall(.15,(function(){Ja(!1)}));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return y.apply(this,arguments)})},{key:"createExplosion",value:(h=Ei(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=zi.obtain()).position.copyFrom(e),this.fxContainer.addChild(r),t.next=5,r.animate(n);case 5:zi.release(r);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"clearActiveBlocks",value:function(){this.activeBlockDelay&&this.activeBlockDelay.kill(),this.activeBlock&&g.a.killTweensOf(this.activeBlock),this.nextBlock&&g.a.killTweensOf(this.nextBlock),g.a.killTweensOf(this.preview),this.nextBlock&&(this.pad.removeChild(this.nextBlock),this.nextBlock.clean()),this.activeBlock&&(this.gameContainer.removeChild(this.activeBlock),this.activeBlock.clean(),this.preview.visible=!1),this.activeBlock=void 0,this.nextBlock=void 0,this.nextType=void 0}},{key:"stopBonuses",value:function(){this.activeBonus=Bi.None,this.clearActiveBlocks()}},{key:"stopAllScores",value:function(){this.allScore.forEach((function(t,e){e.finish()}))}},{key:"levelComplete",value:function(){this.stopAllScores(),this.stopBonuses(),this.isTransition=!0,this.moving=!1,this.obstacles.forEach((function(t){t.clean()})),this.obstacles=[],this.previewBlocks.y=-900-this.previewBlocks.height,this.previewBlocks&&this.previewBlocks.clear(),this.bottomOpenWall&&this.bottomOpenWall.animateAndDestroy(),this.bottomOpenWall=void 0,this.moveBox&&this.moveBox.animateAndDestroy(),this.staticBox&&this.staticBox.animateAndDestroy()}},{key:"heartDeath",value:function(){!this.goalBlock||this.goalBlock&&this.goalBlock.isSkull()||(this.goalBlock.setSkull(),this.moveBalls())}},{key:"moveBalls",value:function(){var t=this;if(!this.isTransition&&!this.moving){this.moving=!0;var e=this.nextLines.length,n=this.moveBox.body.position,r={x:n[0],y:n[1]};this.previewBlocks.show(),g.a.to(this.previewBlocks,{y:-570,duration:1.1}),g.a.to(r,{y:(70*e-500)/50,delay:.1,duration:1,ease:k.f.easeNone,onUpdate:function(){t.moveBox.body?t.moveBox.body.position=[r.x,r.y]:g.a.killTweensOf(r)},onComplete:function(){t.moveBox.body.position=[0,-11.5],t.addLineBlocks(),t.generateLineBlocks(),g.a.to(t.previewBlocks,{y:-900-t.previewBlocks.height,duration:.5}),t.moving=!1}})}}},{key:"shakeScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(g.a.to(this,{x:"+5",yoyo:!0,repeat:3,duration:.05}),g.a.to(this,{x:"-5",yoyo:!0,repeat:3,duration:.05})):(g.a.to(this,{y:"+5",yoyo:!0,repeat:3,duration:.05}),g.a.to(this,{y:"-5",yoyo:!0,repeat:3,duration:.05}))}},{key:"update",value:function(t){var e=this;if(!Y.paused&&!this.waitForOver){this.drawMouse();var n=this.meterBonus&&this.meterBonus.activeBound||void 0;this.maxY=-800;var r=!1,o=!1,i=[];if(this.randomBodiesPositions=[],R.bodies.forEach((function(t){var o=t.position;t.userData.kinematic&&t!==e.moveBox.body&&(o[1]<-9.1||o[1]>(O.BottomPoint+10)/50)&&(t.userData.shape.material=Y.material,t.gravityScale=1),t.type===E.Body.DYNAMIC&&o[1]>-O.BottomPoint/50&&t.userData&&!t.userData.isGoal()&&e.randomBodiesPositions.push(t.position),!e.isTransition&&t.type===E.Body.DYNAMIC&&o[1]>e.maxY&&(e.maxY=o[1]),e.isTransition&&t.type===E.Body.DYNAMIC&&o[1]>-O.BottomPoint/50&&(r=!0),e.isTransition&&t.type===E.Body.DYNAMIC&&o[1]<3*-O.BottomPoint/50&&t.userData.clean(),!e.isTransition&&n&&t.type===E.Body.DYNAMIC&&t.userData&&t.userData.type!==Wt.GOAL_TYPE&&n.forEach((function(e){e.contains(o[0],o[1])&&i.push(t)}))})),!this.isTransition&&this.goalBlock&&this.goalBlock.type===Wt.GOAL_TYPE&&this.goalBlock.position.y>450&&(o=!0),this.goalBlock&&!o&&this.goalBlock.resetDeathCounter(),this.tutorial.update(),this.isTransition&&!r&&!this.levelFinished.visible){this.previewBlocks.y=-900-this.previewBlocks.height,this.nextTimer.clear(),this.boomMeter.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1;var a=(new Date).getTime()-this.levelStartTime,u=Y.levels[this.levelId].idealTime,c=a<u?Math.round(1e3*(1-a/u)):0;this.levelFinished.show(!0,this.score,c,this.currentLevelData.starsConditions,(function(){e.score+=c,e.moveToNextLevel()}),this.levelId,this.generateIAPS()),this.nextTimer.freeze(),this.obstacles=[]}if(!this.moving&&!this.isTransition){if(this.goalBlock&&o&&this.goalBlock.startCountDeath(),!this.nextTimer.isFrozen){this.tick+=Math.floor(60*t);var s=this.tick%this.currentLevelData.time;this.nextTimer.setProgress(s/this.currentLevelData.time),0===s&&(this.nextTimer.setProgress(1),i=[],this.moveBalls())}if(i.length>0){var l=[];i.forEach((function(t){var n=t.userData;l.push(n.position),n.boom(!1),e.createExplosion(n.position,.2*Math.random())})),this.unusedBlocksRemoved(l)}}}}},{key:"moveToNextLevel",value:function(){var t=this;console.log("finished",this.levelId,this.score),Y.levels.length>this.levelId+1&&((!this.currentLevelData.score||this.score>this.currentLevelData.score)&&(this.currentLevelData.score=this.score,Z("".concat(this.currentLevelData.key),this.score.toString()),console.log("set score")),this.levelId+=1,this.currentLevelData.score||0===this.currentLevelData.score||(this.currentLevelData.score=0,Z("".concat(this.currentLevelData.key),"0"))),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.score=0,this.scorePlace.score=0,this.createMoveWalls(),this.generateNewBlocks().then((function(){var e=t.generateIAPS();t.levelStart.show(t.currentLevelData,e).then((function(){t.currentLevelData.iaps&&(t.powerup1.setData(e[0],Xr.getTexture(e[0]),Xr.getTexture(e[0])),t.powerup2.setData(e[1],Xr.getTexture(e[1]),Xr.getTexture(e[1])),t.powerup1.visible=!0,t.powerup2.visible=!0),t.generateLineBlocks(),t.addActiveBlock(),t.previewBlocks.y=-900-t.previewBlocks.height,t.nextTimer.unFreeze(),t.levelStartTime=(new Date).getTime()}))})),this.isTransition=!1,Y.paused=!1}},{key:"startPowerup",value:(p=Ei(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.isActivePowerup||Y.paused||this.isTransition)){t.next=2;break}return t.abrupt("return");case 2:this.isActivePowerup=!0,this.powerup1.disabled=!0,this.powerup2.disabled=!0,t.t0=e,t.next=t.t0===Si.RocketUp?8:t.t0===Si.Kill?14:t.t0===Si.Freeze?24:27;break;case 8:return this.startVerticalRocket(),t.next=11,this.delay(2);case 11:return this.powerup1.disabled=!1,this.powerup2.disabled=!1,t.abrupt("break",27);case 14:return n=this.getRandomType(),R.bodies.forEach((function(t){var e=t.userData;e&&e.type===n&&e.setBomb()})),t.next=18,this.delay(1);case 18:return this.shakeScreen(),t.next=21,this.delay(1);case 21:return this.powerup1.disabled=!1,this.powerup2.disabled=!1,t.abrupt("break",27);case 24:return this.nextTimer.freeze(10),this.delay(10).then((function(){r.powerup1.disabled=!1,r.powerup2.disabled=!1})),t.abrupt("break",27);case 27:this.isActivePowerup=!1;case 28:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"startVerticalRocket",value:(f=Ei(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=560*Math.random()-280,t.next=3,this.startRocket(e,O.BottomPoint,e,-450);case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"startRocket",value:(l=Ei(regeneratorRuntime.mark((function t(e,n,r,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gameContainer.addChild(this.rocketPowerup),t.next=3,this.rocketPowerup.animate(e,n,r,o);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return l.apply(this,arguments)})},{key:"generateActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextBlock&&this.pad.removeChild(this.nextBlock),this.nextType=-1!==t?t:this.getRandomType(!0),this.nextBlock=-1===t?this.createCircle(-90,40,this.nextType,!1):this.createCircle(-90,-20,this.nextType,!1),this.pad.addChild(this.nextBlock),-1===t&&g.a.to(this.nextBlock,{y:-20,duration:.3})}},{key:"getRandomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.levelId>9&&Math.random()<.1?Math.random()<.5?Wt.ANY_TYPE:Wt.RAINBOW_TYPE:Math.floor(Math.random()*this.currentLevelData.blocks)+1}},{key:"addActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextType||(this.nextType=this.getRandomType(!0)),this.activeBlock=-1===t?this.createCircle(-90,O.BottomPoint+35,this.nextType,!1):this.createCircle(0,O.BottomPoint,this.nextType,!1),this.activeBlock.kinematic=!0,this.gameContainer.addChild(this.activeBlock),this.generateActiveBlock(t),this.preview.position.set(0,O.BottomPoint),this.preview.visible=!0,-1===t&&(this.preview.alpha=0,g.a.to(this.activeBlock,{x:0,y:O.BottomPoint,duration:.15}),g.a.to(this.preview,{alpha:.6,duration:.15}))}},{key:"switchBlockes",value:(s=Ei(regeneratorRuntime.mark((function t(){var e,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null===(e=this.activeBlock)||void 0===e?void 0:e.type,r=this.nextType,t.next=4,new Promise((function(t){o.nextBlock&&g.a.to(o.nextBlock,{x:0,y:-50,duration:.2}),o.activeBlock?g.a.to(o.activeBlock,{x:-90,y:700,duration:.2,onComplete:function(){t()}}):g.a.to({a:0},{a:1,duration:.2,onComplete:function(){t()}})}));case 4:this.clearActiveBlocks(),this.nextType=r,this.addActiveBlock(n);case 7:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"drawMouse",value:function(){var t=this.toLocal(C.renderer.plugins.interaction.eventData.data.global);this.isTransition||Y.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(t.x,t.y)||this.topRect.contains(t.x,t.y)||this.preview.draw(t)}},{key:"onTapStart",value:function(t){var e=this.toLocal(t.data.global);this.isTransition||Y.paused||this.topRect.contains(e.x,e.y)||(this.padRect.contains(e.x,e.y)?this.switchBlockes():this.downRect.contains(e.x,e.y)||this.drawMouse())}},{key:"onClick",value:function(t){var e=this,n=this.toLocal(t.data.global);if(!(this.isTransition||Y.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(n.x,n.y)||this.topRect.contains(n.x,n.y))){this.activeBlock.createBody(E.Body.DYNAMIC,30),this.activeBlock.shape.material=Y.activeBallMaterial;var r=this.activeBlock;this.activeBlock=void 0,this.preview.visible=!1;var o=Math.atan2((n.y-O.BottomPoint)/50,n.x/50);r.body&&(r.body.gravityScale=0,r.body.applyImpulse([450*Math.cos(o),450*Math.sin(o)])),this.activeBlockDelay=g.a.delayedCall(.4,(function(){e.activeBlockDelay=void 0,e.addActiveBlock()})),R.bodies.forEach((function(t){t&&t.userData&&t.userData.type===Wt.SKULL_TYPE&&t.userData.decreaseSkullMeter()}))}}},{key:"generateLineBlocks",value:function(){var t=this.currentLevelData.lines;this.previewBlocks.clear(),this.nextLines=[];for(var e=0;e<t;e++){this.nextLines[e]=[];for(var n=0;n<9;n++)this.nextLines[e][n]=Math.floor(Math.random()*this.currentLevelData.blocks)+1}this.previewBlocks.setLines(this.nextLines)}},{key:"addLineBlocks",value:function(){for(var t,e=-500,n=0;n<this.nextLines.length;n++){t=-300;for(var r=0;r<this.nextLines[n].length;r++){var o=this.createCircle(t,e,this.nextLines[n][r]);this.gameContainer.addChild(o),t+=74}e+=70}}},{key:"delay",value:(c=Ei(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){g.a.delayedCall(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"generateNewBlocks",value:(a=Ei(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,c,s,l,f,p,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this.currentLevelData,n=e.startAmount,r=e.blocks,o=e.obstacles,i=!1,a=0,o&&o.length>0&&o.forEach((function(t){h.createObstacle(t),t.type===_i.HeartMiddle?i=!0:t.type===_i.Skulls&&(a=t.amount)})),u=[],c=0;c<a;c++){for(s=Math.floor(Math.random()*(n-19));u.includes(s);)s=Math.floor(Math.random()*(n-19));u.push(s)}l=0;case 7:if(!(l<n)){t.next=21;break}return f=-1,f=u.includes(l)?Wt.SKULL_TYPE:Math.floor(Math.random()*r)+1,p=this.createCircle(50*Math.random()-25,900,f),this.gameContainer.addChild(p),t.next=14,this.delay(.001);case 14:if(!i||l!==Math.floor(n/2)){t.next=18;break}return this.createGoalBlock(),t.next=18,this.delay(1);case 18:l++,t.next=7;break;case 21:if(i){t.next=25;break}return t.next=24,this.delay(1);case 24:this.createGoalBlock();case 25:return t.next=27,this.delay(1);case 27:this.createBottomExit();case 28:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"createGoalBlock",value:function(){this.goalBlock=this.createCircle(0,1100,Wt.GOAL_TYPE),this.goalBlock.on("gameover",this.onGameOver,this),this.gameContainer.addChild(this.goalBlock)}},{key:"createObstacle",value:function(t){if(t.type!==_i.HeartMiddle&&t.type!==_i.Skulls){var e=void 0;if(t.position)switch(t.type){case _i.Static:e=new vr(t.position);break;case _i.Random:e=new Sr(t.position,t.lives)}e&&(this.gameContainer.addChild(e),this.obstacles.push(e))}}},{key:"onGameOver",value:function(){var t,e,n,r=this;null===(t=this.nextTimer)||void 0===t||t.clear(),null===(e=this.boomMeter)||void 0===e||e.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1,this.score=0,this.levelFinished.show(!1,this.score,Number.MAX_SAFE_INTEGER,this.currentLevelData.starsConditions,(function(){r.restartLevel()}),this.levelId,Si.None),null===(n=this.nextTimer)||void 0===n||n.freeze(),this.obstacles=[],Y.paused=!0}},{key:"restartLevel",value:function(){this.isTransition=!0,I.restart(this.levelId)}},{key:"generateStartBlocks",value:(i=Ei(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.createMoveWalls(),(e=new qt(-400,-50,100,1800,0)).shape.material=Y.bounceMaterial,this.gameContainer.addChild(e),(n=new qt(400,-50,100,1800,0)).shape.material=Y.bounceMaterial,this.gameContainer.addChild(n),r=new qt(-225,800,250,100,0),this.gameContainer.addChild(r),o=new qt(225,800,250,100,0),this.gameContainer.addChild(o),i=new qt(-150,1100,100,500,0),this.gameContainer.addChild(i),a=new qt(150,1100,100,500,0),this.gameContainer.addChild(a),u=new qt(0,1300,200,100,0),this.gameContainer.addChild(u),t.next=19,this.generateNewBlocks();case 19:Y.started=!0;case 20:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createMoveWalls",value:function(){this.moveBox=new qt(0,-575,710,50,0),this.moveBox.type=Wt.END_TYPE,this.gameContainer.addChild(this.moveBox),this.staticBox=new qt(0,-625,710,50,0),this.gameContainer.addChild(this.staticBox)}},{key:"createBottomExit",value:function(){this.bottomOpenWall=new qt(0,800,200,100,0),this.gameContainer.addChild(this.bottomOpenWall)}},{key:"createCircle",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n===Wt.GOAL_TYPE?new ve(t,e):n===Wt.ANY_TYPE?new Go(t,e,r):new Wt(t,e,n,r)}},{key:"clearMeterBonus",value:(o=Ei(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.meterBonus&&this.meterBonus&&(this.meterBonus.clean(),this.frontContainer.removeChild(this.meterBonus),this.meterBonus=void 0),this.activeBonus=Bi.None;case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"preCleanUnused",value:function(t){var e={step:t,other:{amount:0,positions:[]}};return e.other.amount=N.length,this.update(t),e.other.amount>0&&N.forEach((function(t){e.other.positions.push(t.userData.position)})),e}},{key:"postCleanUnused",value:function(t){this.increaseBlocks.forEach((function(t){return t.block.increase(t.steps)})),this.increaseBlocks=[],this.explodePoints.forEach((function(e){var n=R.hitTest(e,R.bodies,0);if(n&&n.length>0){var r=n[0].userData;r&&r instanceof Wt&&r.type!==Wt.GOAL_TYPE&&(t.other.amount+=r.boom()),n.forEach((function(e){var n=e.userData;t.other.positions.push(n.position)}))}})),t.other.amount>0&&this.unusedBlocksRemoved(t.other.positions),this.explodePoints=[]}},{key:"endContact",value:function(t){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;r&&o&&r instanceof Wt&&o instanceof Wt&&O.sameType(r,o)&&(r.sameColorNeighbors.delete(o),o.sameColorNeighbors.delete(r))}},{key:"beginContact",value:function(t){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;if(r&&o){if(O.getEnd(r,o))return void this.levelComplete();if(r instanceof ae||o instanceof ae){var i=O.getBlockByRocket(r,o);i&&i instanceof Wt&&(i.boom(),this.createExplosion(i.position,.15*Math.random()),this.addScoreItem(i.position.x,i.position.y,Wt.BALL_SCORE))}var a=O.getRainbow(r,o);if(a){var c=a===r?o:r;c instanceof Wt&&c.correctType()&&c.type!==Wt.STATIC_OBSTACLE_TYPE&&c.type!==Wt.RANDOM_OBSTACLE_TYPE?(c.boom(),this.createExplosion(c.position,.15*Math.random()),this.addScoreItem(c.position.x,c.position.y,Wt.BALL_SCORE)):a instanceof Wt&&(0===c.type||c.type===Wt.END_TYPE||c.type===Wt.STATIC_OBSTACLE_TYPE||c.type===Wt.RANDOM_OBSTACLE_TYPE)&&(a.boom(),this.createExplosion(a.position,.15*Math.random()))}var s=O.getSkullByGoal(r,o);if(s)return s.boom(),void this.heartDeath();if(r instanceof Wt&&o instanceof Wt&&(O.sameType(r,o)&&(r.sameColorNeighbors.set(o,!0),o.sameColorNeighbors.set(r,!0)),O.wasAnyAndSkull(r,o)))return this.addScoreItem(r.position.x,r.position.y,Wt.BALL_SCORE),r.boom(),void o.boom();if(!t.shapeA.data||!t.shapeB.data)return;if((50*E.vec2.distance(t.bodyA.position,t.bodyA.previousPosition)>.5||50*E.vec2.distance(t.bodyB.position,t.bodyB.previousPosition)>.5)&&u.playRandom("ball hit ",3),r&&o){var l=O.getKinematic(r,o);if(l&&l.body){var f=l===r?o:r;if(l.enableGravity(),f instanceof Sr&&f.type===Wt.RANDOM_OBSTACLE_TYPE?(f.changePosition(),this.addScoreItem(f.position.x,f.position.y,Wt.BALL_SCORE),this.shakeScreen(Math.random()<.5)):f.type===Wt.STATIC_OBSTACLE_TYPE&&this.shakeScreen(Math.random()<.5),r.type!==Wt.GOAL_TYPE&&o.type!==Wt.GOAL_TYPE)if(O.sameType(r,o)&&r instanceof Wt&&o instanceof Wt){r.kinematic=!1,o.kinematic=!1,r.enableGravity(),o.enableGravity();var p=l.steps;l.animateAndDestroy(),this.increaseBlocks.push({block:l===r?o:r,steps:p})}else f.type===Wt.SKULL_TYPE&&l.setSkull()}else{if(r instanceof Wt&&r.kinematic&&r.enableGravity(),o instanceof Wt&&o.kinematic&&o.enableGravity(),r.type===Wt.GOAL_TYPE||o.type===Wt.GOAL_TYPE)return;if(r instanceof Wt&&o instanceof Wt&&O.sameType(r,o)&&(r.steps!==o.steps||r.kinematic||o.kinematic)){var h=r.kinematic?r:o,y=h===r?o:r;h.kinematic=!1,y.kinematic=!1,h.body&&(h.body.gravityScale=1),y.body&&(y.body.gravityScale=1);var d=h.steps;h.animateAndDestroy(),this.increaseBlocks.push({block:y,steps:d})}else{var v=O.getRandomObstacle(r,o);if(v)this.shakeScreen(Math.random()<.5),v.changePosition(),this.addScoreItem(v.position.x,v.position.y,Wt.BALL_SCORE);else if(r instanceof Wt&&o instanceof Wt){var b=O.getKinematicBySkull(r,o);b&&b.setSkull()}}}}}}}],r=[{key:"sameType",value:function(t,e){return(t.type===e.type||t.type===Wt.ANY_TYPE||e.type===Wt.ANY_TYPE)&&0!==t.type&&0!==e.type&&t.type!==Wt.GOAL_TYPE&&e.type!==Wt.GOAL_TYPE&&t.type!==Wt.STATIC_OBSTACLE_TYPE&&e.type!==Wt.STATIC_OBSTACLE_TYPE&&t.type!==Wt.RANDOM_OBSTACLE_TYPE&&e.type!==Wt.RANDOM_OBSTACLE_TYPE&&t.type!==Wt.SKULL_TYPE&&e.type!==Wt.SKULL_TYPE}},{key:"getRainbow",value:function(t,e){return t.type===Wt.RAINBOW_TYPE||e.type===Wt.RAINBOW_TYPE?t.type===Wt.RAINBOW_TYPE?t:e:void 0}},{key:"getEnd",value:function(t,e){return t.type===Wt.GOAL_TYPE&&e.type===Wt.END_TYPE||e.type===Wt.GOAL_TYPE&&t.type===Wt.END_TYPE?t.type===Wt.END_TYPE?t:e:void 0}},{key:"getSkullByGoal",value:function(t,e){return t.type===Wt.GOAL_TYPE&&e.type===Wt.SKULL_TYPE||e.type===Wt.GOAL_TYPE&&t.type===Wt.SKULL_TYPE?t.type===Wt.SKULL_TYPE?t:e:void 0}},{key:"wasAnyAndSkull",value:function(t,e){return t.type===Wt.ANY_TYPE&&e.type===Wt.SKULL_TYPE||e.type===Wt.ANY_TYPE&&t.type===Wt.SKULL_TYPE}},{key:"getBlockByRocket",value:function(t,e){return t instanceof ae&&e.correctType()&&!e.isGoal()?e:e instanceof ae&&t.correctType()&&!t.isGoal()?t:void 0}},{key:"getKinematic",value:function(t,e){return t instanceof Wt&&t.kinematic&&0!==t.type?t:e instanceof Wt&&e.kinematic&&0!==e.type?e:void 0}},{key:"getRandomObstacle",value:function(t,e){return t instanceof Wt&&t.kinematic&&e instanceof Sr&&e.type===Wt.RANDOM_OBSTACLE_TYPE?e:e instanceof Wt&&e.kinematic&&t instanceof Sr&&t.type===Wt.RANDOM_OBSTACLE_TYPE?t:void 0}},{key:"getKinematicBySkull",value:function(t,e){return t.kinematic&&e.type===Wt.SKULL_TYPE?t:e.kinematic&&t.type===Wt.SKULL_TYPE?e:void 0}}],n&&Ii(e.prototype,n),r&&Ii(e,r),Object.defineProperty(e,"prototype",{writable:!1}),O}(st);function Ki(t){return(Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ji(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zi(t);if(e){var o=Zi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(t,e){if(e&&("object"===Ki(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $i(t)}function $i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Wi(Gi,"BottomPoint",670);var ta=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xi(t,e)}(i,t);var e,n,r,o=Ji(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Qi($i(t=o.call(this)),"explosion",void 0),Qi($i(t),"face",void 0),Qi($i(t),"logo",void 0),t.explosion=v.Sprite.from(v.Texture.from("splash_explosion.png")),t.explosion.anchor.set(.5),t.explosion.scale.set(0,0),t.explosion.position.y=.5*-Y.originalHeight+516,t.explosion.alpha=0,t.addChild(t.explosion),t.face=v.Sprite.from(v.Texture.from("splash_logo_face.png")),t.face.position.set(-131,-350),t.face.alpha=0,t.addChild(t.face),t.logo=v.Sprite.from(v.Texture.from("splash_logo.png")),t.logo.anchor.set(.5),t.logo.position.set(0,-260),t.logo.scale.set(3,3),t.logo.alpha=0,t.addChild(t.logo),t}return e=i,(n=[{key:"start",value:function(){this.explosion.position.y=.5*-Y.originalHeight+516,this.explosion.scale.set(0,0),this.explosion.alpha=0,this.face.position.set(-131,-350),this.face.alpha=0,this.logo.position.set(0,-260),this.logo.scale.set(3,3),this.logo.alpha=0,g.a.to(this.explosion,{alpha:1,duration:.2}),g.a.to(this.explosion.scale,{x:1,y:1,duration:1,ease:k.c.easeOut}),g.a.to(this.logo,{alpha:1,delay:.2,duration:.2}),g.a.to(this.logo.scale,{x:1,y:1,delay:.2,duration:1,ease:k.a.easeOut}),g.a.to(this.face,{alpha:1,delay:1.09,duration:.1}),g.a.to(this.face,{y:-448,delay:1.1,duration:2,ease:k.f.easeNone})}},{key:"stop",value:function(){g.a.killTweensOf(this.explosion),g.a.killTweensOf(this.explosion.scale),g.a.killTweensOf(this.logo),g.a.killTweensOf(this.logo.scale),g.a.killTweensOf(this.face)}}])&&Vi(e.prototype,n),r&&Vi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function ea(t){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ra(t,e){return(ra=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ua(t);if(e){var o=ua(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ia(this,n)}}function ia(t,e){if(e&&("object"===ea(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return aa(t)}function aa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ca(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var sa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ra(t,e)}(i,t);var e,n,r,o=oa(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ca(aa(t=o.call(this)),"txt",void 0),ca(aa(t),"lockedTxt",void 0),ca(aa(t),"hearts",void 0),t.txt=new v.Text("Level 1",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,1),t.txt.position.set(0,-75),t.addChild(t.txt);var e=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);e.pivot.set(160,70),e.width=320,e.height=140,e.tint=14540253,t.addChild(e),t.lockedTxt=new v.Text("Locked",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:11184810,fontWeight:"bold",align:"center"}),t.lockedTxt.anchor.set(.5,.5),t.lockedTxt.position.set(0,0),t.addChild(t.lockedTxt),t.hearts=[];for(var n=-90,r=0;r<3;r++){var a=new v.Sprite(v.Texture.from("like.png"));a.alpha=.3,a.anchor.set(.5,.5),a.scale.set(.6),a.position.x=n,t.addChild(a),t.hearts.push(a),n+=90}return t}return e=i,(n=[{key:"updateData",value:function(t,e){this.txt.text="Level ".concat(t+1);for(var n=0;n<3;n++)this.hearts[n].alpha=e>=n+1?1:e>=0||0===t?.3:0;this.lockedTxt.visible=0!==t&&-1===e}}])&&na(e.prototype,n),r&&na(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return pa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pa(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function pa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ha(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ya(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ha(i,r,o,a,u,"next",t)}function u(t){ha(i,r,o,a,u,"throw",t)}a(void 0)}))}}function da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function va(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ba(t,e){return(ba=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ma(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ka(t);if(e){var o=ka(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wa(this,n)}}function wa(t,e){if(e&&("object"===la(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ga(t)}function ga(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ba(t,e)}(l,t);var e,n,r,o,i,a,c,s=ma(l);function l(){var t;da(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return xa(ga(t=s.call.apply(s,[this].concat(n))),"logo",void 0),xa(ga(t),"activeLevelItem",void 0),xa(ga(t),"activeLevelId",void 0),xa(ga(t),"left",void 0),xa(ga(t),"right",void 0),xa(ga(t),"canPlay",void 0),xa(ga(t),"playBtn",void 0),xa(ga(t),"muteBtn",void 0),xa(ga(t),"unmuteBtn",void 0),t}return e=l,(n=[{key:"create",value:function(){var t=this;this.logo=new ta,this.addChild(this.logo),this.playBtn=new kt("start_button.png","start_button.png"),this.playBtn.position.y=Y.originalHeight/3-30,this.addChild(this.playBtn),this.playBtn.on("pointerup",(function(){ru("click","menu","play"),t.onPlayClicked()})),this.muteBtn=new kt("sound1.png","sound1.png"),this.muteBtn.position.set(Y.originalWidth/2-50,-Y.originalHeight/2+70),this.addChild(this.muteBtn),this.muteBtn.on("pointerup",(function(){ru("click","menu","sound1"),t.mute=!0})),this.unmuteBtn=new kt("sound2.png","sound2.png"),this.unmuteBtn.position.set(Y.originalWidth/2-50,-Y.originalHeight/2+70),this.addChild(this.unmuteBtn),this.unmuteBtn.on("pointerup",(function(){ru("click","menu","sound2"),t.mute=!1})),Q("emoji_mute","0").then((function(e){t.mute="1"===e})),this.createMapItems()}},{key:"mute",set:function(t){this.muteBtn.visible=!t,this.unmuteBtn.visible=t,Z("emoji_mute",t?"1":"0"),u.muteMusic=t,u.muteSounds=t}},{key:"start",value:function(){ru("start","menu","level"),this.logo.start(),this.setActiveLevel()}},{key:"close",value:(c=ya(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ru("close","menu","level"),this.logo.stop();case 2:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"setActiveLevel",value:(a=ya(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Y.levels,n=0,r=-1,o=fa(e),t.prev=4,o.s();case 6:if((i=o.n()).done){t.next=20;break}return a=i.value,t.next=10,Q("".concat(a.key),"");case 10:if(u=t.sent,r=-1,""!==u&&(a.score=parseInt(u),r=Xa(a.score,a.starsConditions)),0!==r&&-1!==r){t.next=17;break}return t.abrupt("break",20);case 17:n++;case 18:t.next=6;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(4),o.e(t.t0);case 25:return t.prev=25,o.f(),t.finish(25);case 28:this.activeLevelId=n,this.canPlay=0===n||-1!==r,this.activeLevelItem.updateData(this.activeLevelId,r),this.updateButtons();case 32:case"end":return t.stop()}}),t,this,[[4,22,25,28]])}))),function(){return a.apply(this,arguments)})},{key:"updateButtons",value:function(){this.playBtn.disabled=!this.canPlay,this.left.visible=this.activeLevelId>0,this.right.visible=this.activeLevelId<Y.levels.length-1}},{key:"createMapItems",value:function(){var t=this;this.activeLevelItem=new sa,this.activeLevelItem.position.set(0,Y.originalHeight/3-230),this.addChild(this.activeLevelItem),this.left=new kt("back_button.png","back_button.png"),this.left.position.set(-240,this.activeLevelItem.y),this.addChild(this.left),this.right=new kt("next_button.png","next_button.png"),this.right.position.set(250,this.activeLevelItem.y+5),this.addChild(this.right),this.left.scale.set(.5,.5),this.right.scale.set(.5,.5),this.left.on("pointerup",(function(){ru("click","menu","left"),t.activeLevelId--,t.updateActive()})),this.right.on("pointerup",(function(){ru("click","menu","right"),t.activeLevelId++,t.updateActive()}))}},{key:"updateActive",value:(i=ya(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Y.levels[this.activeLevelId],t.next=3,Q("".concat(e.key),"");case 3:n=t.sent,r=-1,""!==n&&(e.score=parseInt(n),r=Xa(e.score,e.starsConditions)),this.canPlay=0===this.activeLevelId||-1!==r,this.activeLevelItem.updateData(this.activeLevelId,r),this.updateButtons();case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onPlayClicked",value:(o=ya(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canPlay){t.next=2;break}return t.abrupt("return");case 2:if(!q||!X.shouldPlayFirstAds()){t.next=5;break}return t.next=5,tt(G.Interstitial);case 5:I.start(Gi,this.activeLevelId);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}])&&va(e.prototype,n),r&&va(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(st),Pa=n(199);function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sa(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ra(t,e){return(Ra=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ca(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Aa(t);if(e){var o=Aa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ja(this,n)}}function ja(t,e){if(e&&("object"===Ta(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ea(t)}function Ea(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aa(t){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ma=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ra(t,e)}(u,t);var e,n,r,o,i,a=Ca(u);function u(){var t;Ba(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return La(Ea(t=a.call.apply(a,[this].concat(n))),"comics",void 0),La(Ea(t),"step",void 0),La(Ea(t),"nextBtn",void 0),La(Ea(t),"prevBtn",void 0),La(Ea(t),"okBtn",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=this;this.comics=v.Sprite.from(v.Texture.from("comic_00.png")),this.comics.anchor.set(.5,.5),this.addChild(this.comics),this.nextBtn=new kt("next_button.png","next_button.png"),this.nextBtn.position.set(160,Y.originalHeight/2-this.nextBtn.height/2),this.addChild(this.nextBtn),this.nextBtn.on("pointerup",(function(){ru("click","comics","next"),t.onNextClicked()})),this.prevBtn=new kt("back_button.png","back_button.png"),this.prevBtn.position.set(-160,this.nextBtn.y),this.addChild(this.prevBtn),this.prevBtn.on("pointerup",(function(){ru("click","comics","prev"),t.onPrevClicked()})),this.okBtn=new kt("ok_button.png","ok_button.png"),this.okBtn.on("pointerup",(function(){Z("skipcomics","1"),I.start(Oa)})),this.okBtn.position.y=this.nextBtn.y-50,this.addChild(this.okBtn),this.prevBtn.visible=!1,this.nextBtn.visible=!1,this.okBtn.visible=!1}},{key:"start",value:function(){ru("start","menu","level"),this.step=0,this.prevBtn.visible=!1,this.nextBtn.visible=!0,this.okBtn.visible=!1}},{key:"close",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(ru("close","menu","level"),e=0;e<6;e++)v.Texture.removeFromCache("comic_0".concat(e,".png"));this.removeChild(this.okBtn),this.destroy({children:!0});case 4:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Sa(i,n,r,a,u,"next",t)}function u(t){Sa(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"onNextClicked",value:function(){this.step++,this.step<5?(this.updateImage(),this.prevBtn.visible=!0,this.nextBtn.visible=!0):5===this.step&&(this.updateImage(),this.okBtn.visible=!0,this.prevBtn.visible=!1,this.nextBtn.visible=!1)}},{key:"onPrevClicked",value:function(){this.step--,this.prevBtn.visible=this.step>0,this.updateImage()}},{key:"updateImage",value:function(){this.comics.texture=v.Texture.from("comic_0".concat(this.step,".png"))}}])&&_a(e.prototype,n),r&&_a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(st);function Ia(t){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Na(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Da(i,r,o,a,u,"next",t)}function u(t){Da(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fa(t,e){return(Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ua(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=za(t);if(e){var o=za(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wa(this,n)}}function Wa(t,e){if(e&&("object"===Ia(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function za(t){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ha,Ga,Ka,Va,Xa=function(t,e){for(var n=0,r=0;r<e.length&&t>e[r];r++)n++;return n},Ja=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Y.slowmo=t,e||g.a.globalTimeline.timeScale(Y.slowmo?.4:1)},qa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fa(t,e)}(f,t);var e,n,r,o,i,a,s,l=Ua(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),l.call(this,720,1500)}return e=f,(n=[{key:"createStates",value:(s=Na(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q("skipcomics","0");case 2:e=t.sent,I.add(new Oa),I.add(new Gi),"0"===e?(I.add(new Ma),I.start(Ma)):I.start(Oa);case 6:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"initContactListener",value:function(){R.on("endContact",(function(t){t.shapeA.data&&t.shapeB.data&&I.activeState instanceof Gi&&I.activeState.endContact(t)})),R.on("beginContact",(function(t){I.activeState instanceof Gi&&I.activeState.beginContact(t)}))}},{key:"preCleanUnused",value:function(t){var e=I.activeState;return e&&e instanceof Gi?e.preCleanUnused(t):{step:t,other:void 0}}},{key:"postCleanUnused",value:function(t){var e=I.activeState;e&&e instanceof Gi&&e.postCleanUnused(t)}},{key:"load",value:(a=Na(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){u.init("assets/sounds"),X.startLoading();var r=new c.b;r.add("base0","assets/atlases/base0.json"),r.add("base1","assets/atlases/base1.json"),r.add("levels","assets/levels.json"),r.add("particles","assets/emitter.json"),u.add("music",{autoplay:!0,loop:!0,volume:.6}),u.add("ball hit 0",{volume:.4}),u.add("ball hit 1",{volume:.4}),u.add("ball hit 2",{volume:.4}),r.onProgress.add((function(t){})),r.onError.add((function(t,e,r){ou({error:"loading (".concat(r.url,")")}),n()})),r.load(Na(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadFonts();case 2:return Y.levels=r.resources.levels.data.levels,Y.particles=r.resources.particles.data,n.next=6,e.startAfterLoading();case 6:t();case 7:case"end":return n.stop()}}),n)}))))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"loadFonts",value:(i=Na(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){Pa.load({custom:{families:["FontsFree-Net-AmericanTypewriterBold"],urls:["assets/fonts/font.css"]},active:function(){t()},timeout:6e4})})));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"startAfterLoading",value:(o=Na(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.getElementById("preloader"))&&(e.style.display="none"),t.next=4,et();case 4:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}])&&Ya(e.prototype,n),r&&Ya(e,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(F);!function(t){t[t.Undefined=0]="Undefined",t[t.Clicked=1]="Clicked",t[t.Show=2]="Show",t[t.FailedShow=3]="FailedShow",t[t.RewardReceived=4]="RewardReceived"}(Ha||(Ha={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unknown=1]="Unknown",t[t.Offline=2]="Offline",t[t.NoFill=3]="NoFill",t[t.InternalError=4]="InternalError",t[t.InvalidRequest=5]="InvalidRequest",t[t.UnableToPrecache=6]="UnableToPrecache"}(Ga||(Ga={})),function(t){t[t.Undefined=0]="Undefined",t[t.Video=1]="Video",t[t.RewardedVideo=2]="RewardedVideo",t[t.Playable=3]="Playable",t[t.Interstitial=4]="Interstitial",t[t.OfferWall=5]="OfferWall",t[t.Banner=6]="Banner"}(Ka||(Ka={})),function(t){t[t.Undefined=0]="Undefined",t[t.Start=1]="Start",t[t.Complete=2]="Complete",t[t.Fail=3]="Fail"}(Va||(Va={})),r.GameAnalytics.setEnabledInfoLog(!1);var $a=!1,Za="en";function Qa(t,e){r.GameAnalytics.initialize(t,e),console.log("Network: ".concat("0",", live: ").concat($a)),ru("set","network","0",$a?1:0),ru("start","app","game"),new qa}function tu(t,e,n){r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e),n),gtag("event",t,{event_category:e,value:n})}function eu(t,e,n){r.GameAnalytics.addProgressionEvent(t,"level",n,void 0,e),gtag("event","progression",{event_category:t===Va.Start?"start":t!==Va.Fail?"complete":"fail",value:e})}function nu(t,e,n){void 0===n?r.GameAnalytics.addAdEvent(t,e,"0","ad"):r.GameAnalytics.addAdEventWithNoAdReason(t,e,"0","ad",n);var o="",i="";switch(e){case Ka.Interstitial:i="inter";break;case Ka.RewardedVideo:i="reward"}switch(t){case Ha.FailedShow:o="showError";break;case Ha.Show:o="show";break;case Ha.RewardReceived:o="success"}gtag("event",o,{event_category:i})}function ru(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e,":").concat(n),o),gtag("event",t,{event_category:e,event_label:n,value:o})}function ou(t){var e=JSON.stringify(t);r.GameAnalytics.addErrorEvent(r.EGAErrorSeverity.Error,e),gtag("event","show",{event_category:"error",event_label:"error",value:e})}function iu(t){$a=t}window.onfocus=function(){Howler.mute(!1)},window.onblur=function(){Howler.mute(!0)},window.onload=function(){$().then((function(t){Za=t.language,$a=t.success,Qa(t.gameKey,t.secretKey)})).catch((function(t){Za="en",$a=!1,Qa("858dec355a72c9195a2a9d7b5b236599","da73f2e7aa8cb82c345aa88235b57abb415e1cd5")}))}}});
//# sourceMappingURL=bundle.1bc2e88a28dec86f2ccc.js.map