!function(t){function e(e){for(var r,a,u=e[0],c=e[1],s=e[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;i.push([200,1]),n()}({200:function(t,e,n){n(201),t.exports=n(408)},408:function(t,e,n){"use strict";n.r(e),n.d(e,"EGAAdAction",(function(){return Ha})),n.d(e,"EGAAdError",(function(){return Ka})),n.d(e,"EGAAdType",(function(){return Va})),n.d(e,"EGAProgressionStatus",(function(){return Xa})),n.d(e,"live",(function(){return Za})),n.d(e,"lang",(function(){return Qa})),n.d(e,"sendProgressionEvent",(function(){return eu})),n.d(e,"sendAdEvent",(function(){return nu})),n.d(e,"sendEvent",(function(){return ru})),n.d(e,"sendError",(function(){return ou})),n.d(e,"setLive",(function(){return iu}));var r=n(46),o=n(193);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"path",void 0),a(this,"all",void 0),a(this,"musics",void 0),a(this,"mutedSounds",void 0),a(this,"mutedMusic",void 0)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.path=t,this.all={},this.musics={},this.mutedSounds=!1,this.mutedMusic=!1}},{key:"muteMusic",get:function(){return this.mutedMusic},set:function(t){var e;this.mutedMusic=t,null===(e=this.musics.music)||void 0===e||e.mute(t)}},{key:"muteSounds",get:function(){return this.mutedSounds},set:function(t){for(var e in this.mutedSounds=t,this.all)this.all[e]&&this.all[e].mute(t)}},{key:"add",value:function(t,e){var n=this;if(!this.all[t]){if(!this.path)throw new Error("setup path for sounds");var r=["mp3","ogg"].map((function(e){return"".concat(n.path,"/").concat(t,".").concat(e)})),i=new o.Howl({src:r,autoplay:null==e?void 0:e.autoplay,loop:null==e?void 0:e.loop,volume:(null==e?void 0:e.volume)||1});"music"!==t?this.all[t]=i:this.musics[t]=i}}},{key:"playRandom",value:function(t,e){for(var n=Math.floor(Math.random()*e),r=!1,o=0;o<e;o++)if(this.all[t+o.toString()].playing()){r=!0;break}r||this.play(t+n.toString())}},{key:"play",value:function(t){this.all[t]?this.all[t].play():console.error("no sound was found")}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()),c=n(16),s=n(69),l=n(70),f=n(51);function p(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"states",void 0),y(this,"currentState",void 0),y(this,"stage",void 0),this.stage=e,this.states=new Map}var e,n,r,o,i;return e=t,(n=[{key:"activeState",get:function(){return this.currentState}},{key:"add",value:function(t){this.states.set(t.constructor,t),t.create()}},{key:"start",value:function(t){var e=this.states.get(t);if(!e)throw new Error("No state ".concat(t));this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.start(r),this.currentState=e,this.stage.addChild(this.currentState)}},{key:"restart",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=a.length,n=new Array(e),r=0;r<e;r++)n[r]=a[r];if(o=this.currentState,!this.currentState){t.next=6;break}return t.next=5,this.currentState.close();case 5:this.stage.removeChild(this.currentState);case 6:window.setTimeout((function(){o.start(n),i.currentState=o,i.stage.addChild(i.currentState)}),100);case 7:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){p(i,n,r,a,u,"next",t)}function u(t){p(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&h(e.prototype,n),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),v=n(1),b=n(9),m=n(21),w=n(3),g=n(2),k=n(7);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R,C,j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(i,t);var e,n,r,o=T(i);function i(t,e){var n,r,a,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=B(n),u=void 0,(a="sprite")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u;var c=m.a.from(w.db.WHITE);return c.anchor.set(.5),c.tint=0,c.alpha=.6,c.width=2*t,c.height=2*e,c.interactive=!0,n.addChild(c),n.sprite=m.a.from("assets/preloader.png"),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n}return e=i,(n=[{key:"show",value:function(){this.visible=!0,this.rotate()}},{key:"hide",value:function(){this.visible=!1,g.a.killTweensOf(this.sprite)}},{key:"rotate",value:function(){var t=this;this.sprite.rotation=0,g.a.to(this.sprite,{rotation:2*Math.PI,duration:5,ease:k.f.easeNone,onComplete:function(){t.rotate()}})}}])&&O(e.prototype,n),r&&O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b.b),E=n(10),L=n.n(E);function A(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}f.a.registerPlugin(c.a),c.b.registerPlugin(s.b),c.b.registerPlugin(l.c);var D,I,N=[],Y={started:!1,paused:!1,scale:1,realHeight:1,originalWidth:1,originalHeight:1,levels:[],particles:void 0,material:new E.Material,bounceMaterial:new E.Material,activeBallMaterial:new E.Material,slowmo:!1},F=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o={width:e,height:n,autoDensity:!0,resolution:2,backgroundColor:12309476};Y.originalWidth=e,Y.originalHeight=n,C=new f.a(o),document.body.appendChild(C.view),v.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,C.view.style.left="0%",C.view.style.top="0%",C.view.style.width="100%",C.view.style.height="100%",C.renderer.plugins.interaction,C.stage.interactive=!0,C.ticker.maxFPS=60;var i=new b.b;C.stage.addChild(i),R=new L.a.World({gravity:[0,-10]}),this.initContactListener();var a=new E.Material,u=new E.Material,c=new E.Material;Y.material=a,Y.bounceMaterial=c,Y.activeBallMaterial=u,R.addContactMaterial(new E.ContactMaterial(a,a,{restitution:0,stiffness:E.Equation.DEFAULT_STIFFNESS/3})),R.addContactMaterial(new E.ContactMaterial(u,c,{restitution:1,stiffness:E.Equation.DEFAULT_STIFFNESS/3})),R.emitImpactEvent=!1,C.ticker.add((function(){if(!Y.paused){var t=1/(Y.slowmo?400:60);R.step(t,.1,3),R.bodies.forEach((function(t){var e=t.userData;if(e&&e.transform){var n=t.position;e.position.set(50*n[0],50*n[1]),e.rotateView?e.rotateView(t.angle):e.rotation=t.angle}})),r.customLogic(t)}})),this.start(C,i),(I=new j(e,n)).hide(),i.addChild(I)}var e,n,r,o,i;return e=t,(n=[{key:"customLogic",value:function(t){var e=this.preCleanUnused(t);this.cleanUnusedBobies(),this.postCleanUnused(e)}},{key:"cleanUnusedBobies",value:function(){N.forEach((function(t){return R.removeBody(t)})),N=[]}},{key:"start",value:(o=regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new b.b,n.addChild(r),o=new b.b,n.addChild(o),D=new d(o),t.next=7,this.load();case 7:i=m.a.from(v.Texture.from("back1.png")),r.addChild(i),this.createStates(),a=function(){return{width:innerWidth,height:innerHeight}},u=function(){var t=a(),n=t.width,i=t.height;e.renderer.resize(n,i),Y.realHeight=i,I.height=i,I.scale.x=I.scale.y;var u=i/Y.originalHeight;Y.scale=u,o.scale.set(u,u),r.scale.set(u,u),r.position.set(.5*n-.5*r.width,.5*i-.5*r.height),o.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height),I.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height)},window.addEventListener("resize",u),u();case 14:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){A(i,n,r,a,u,"next",t)}function u(t){A(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})}])&&M(e.prototype,n),r&&M(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function W(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){U(i,r,o,a,u,"next",t)}function u(t){U(i,r,o,a,u,"throw",t)}a(void 0)}))}}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var G=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,o,i,a,u,c,s,l,f,p,h;return e=t,(n=[{key:"showGlobalLeaders",value:function(t){}},{key:"shouldLeadersShow",value:function(){return!1}},{key:"shouldPlayFirstAds",value:function(){return!1}},{key:"shouldShareShow",value:function(){return!1}},{key:"shouldScalePlayer",value:function(){return!1}},{key:"gameplayStart",value:function(){}},{key:"gameplayStop",value:function(){}},{key:"createShortcut",value:(h=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"showInvitePage",value:function(){}},{key:"shareScore",value:function(t){}},{key:"startLoading",value:function(){}},{key:"finishLoading",value:(p=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"loadingProgress",value:function(t){}},{key:"performHapticFeedback",value:function(){}},{key:"getFriends",value:(f=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getPlayerEntry",value:function(){}},{key:"setStorageData",value:(l=W(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"getStorageData",value:(s=W(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})},{key:"setScore",value:(c=W(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"getScore",value:(u=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"init",value:(a=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:!0,language:"en",gameKey:"28b00d27d31d5bb1a89f2f95461df103",secretKey:"b527d253099947040f78d2b1e70f06725391e3a1"});case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"showInter",value:(i=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return nu(Ha.Show,Va.Interstitial),t.abrupt("return");case 2:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"showReward",value:(o=W(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return nu(Ha.Show,Va.RewardedVideo),t.abrupt("return",!1);case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"atatappLink",value:function(){return""}}])&&z(e.prototype,n),r&&z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var H;function K(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){K(i,r,o,a,u,"next",t)}function u(t){K(i,r,o,a,u,"throw",t)}a(void 0)}))}}!function(t){t[t.RewardedVideo=2]="RewardedVideo",t[t.Interstitial=4]="Interstitial"}(H||(H={}));var X,J=function(){try{return localStorage}catch(t){return}},q=!0,$=function(){var t=V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){(X=new G)&&X.init().then((function(e){t(e)})).catch((function(t){ou({error:"initSocial"}),e()}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(){var t=V(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(r=J())||void 0===r||r.setItem(e,n),t.next=3,X.setStorageData(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Q=function(){var t=V(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getStorageData(e,n);case 2:return(r=t.sent)===n&&(r=(null===(o=J())||void 0===o?void 0:o.getItem(e))||n),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),tt=function(){var t=V(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,I&&I.show(),r=u.muteMusic,o=u.muteSounds,u.muteMusic=!0,u.muteSounds=!0,t.t0=e,t.next=t.t0===H.Interstitial?9:t.t0===H.RewardedVideo?13:17;break;case 9:return t.next=11,X.showInter();case 11:return n=!0,t.abrupt("break",17);case 13:return t.next=15,X.showReward();case 15:return n=t.sent,t.abrupt("break",17);case 17:return q=!1,I&&I.hide(),u.muteMusic=r,u.muteSounds=o,t.abrupt("return",n);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",X.finishLoading());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nt=function(){X.gameplayStart()};function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,t);var e,n,r,o=at(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,n&&ot(e.prototype,n),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(b.b);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ht(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ht(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mt(t)););return t}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt,kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(i,t);var e,n,r,o=dt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),wt(bt(n=o.call(this)),"normalTexture",void 0),wt(bt(n),"downTexture",void 0),wt(bt(n),"isDisabled",!1),wt(bt(n),"isDown",void 0),wt(bt(n),"btn",void 0),n.normalTexture=""===t?w.db.WHITE:w.db.from(t),n.downTexture=""===t?w.db.WHITE:w.db.from(e),n.btn=m.a.from(n.normalTexture),n.btn.anchor.set(.5,.5),n.addChild(n.btn),n.on("pointerdown",n.onButtonDown.bind(bt(n))).on("pointerup",n.onButtonUp.bind(bt(n))).on("pointerupoutside",n.onButtonUp.bind(bt(n))).on("pointerout",n.onButtonOut.bind(bt(n))),n.disabled=!1,n}return e=i,(n=[{key:"disabled",get:function(){return this.isDisabled},set:function(t){this.isDisabled=t,this.isDisabled?(this.interactive=!1,this.buttonMode=!1,this.btn.alpha=.5):(this.interactive=!0,this.buttonMode=!0,this.btn.alpha=1)}},{key:"onButtonOut",value:function(){this.isDisabled||this.isDown||(this.btn.texture=this.normalTexture)}},{key:"onButtonDown",value:function(t){this.isDisabled||(u.play("click"),this.isDown=!0,this.btn.texture=this.downTexture)}},{key:"onButtonUp",value:function(){this.isDisabled||(this.isDown=!1,this.btn.texture=this.normalTexture)}},{key:"destroy",value:function(t){this.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointerout"),pt(mt(i.prototype),"destroy",this).call(this,t)}}])&&ft(e.prototype,n),r&&ft(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b.b);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_t(t);if(e){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bt(t)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.NO=0]="NO",t[t.WALLS=Math.pow(2,0)]="WALLS",t[t.BALLS=Math.pow(2,1)]="BALLS",t[t.MOVER=Math.pow(2,2)]="MOVER",t[t.OBSTACLES=Math.pow(2,3)]="OBSTACLES"}(gt||(gt={}));var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(i,t);var e,n,r,o=Tt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Rt(Bt(e=o.call(this)),"body",void 0),Rt(Bt(e),"shape",void 0),Rt(Bt(e),"type",void 0),Rt(Bt(e),"view",void 0),e.type=t,e.view=e.createView(),e.view.anchor.set(.5,.5),e.addChild(e.view),e}return e=i,(n=[{key:"createBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.view.alpha=1;var n=[this.position.x/50,this.position.y/50];this.shape=this.createShape(),this.body=new E.Body({type:t,position:n,mass:e,damping:0,angularDamping:0}),this.body.addShape(this.shape),R.addBody(this.body),this.body.userData=this}},{key:"clean",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyBody(t),this.parent&&this.parent.removeChild(this)}},{key:"isGoal",value:function(){return!1}},{key:"destroyBody",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.body&&(t?R.removeBody(this.body):N.push(this.body),this.body=void 0)}},{key:"correctType",value:function(){return 0!==this.type&&(this.type<20||this.type===Wt.STATIC_OBSTACLE_TYPE||this.type===Wt.RANDOM_OBSTACLE_TYPE||this.type===Wt.SKULL_TYPE||this.type===Wt.ANY_TYPE)}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(b.b);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(){return(At="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Mt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Mt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ft(t);if(e){var o=Ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yt(t)}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(i,t);var e,n,r,o=It(i);function i(t,e,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Et(this,i),Ut(Yt(r=o.call(this,n)),"sameColorNeighbors",new Map),Ut(Yt(r),"steps",1),Ut(Yt(r),"stepsAmount",3),Ut(Yt(r),"view2",void 0),Ut(Yt(r),"savedType",-1),Ut(Yt(r),"skullMeter",1),Ut(Yt(r),"_kinematic",!1),Ut(Yt(r),"permanentSkull",!1),Ut(Yt(r),"busy",!1),Ut(Yt(r),"sensorShape",void 0),r.permanentSkull=n===i.SKULL_TYPE,r.position.set(t,e),a&&r.createBody(E.Body.DYNAMIC),r.view2=r.createView2(),r.view2.anchor.set(.5,.5),r.addChild(r.view2),r}return e=i,(n=[{key:"rotateView",value:function(t){this.view.rotation=t}},{key:"kinematic",get:function(){return this._kinematic},set:function(t){this._kinematic=t}},{key:"createBody",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;At(Ft(i.prototype),"createBody",this).call(this,t,n),this.sensorShape=new E.Circle({radius:(this.getRadius()+5)/50}),this.sensorShape.sensor=!0,this.sensorShape.material=Y.material,this.sensorShape.data=!0,null===(e=this.body)||void 0===e||e.addShape(this.sensorShape)}},{key:"enableGravity",value:function(){this.body&&(this.body.gravityScale=1,this.body.mass=5,this.body.updateMassProperties(),this.shape.material=Y.material)}},{key:"animateAndDestroy",value:function(){var t=this;this.killTween(),g.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),g.a.to(this.view2.scale,{x:0,y:0,duration:.2}),this.destroyBody()}},{key:"killTween",value:function(){g.a.killTweensOf(this.view.scale),g.a.killTweensOf(this.view2.scale)}},{key:"clean",value:function(){this.busy=!1,At(Ft(i.prototype),"clean",this).call(this)}},{key:"decreaseSkullMeter",value:function(){this.type!==i.SKULL_TYPE||this.permanentSkull||(this.skullMeter-=1,-1===this.skullMeter&&this.removeSkull())}},{key:"isSkull",value:function(){return this.type===i.SKULL_TYPE}},{key:"setSkull",value:function(){this.savedType=this.type,this.skullMeter=3,this.kinematic=!1,this.body&&(this.body.gravityScale=1),this.type=i.SKULL_TYPE,this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2()}},{key:"removeSkull",value:function(){this.type=this.savedType,this.savedType=-1,this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2(),this.view2.visible=!0}},{key:"setBomb",value:function(){var t=this;this.busy||(this.type=i.BOMB_TYPE,this.view.texture=v.Texture.from("bomb.png"),this.view2.visible=!1,this.killTween(),this.busy=!0,g.a.to(this.view.scale,{x:.4,y:.4,duration:1,onUpdate:function(){t.updateShape()}}),g.a.to(this.view.scale,{x:1.2,y:1.2,delay:1,duration:.2,onUpdate:function(){t.updateShape()},onComplete:function(){var e=Gi.obtain();t.addChild(e),e.animate().then((function(){Gi.release(e)})),t.animateAndDestroy()}}))}},{key:"boom",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.increase(this.stepsAmount-this.steps,t)}},{key:"getRadius",value:function(){return 35}},{key:"getTexture",value:function(){return v.Texture.from("".concat(this.type,".png"))}},{key:"getTexture2",value:function(){return v.Texture.from("".concat(this.type,"_.png"))}},{key:"createView",value:function(){var t=new v.Sprite(this.getTexture());return t.scale.set(.5,.5),t}},{key:"createView2",value:function(){var t=new v.Sprite(this.getTexture2());return t.scale.set(.5,.5),t}},{key:"createShape",value:function(){var t=new E.Circle({radius:this.getRadius()/50});return t.material=Y.material,t}},{key:"increase",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.busy||!this.body)return 0;var r=0;this.busy=!0;var o=this.steps;if(t+=Math.max(0,this.sameColorNeighbors.size-1),this.steps+=t,this.steps>=this.stepsAmount){if(n&&(r=1),this.killTween(),this.sameColorNeighbors.forEach((function(t,o){if(o!==e){var i=o.increase(e.stepsAmount-o.steps,n);n&&(r+=i)}})),o<2)g.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){e.clean()}}),g.a.to(this.view2.scale,{x:0,y:0,duration:.2});else{var a=this.view.width/2,u=0;g.a.to(this.view.scale,{x:0,y:0,duration:.3,onUpdate:function(){e.view.position.set(Math.cos(u)*a,Math.sin(u)*a),u+=Math.PI/15,a-=1},onComplete:function(){e.clean()}}),this.view2.scale.set(0,0)}this.destroyBody(n)}else{var c=i.SCALE_FACTOR*this.steps;g.a.to(this.view.scale,{x:c,y:c,duration:.2,onUpdate:function(){e.updateShape()},onComplete:function(){e.busy=!1}}),g.a.to(this.view2.scale,{x:c,y:c,duration:.2})}return r}},{key:"updateShape",value:function(){var t,e;this.shape.radius=this.getRadius()/i.SCALE_FACTOR*this.view.scale.x/50,this.shape.updateBoundingRadius(),this.sensorShape.radius=(this.getRadius()+5)/i.SCALE_FACTOR*this.view.scale.x/50,this.sensorShape.updateBoundingRadius(),null===(t=this.body)||void 0===t||t.updateBoundingRadius(),null===(e=this.body)||void 0===e||e.updateMassProperties()}}])&&Lt(e.prototype,n),r&&Lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ct);Ut(Wt,"BALL_SCORE",5),Ut(Wt,"BONUS_SCORE",100),Ut(Wt,"EXPLOSION_SCORE",50),Ut(Wt,"GOAL_TYPE",1e3),Ut(Wt,"END_TYPE",500),Ut(Wt,"STATIC_OBSTACLE_TYPE",250),Ut(Wt,"RANDOM_OBSTACLE_TYPE",251),Ut(Wt,"BOMB_TYPE",2e3),Ut(Wt,"SKULL_TYPE",3e3),Ut(Wt,"RAINBOW_TYPE",4e3),Ut(Wt,"ANY_TYPE",5e3),Ut(Wt,"SCALE_FACTOR",.5);var zt=n(4);function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jt(t);if(e){var o=Jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xt(this,n)}}function Xt(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(i,t);var e,n,r,o=Vt(i);function i(t,e,n,r,a){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,0)).position.set(t,e),u.view.width=n,u.view.height=r,u.createBody(E.Body.STATIC),u.body&&(u.body.mass=0,u.body.angle=zt.b*a),u}return e=i,(n=[{key:"createShape",value:function(){return new E.Box({width:this.view.width/50,height:this.view.height/50})}},{key:"createView",value:function(){var t=new m.a(v.Texture.WHITE);return t.anchor.set(.5),t.tint=0,t.visible=!1,t.alpha=0,t}},{key:"isObstacle",value:function(){return!1}},{key:"correctType",value:function(){return!1}},{key:"animateAndDestroy",value:function(){var t=this;g.a.killTweensOf(this.view.scale),g.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}}])&&Ht(e.prototype,n),r&&Ht(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ct);function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oe(t);if(e){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return re(t)}function re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}(u,t);var e,n,r,o,i,a=ee(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),ie(re(t=a.call(this,300)),"startX",void 0),ie(re(t),"startY",void 0),ie(re(t),"endX",void 0),ie(re(t),"endY",void 0),t.createBody(E.Body.DYNAMIC),t.reset(),t}return e=u,(n=[{key:"createShape",value:function(){var t=new E.Box({width:4,height:4});return t.sensor=!0,t}},{key:"createView",value:function(){return new v.Sprite(v.Texture.from("powerup_rocket.png"))}},{key:"animate",value:(o=regeneratorRuntime.mark((function t(e,n,r,o){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){i.visible=!0,i.startX=e,i.startY=n,i.endX=r,i.endY=o,i.position.set(e,n),e!==r&&(i.view.angle=90);var a={x:i.startX,y:i.startY};i.body.position=[a.x/50,a.y/50],g.a.to(a,{x:i.endX,y:i.endY,duration:1,ease:k.b.easeIn,onComplete:function(){i.reset(),t()},onUpdate:function(){i.body.position=[a.x/50,a.y/50]}})})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Zt(i,n,r,a,u,"next",t)}function u(t){Zt(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n,r){return i.apply(this,arguments)})},{key:"reset",value:function(){this.body.gravityScale=0,this.visible=!1,this.body.position=[-40,-40]}}])&&Qt(e.prototype,n),r&&Qt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(Ct);function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(){return(se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=le(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function le(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=de(t)););return t}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(t,e){if(e&&("object"===ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(i,t);var e,n,r,o=pe(i);function i(t,e){var n,r,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,Wt.GOAL_TYPE,!0),r=ye(n),u=void 0,(a="delay")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u,n}return e=i,(n=[{key:"resetDeathCounter",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0)}},{key:"startCountDeath",value:function(){var t=this;this.delay||(this.delay=g.a.delayedCall(4,(function(){t.delay=void 0,t.emit("gameover")})))}},{key:"destroyBody",value:function(t){this.resetDeathCounter(),this.off("gameover"),se(de(i.prototype),"destroyBody",this).call(this,t)}},{key:"setSkull",value:function(){se(de(i.prototype),"setSkull",this).call(this),this.view.texture=v.Texture.from("3001.png"),this.view2.texture=v.Texture.from("3001_.png")}},{key:"createView",value:function(){return new v.Sprite(this.getTexture())}},{key:"createView2",value:function(){return new v.Sprite(this.getTexture2())}},{key:"getTexture",value:function(){return v.Texture.from("hero.png")}},{key:"getTexture2",value:function(){return v.Texture.from("hero_.png")}},{key:"getRadius",value:function(){return 50}},{key:"isGoal",value:function(){return!0}}])&&ce(e.prototype,n),r&&ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Wt);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function we(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){me(i,r,o,a,u,"next",t)}function u(t){me(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Te(t);if(e){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(t,e){if(e&&("object"===be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pe(t)}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ke(t,e)}(u,t);var e,n,r,o,i,a=xe(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Se(Pe(t=a.call(this,"","")),"_id",void 0),Se(Pe(t),"icon",void 0),Se(Pe(t),"txt",void 0),Se(Pe(t),"amount",void 0),t.amount=1,t.txt=new v.Text(t.amount.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,.5),t.txt.x=90,t.txt.y=90,t.addChild(t.txt),t.icon=v.Sprite.from(v.Texture.from("bonus_ads.png")),t.icon.x=15,t.icon.y=35,t.addChild(t.icon),t.icon.visible=!1,t.on("pointerup",(function(){t.onPressed()})),t}return e=u,n=[{key:"id",get:function(){return this._id}},{key:"setData",value:(i=we(regeneratorRuntime.mark((function t(e,n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._id=e,this.normalTexture=n,this.downTexture=r,this.btn.texture=this.normalTexture,this.icon.visible=!1,t.next=7,Q(u.getStorageId(this.id),void 0);case 7:if(void 0!==(o=t.sent)){t.next=12;break}return o="1",t.next=12,Z(u.getStorageId(this.id),o);case 12:this.amount=parseInt(o),this.txt.text=o,this.updateTxt(),this.scale.set(.6,.6);case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"updateTxt",value:function(){0===this.amount?(this.btn.alpha=.6,this.icon.visible=!0,this.txt.visible=!1):(this.btn.alpha=1,this.icon.visible=!1,this.txt.visible=!0),this.txt.text=this.amount.toString()}},{key:"onPressed",value:(o=we(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ru("Game","Powerup","Click"),!(this.amount>0)){t.next=8;break}this.amount--,Z(u.getStorageId(this.id),this.amount.toString()),this.updateTxt(),this.emit("activate",this.id),t.next=15;break;case 8:return Y.paused=!0,t.next=11,tt(H.RewardedVideo);case 11:t.sent,Y.paused=!1,this.emit("activate",this.id);case 15:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r=[{key:"getStorageId",value:function(t){return"powerup_"+t.toString()}}],n&&ge(e.prototype,n),r&&ge(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(kt);function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ae(t);if(e){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(t,e){if(e&&("object"===_e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Le(t)}function Le(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Me(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var De=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ce(t,e)}(i,t);var e,n,r,o=je(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Me(Le(t=o.call(this)),"bar",void 0),Me(Le(t),"barMask",void 0),Me(Le(t),"initialWidth",596),Me(Le(t),"isFrozen",void 0),Me(Le(t),"delay",void 0),Me(Le(t),"frozen",void 0),Me(Le(t),"frozenBack",void 0),Me(Le(t),"back",void 0),Me(Le(t),"barBorder",void 0),t.back=v.Sprite.from(v.Texture.from("timer_1.png")),t.addChild(t.back),t.frozenBack=v.Sprite.from(v.Texture.from("timer_frozen_1.png")),t.frozenBack.visible=!1,t.addChild(t.frozenBack),t.bar=v.Sprite.from(v.Texture.from("timer_2.png")),t.addChild(t.bar),t.barMask=new v.Sprite(v.Texture.WHITE),t.barMask.x=16,t.barMask.width=0,t.barMask.height=t.bar.height,t.addChild(t.barMask),t.bar.mask=t.barMask,t.barBorder=v.Sprite.from(v.Texture.from("timer_0.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.x=100,t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.frozen=new v.Sprite(v.Texture.from("timer_frozen_0.png")),t.frozen.visible=!1,t.addChild(t.frozen),t}return e=i,(n=[{key:"setProgress",value:function(t){this.barMask.width=this.initialWidth*t,this.barBorder.visible=t>.01&&t<.99,this.barBorder.x=this.barMask.x+this.initialWidth*t}},{key:"unFreeze",value:function(){var t=this;this.isFrozen=!1,g.a.killTweensOf(this.frozen),g.a.to(this.frozenBack,{alpha:0,duration:.3}),g.a.to(this.back,{alpha:1,duration:.3}),g.a.to(this.frozen,{alpha:0,duration:.3,onComplete:function(){t.frozen.visible=!1,t.frozenBack.visible=!1}})}},{key:"freeze",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.isFrozen=!0,this.frozen.visible=!0,this.frozen.alpha=0,this.frozenBack.visible=!0,this.frozenBack.alpha=0,g.a.killTweensOf(this.frozen),g.a.killTweensOf(this.frozenBack),g.a.killTweensOf(this.back),g.a.to(this.frozen,{alpha:1,duration:.3}),g.a.to(this.frozenBack,{alpha:1,duration:.3}),g.a.to(this.back,{alpha:0,duration:.3}),this.delay&&this.delay.kill(),-1!==e&&(this.delay=g.a.delayedCall(e,(function(){t.unFreeze()})))}},{key:"clear",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0),g.a.killTweensOf(this.frozen),this.frozen.visible=!1,this.frozenBack.visible=!1,this.back.alpha=1,this.isFrozen=!1}}])&&Re(e.prototype,n),r&&Re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ye(t,e){return(Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ze(t);if(e){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return We(t)}function We(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e)}(i,t);var e,n,r,o=Fe(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ge(We(t=o.call(this)),"bar",void 0),Ge(We(t),"max",void 0),Ge(We(t),"current",void 0),Ge(We(t),"initialWidth",170),Ge(We(t),"barMask",void 0),Ge(We(t),"barBorder",void 0),Ge(We(t),"barShine",void 0);var e=v.Sprite.from(v.Texture.from("battery_empty.png"));return t.addChild(e),t.bar=v.Sprite.from(v.Texture.from("battery_full.png")),t.addChild(t.bar),t.barMask=new v.Sprite(v.Texture.WHITE),t.barMask.width=0,t.barMask.height=t.bar.height,t.barMask.x=27,t.addChild(t.barMask),t.barBorder=v.Sprite.from(v.Texture.from("battery_border.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.barShine=new v.AnimatedSprite([v.Texture.from("battery_charging0.png"),v.Texture.from("battery_charging1.png"),v.Texture.from("battery_charging2.png"),v.Texture.from("battery_charging1.png")]),t.addChild(t.barShine),t.barShine.animationSpeed=.3,t.barShine.visible=!1,t.bar.mask=t.barMask,t.current=0,t.max=10,t}return e=i,(n=[{key:"maximum",set:function(t){this.max=t}},{key:"reset",value:function(t){g.a.killTweensOf(this.barMask),this.current=0,t?this.barMask.width=0:g.a.to(this.barMask,{width:0,duration:.1}),this.barBorder.visible=!1}},{key:"update",value:function(t){var e=this;this.current+=t,this.current=Math.min(this.current,this.max),this.barShine.visible=!0,this.barShine.gotoAndPlay(0);var n=this.current>=this.max,r=this.current/this.max;return this.barBorder.visible=r>.05&&r<.9,g.a.killTweensOf(this.barMask),g.a.to(this.barMask,{width:this.initialWidth*r,duration:.2}),g.a.to(this.barBorder,{x:this.barMask.x+this.initialWidth*r,duration:.2,onComplete:function(){e.barShine.visible=!1,e.barShine.stop()}}),n&&(this.barShine.visible=!1,this.barShine.stop(),this.current=0,g.a.to(this.barMask,{width:0,delay:.2,duration:.2}),g.a.to(this.barBorder,{x:this.barMask.x,duration:.2,onUpdate:function(){e.barBorder.visible=r>.05&&r<.9}})),n}}])&&Ne(e.prototype,n),r&&Ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ze(t);if(e){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(t,e){if(e&&("object"===Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $e(t)}function $e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xe(t,e)}(i,t);var e,n,r,o=Je(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Qe($e(t=o.call(this)),"back",void 0),Qe($e(t),"blocks",void 0),Qe($e(t),"startX",void 0),Qe($e(t),"startY",void 0),Qe($e(t),"txt",void 0),t.blocks=[],t.back=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50),t.back.width=.96*Y.originalWidth,t.back.height=300,t.back.position.set(.5*-t.back.width,0),t.addChild(t.back),t.txt=new v.Text("From: Leopold",{fontSize:25,fill:0,fontWeight:"bold",align:"left"}),t.txt.anchor.set(0,.5),t.txt.position.set(.5*-t.back.width+40,30),t.addChild(t.txt),t.clear(),t}return e=i,(n=[{key:"setLines",value:function(t){this.txt.text="From: "+i.senders[Math.floor(Math.random()*i.senders.length)];var e=t.length;this.back.height=75*e+70,this.startX=-300,this.startY=95;for(var n=0;n<e;n++){for(var r=this.startX,o=0;o<t[n].length;o++){var a=new Wt(r,this.startY,t[n][o],!1);this.addBlock(a),r+=74}this.startY+=70}}},{key:"addBlock",value:function(t){this.blocks.push(t),this.addChild(t),t.visible=!1}},{key:"show",value:function(){this.blocks.forEach((function(t){t.visible=!0}))}},{key:"clear",value:function(){var t=this;this.blocks.forEach((function(e){t.removeChild(e)})),this.blocks=[]}}])&&Ve(e.prototype,n),r&&Ve(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rn(t,e){return(rn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function on(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return an(this,n)}}function an(t,e){if(e&&("object"===en(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return un(t)}function un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Qe(tn,"senders",["Mom","Dad","Boss","Red Hair","Stupid guy","Handsome stranger","Vampire","Lady Hamilton","Dude","Sis","Bro","Grany","Kurt","Kristin","Leo Di","Emergency"]);var sn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rn(t,e)}(i,t);var e,n,r,o=on(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=un(t),r=void 0,(n="txt")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=new v.Sprite(v.Texture.from("letter_button.png"));return a.anchor.set(.5,.5),t.addChild(a),t.txt=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:60,fill:0,align:"center",fontWeight:"bold"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"letter",set:function(t){this.txt.text=t}}])&&nn(e.prototype,n),r&&nn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function ln(t){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bn(t);if(e){var o=bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dn(this,n)}}function dn(t,e){if(e&&("object"===ln(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vn(t)}function vn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bn(t){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}(u,t);var e,n,r,o,i,a=yn(u);function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),mn(vn(e=a.call(this)),"bound",new v.Rectangle),mn(vn(e),"back",void 0),mn(vn(e),"letters",void 0),mn(vn(e),"stringLetters",void 0),mn(vn(e),"getPoint",void 0),e.back=v.Sprite.from(v.Texture.WHITE),e.back.anchor.set(.5,.5),e.back.width=Y.originalWidth,e.back.height=Y.originalHeight,e.addChild(e.back),e.stringLetters=e.getLetters(t),e.letters=[];for(var n=0;n<e.stringLetters.length;n++){var r=new sn;r.visible=!1,e.addChild(r),e.letters.push(r)}return e}return e=u,(n=[{key:"start",value:(o=regeneratorRuntime.mark((function t(e){var n,r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.getPoint=e,this.visible=!0,this.back.alpha=0,n=[],r=0,o=0;o<this.stringLetters.length;o++)r++," "===this.stringLetters[o]&&(n.push(r),r=0);return 0===n.length?n.push(this.stringLetters.length):n.push(r),t.abrupt("return",new Promise((function(t){g.a.to(i.back,{alpha:.7,duration:1});for(var e=0,r=-30,o=n[e],a=60/(o-1),u=100*o,c=.5*-u,s=u/(o-1),l=-400,f=[],p=i.stringLetters.length,h=0;h<p;h++){var y=i.letters.pop();y&&(f.push(y),y.visible=!0,y.letter=i.stringLetters[h],y.position.set(-400,700),y.scale.set(.1,.1),y.angle=r-30,g.a.to(y,{angle:r,x:c,y:l,delay:.1*h,duration:.5}),g.a.to(y.scale,{x:1,y:1,delay:.1*h,duration:.5})," "===i.stringLetters[h]?(e++,r=-30,a=60/((o=n[e])-1),c=.5*-(u=100*o),l+=140,s=u/(o-1)):(r+=a,c+=s))}g.a.to(i.back,{alpha:0,delay:1.2,duration:.5}),g.a.delayedCall(1+.1*(i.stringLetters.length-1),(function(){i.animate(f).then((function(){t()}))}))})));case 8:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){fn(i,n,r,a,u,"next",t)}function u(t){fn(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"clean",value:function(){this.getPoint=void 0,g.a.killTweensOf(this.back)}}])&&pn(e.prototype,n),r&&pn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(){return(On="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Pn(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Pn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rn(t)););return t}function Tn(t,e){return(Tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rn(t);if(e){var o=Rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){if(e&&("object"===gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _n(t)}function _n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(i,t);var e,n,r,o=Sn(i);function i(){var t;kn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Cn(_n(t=o.call.apply(o,[this].concat(n))),"points",[]),t}return e=i,r=[{key:"getAllByAmount",value:function(t){if(0===t)return[];i.allTexts||(i.allTexts=new Map,["BANG!","BONUS","SMASH","KABOOM","CRASH","CLANK","THUMP","WHAM!","SUPER BOOM","SUPER BONUS","LET'S JAZZ","YOU ARE JUST GREAT","YOU ARE GREAT","SUPER PUPER BOOM","WISH YOU LUCK, DUDE!","THAT WAS DOOM!","OH MY GOD!"].forEach((function(t){var e=t.length>=17?3:t.length>=10?2:1,n=[];i.allTexts.get(e)&&(n=i.allTexts.get(e)),n.push(t),i.allTexts.set(e,n)})),console.log(i.allTexts));var e=i.allTexts.get(t);return e[Math.floor(Math.random()*e.length)].split("")}}],(n=[{key:"activeBound",get:function(){if(this.points.length>0){for(var t=[],e=0;e<this.points.length;e++){var n=this.points[e];t.push(new v.Rectangle(n[0]-1,n[1]-1,2,2))}return this.points=[],t}}},{key:"clean",value:function(){this.points=[],On(Rn(i.prototype),"clean",this).call(this)}},{key:"getLetters",value:function(t){return i.getAllByAmount(t)}},{key:"animate",value:function(t){var e=this;return this.points=[],new Promise((function(n){if(e.getPoint){for(var r=function(n){var r=e.getPoint();if(!r)return"continue";g.a.to(t[n].scale,{x:0,y:0,duration:.2}),g.a.to(t[n],{x:50*r[0],y:50*r[1],duration:.2,onComplete:function(){e.points.push(r)}})},o=0;o<t.length;o++)r(o);g.a.delayedCall(.25,(function(){n()}))}else n()}))}}])&&xn(e.prototype,n),r&&xn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(wn);function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e){return(An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nn(t);if(e){var o=Nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dn(this,n)}}function Dn(t,e){if(e&&("object"===En(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return In(t)}function In(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Cn(jn,"allTexts",void 0);var Fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&An(t,e)}(i,t);var e,n,r,o=Mn(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Yn(In(t=o.call(this)),"scoreTxt",void 0),Yn(In(t),"scoreNumber",void 0);var e=v.Sprite.from(v.Texture.from("score_place.png"));return t.addChild(e),t.scoreNumber=0,t.scoreTxt=new v.Text(t.scoreFormatted(0),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:16777215,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.position.set(.5*e.width,.5*e.height),t.addChild(t.scoreTxt),t}return e=i,(n=[{key:"score",set:function(t){var e=this,n={score:this.scoreNumber};this.scoreTxt.text=this.scoreFormatted(this.scoreNumber),g.a.to(n,{score:t,duration:.1,ease:k.f.easeNone,onUpdate:function(){e.scoreTxt.text=e.scoreFormatted(Math.floor(n.score))}}),this.scoreNumber=t}},{key:"scoreFormatted",value:function(t){for(var e=t.toString(),n=6-e.length,r=0;r<n;r++)e="0"+e;return e}}])&&Ln(e.prototype,n),r&&Ln(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zn(t,e){return(zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kn(t);if(e){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){if(e&&("object"===Un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zn(t,e)}(i,t);var e,n,r,o=Gn(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"pause_button.png","pause_button.png")}return e=i,n&&Wn(e.prototype,n),r&&Wn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(kt);function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qn(t,e){return(qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tr(t);if(e){var o=tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(t,e){if(e&&("object"===Xn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qn(t)}function Qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tr(t){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function er(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qn(t,e)}(i,t);var e,n,r,o=$n(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),er(Qn(t=o.call(this,0)),"rect",void 0),er(Qn(t),"laser",void 0),t.laser=v.Sprite.from(v.Texture.from("direction.png")),t.laser.height=500,t.laser.rotation=Math.PI/2,t.laser.alpha=0,t.laser.anchor.set(.5,.5),t.addChild(t.laser),t.laser.visible=!1,t}return e=i,(n=[{key:"activeBound",get:function(){if(this.rect)return[this.rect]}},{key:"getLetters",value:function(){return["{","}"]}},{key:"animate",value:function(t){var e=this;return new Promise((function(n){if(void 0!==e.getPoint||2!==t.length){var r=e.getPoint();g.a.to(t[0],{x:-300,angle:0,y:50*r,duration:.2}),g.a.to(t[1],{x:300,angle:0,y:50*r,duration:.2}),g.a.delayedCall(.2,(function(){e.laser.visible=!0,e.laser.y=50*r,e.rect=new v.Rectangle(-7,r-.5,14,1),g.a.to(e.laser,{alpha:1,duration:.2}),g.a.delayedCall(.2,(function(){e.rect=void 0,g.a.to(t[0],{alpha:0,duration:.2}),g.a.to(t[1],{alpha:0,duration:.2}),g.a.to(e.laser,{alpha:0,duration:.2}),g.a.delayedCall(.2,(function(){n()}))}))}))}else n()}))}}])&&Jn(e.prototype,n),r&&Jn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(wn);function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ur(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sr(t);if(e){var o=sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(t,e){if(e&&("object"===rr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sr(t){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ar(t,e)}(i,t);var e,n,r,o=ur(i);function i(){return or(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"isObstacle",value:function(){return!0}}])&&ir(e.prototype,n),r&&ir(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(qt);function fr(t){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hr(t,e){return(hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vr(t);if(e){var o=vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dr(this,n)}}function dr(t,e){if(e&&("object"===fr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vr(t){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hr(t,e)}(i,t);var e,n,r,o=yr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t[0],t[1],100,100,0)).view.scale.set(1,1),e.type=Wt.STATIC_OBSTACLE_TYPE,e}return e=i,(n=[{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("app_static.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new E.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&pr(e.prototype,n),r&&pr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(lr);function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gr(t,e){return(gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pr(t);if(e){var o=Pr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xr(this,n)}}function xr(t,e){if(e&&("object"===mr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Or(t)}function Or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pr(t){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Sr,Br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gr(t,e)}(i,t);var e,n,r,o=kr(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Tr(Or(n=o.call(this,t[0],t[1],100,100,0)),"moving",!1),Tr(Or(n),"lives",void 0),Tr(Or(n),"txt",void 0),Tr(Or(n),"explosion",void 0),n.type=Wt.RANDOM_OBSTACLE_TYPE,n.lives=e,n.txt=new v.Text(n.lives.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),n.txt.anchor.set(.5,.5),n.txt.y=20,n.view.addChild(n.txt),n.view.scale.set(1,1),n.explosion=Gi.obtain(),n.explosion.visible=!1,n.addChild(n.explosion),n}return e=i,(n=[{key:"changePosition",value:function(){var t=this;if(!this.moving){this.lives--;var e=this.lives<=0;this.moving=!0;var n=this.view.scale.x;g.a.to(this.view.scale,{x:.01,y:.01,duration:.1,onUpdate:function(){var e,n;t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),null===(e=t.body)||void 0===e||e.updateBoundingRadius(),null===(n=t.body)||void 0===n||n.updateMassProperties()},onComplete:function(){if(e)t.destroyBody(),t.explosion.visible=!0,t.explosion.animate().then((function(){Gi.release(t.explosion),t.clean()}));else{t.txt.text=t.lives.toString();var r=9*Math.random()-4.5,o=5*-Math.random();t.body&&(t.body.position=[r,o]),g.a.to(t.view.scale,{x:n,y:n,duration:.4,onUpdate:function(){var e,n;t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),null===(e=t.body)||void 0===e||e.updateBoundingRadius(),null===(n=t.body)||void 0===n||n.updateMassProperties()},onComplete:function(){t.moving=!1}})}}})}}},{key:"createView",value:function(){var t=new v.Sprite(v.Texture.from("app_random.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new E.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&wr(e.prototype,n),r&&wr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(lr);function _r(t){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||Cr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,e){if(t){if("string"==typeof t)return jr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(t,e):void 0}}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lr(t,e){return(Lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mr(this,n)}}function Mr(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dr(t)}function Dr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.Begin="begin",t.Moving="moving",t.Heart="heart",t.NewLine="newLine",t.Recharge="recharge",t.Unbreak="unbreak",t.IAPBonus="iapbonus",t.IAPBonus2="iapbonus2",t.ChangePosition="changed",t.Skull="skull",t.AnyType="anytype",t.RainbowType="rainbowtype"}(Sr||(Sr={}));var Yr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lr(t,e)}(i,t);var e,n,r,o=Ar(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Nr(Dr(t=o.call(this)),"allConditions",void 0),Nr(Dr(t),"textMap",void 0),Nr(Dr(t),"tutorial",void 0),Nr(Dr(t),"txt",void 0),Nr(Dr(t),"back",void 0),t.allConditions=new Map,t.textMap=new Map,t.textMap.set(Sr.Begin,"Save the Heart by moving it to the top!"),t.textMap.set(Sr.Moving,"Tap the screen and move your finger to aim. Release to shoot."),t.textMap.set(Sr.Heart,"The Heart is free and happy now!"),t.textMap.set(Sr.NewLine,"It's time for a new emoji load!"),t.textMap.set(Sr.Recharge,"Charge it fully to get a bonus!"),t.textMap.set(Sr.Unbreak,"This app is invincible!"),t.textMap.set(Sr.IAPBonus,"but this bonuses will help you."),t.textMap.set(Sr.IAPBonus2,"and this one too!"),t.textMap.set(Sr.ChangePosition,"This app should be destroyed! Aim to it!"),t.textMap.set(Sr.Skull,"Do not touch this Skulls by Heart or by throwed Emoji!"),t.textMap.set(Sr.AnyType,"This ball is matching with any emoji!"),t.textMap.set(Sr.RainbowType,"This ball is destroying everything!"),t.back=v.Sprite.from(v.Texture.WHITE),t.back.interactive=!0,t.back.width=Y.originalWidth,t.back.height=Y.originalHeight,t.addChild(t.back),t.back.position.set(.5*-t.back.width,.5*-t.back.height),t.back.tint=0,t.back.alpha=.3,t.tutorial=new v.NineSlicePlane(v.Texture.from("tutorial.png"),52,52,90,93),t.addChild(t.tutorial),t.txt=new v.Text("",{fontSize:50,fontWeight:"bold",fill:16777215,wordWrap:!0,wordWrapWidth:300}),t.addChild(t.txt),t.visible=!1,t}return e=i,(n=[{key:"addCondition",value:function(t,e){this.allConditions.set(t,e)}},{key:"update",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Cr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.allConditions);try{for(e.s();!(t=e.n()).done;){var n=Rr(t.value,2),r=n[0],o=(0,n[1])();if(o.success){this.show(r,o.data),this.allConditions.delete(r);break}}}catch(t){e.e(t)}finally{e.f()}}},{key:"isDone",value:function(t){return void 0===this.allConditions.get(t)}},{key:"show",value:function(t,e){var n=this,r=this.textMap.get(t);if(r){this.txt.text=r,this.tutorial.scale.set(1,1),this.tutorial.pivot.set(this.txt.width+80,this.txt.height+80),this.tutorial.width=this.txt.width+80,this.tutorial.height=this.txt.height+80,this.tutorial.scale.set(0,0);var o={x:1,y:1},i=e.pos,a=e.scale;o.x*=a.x,o.y*=a.y,this.tutorial.position.copyFrom(i),this.txt.position.copyFrom(i),1===a.x?this.txt.x-=60+this.txt.width:this.txt.x+=60,1===a.y?this.txt.y-=60+this.txt.height:this.txt.y+=52,this.txt.scale.set(0,0),this.back.alpha=0;var u=o.x/15,c=o.y/15,s=window.setInterval((function(){n.back.alpha+=.02,n.tutorial.scale.x+=u,n.tutorial.scale.y+=c,n.txt.scale.x+=1/15,n.txt.scale.y+=1/15,n.back.alpha>=.3&&window.clearInterval(s)}),10);this.visible=!0,qa(!0,!0),window.setTimeout((function(){qa(!1,!0),g.a.globalTimeline.pause(),Y.paused=!0,n.back.on("pointerup",(function(t){t.stopPropagation(),t.stopped=!0,n.hide()}))}),200)}}},{key:"hide",value:function(){var t=this;Y.paused=!1,g.a.globalTimeline.resume(),g.a.to(this,{alpha:0,duration:.3,onComplete:function(){t.visible=!1,t.alpha=1}}),this.back.off("pointerup")}}])&&Er(e.prototype,n),r&&Er(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container),Fr=n(198);function Ur(t){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vr(t);if(e){var o=Vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr(this,n)}}function Hr(t,e){if(e&&("object"===Ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kr(t)}function Kr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zr(t,e)}(i,t);var e,n,r,o=Gr(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Xr(Kr(t=o.call(this)),"iconL0",void 0),Xr(Kr(t),"iconR0",void 0),Xr(Kr(t),"iconL1",void 0),Xr(Kr(t),"iconR1",void 0);var e=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);e.tint=0,e.width=370,e.height=250,e.pivot.set(185,100),t.addChild(e),e.y=-50;var n=new v.Text("level powerups:",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:35,fill:16777215,align:"center",fontWeight:"bold"});n.anchor.set(.5,.5),n.position.set(0,-115),t.addChild(n);var r=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);r.pivot.set(80,80),r.width=160,r.height=160,t.addChild(r);var a=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);a.pivot.set(80,80),a.width=160,a.height=160,t.addChild(a),r.position.set(-85,0),a.position.set(85,0);var u=new v.Container,c=new v.Container;t.addChild(u),t.addChild(c),u.position.x=-85,c.position.x=85;var s=v.Sprite.from(v.Texture.WHITE);s.anchor.set(0,.5),s.width=140,s.height=140,t.addChild(s);var l=v.Sprite.from(v.Texture.WHITE);return l.anchor.set(0,.5),l.width=140,l.height=140,t.addChild(l),s.position.x=-145,l.position.x=5,u.mask=s,c.mask=l,t.iconL0=v.Sprite.from(i.randomTexture),t.iconL0.anchor.set(.5,.5),t.iconL0.scale.set(.5,.5),u.addChild(t.iconL0),t.iconR0=v.Sprite.from(i.randomTexture),t.iconR0.anchor.set(.5,.5),t.iconR0.scale.set(.5,.5),c.addChild(t.iconR0),t.iconL1=v.Sprite.from(i.randomTexture),t.iconL1.anchor.set(.5,.5),t.iconL1.scale.set(.5,.5),u.addChild(t.iconL1),t.iconL1.y=140,t.iconR1=v.Sprite.from(i.randomTexture),t.iconR1.anchor.set(.5,.5),t.iconR1.scale.set(.5,.5),c.addChild(t.iconR1),t.iconR1.y=140,t}return e=i,r=[{key:"prepareTextures",value:function(){this.allTextures=new Map,this.allTextures.set(Bi.RocketUp,v.Texture.from("powerup_rocket.png")),this.allTextures.set(Bi.Kill,v.Texture.from("powerup_bomb.png")),this.allTextures.set(Bi.Freeze,v.Texture.from("powerup_freeze.png"))}},{key:"getTexture",value:function(t){var e=this.allTextures.get(t);return e||v.Texture.EMPTY}},{key:"randomTexture",get:function(){var t=Array.from(this.allTextures.keys()),e=t[Math.floor(Math.random()*t.length)];return this.getTexture(e)}}],(n=[{key:"start",value:function(t){var e=this;g.a.to({a:0},{a:1,duration:1,onUpdate:function(){if(e.iconL0.y>=140){e.iconL0.texture=i.randomTexture,e.iconR0.texture=i.randomTexture;var t=e.iconL0;e.iconL0=e.iconL1,e.iconL1=t,t=e.iconR0,e.iconR0=e.iconR1,e.iconR1=t,e.iconL0.y=0,e.iconR0.y=0}e.iconL0.y+=20,e.iconR0.y+=20,e.iconL1.y=e.iconL0.y-140,e.iconR1.y=e.iconR0.y-140},onComplete:function(){e.iconL0.y=0,e.iconR0.y=0,e.iconR1.y=140,e.iconL1.y=140,e.iconL0.texture=i.getTexture(t[0]),e.iconR0.texture=i.getTexture(t[1])}})}}])&&Wr(e.prototype,n),r&&Wr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function qr(t){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qr(t,e){return(Qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function to(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ro(t);if(e){var o=ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return eo(this,n)}}function eo(t,e){if(e&&("object"===qr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return no(t)}function no(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xr(Jr,"allTextures",void 0);var io=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qr(t,e)}(u,t);var e,n,r,o,i,a=to(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),oo(no(t=a.call(this)),"back",void 0),oo(no(t),"popup",void 0),oo(no(t),"callback",void 0),oo(no(t),"scoreTxt",void 0),oo(no(t),"timeBonusTxt",void 0),oo(no(t),"title",void 0),oo(no(t),"stars",void 0),oo(no(t),"emitter",void 0),oo(no(t),"prizeIcon",void 0),oo(no(t),"heart",void 0),oo(no(t),"onTickEvent",(function(e){t.emitter.update(e/70)})),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=Y.originalWidth,t.back.height=Y.originalHeight,t.back.tint=0,t.back.alpha=0,t.addChild(t.back);var e=new v.Container;t.addChild(e),t.popup=new v.Container,t.popup.scale.set(0,0),t.addChild(t.popup);var n=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);n.pivot.set(300,400),n.width=600,n.height=800,t.popup.addChild(n),t.title=new v.Text("Well done!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"}),t.title.anchor.set(.5,.5),t.title.position.y=-310,t.popup.addChild(t.title),t.scoreTxt=new v.Text("0",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:120,fill:0,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.y=80,t.popup.addChild(t.scoreTxt),t.timeBonusTxt=new v.Text("+ Time Bonus!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:40,fill:6242531,align:"center"}),t.timeBonusTxt.anchor.set(.5,.5),t.popup.addChild(t.timeBonusTxt),t.timeBonusTxt.visible=!1,t.heart=new v.Container;var r=new v.Sprite(v.Texture.from("hero.png"));r.anchor.set(.5,.5),t.heart.addChild(r);var o=new v.Sprite(v.Texture.from("hero_.png"));o.anchor.set(.5,.5),t.heart.addChild(o),t.heart.scale.set(1.3,1.3),t.heart.position.y=-1e3,t.addChild(t.heart),t.stars=[];for(var i=-120,c=0;c<3;c++){var s=v.Sprite.from(v.Texture.from("like.png"));s.anchor.set(.5,.5),s.position.set(i,-150),t.popup.addChild(s),t.stars.push(s),s.visible=!1,i+=120}t.popup.addChild(t.stars[1]),t.prizeIcon=new v.Sprite,t.prizeIcon.anchor.set(.5,.5),t.prizeIcon.scale.set(.5,.5),t.prizeIcon.position.copyFrom(t.stars[2]),t.prizeIcon.x+=50,t.prizeIcon.y-=50,t.popup.addChild(t.prizeIcon),t.prizeIcon.visible=!1;var l=new kt("ok_button.png","ok_button.png");return l.on("pointerup",(function(){t.hide()})),l.position.y=300,t.popup.addChild(l),t.emitter=new Fr.a(e,"like.png",Y.particles),t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n,r,o,i,a,u){var c,s,l,f,p,h,y,d,b=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timeBonusTxt.visible=!1,this.heart.position.y=-1e3,this.heart.alpha=1,e||(r=0),console.log(a.toString(),u,r),this.title.text=e?"Well done!":"So sorry...",!((c=u!==Bi.None?u[0]:Bi.None)!==Bi.None&&n+r>=o[2])){t.next=24;break}return t.next=10,Q("powerupDone"+a.toString(),"0");case 10:if(s=t.sent,console.log("pd",s),"0"!==s){t.next=24;break}return this.prizeIcon.visible=!0,this.prizeIcon.scale.set(0,0),this.prizeIcon.texture=Jr.getTexture(c),t.next=18,Q(Be.getStorageId(c),"0");case 18:return l=t.sent,f=parseInt(l),t.next=22,Z(Be.getStorageId(c),(f+1).toString());case 22:return t.next=24,Z("powerupDone"+a.toString(),"1");case 24:for(p=0;p<this.stars.length;p++)(h=this.stars[p]).visible=!0,h.scale.set(0,0),h.showed=!1;this.callback=i,this.visible=!0,this.back.alpha=0,this.popup.scale.set(0,0),y={s:0},this.scoreTxt.text="0",d=function(){b.scoreTxt.text=Math.round(y.s).toString();for(var t=0;t<o.length;t++){var e=b.stars[t];if(y.s>=o[t]&&!e.showed){e.showed=!0;var n=1===t?1.5:1;g.a.to(e.scale,{x:n,y:n,duration:.2,ease:k.a.easeOut}),b.prizeIcon.visible&&2===t&&g.a.to(b.prizeIcon.scale,{x:.5,y:.5,duration:.2,ease:k.a.easeOut})}}},g.a.to(y,{s:n,delay:1,duration:2,onUpdate:d,onComplete:function(){y.s=n,r>0&&(n+=r,b.timeBonusTxt.visible=!0,b.timeBonusTxt.scale.set(5,5),g.a.to(b.timeBonusTxt.scale,{x:1,y:1,duration:.5,onComplete:function(){g.a.to(y,{s:n,duration:1,onUpdate:d})}}))}}),g.a.to(this.back,{alpha:.5,duration:.5}),g.a.to(this.popup.scale,{x:1,y:1,duration:1,ease:k.a.easeOut}),e&&(g.a.to(this.heart,{y:-410,delay:1,duration:1.5,ease:k.a.easeOut}),g.a.delayedCall(1,(function(){b.emitter.emit=!0,v.Ticker.shared.add(b.onTickEvent)})));case 36:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){$r(i,n,r,a,u,"next",t)}function u(t){$r(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n,r,o,a,u){return i.apply(this,arguments)})},{key:"hide",value:function(){var t=this;g.a.to(this.back,{alpha:0,duration:.2}),g.a.to(this.heart,{alpha:0,duration:.2}),g.a.to(this.popup.scale,{x:0,y:0,duration:.2,onComplete:function(){t.emitter.emit=!1,t.emitter.cleanup(),v.Ticker.shared.remove(t.onTickEvent),t.prizeIcon.visible=!1,t.visible=!1,t.callback()}})}}])&&Zr(e.prototype,n),r&&Zr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return co(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function co(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function so(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function po(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vo(t);if(e){var o=vo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ho(this,n)}}function ho(t,e){if(e&&("object"===ao(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yo(t)}function yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vo(t){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fo(t,e)}(u,t);var e,n,r,o,i,a=po(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),bo(yo(t=a.call(this)),"texts",void 0),bo(yo(t),"usingTexts",void 0),bo(yo(t),"back",void 0),bo(yo(t),"wheelbox",void 0),bo(yo(t),"tween",void 0),bo(yo(t),"nameBack",void 0),t.back=v.Sprite.from(v.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=Y.originalWidth,t.back.height=Y.originalHeight,t.back.alpha=0,t.addChild(t.back),t.nameBack=new v.NineSlicePlane(v.Texture.from("name_back.png"),80,80,80,80),t.nameBack.width=600,t.nameBack.alpha=0,t.addChild(t.nameBack),t.texts=[],t.usingTexts=[];for(var e=0;e<4;e++){var n=t.getNewText();t.texts.push(n)}return t.wheelbox=new Jr,t.addChild(t.wheelbox),t.visible=!1,t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r.visible=!0,r.back.alpha=0,r.nameBack.alpha=0,r.wheelbox.position.y=1e3;var o=n!==Bi.None,i=o?3:1.4;g.a.to(r.back,{alpha:.7,duration:.2}),g.a.to(r.nameBack,{alpha:1,duration:.2});for(var a=e.name.split(" "),u=-70*a.length/2+35-100,c=u,s=function(t){var e=a[t],n=void 0;(n=r.texts.length>0?r.texts.pop():r.getNewText()).alpha=1,n.visible=!0,n.text=e,r.addChild(n),r.usingTexts.push(n),n.y=u,n.x=t%2?-500-n.width/2:500+n.width/2,g.a.to(n,{x:0,duration:.5,ease:k.d.easeOut}),g.a.to(n,{alpha:0,delay:i-.2,duration:.5,onComplete:function(){r.texts.push(n)}}),u+=70},l=0;l<a.length;l++)s(l);g.a.to(r.back,{alpha:0,delay:i-.2,duration:.5}),g.a.to(r.nameBack,{alpha:0,delay:i-.2,duration:.5}),o&&(r.wheelbox.visible=!0,r.wheelbox.alpha=1,g.a.to(r.wheelbox,{y:u+140,delay:.6,duration:.5,ease:k.d.easeOut,onComplete:function(){r.wheelbox.start(n)}}),g.a.to(r.wheelbox,{alpha:0,delay:i-.2,duration:.5}),u+=120+r.wheelbox.height/2);var f=Math.max(400,u-c+100);r.nameBack.pivot.set(300,f/2),r.nameBack.height=f,r.nameBack.y=o?c-80+f/2:-100,r.tween=g.a.delayedCall(i,(function(){r.usingTexts=[],r.visible=!1,r.tween=void 0,t()}))})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){so(i,n,r,a,u,"next",t)}function u(t){so(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"clear",value:function(){this.tween&&(this.tween.kill(),this.tween=void 0),g.a.killTweensOf(this.wheelbox),g.a.killTweensOf(this.back);var t,e=uo(this.usingTexts);try{for(e.s();!(t=e.n()).done;){var n=t.value;g.a.killTweensOf(n),this.removeChild(n)}}catch(t){e.e(t)}finally{e.f()}this.visible=!1}},{key:"getNewText",value:function(){var t=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});return t.anchor.set(.5,.5),t}}])&&lo(e.prototype,n),r&&lo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function wo(t){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=To(t);if(e){var o=To(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oo(this,n)}}function Oo(t,e){if(e&&("object"===wo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Po(t)}function Po(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function To(t){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var So=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(i,t);var e,n,r,o=xo(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=Po(t),r=void 0,(n="callback")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=v.Sprite.from(v.Texture.WHITE);a.anchor.set(.5,.5),a.width=Y.originalWidth,a.height=Y.originalHeight,a.tint=0,a.alpha=.6,t.addChild(a);var u=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);u.width=500,u.height=360,u.pivot.set(250,180),t.addChild(u);var c=new v.Text("Exit?",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});c.anchor.set(.5,.5),c.position.y=-120,t.addChild(c);var s=new kt("ok_button.png","ok_button.png");s.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!0)})),s.position.set(-110,110),s.scale.set(.8,.8),t.addChild(s);var l=new kt("x_button.png","x_button.png");return l.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!1)})),l.position.set(110,110),l.scale.set(.8,.8),t.addChild(l),t.visible=!1,t}return e=i,(n=[{key:"show",value:function(t){this.callback=t,this.alpha=1,this.visible=!0}},{key:"hide",value:function(t){var e=this;this.callback&&this.callback(t),this.callback=void 0,g.a.to(this,{alpha:0,duration:.4,onComplete:function(){e.visible=!1}})}}])&&go(e.prototype,n),r&&go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Bo(t){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ro(t,e){return(Ro=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Co(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lo(t);if(e){var o=Lo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jo(this,n)}}function jo(t,e){if(e&&("object"===Bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eo(t)}function Eo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lo(t){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ao(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ro(t,e)}(i,t);var e,n,r,o=Co(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ao(Eo(t=o.call(this)),"part0",void 0),Ao(Eo(t),"part1",void 0),t.part0=v.Sprite.from(v.Texture.from("direction.png")),t.part0.anchor.set(.5,1),t.addChild(t.part0),t.part0.height=1200,t.part1=v.Sprite.from(v.Texture.from("direction.png")),t.part1.anchor.set(.5,1),t.addChild(t.part1),t.part1.height=700,t}return e=i,(n=[{key:"draw",value:function(t){var e=Ki.BottomPoint,n=Math.atan2(t.y-e,t.x);this.part0.rotation=n+Math.PI/2;var r=1200*Math.cos(n),o=e+1200*Math.sin(n),i=1200;r<-315||r>315?(r=(i=Math.abs(r)/r*315/Math.cos(n))*Math.cos(n),o=i*Math.sin(n),this.part1.visible=!0,this.part1.position.set(r,o),this.part1.rotation=-n-Math.PI/2):this.part1.visible=!1,this.part0.height=i+8}}])&&_o(e.prototype,n),r&&_o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function Do(t){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function No(){return(No="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Yo(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Yo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Go(t)););return t}function Fo(t,e){return(Fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Go(t);if(e){var o=Go(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wo(this,n)}}function Wo(t,e){if(e&&("object"===Do(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zo(t)}function zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Go(t){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ho(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fo(t,e)}(i,t);var e,n,r,o=Uo(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ho(zo(r=o.call(this,t,e,Wt.ANY_TYPE,n)),"currentIcon",void 0),Ho(zo(r),"temp",void 0),r.reGenerateTextures(),r}return e=i,(n=[{key:"reGenerateTextures",value:function(){var t=this;this.currentIcon?this.currentIcon++:this.currentIcon=1,this.currentIcon>7&&(this.currentIcon=1),this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2(),this.temp=0,g.a.to(this,{temp:1,duration:.15,onComplete:function(){t.reGenerateTextures()}})}},{key:"getTexture",value:function(){return v.Texture.from("".concat(this.currentIcon||1,".png"))}},{key:"getTexture2",value:function(){return v.Texture.from("".concat(this.currentIcon||1,"_.png"))}},{key:"clean",value:function(){g.a.killTweensOf(this),No(Go(i.prototype),"clean",this).call(this)}}])&&Io(e.prototype,n),r&&Io(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Wt);function Vo(t){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jo(t,e){return(Jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qo(t);if(e){var o=Qo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $o(this,n)}}function $o(t,e){if(e&&("object"===Vo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zo(t)}function Zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qo(t){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ti(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ei=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jo(t,e)}(i,t);var e,n,r,o=qo(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ti(Zo(t=o.call(this)),"txt",void 0),ti(Zo(t),"score",void 0),t.txt=new v.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:40,fill:4073878,align:"center"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"start",value:function(t,e,n){var r=this;this.score=n,this.txt.text="+"+n.toString(),this.x=t,this.y=e,g.a.to(this,{x:0,y:-700,duration:.7,delay:.15*Math.random(),ease:k.d.easeIn,onComplete:function(){r.finish()}})}},{key:"finish",value:function(){g.a.killTweensOf(this),this.emit("done",this.score)}},{key:"clean",value:function(){g.a.killTweensOf(this),this.off("done"),this.score=0,this.alpha=1,this.txt.text=""}}])&&Xo(e.prototype,n),r&&Xo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ri=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="all")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.all=[];for(var i=0;i<e;i++)this.all.push(new ei)}var e,n,r;return e=t,(n=[{key:"obtain",value:function(){return 0===this.all.length&&(console.log("Score pool exceed"),this.all.push(new ei)),this.all.pop()}},{key:"release",value:function(t){t.clean(),this.all.push(t)}}])&&ni(e.prototype,n),r&&ni(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ai(t,e){return(ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ui(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=li(t);if(e){var o=li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ci(this,n)}}function ci(t,e){if(e&&("object"===oi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return si(t)}function si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function li(t){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ai(t,e)}(i,t);var e,n,r,o=ui(i);function i(t){var e,n,r,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,v.Texture.from("bolt".concat(t,".png"))),n=si(e),a=void 0,(r="_id")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e._id=t,e}return e=i,(n=[{key:"id",get:function(){return this._id}}])&&ii(e.prototype,n),r&&ii(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Sprite);function pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var hi=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(n="all")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;this.all=new Map;for(var o=0;o<4;o++){for(var i=[],a=0;a<20;a++)i.push(new fi(o));this.all.set(o,i)}}var e,n,r;return e=t,(n=[{key:"obtain",value:function(t){var e=this.all.get(t);return e&&0===e.length&&(console.log("Bolts pool exceed"),e.push(new fi(t))),null==e?void 0:e.pop()}},{key:"release",value:function(t){this.all.get(t.id).push(t)}}])&&pi(e.prototype,n),r&&pi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var di=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=void 0,(r="all")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.all=[];for(var i=0;i<e;i++)this.all.push(t.createMissle())}var e,n,r;return e=t,r=[{key:"createMissle",value:function(){return new v.Sprite(v.Texture.from("like.png"))}}],(n=[{key:"obtain",value:function(){return 0===this.all.length&&(console.log("Missles pool exceed"),this.all.push(t.createMissle())),this.all.pop()}},{key:"release",value:function(t){this.all.push(t)}}])&&yi(e.prototype,n),r&&yi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bi(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oi(t);if(e){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ki(this,n)}}function ki(t,e){if(e&&("object"===vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xi(t)}function xi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wi(t,e)}(u,t);var e,n,r,o,i,a=gi(u);function u(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=a.call(this),e=xi(t),r=void 0,(n="art")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t.art=v.Sprite.from(Ci.getTexture(0)),t.art.anchor.set(.5,.5),t.addChild(t.art),t.scale.set(0,0),t}return e=u,(n=[{key:"animate",value:(o=regeneratorRuntime.mark((function t(){var e,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.abrupt("return",new Promise((function(t){var r=0,o={a:0};g.a.to(o,{a:1,delay:e,duration:e+.4,onUpdate:function(){var t=Math.floor(2*o.a);t!==r&&(r=t,n.art.texture=Ci.getTexture(r))}}),g.a.to(n.scale,{x:1,y:1,duration:e+.1}),g.a.to(n.scale,{x:1.3,y:1.3,delay:e+.2,duration:.3}),g.a.to(n,{alpha:0,delay:e+.2,duration:.5,onComplete:function(){t()}})})));case 2:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){bi(i,n,r,a,u,"next",t)}function u(t){bi(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"clean",value:function(){this.art.texture=Ci.getTexture(0),this.scale.set(0,0),this.alpha=1,this.visible=!0,g.a.killTweensOf(this.scale),g.a.killTweensOf(this)}}])&&mi(e.prototype,n),r&&mi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(v.Container);function Ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Si(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bi,_i,Ri,Ci=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Si(this,"all",void 0),this.all=[];for(var n=0;n<e;n++)this.all.push(new Pi)}var e,n,r;return e=t,r=[{key:"getTexture",value:function(e){return t._textures[e]}},{key:"createTextures",value:function(){t._textures||(t._textures=[v.Texture.from("game_explosion_0.png"),v.Texture.from("game_explosion_1.png"),v.Texture.from("game_explosion_2.png")])}}],(n=[{key:"obtain",value:function(){return 0===this.all.length&&(console.log("Missles pool exceed"),this.all.push(new Pi)),this.all.pop()}},{key:"release",value:function(t){t.clean(),this.all.push(t)}}])&&Ti(e.prototype,n),r&&Ti(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Li(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ei(i,r,o,a,u,"next",t)}function u(t){Ei(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ai(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mi(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Mi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wi(t);if(e){var o=Wi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fi(this,n)}}function Fi(t,e){if(e&&("object"===ji(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ui(t)}function Ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wi(t){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Si(Ci,"_textures",void 0),function(t){t[t.None=0]="None",t[t.Kill=1]="Kill",t[t.Freeze=2]="Freeze",t[t.RocketUp=3]="RocketUp"}(Bi||(Bi={})),function(t){t[t.None=0]="None",t[t.BoomLetters=1]="BoomLetters",t[t.LaserLetters=2]="LaserLetters",t[t.BigBoomLetters=3]="BigBoomLetters",t[t.SmallBoomLetters=4]="SmallBoomLetters",t[t.All=5]="All"}(_i||(_i={})),function(t){t[t.None=0]="None",t[t.Random=1]="Random",t[t.Static=2]="Static",t[t.HeartMiddle=3]="HeartMiddle",t[t.Skulls=4]="Skulls"}(Ri||(Ri={}));var Gi,Hi=[0,.2,.3,.1,.4],Ki=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ni(t,e)}(O,t);var e,n,r,o,i,a,c,s,l,f,p,h,y,d,b,m,w,x=Yi(O);function O(){var t;Di(this,O);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zi(Ui(t=x.call.apply(x,[this].concat(n))),"gameContainer",void 0),zi(Ui(t),"fxContainer",void 0),zi(Ui(t),"frontContainer",void 0),zi(Ui(t),"backContainer",void 0),zi(Ui(t),"moveBox",void 0),zi(Ui(t),"staticBox",void 0),zi(Ui(t),"bottomOpenWall",void 0),zi(Ui(t),"activeBlock",void 0),zi(Ui(t),"maxY",void 0),zi(Ui(t),"tick",0),zi(Ui(t),"levelStartTime",void 0),zi(Ui(t),"moving",void 0),zi(Ui(t),"isActivePowerup",void 0),zi(Ui(t),"preview",void 0),zi(Ui(t),"nextLines",void 0),zi(Ui(t),"previewBlocks",void 0),zi(Ui(t),"nextType",void 0),zi(Ui(t),"nextBlock",void 0),zi(Ui(t),"isTransition",void 0),zi(Ui(t),"powerup1",void 0),zi(Ui(t),"powerup2",void 0),zi(Ui(t),"nextTimer",void 0),zi(Ui(t),"randomBodiesPositions",void 0),zi(Ui(t),"activeBonus",void 0),zi(Ui(t),"boomMeter",void 0),zi(Ui(t),"scorePlace",void 0),zi(Ui(t),"pad",void 0),zi(Ui(t),"padRect",void 0),zi(Ui(t),"downRect",void 0),zi(Ui(t),"topRect",void 0),zi(Ui(t),"levelId",void 0),zi(Ui(t),"meterBonus",void 0),zi(Ui(t),"obstacles",void 0),zi(Ui(t),"score",void 0),zi(Ui(t),"tutorial",void 0),zi(Ui(t),"goalBlock",void 0),zi(Ui(t),"boltsActive",void 0),zi(Ui(t),"levelFinished",void 0),zi(Ui(t),"levelStart",void 0),zi(Ui(t),"pausePopup",void 0),zi(Ui(t),"waitForOver",void 0),zi(Ui(t),"activeBlockDelay",void 0),zi(Ui(t),"scorePool",void 0),zi(Ui(t),"boltsPool",void 0),zi(Ui(t),"misslesPool",void 0),zi(Ui(t),"increaseBlocks",[]),zi(Ui(t),"explodePoints",[]),zi(Ui(t),"allScore",void 0),zi(Ui(t),"rocketPowerup",void 0),t}return e=O,n=[{key:"create",value:function(){var t=this;Jr.prepareTextures(),Ci.createTextures(),Gi=new Ci(90),this.scorePool=new ri(80),this.boltsPool=new hi,this.misslesPool=new di(3),this.allScore=new Map,this.backContainer=new v.Container,this.addChild(this.backContainer),this.gameContainer=new v.Container,this.addChild(this.gameContainer),this.fxContainer=new v.Container,this.addChild(this.fxContainer),this.frontContainer=new v.Container,this.addChild(this.frontContainer),this.levelFinished=new io,this.frontContainer.addChild(this.levelFinished),this.levelFinished.visible=!1,this.pad=new v.Sprite(v.Texture.from("launchpad.png")),this.pad.anchor.set(.5,1),this.pad.position.y=.5*Y.originalHeight-30,this.gameContainer.addChild(this.pad);var e=new v.NineSlicePlane(v.Texture.from("phone.png"),104,100,104,100);e.width=Y.originalWidth+50,e.height=Y.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e);var n=new v.Container;n.position.set(0,.5*-Y.originalHeight+40),this.gameContainer.addChild(n);var r=new Vn;r.position.set(-230,30),r.on("pointerup",(function(){ru("Game","Menu","Click"),t.showPause()})),n.addChild(r),this.powerup1=new Be,this.powerup1.position.set(-255,620),this.gameContainer.addChild(this.powerup1),this.powerup1.on("activate",(function(e){ru("Game","Powerup","Activate",e),t.startPowerup(e)})),this.powerup2=new Be,this.powerup2.position.set(255,620),this.gameContainer.addChild(this.powerup2),this.powerup2.on("activate",(function(e){ru("Game","Powerup","Activate",e),t.startPowerup(e)})),this.powerup1.visible=!1,this.powerup2.visible=!1,this.preview=new Mo,this.gameContainer.addChild(this.preview),this.preview.visible=!1,this.previewBlocks=new tn,this.gameContainer.addChild(this.previewBlocks),this.previewBlocks.y=-900-this.previewBlocks.height;var o=new v.NineSlicePlane(v.Texture.from("progress_bar.png"),6,4,6,4);o.width=600,o.height=15,o.position.set(-300,500),this.gameContainer.addChild(o),this.nextTimer=new De,this.nextTimer.position.set(-316,-637),this.gameContainer.addChild(this.nextTimer),this.boomMeter=new He,this.boomMeter.position.set(165,-725),this.boomMeter.scale.set(.85,.85),this.gameContainer.addChild(this.boomMeter),this.scorePlace=new Fn,this.scorePlace.position.set(-150,-725),this.gameContainer.addChild(this.scorePlace),this.padRect=new v.Rectangle(-140,610,280,150),this.downRect=new v.Rectangle(-400,500,800,300),this.topRect=new v.Rectangle(.5*-Y.originalWidth,.5*-Y.originalHeight,Y.originalWidth,180),this.tutorial=new Yr,this.frontContainer.addChild(this.tutorial),this.levelStart=new mo,this.frontContainer.addChild(this.levelStart),this.pausePopup=new So,this.frontContainer.addChild(this.pausePopup),this.tutorial.addCondition(Sr.Begin,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:!!t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible&&!!n&&n.y<-100,data:{pos:n,scale:{x:n&&n.x<-10?-1:1,y:-1}}}})),this.tutorial.addCondition(Sr.Moving,(function(){return{success:!!t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible,data:{pos:{x:40,y:0},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Sr.Heart,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.isTransition,data:{pos:n,scale:{x:n&&n.x<-10?-1:1,y:-1}}}})),this.tutorial.addCondition(Sr.NewLine,(function(){return{success:t.moving,data:{pos:{x:290,y:-550},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Sr.Recharge,(function(){return{success:t.boltsActive,data:{pos:{x:300,y:-650},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Sr.Unbreak,(function(){return{success:!!t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Sr.IAPBonus,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Sr.Unbreak)&&!!t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:-255,y:620},scale:{x:-1,y:1}}}})),this.tutorial.addCondition(Sr.IAPBonus2,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Sr.IAPBonus)&&!!t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:255,y:620},scale:{x:1,y:1}}}})),this.tutorial.addCondition(Sr.ChangePosition,(function(){return{success:!!t.bottomOpenWall&&t.powerup1.visible&&6===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Sr.Skull,(function(){var e,n,r={x:25,y:-125},o=Ai(R.bodies);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i&&i.userData&&i.userData.type===Wt.SKULL_TYPE){r=i.userData.position;break}}}catch(t){o.e(t)}finally{o.f()}return{success:!!t.bottomOpenWall&&12===t.levelId&&!t.levelStart.visible,data:{pos:r,scale:{x:(null===(e=r)||void 0===e?void 0:e.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Sr.AnyType,(function(){var e={x:-100,y:O.BottomPoint+20};return{success:!!t.bottomOpenWall&&t.powerup1.visible&&t.levelId>8&&t.nextType===Wt.ANY_TYPE,data:{pos:e,scale:{x:-1,y:1}}}})),this.tutorial.addCondition(Sr.RainbowType,(function(){var e={x:-100,y:O.BottomPoint+20};return{success:!!t.bottomOpenWall&&t.powerup1.visible&&t.levelId>8&&t.nextType===Wt.RAINBOW_TYPE,data:{pos:e,scale:{x:-1,y:1}}}}))}},{key:"start",value:(w=Li(regeneratorRuntime.mark((function t(){var e,n,r,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(nt(),this.waitForOver=!1,this.boltsActive=!1,this.score=0,this.scorePlace.score=0,e=i.length,n=new Array(e),r=0;r<e;r++)n[r]=i[r];return this.levelId=n[0][0],this.activeBonus=_i.None,this.randomBodiesPositions=[],this.obstacles=[],this.isTransition=!1,this.nextType=void 0,this.nextLines=[],this.isActivePowerup=!1,this.generateLineBlocks(),this.tick=0,this.maxY=-800,this.moving=!1,this.nextTimer.freeze(),Y.paused=!1,t.next=22,this.generateStartBlocks();case 22:return o=this.generateIAPS(),t.next=25,this.levelStart.show(this.currentLevelData,o);case 25:this.currentLevelData.iaps?(this.powerup1.setData(o[0],Jr.getTexture(o[0]),Jr.getTexture(o[0])),this.powerup2.setData(o[1],Jr.getTexture(o[1]),Jr.getTexture(o[1])),this.powerup1.visible=!0,this.powerup2.visible=!0,this.powerup1.disabled=!1,this.powerup2.disabled=!1,this.sendStartLevelEvent({iaps:o.toString()})):this.sendStartLevelEvent(),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.addActiveBlock(),this.nextTimer.unFreeze(),this.levelStartTime=(new Date).getTime(),this.rocketPowerup=new ae,C.stage.on("pointerup",this.onClick,this),C.stage.on("pointerdown",this.onTapStart,this);case 33:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"close",value:(m=Li(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){C.stage.off("pointerup"),C.stage.off("pointerdown"),Y.paused=!1,e.waitForOver=!0,qa(!1),e.allScore.clear(),e.boltsActive=!1,e.nextTimer.clear(),e.boomMeter.reset(!0),e.levelStart.clear(),e.moveBox&&e.moveBox.clean(),e.staticBox&&e.staticBox.clean(),e.bottomOpenWall&&e.bottomOpenWall.clean(),e.activeBlock&&e.activeBlock.clean(),e.activeBonus=_i.None,e.tick=0,e.moving=!1,e.isActivePowerup=!1,e.previewBlocks&&e.previewBlocks.clear(),e.nextBlock&&e.nextBlock.clean(),e.preview.visible=!1,e.powerup1.visible=!1,e.powerup2.visible=!1,e.nextLines=[],e.randomBodiesPositions=[],e.obstacles=[],e.fxContainer.removeChildren(),R.bodies.forEach((function(t){t&&t.userData&&t.userData.clean()}));for(var n=e.gameContainer.children.length-1;n>=0;n--){var r=e.gameContainer.children[n];r.createBody&&e.gameContainer.removeChild(r)}g.a.globalTimeline.clear();var o=window.setInterval((function(){var e=R.bodies.filter((function(t){return t&&t.userData}));0===e.length?(window.clearInterval(o),t()):console.log(e)}),50)})));case 1:case"end":return t.stop()}}),t)}))),function(){return m.apply(this,arguments)})},{key:"showPause",value:function(){g.a.globalTimeline.pause(),Y.paused=!0,this.pausePopup.show(function(){var t=Li(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return t.next=3,tt(H.Interstitial);case 3:Y.paused=!1,g.a.globalTimeline.resume(),ru("Game","Pause","Exit"),D.start(Pa),t.next=12;break;case 9:ru("Game","Pause","Cancel"),Y.paused=!1,g.a.globalTimeline.resume();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"generateIAPS",value:function(){if(!this.currentLevelData.iaps)return Bi.None;for(var t=[Bi.Kill,Bi.RocketUp,Bi.Freeze],e=[],n=0;n<2;n++){var r=Math.floor(Math.random()*t.length);e.push(t[r]),t.splice(r,1)}return e}},{key:"unusedBlocksRemoved",value:function(t){var e=this;if(!this.isTransition){var n=t[Math.floor(Math.random()*t.length)],r=t.length;t.forEach((function(t){e.addScoreItem(t.x,t.y,Wt.BALL_SCORE)})),r>=5&&n&&(this.fireMissle(1,n),this.addScoreItem(n.x,n.y,Wt.EXPLOSION_SCORE)),this.activeBonus||this.levelId>1&&this.playBolts(r,n)}}},{key:"addToBoomMeter",value:function(t){if(!this.activeBonus&&this.boomMeter.update(t)){var e=this.getRandomBonus();this.setActiveBonus(e)}}},{key:"playBolts",value:(b=Li(regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<2)&&n){t.next=2;break}return t.abrupt("return");case 2:this.boltsActive=!0,r=e,e=Math.min(e,6),o=r/e,i=regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(4*Math.random()),(i=u.boltsPool.obtain(r)).anchor.set(.5,.5),i.scale.set(.1,.1),i.rotation=Math.PI/2+Math.atan2(-680-n.y,270-n.x),i.position.copyFrom(n),u.fxContainer.addChild(i),g.a.to(i.scale,{x:1.5,y:1.5,duration:.4,ease:k.f.easeNone}),g.a.to(i.scale,{x:0,y:0,delay:.4,duration:.4,ease:k.f.easeNone}),g.a.to(i.position,{x:270,y:-680,duration:.8,ease:k.f.easeNone,onComplete:function(){u.addToBoomMeter(o),u.fxContainer.removeChild(i),u.boltsPool.release(i)}}),t.next=12,u.delay(.1);case 12:case"end":return t.stop()}}),t)})),a=0;case 9:if(!(a<e)){t.next=14;break}return t.delegateYield(i(a),"t0",11);case 11:a++,t.next=9;break;case 14:this.boltsActive=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return b.apply(this,arguments)})},{key:"addScore",value:function(t){this.score+=t,this.scorePlace.score=this.score}},{key:"addScoreItem",value:function(t,e,n){var r=this,o=this.scorePool.obtain();this.allScore.set(o,!0),this.fxContainer.addChild(o),o.on("done",(function(t){r.addScore(t),r.scorePool.release(o),r.allScore.delete(o)})),o.start(t,e,n)}},{key:"currentLevelData",get:function(){return Y.levels[this.levelId]}},{key:"getRandomPosition",value:function(){if(!this.isTransition){var t=Math.floor(Math.random()*this.randomBodiesPositions.length),e=this.randomBodiesPositions[t];if(this.randomBodiesPositions.splice(t,1),e&&!(Math.abs(e[1])>=20))return e}}},{key:"getLettersAmount",value:function(t){return t===_i.SmallBoomLetters?1:t===_i.BoomLetters?2:t===_i.BigBoomLetters?3:0}},{key:"setActiveBonus",value:(d=Li(regeneratorRuntime.mark((function t(e){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.activeBonus=e,this.nextTimer.freeze(),this.addScoreItem(0,0,Wt.BONUS_SCORE),n=void 0,r=this.getLettersAmount(e),console.log("set bonus",e,r),ru("Game","Bonus","Activate",e),t.t0=e,t.next=t.t0===_i.SmallBoomLetters||t.t0===_i.BoomLetters||t.t0===_i.BigBoomLetters?10:t.t0===_i.LaserLetters?13:16;break;case 10:return this.meterBonus=new jn(r),n=function(){return o.getRandomPosition()},t.abrupt("break",17);case 13:return this.meterBonus=new nr,n=function(){var t=o.getRandomPosition();if(t)return t[1]},t.abrupt("break",17);case 16:return t.abrupt("return");case 17:return this.frontContainer.addChild(this.meterBonus),t.next=20,this.meterBonus.start(n);case 20:this.clearMeterBonus(),this.nextTimer.unFreeze();case 22:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"getRandomBonus",value:function(){for(var t=this.currentLevelData.bonuses,e=[],n=0,r=0;r<t.length;r++)n+=Hi[t[r]],e.push(n);var o=Math.random()*n;return t[e.filter((function(t){return o>=t})).length]}},{key:"fireMissle",value:(y=Li(regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isTransition){t.next=2;break}return t.abrupt("return");case 2:qa(!0),e=Math.min(e,this.randomBodiesPositions.length),r=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i.getRandomPosition())&&!i.isTransition){t.next=3;break}return t.abrupt("return","continue");case 3:return(o=i.misslesPool.obtain()).anchor.set(.5,.5),o.scale.set(.1,.1),o.position.copyFrom(n),i.fxContainer.addChild(o),g.a.to(o.scale,{x:1.5,y:1.5,duration:.5,ease:k.f.easeNone}),g.a.to(o.scale,{x:0,y:0,delay:.5,duration:.5,ease:k.f.easeNone}),g.a.to(o.position,{x:50*r[0],y:50*r[1],duration:1,ease:k.f.easeNone,onComplete:function(){i.createExplosion(o.position,0),i.explodePoints.push(r),i.fxContainer.removeChild(o),i.misslesPool.release(o)}}),t.next=13,i.delay(.2);case 13:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<e)){t.next=15;break}return t.delegateYield(r(o),"t0",9);case 9:if("continue"!==t.t0){t.next=12;break}return t.abrupt("continue",12);case 12:o++,t.next=7;break;case 15:g.a.delayedCall(.15,(function(){qa(!1)}));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return y.apply(this,arguments)})},{key:"createExplosion",value:(h=Li(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Gi.obtain()).position.copyFrom(e),this.fxContainer.addChild(r),t.next=5,r.animate(n);case 5:Gi.release(r);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"clearActiveBlocks",value:function(){this.activeBlockDelay&&this.activeBlockDelay.kill(),this.activeBlock&&g.a.killTweensOf(this.activeBlock),this.nextBlock&&g.a.killTweensOf(this.nextBlock),g.a.killTweensOf(this.preview),this.nextBlock&&(this.pad.removeChild(this.nextBlock),this.nextBlock.clean()),this.activeBlock&&(this.gameContainer.removeChild(this.activeBlock),this.activeBlock.clean(),this.preview.visible=!1),this.activeBlock=void 0,this.nextBlock=void 0,this.nextType=void 0}},{key:"stopBonuses",value:function(){this.activeBonus=_i.None,this.clearActiveBlocks()}},{key:"stopAllScores",value:function(){this.allScore.forEach((function(t,e){e.finish()}))}},{key:"levelComplete",value:function(){this.stopAllScores(),this.stopBonuses(),this.isTransition=!0,this.moving=!1,this.obstacles.forEach((function(t){t.clean()})),this.obstacles=[],this.previewBlocks.y=-900-this.previewBlocks.height,this.previewBlocks&&this.previewBlocks.clear(),this.bottomOpenWall&&this.bottomOpenWall.animateAndDestroy(),this.bottomOpenWall=void 0,this.moveBox&&this.moveBox.animateAndDestroy(),this.staticBox&&this.staticBox.animateAndDestroy()}},{key:"heartDeath",value:function(){!this.goalBlock||this.goalBlock&&this.goalBlock.isSkull()||(this.goalBlock.setSkull(),this.moveBalls())}},{key:"moveBalls",value:function(){var t=this;if(!this.isTransition&&!this.moving){this.moving=!0;var e=this.nextLines.length,n=this.moveBox.body.position,r={x:n[0],y:n[1]};this.previewBlocks.show(),g.a.to(this.previewBlocks,{y:-570,duration:1.1}),g.a.to(r,{y:(70*e-500)/50,delay:.1,duration:1,ease:k.f.easeNone,onUpdate:function(){t.moveBox.body?t.moveBox.body.position=[r.x,r.y]:g.a.killTweensOf(r)},onComplete:function(){t.moveBox.body.position=[0,-11.5],t.addLineBlocks(),t.generateLineBlocks(),g.a.to(t.previewBlocks,{y:-900-t.previewBlocks.height,duration:.5}),t.moving=!1}})}}},{key:"shakeScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(g.a.to(this,{x:"+5",yoyo:!0,repeat:3,duration:.05}),g.a.to(this,{x:"-5",yoyo:!0,repeat:3,duration:.05})):(g.a.to(this,{y:"+5",yoyo:!0,repeat:3,duration:.05}),g.a.to(this,{y:"-5",yoyo:!0,repeat:3,duration:.05}))}},{key:"update",value:function(t){var e=this;if(!Y.paused&&!this.waitForOver){this.drawMouse();var n=this.meterBonus&&this.meterBonus.activeBound||void 0;this.maxY=-800;var r=!1,o=!1,i=[];if(this.randomBodiesPositions=[],R.bodies.forEach((function(t){var o=t.position;t.userData.kinematic&&t!==e.moveBox.body&&(o[1]<-9.1||o[1]>(O.BottomPoint+10)/50)&&(t.userData.shape.material=Y.material,t.gravityScale=1),t.type===E.Body.DYNAMIC&&o[1]>-O.BottomPoint/50&&t.userData&&!t.userData.isGoal()&&e.randomBodiesPositions.push(t.position),!e.isTransition&&t.type===E.Body.DYNAMIC&&o[1]>e.maxY&&(e.maxY=o[1]),e.isTransition&&t.type===E.Body.DYNAMIC&&o[1]>-O.BottomPoint/50&&(r=!0),e.isTransition&&t.type===E.Body.DYNAMIC&&o[1]<3*-O.BottomPoint/50&&t.userData.clean(),!e.isTransition&&n&&t.type===E.Body.DYNAMIC&&t.userData&&t.userData.type!==Wt.GOAL_TYPE&&n.forEach((function(e){e.contains(o[0],o[1])&&i.push(t)}))})),!this.isTransition&&this.goalBlock&&this.goalBlock.position.y>450&&(o=!0),this.goalBlock&&!o&&this.goalBlock.resetDeathCounter(),this.tutorial.update(),this.isTransition&&!r&&!this.levelFinished.visible){this.previewBlocks.y=-900-this.previewBlocks.height,this.nextTimer.clear(),this.boomMeter.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1;var a=this.getLevelTime(),u=Y.levels[this.levelId].idealTime,c=a<u?Math.round(1e3*(1-a/u)):0;this.sendFinishLevelEvent(Xa.Complete,this.score+c,{score:this.score,time:a,timeBonus:c}),this.levelFinished.show(!0,this.score,c,this.currentLevelData.starsConditions,(function(){e.score+=c,e.moveToNextLevel()}),this.levelId,this.generateIAPS()),this.nextTimer.freeze(),this.obstacles=[]}if(!this.moving&&!this.isTransition){if(this.goalBlock&&o&&this.goalBlock.startCountDeath(),!this.nextTimer.isFrozen){this.tick+=Math.floor(60*t);var s=this.tick%this.currentLevelData.time;this.nextTimer.setProgress(s/this.currentLevelData.time),0===s&&(this.nextTimer.setProgress(1),i=[],this.moveBalls())}if(i.length>0){var l=[];i.forEach((function(t){var n=t.userData;l.push(n.position),n.boom(!1),e.createExplosion(n.position,.2*Math.random())})),this.unusedBlocksRemoved(l)}}}}},{key:"getLevelTime",value:function(){return(new Date).getTime()-this.levelStartTime}},{key:"moveToNextLevel",value:function(){var t=this;console.log("finished",this.levelId,this.score),Y.levels.length>this.levelId+1&&((!this.currentLevelData.score||this.score>this.currentLevelData.score)&&(this.currentLevelData.score=this.score,Z("".concat(this.currentLevelData.key),this.score.toString()),console.log("set score")),this.levelId+=1,this.currentLevelData.score||0===this.currentLevelData.score||(this.currentLevelData.score=0,Z("".concat(this.currentLevelData.key),"0"))),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.score=0,this.scorePlace.score=0,this.createMoveWalls(),this.generateNewBlocks().then((function(){var e=t.generateIAPS();t.levelStart.show(t.currentLevelData,e).then((function(){t.currentLevelData.iaps?(t.powerup1.setData(e[0],Jr.getTexture(e[0]),Jr.getTexture(e[0])),t.powerup2.setData(e[1],Jr.getTexture(e[1]),Jr.getTexture(e[1])),t.powerup1.visible=!0,t.powerup2.visible=!0,t.sendStartLevelEvent({iaps:e.toString()})):t.sendStartLevelEvent(),t.generateLineBlocks(),t.addActiveBlock(),t.previewBlocks.y=-900-t.previewBlocks.height,t.nextTimer.unFreeze(),t.levelStartTime=(new Date).getTime()}))})),this.isTransition=!1,Y.paused=!1}},{key:"sendStartLevelEvent",value:function(t){console.log("send start","level"+this.currentLevelData.key,t),eu(Xa.Start,"level"+this.currentLevelData.key,0,t)}},{key:"sendFinishLevelEvent",value:function(t,e,n){console.log("send finish","level"+this.currentLevelData.key,e),eu(t,"level"+this.currentLevelData.key,e,n)}},{key:"startPowerup",value:(p=Li(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.isActivePowerup||Y.paused||this.isTransition)){t.next=2;break}return t.abrupt("return");case 2:this.isActivePowerup=!0,this.powerup1.disabled=!0,this.powerup2.disabled=!0,t.t0=e,t.next=t.t0===Bi.RocketUp?8:t.t0===Bi.Kill?14:t.t0===Bi.Freeze?24:27;break;case 8:return this.startVerticalRocket(),t.next=11,this.delay(2);case 11:return this.powerup1.disabled=!1,this.powerup2.disabled=!1,t.abrupt("break",27);case 14:return n=this.getRandomType(),R.bodies.forEach((function(t){var e=t.userData;e&&e.type===n&&e.setBomb()})),t.next=18,this.delay(1);case 18:return this.shakeScreen(),t.next=21,this.delay(1);case 21:return this.powerup1.disabled=!1,this.powerup2.disabled=!1,t.abrupt("break",27);case 24:return this.nextTimer.freeze(10),this.delay(10).then((function(){r.powerup1.disabled=!1,r.powerup2.disabled=!1})),t.abrupt("break",27);case 27:this.isActivePowerup=!1;case 28:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"startVerticalRocket",value:(f=Li(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=560*Math.random()-280,t.next=3,this.startRocket(e,O.BottomPoint,e,-450);case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"startRocket",value:(l=Li(regeneratorRuntime.mark((function t(e,n,r,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gameContainer.addChild(this.rocketPowerup),t.next=3,this.rocketPowerup.animate(e,n,r,o);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return l.apply(this,arguments)})},{key:"generateActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextBlock&&this.pad.removeChild(this.nextBlock),this.nextType=-1!==t?t:this.getRandomType(!0),this.nextBlock=-1===t?this.createCircle(-90,40,this.nextType,!1):this.createCircle(-90,-20,this.nextType,!1),this.pad.addChild(this.nextBlock),-1===t&&g.a.to(this.nextBlock,{y:-20,duration:.3})}},{key:"getRandomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t&&this.currentLevelData.bonusBalls.length>0&&Math.random()<.08){if(2===this.currentLevelData.bonusBalls.length)return Math.random()<.5?Wt.ANY_TYPE:Wt.RAINBOW_TYPE;if(1===this.currentLevelData.bonusBalls.length)return 1===this.currentLevelData.bonusBalls[0]?Wt.ANY_TYPE:Wt.RAINBOW_TYPE}return Math.floor(Math.random()*this.currentLevelData.blocks)+1}},{key:"addActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextType||(this.nextType=this.getRandomType(!0)),this.activeBlock=-1===t?this.createCircle(-90,O.BottomPoint+35,this.nextType,!1):this.createCircle(0,O.BottomPoint,this.nextType,!1),this.activeBlock.kinematic=!0,this.gameContainer.addChild(this.activeBlock),this.generateActiveBlock(t),this.preview.position.set(0,O.BottomPoint),this.preview.visible=!0,-1===t&&(this.preview.alpha=0,g.a.to(this.activeBlock,{x:0,y:O.BottomPoint,duration:.15}),g.a.to(this.preview,{alpha:.6,duration:.15}))}},{key:"switchBlockes",value:(s=Li(regeneratorRuntime.mark((function t(){var e,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null===(e=this.activeBlock)||void 0===e?void 0:e.type,r=this.nextType,t.next=4,new Promise((function(t){o.nextBlock&&g.a.to(o.nextBlock,{x:0,y:-50,duration:.2}),o.activeBlock?g.a.to(o.activeBlock,{x:-90,y:700,duration:.2,onComplete:function(){t()}}):g.a.to({a:0},{a:1,duration:.2,onComplete:function(){t()}})}));case 4:this.clearActiveBlocks(),this.nextType=r,this.addActiveBlock(n);case 7:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"drawMouse",value:function(){var t=this.toLocal(C.renderer.plugins.interaction.eventData.data.global);this.isTransition||Y.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(t.x,t.y)||this.topRect.contains(t.x,t.y)||this.preview.draw(t)}},{key:"onTapStart",value:function(t){var e=this.toLocal(t.data.global);this.isTransition||Y.paused||this.topRect.contains(e.x,e.y)||(this.padRect.contains(e.x,e.y)?this.switchBlockes():this.downRect.contains(e.x,e.y)||this.drawMouse())}},{key:"onClick",value:function(t){var e=this,n=this.toLocal(t.data.global);if(!(this.isTransition||Y.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(n.x,n.y)||this.topRect.contains(n.x,n.y))){this.activeBlock.createBody(E.Body.DYNAMIC,30),this.activeBlock.shape.material=Y.activeBallMaterial;var r=this.activeBlock;this.activeBlock=void 0,this.preview.visible=!1;var o=Math.atan2((n.y-O.BottomPoint)/50,n.x/50);r.body&&(r.body.gravityScale=0,r.body.applyImpulse([450*Math.cos(o),450*Math.sin(o)])),this.activeBlockDelay=g.a.delayedCall(.4,(function(){e.activeBlockDelay=void 0,e.addActiveBlock()})),R.bodies.forEach((function(t){t&&t.userData&&t.userData.type===Wt.SKULL_TYPE&&t.userData.decreaseSkullMeter()}))}}},{key:"generateLineBlocks",value:function(){var t=this.currentLevelData.lines;this.previewBlocks.clear(),this.nextLines=[];for(var e=0;e<t;e++){this.nextLines[e]=[];for(var n=0;n<9;n++)this.nextLines[e][n]=Math.floor(Math.random()*this.currentLevelData.blocks)+1}this.previewBlocks.setLines(this.nextLines)}},{key:"addLineBlocks",value:function(){for(var t,e=-500,n=0;n<this.nextLines.length;n++){t=-300;for(var r=0;r<this.nextLines[n].length;r++){var o=this.createCircle(t,e,this.nextLines[n][r]);this.gameContainer.addChild(o),t+=74}e+=70}}},{key:"delay",value:(c=Li(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){g.a.delayedCall(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"generateNewBlocks",value:(a=Li(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,c,s,l,f,p,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this.currentLevelData,n=e.startAmount,r=e.blocks,o=e.obstacles,i=!1,a=0,o&&o.length>0&&o.forEach((function(t){h.createObstacle(t),t.type===Ri.HeartMiddle?i=!0:t.type===Ri.Skulls&&(a=t.amount)})),u=[],c=0;c<a;c++){for(s=Math.floor(Math.random()*(n-19));u.includes(s);)s=Math.floor(Math.random()*(n-19));u.push(s)}l=0;case 7:if(!(l<n)){t.next=21;break}return f=-1,f=u.includes(l)?Wt.SKULL_TYPE:Math.floor(Math.random()*r)+1,p=this.createCircle(50*Math.random()-25,900,f),this.gameContainer.addChild(p),t.next=14,this.delay(.001);case 14:if(!i||l!==Math.floor(n/2)){t.next=18;break}return this.createGoalBlock(),t.next=18,this.delay(1);case 18:l++,t.next=7;break;case 21:if(i){t.next=25;break}return t.next=24,this.delay(1);case 24:this.createGoalBlock();case 25:return t.next=27,this.delay(1);case 27:this.createBottomExit();case 28:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"createGoalBlock",value:function(){this.goalBlock=this.createCircle(0,1100,Wt.GOAL_TYPE),this.goalBlock.on("gameover",this.onGameOver,this),this.gameContainer.addChild(this.goalBlock)}},{key:"createObstacle",value:function(t){if(t.type!==Ri.HeartMiddle&&t.type!==Ri.Skulls){var e=void 0;if(t.position)switch(t.type){case Ri.Static:e=new br(t.position);break;case Ri.Random:e=new Br(t.position,t.lives)}e&&(this.gameContainer.addChild(e),this.obstacles.push(e))}}},{key:"onGameOver",value:function(){var t,e,n,r=this;null===(t=this.nextTimer)||void 0===t||t.clear(),null===(e=this.boomMeter)||void 0===e||e.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1,this.sendFinishLevelEvent(Xa.Fail,0,{score:this.score,time:this.getLevelTime(),timeBonus:0}),this.score=0,this.levelFinished.show(!1,this.score,Number.MAX_SAFE_INTEGER,this.currentLevelData.starsConditions,(function(){r.restartLevel()}),this.levelId,Bi.None),null===(n=this.nextTimer)||void 0===n||n.freeze(),this.obstacles=[],Y.paused=!0}},{key:"restartLevel",value:function(){this.isTransition=!0,D.restart(this.levelId)}},{key:"generateStartBlocks",value:(i=Li(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.createMoveWalls(),(e=new qt(-400,-50,100,1800,0)).shape.material=Y.bounceMaterial,this.gameContainer.addChild(e),(n=new qt(400,-50,100,1800,0)).shape.material=Y.bounceMaterial,this.gameContainer.addChild(n),r=new qt(-225,800,250,100,0),this.gameContainer.addChild(r),o=new qt(225,800,250,100,0),this.gameContainer.addChild(o),i=new qt(-150,1100,100,500,0),this.gameContainer.addChild(i),a=new qt(150,1100,100,500,0),this.gameContainer.addChild(a),u=new qt(0,1300,200,100,0),this.gameContainer.addChild(u),t.next=19,this.generateNewBlocks();case 19:Y.started=!0;case 20:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createMoveWalls",value:function(){this.moveBox=new qt(0,-575,710,50,0),this.moveBox.type=Wt.END_TYPE,this.gameContainer.addChild(this.moveBox),this.staticBox=new qt(0,-625,710,50,0),this.gameContainer.addChild(this.staticBox)}},{key:"createBottomExit",value:function(){this.bottomOpenWall=new qt(0,800,200,100,0),this.gameContainer.addChild(this.bottomOpenWall)}},{key:"createCircle",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n===Wt.GOAL_TYPE?new ve(t,e):n===Wt.ANY_TYPE?new Ko(t,e,r):new Wt(t,e,n,r)}},{key:"clearMeterBonus",value:(o=Li(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.meterBonus&&this.meterBonus&&(this.meterBonus.clean(),this.frontContainer.removeChild(this.meterBonus),this.meterBonus=void 0),this.activeBonus=_i.None;case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"preCleanUnused",value:function(t){var e={step:t,other:{amount:0,positions:[]}};return e.other.amount=N.length,this.update(t),e.other.amount>0&&N.forEach((function(t){e.other.positions.push(t.userData.position)})),e}},{key:"postCleanUnused",value:function(t){this.increaseBlocks.forEach((function(t){return t.block.increase(t.steps)})),this.increaseBlocks=[],this.explodePoints.forEach((function(e){var n=R.hitTest(e,R.bodies,0);if(n&&n.length>0){var r=n[0].userData;r&&r instanceof Wt&&r.type!==Wt.GOAL_TYPE&&(t.other.amount+=r.boom()),n.forEach((function(e){var n=e.userData;t.other.positions.push(n.position)}))}})),t.other.amount>0&&this.unusedBlocksRemoved(t.other.positions),this.explodePoints=[]}},{key:"endContact",value:function(t){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;r&&o&&r instanceof Wt&&o instanceof Wt&&O.sameType(r,o)&&(r.sameColorNeighbors.delete(o),o.sameColorNeighbors.delete(r))}},{key:"beginContact",value:function(t){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;if(r&&o){if(O.getEnd(r,o))return void this.levelComplete();if(r instanceof ae||o instanceof ae){var i=O.getBlockByRocket(r,o);i&&i instanceof Wt&&(i.boom(),this.createExplosion(i.position,.15*Math.random()),this.addScoreItem(i.position.x,i.position.y,Wt.BALL_SCORE))}var a=O.getRainbow(r,o);if(a){var c=a===r?o:r;c instanceof Wt&&c.correctType()&&!c.isGoal()&&c.type!==Wt.STATIC_OBSTACLE_TYPE&&c.type!==Wt.RANDOM_OBSTACLE_TYPE?(c.boom(),this.createExplosion(c.position,.15*Math.random()),this.addScoreItem(c.position.x,c.position.y,Wt.BALL_SCORE)):a instanceof Wt&&(0===c.type||c.type===Wt.END_TYPE||c.type===Wt.STATIC_OBSTACLE_TYPE||c.type===Wt.RANDOM_OBSTACLE_TYPE)&&(a.boom(),this.createExplosion(a.position,.15*Math.random()))}var s=O.getSkullByGoal(r,o);if(s)return s.boom(),void this.heartDeath();if(r instanceof Wt&&o instanceof Wt&&(O.sameType(r,o)&&(r.sameColorNeighbors.set(o,!0),o.sameColorNeighbors.set(r,!0)),O.wasAnyAndSkull(r,o)))return this.addScoreItem(r.position.x,r.position.y,Wt.BALL_SCORE),r.boom(),void o.boom();if(!t.shapeA.data||!t.shapeB.data)return;if((50*E.vec2.distance(t.bodyA.position,t.bodyA.previousPosition)>.5||50*E.vec2.distance(t.bodyB.position,t.bodyB.previousPosition)>.5)&&u.playRandom("ball hit ",3),r&&o){var l=O.getKinematic(r,o);if(l&&l.body){var f=l===r?o:r;if(l.enableGravity(),f instanceof Br&&f.type===Wt.RANDOM_OBSTACLE_TYPE?(f.changePosition(),this.addScoreItem(f.position.x,f.position.y,Wt.BALL_SCORE),this.shakeScreen(Math.random()<.5)):f.type===Wt.STATIC_OBSTACLE_TYPE&&this.shakeScreen(Math.random()<.5),r.type!==Wt.GOAL_TYPE&&o.type!==Wt.GOAL_TYPE)if(O.sameType(r,o)&&r instanceof Wt&&o instanceof Wt){r.kinematic=!1,o.kinematic=!1,r.enableGravity(),o.enableGravity();var p=l.steps;l.animateAndDestroy(),this.increaseBlocks.push({block:l===r?o:r,steps:p})}else f.type===Wt.SKULL_TYPE&&l.setSkull()}else{if(r instanceof Wt&&r.kinematic&&r.enableGravity(),o instanceof Wt&&o.kinematic&&o.enableGravity(),r.type===Wt.GOAL_TYPE||o.type===Wt.GOAL_TYPE)return;if(r instanceof Wt&&o instanceof Wt&&O.sameType(r,o)&&(r.steps!==o.steps||r.kinematic||o.kinematic)){var h=r.kinematic?r:o,y=h===r?o:r;h.kinematic=!1,y.kinematic=!1,h.body&&(h.body.gravityScale=1),y.body&&(y.body.gravityScale=1);var d=h.steps;h.animateAndDestroy(),this.increaseBlocks.push({block:y,steps:d})}else{var v=O.getRandomObstacle(r,o);if(v)this.shakeScreen(Math.random()<.5),v.changePosition(),this.addScoreItem(v.position.x,v.position.y,Wt.BALL_SCORE);else if(r instanceof Wt&&o instanceof Wt){var b=O.getKinematicBySkull(r,o);b&&b.setSkull()}}}}}}}],r=[{key:"sameType",value:function(t,e){return(t.type===e.type||t.type===Wt.ANY_TYPE||e.type===Wt.ANY_TYPE)&&0!==t.type&&0!==e.type&&t.type!==Wt.GOAL_TYPE&&e.type!==Wt.GOAL_TYPE&&t.type!==Wt.STATIC_OBSTACLE_TYPE&&e.type!==Wt.STATIC_OBSTACLE_TYPE&&t.type!==Wt.RANDOM_OBSTACLE_TYPE&&e.type!==Wt.RANDOM_OBSTACLE_TYPE&&t.type!==Wt.SKULL_TYPE&&e.type!==Wt.SKULL_TYPE}},{key:"getRainbow",value:function(t,e){return t.type===Wt.RAINBOW_TYPE||e.type===Wt.RAINBOW_TYPE?t.type===Wt.RAINBOW_TYPE?t:e:void 0}},{key:"getEnd",value:function(t,e){return t.type===Wt.GOAL_TYPE&&e.type===Wt.END_TYPE||e.type===Wt.GOAL_TYPE&&t.type===Wt.END_TYPE?t.type===Wt.END_TYPE?t:e:void 0}},{key:"getSkullByGoal",value:function(t,e){return t.type===Wt.GOAL_TYPE&&e.type===Wt.SKULL_TYPE||e.type===Wt.GOAL_TYPE&&t.type===Wt.SKULL_TYPE?t.type===Wt.SKULL_TYPE?t:e:void 0}},{key:"wasAnyAndSkull",value:function(t,e){return t.type===Wt.ANY_TYPE&&e.type===Wt.SKULL_TYPE&&!e.isGoal()||e.type===Wt.ANY_TYPE&&t.type===Wt.SKULL_TYPE&&!t.isGoal()}},{key:"getBlockByRocket",value:function(t,e){return t instanceof ae&&e.correctType()&&!e.isGoal()?e:e instanceof ae&&t.correctType()&&!t.isGoal()?t:void 0}},{key:"getKinematic",value:function(t,e){return t instanceof Wt&&t.kinematic&&0!==t.type?t:e instanceof Wt&&e.kinematic&&0!==e.type?e:void 0}},{key:"getRandomObstacle",value:function(t,e){return t instanceof Wt&&t.kinematic&&e instanceof Br&&e.type===Wt.RANDOM_OBSTACLE_TYPE?e:e instanceof Wt&&e.kinematic&&t instanceof Br&&t.type===Wt.RANDOM_OBSTACLE_TYPE?t:void 0}},{key:"getKinematicBySkull",value:function(t,e){return t.kinematic&&e.type===Wt.SKULL_TYPE?t:e.kinematic&&t.type===Wt.SKULL_TYPE?e:void 0}}],n&&Ii(e.prototype,n),r&&Ii(e,r),Object.defineProperty(e,"prototype",{writable:!1}),O}(st);function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ji(t,e){return(Ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qi(t);if(e){var o=Qi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $i(this,n)}}function $i(t,e){if(e&&("object"===Vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zi(t)}function Zi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qi(t){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}zi(Ki,"BottomPoint",670);var ea=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ji(t,e)}(i,t);var e,n,r,o=qi(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ta(Zi(t=o.call(this)),"explosion",void 0),ta(Zi(t),"face",void 0),ta(Zi(t),"logo",void 0),t.explosion=v.Sprite.from(v.Texture.from("splash_explosion.png")),t.explosion.anchor.set(.5),t.explosion.scale.set(0,0),t.explosion.position.y=.5*-Y.originalHeight+516,t.explosion.alpha=0,t.addChild(t.explosion),t.face=v.Sprite.from(v.Texture.from("splash_logo_face.png")),t.face.position.set(-131,-350),t.face.alpha=0,t.addChild(t.face),t.logo=v.Sprite.from(v.Texture.from("splash_logo.png")),t.logo.anchor.set(.5),t.logo.position.set(0,-260),t.logo.scale.set(3,3),t.logo.alpha=0,t.addChild(t.logo),t}return e=i,(n=[{key:"start",value:function(){this.explosion.position.y=.5*-Y.originalHeight+516,this.explosion.scale.set(0,0),this.explosion.alpha=0,this.face.position.set(-131,-350),this.face.alpha=0,this.logo.position.set(0,-260),this.logo.scale.set(3,3),this.logo.alpha=0,g.a.to(this.explosion,{alpha:1,duration:.2}),g.a.to(this.explosion.scale,{x:1,y:1,duration:1,ease:k.c.easeOut}),g.a.to(this.logo,{alpha:1,delay:.2,duration:.2}),g.a.to(this.logo.scale,{x:1,y:1,delay:.2,duration:1,ease:k.a.easeOut}),g.a.to(this.face,{alpha:1,delay:1.09,duration:.1}),g.a.to(this.face,{y:-448,delay:1.1,duration:2,ease:k.f.easeNone})}},{key:"stop",value:function(){g.a.killTweensOf(this.explosion),g.a.killTweensOf(this.explosion.scale),g.a.killTweensOf(this.logo),g.a.killTweensOf(this.logo.scale),g.a.killTweensOf(this.face)}}])&&Xi(e.prototype,n),r&&Xi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function na(t){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ra(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oa(t,e){return(oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ia(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ca(t);if(e){var o=ca(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return aa(this,n)}}function aa(t,e){if(e&&("object"===na(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ua(t)}function ua(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var la=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oa(t,e)}(i,t);var e,n,r,o=ia(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),sa(ua(t=o.call(this)),"txt",void 0),sa(ua(t),"lockedTxt",void 0),sa(ua(t),"hearts",void 0),t.txt=new v.Text("Level 1",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,1),t.txt.position.set(0,-75),t.addChild(t.txt);var e=new v.NineSlicePlane(v.Texture.from("top_back.png"),46,50,46,50);e.pivot.set(160,70),e.width=320,e.height=140,e.tint=14540253,t.addChild(e),t.lockedTxt=new v.Text("Locked",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:11184810,fontWeight:"bold",align:"center"}),t.lockedTxt.anchor.set(.5,.5),t.lockedTxt.position.set(0,0),t.addChild(t.lockedTxt),t.hearts=[];for(var n=-90,r=0;r<3;r++){var a=new v.Sprite(v.Texture.from("like.png"));a.alpha=.3,a.anchor.set(.5,.5),a.scale.set(.6),a.position.x=n,t.addChild(a),t.hearts.push(a),n+=90}return t}return e=i,(n=[{key:"updateData",value:function(t,e){this.txt.text="Level ".concat(t+1);for(var n=0;n<3;n++)this.hearts[n].alpha=e>=n+1?1:e>=0||0===t?.3:0;this.lockedTxt.visible=0!==t&&-1===e}}])&&ra(e.prototype,n),r&&ra(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(v.Container);function fa(t){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ha(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ha(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ha(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ya(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function da(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ya(i,r,o,a,u,"next",t)}function u(t){ya(i,r,o,a,u,"throw",t)}a(void 0)}))}}function va(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ma(t,e){return(ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xa(t);if(e){var o=xa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ga(this,n)}}function ga(t,e){if(e&&("object"===fa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ka(t)}function ka(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xa(t){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ma(t,e)}(l,t);var e,n,r,o,i,a,c,s=wa(l);function l(){var t;va(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Oa(ka(t=s.call.apply(s,[this].concat(n))),"logo",void 0),Oa(ka(t),"activeLevelItem",void 0),Oa(ka(t),"activeLevelId",void 0),Oa(ka(t),"left",void 0),Oa(ka(t),"right",void 0),Oa(ka(t),"canPlay",void 0),Oa(ka(t),"playBtn",void 0),Oa(ka(t),"muteBtn",void 0),Oa(ka(t),"unmuteBtn",void 0),t}return e=l,(n=[{key:"create",value:function(){var t=this;this.logo=new ea,this.addChild(this.logo),this.playBtn=new kt("start_button.png","start_button.png"),this.playBtn.position.y=Y.originalHeight/3-30,this.addChild(this.playBtn),this.playBtn.on("pointerup",(function(){t.onPlayClicked()})),this.muteBtn=new kt("sound1.png","sound1.png"),this.muteBtn.position.set(Y.originalWidth/2-50,-Y.originalHeight/2+70),this.addChild(this.muteBtn),this.muteBtn.on("pointerup",(function(){ru("Menu","Mute","click"),t.mute=!0})),this.unmuteBtn=new kt("sound2.png","sound2.png"),this.unmuteBtn.position.set(Y.originalWidth/2-50,-Y.originalHeight/2+70),this.addChild(this.unmuteBtn),this.unmuteBtn.on("pointerup",(function(){ru("Menu","Unmute","click"),t.mute=!1})),Q("emoji_mute","0").then((function(e){t.mute="1"===e})),this.createMapItems()}},{key:"mute",set:function(t){this.muteBtn.visible=!t,this.unmuteBtn.visible=t,Z("emoji_mute",t?"1":"0"),u.muteMusic=t,u.muteSounds=t}},{key:"start",value:function(){ru("Menu","View","Start"),this.logo.start(),this.setActiveLevel()}},{key:"close",value:(c=da(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ru("Menu","View","Close"),this.logo.stop();case 2:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"setActiveLevel",value:(a=da(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Y.levels,n=0,r=-1,o=pa(e),t.prev=4,o.s();case 6:if((i=o.n()).done){t.next=20;break}return a=i.value,t.next=10,Q("".concat(a.key),"");case 10:if(u=t.sent,r=-1,""!==u&&(a.score=parseInt(u),r=Ja(a.score,a.starsConditions)),0!==r&&-1!==r){t.next=17;break}return t.abrupt("break",20);case 17:n++;case 18:t.next=6;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(4),o.e(t.t0);case 25:return t.prev=25,o.f(),t.finish(25);case 28:this.activeLevelId=n,this.canPlay=0===n||-1!==r,this.activeLevelItem.updateData(this.activeLevelId,r),this.updateButtons();case 32:case"end":return t.stop()}}),t,this,[[4,22,25,28]])}))),function(){return a.apply(this,arguments)})},{key:"updateButtons",value:function(){this.playBtn.disabled=!this.canPlay,this.left.visible=this.activeLevelId>0,this.right.visible=this.activeLevelId<Y.levels.length-1}},{key:"createMapItems",value:function(){var t=this;this.activeLevelItem=new la,this.activeLevelItem.position.set(0,Y.originalHeight/3-230),this.addChild(this.activeLevelItem),this.left=new kt("back_button.png","back_button.png"),this.left.position.set(-240,this.activeLevelItem.y),this.addChild(this.left),this.right=new kt("next_button.png","next_button.png"),this.right.position.set(250,this.activeLevelItem.y+5),this.addChild(this.right),this.left.scale.set(.5,.5),this.right.scale.set(.5,.5),this.left.on("pointerup",(function(){ru("Menu","Prev","Click"),t.activeLevelId--,t.updateActive()})),this.right.on("pointerup",(function(){ru("Menu","Next","Click"),t.activeLevelId++,t.updateActive()}))}},{key:"updateActive",value:(i=da(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Y.levels[this.activeLevelId],t.next=3,Q("".concat(e.key),"");case 3:n=t.sent,r=-1,""!==n&&(e.score=parseInt(n),r=Ja(e.score,e.starsConditions)),this.canPlay=0===this.activeLevelId||-1!==r,this.activeLevelItem.updateData(this.activeLevelId,r),this.updateButtons();case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onPlayClicked",value:(o=da(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canPlay){t.next=2;break}return t.abrupt("return");case 2:if(!q||!X.shouldPlayFirstAds()){t.next=5;break}return t.next=5,tt(H.Interstitial);case 5:ru("Menu","Play","Click",this.activeLevelId+1),D.start(Ki,this.activeLevelId);case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}])&&ba(e.prototype,n),r&&ba(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(st),Ta=n(199);function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ba(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function _a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ra(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ja(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Aa(t);if(e){var o=Aa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ea(this,n)}}function Ea(t,e){if(e&&("object"===Sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return La(t)}function La(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aa(t){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ma(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Da=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e)}(u,t);var e,n,r,o,i,a=ja(u);function u(){var t;_a(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ma(La(t=a.call.apply(a,[this].concat(n))),"comics",void 0),Ma(La(t),"step",void 0),Ma(La(t),"nextBtn",void 0),Ma(La(t),"prevBtn",void 0),Ma(La(t),"okBtn",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=this;this.comics=v.Sprite.from(v.Texture.from("comic_00.png")),this.comics.anchor.set(.5,.5),this.addChild(this.comics),this.nextBtn=new kt("next_button.png","next_button.png"),this.nextBtn.position.set(160,Y.originalHeight/2-this.nextBtn.height/2),this.addChild(this.nextBtn),this.nextBtn.on("pointerup",(function(){ru("Comics","Next","Click"),t.onNextClicked()})),this.prevBtn=new kt("back_button.png","back_button.png"),this.prevBtn.position.set(-160,this.nextBtn.y),this.addChild(this.prevBtn),this.prevBtn.on("pointerup",(function(){ru("Comics","Prev","Click"),t.onPrevClicked()})),this.okBtn=new kt("ok_button.png","ok_button.png"),this.okBtn.on("pointerup",(function(){Z("skipcomics","1"),D.start(Pa)})),this.okBtn.position.y=this.nextBtn.y-50,this.addChild(this.okBtn),this.prevBtn.visible=!1,this.nextBtn.visible=!1,this.okBtn.visible=!1}},{key:"start",value:function(){ru("Comics","View","Start"),this.step=0,this.prevBtn.visible=!1,this.nextBtn.visible=!0,this.okBtn.visible=!1}},{key:"close",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(ru("Comics","View","Close"),e=0;e<6;e++)v.Texture.removeFromCache("comic_0".concat(e,".png"));this.removeChild(this.okBtn),this.destroy({children:!0});case 4:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Ba(i,n,r,a,u,"next",t)}function u(t){Ba(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"onNextClicked",value:function(){this.step++,this.step<5?(this.updateImage(),this.prevBtn.visible=!0,this.nextBtn.visible=!0):5===this.step&&(this.updateImage(),this.okBtn.visible=!0,this.prevBtn.visible=!1,this.nextBtn.visible=!1)}},{key:"onPrevClicked",value:function(){this.step--,this.prevBtn.visible=this.step>0,this.updateImage()}},{key:"updateImage",value:function(){this.comics.texture=v.Texture.from("comic_0".concat(this.step,".png"))}}])&&Ra(e.prototype,n),r&&Ra(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(st);function Ia(t){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Na(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ya(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Na(i,r,o,a,u,"next",t)}function u(t){Na(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Fa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ua(t,e){return(Ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ga(t);if(e){var o=Ga(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return za(this,n)}}function za(t,e){if(e&&("object"===Ia(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ga(t){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ha,Ka,Va,Xa,Ja=function(t,e){for(var n=0,r=0;r<e.length&&t>e[r];r++)n++;return n},qa=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Y.slowmo=t,e||g.a.globalTimeline.timeScale(Y.slowmo?.4:1)},$a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ua(t,e)}(f,t);var e,n,r,o,i,a,s,l=Wa(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),l.call(this,720,1500)}return e=f,(n=[{key:"createStates",value:(s=Ya(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q("skipcomics","0");case 2:e=t.sent,D.add(new Pa),D.add(new Ki),"0"===e?(D.add(new Da),D.start(Da)):D.start(Pa);case 6:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"initContactListener",value:function(){R.on("endContact",(function(t){t.shapeA.data&&t.shapeB.data&&D.activeState instanceof Ki&&D.activeState.endContact(t)})),R.on("beginContact",(function(t){D.activeState instanceof Ki&&D.activeState.beginContact(t)}))}},{key:"preCleanUnused",value:function(t){var e=D.activeState;return e&&e instanceof Ki?e.preCleanUnused(t):{step:t,other:void 0}}},{key:"postCleanUnused",value:function(t){var e=D.activeState;e&&e instanceof Ki&&e.postCleanUnused(t)}},{key:"load",value:(a=Ya(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){u.init("assets/sounds"),X.startLoading();var r=new c.b;r.add("base0","assets/atlases/base0.json"),r.add("base1","assets/atlases/base1.json"),r.add("levels","assets/levels.json"),r.add("particles","assets/emitter.json"),u.add("music",{autoplay:!0,loop:!0,volume:.6}),u.add("ball hit 0",{volume:.4}),u.add("ball hit 1",{volume:.4}),u.add("ball hit 2",{volume:.4}),r.onProgress.add((function(t){})),r.onError.add((function(t,e,r){ou({error:"loading (".concat(r.url,")")}),n()})),r.load(Ya(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadFonts();case 2:return Y.levels=r.resources.levels.data.levels,Y.particles=r.resources.particles.data,n.next=6,e.startAfterLoading();case 6:t();case 7:case"end":return n.stop()}}),n)}))))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"loadFonts",value:(i=Ya(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){Ta.load({custom:{families:["FontsFree-Net-AmericanTypewriterBold"],urls:["assets/fonts/font.css"]},active:function(){t()},timeout:6e4})})));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"startAfterLoading",value:(o=Ya(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.getElementById("preloader"))&&(e.style.display="none"),t.next=4,et();case 4:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}])&&Fa(e.prototype,n),r&&Fa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(F);!function(t){t[t.Undefined=0]="Undefined",t[t.Clicked=1]="Clicked",t[t.Show=2]="Show",t[t.FailedShow=3]="FailedShow",t[t.RewardReceived=4]="RewardReceived"}(Ha||(Ha={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unknown=1]="Unknown",t[t.Offline=2]="Offline",t[t.NoFill=3]="NoFill",t[t.InternalError=4]="InternalError",t[t.InvalidRequest=5]="InvalidRequest",t[t.UnableToPrecache=6]="UnableToPrecache"}(Ka||(Ka={})),function(t){t[t.Undefined=0]="Undefined",t[t.Video=1]="Video",t[t.RewardedVideo=2]="RewardedVideo",t[t.Playable=3]="Playable",t[t.Interstitial=4]="Interstitial",t[t.OfferWall=5]="OfferWall",t[t.Banner=6]="Banner"}(Va||(Va={})),function(t){t[t.Undefined=0]="Undefined",t[t.Start=1]="Start",t[t.Complete=2]="Complete",t[t.Fail=3]="Fail"}(Xa||(Xa={})),r.GameAnalytics.setEnabledInfoLog(!1);var Za=!1,Qa="en";function tu(t,e){console.log("GA",t,e),r.GameAnalytics.initialize(t,e),console.log("Network: ".concat("0",", live: ").concat(Za)),ru("App","Network","0",Za?1:0),ru("App","Game","Start"),new $a}function eu(t,e,n,o){r.GameAnalytics.addProgressionEvent(t,"world","stage",e,n,o)}function nu(t,e,n){void 0===n?r.GameAnalytics.addAdEvent(t,e,"0","ad"):r.GameAnalytics.addAdEventWithNoAdReason(t,e,"0","ad",n);switch(e){case Va.Interstitial:"inter";break;case Va.RewardedVideo:"reward"}switch(t){case Ha.FailedShow:"showError";break;case Ha.Show:"show";break;case Ha.RewardReceived:"success"}}function ru(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e,":").concat(n),o)}function ou(t){var e=JSON.stringify(t);r.GameAnalytics.addErrorEvent(r.EGAErrorSeverity.Error,e)}function iu(t){Za=t}window.onfocus=function(){Howler.mute(!1)},window.onblur=function(){Howler.mute(!0)},window.onload=function(){$().then((function(t){Qa=t.language,Za=t.success,tu(t.gameKey,t.secretKey)})).catch((function(t){Qa="en",Za=!1,tu("28b00d27d31d5bb1a89f2f95461df103","b527d253099947040f78d2b1e70f06725391e3a1")}))}}});
//# sourceMappingURL=bundle.70a271792ce510c5e192.js.map