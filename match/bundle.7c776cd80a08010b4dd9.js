!function(t){function e(e){for(var r,a,u=e[0],c=e[1],s=e[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;i.push([202,1]),n()}({202:function(t,e,n){n(203),t.exports=n(410)},410:function(t,e,n){"use strict";n.r(e),n.d(e,"EGAAdAction",(function(){return Ma})),n.d(e,"EGAAdError",(function(){return Aa})),n.d(e,"EGAAdType",(function(){return Da})),n.d(e,"EGAProgressionStatus",(function(){return La})),n.d(e,"live",(function(){return Ha})),n.d(e,"lang",(function(){return Ua})),n.d(e,"sendValueEvent",(function(){return Ga})),n.d(e,"sendProgressionEvent",(function(){return Va})),n.d(e,"sendAdEvent",(function(){return Ka})),n.d(e,"sendEvent",(function(){return Xa})),n.d(e,"sendError",(function(){return Ja})),n.d(e,"setLive",(function(){return qa}));var r=n(43),o=n(10),i=n.n(o),a=n(193);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"path",void 0),c(this,"all",void 0),c(this,"musics",void 0),c(this,"mutedSounds",void 0),c(this,"mutedMusic",void 0)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.path=t,this.all={},this.musics={},this.mutedSounds=!1,this.mutedMusic=!1}},{key:"muteMusic",get:function(){return this.mutedMusic},set:function(t){var e;this.mutedMusic=t,null===(e=this.musics.music)||void 0===e||e.mute(t)}},{key:"muteSounds",get:function(){return this.mutedSounds},set:function(t){for(var e in this.mutedSounds=t,this.all)this.all[e]&&this.all[e].mute(t)}},{key:"add",value:function(t,e){var n=this;if(!this.all[t]){if(!this.path)throw new Error("setup path for sounds");var r=["mp3","ogg"].map((function(e){return"".concat(n.path,"/").concat(t,".").concat(e)})),o=new a.Howl({src:r,autoplay:null==e?void 0:e.autoplay,loop:null==e?void 0:e.loop,volume:(null==e?void 0:e.volume)||1});"music"!==t?this.all[t]=o:this.musics[t]=o}}},{key:"play",value:function(t){this.all[t]?this.all[t].play():console.error("no sound was found")}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()),l=n(16),f=n(70),p=n(71),h=n(51);function y(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"states",void 0),v(this,"currentState",void 0),v(this,"stage",void 0),this.stage=e,this.states=new Map}var e,n,r,o,i;return e=t,(n=[{key:"activeState",get:function(){return this.currentState}},{key:"add",value:function(t){this.states.set(t.constructor,t),t.create()}},{key:"start",value:function(t){var e=this.states.get(t);if(!e)throw new Error("No state ".concat(t));this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.start(r),this.currentState=e,this.stage.addChild(this.currentState)}},{key:"restart",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=a.length,n=new Array(e),r=0;r<e;r++)n[r]=a[r];if(o=this.currentState,!this.currentState){t.next=6;break}return t.next=5,this.currentState.close();case 5:this.stage.removeChild(this.currentState);case 6:window.setTimeout((function(){o.start(n),i.currentState=o,i.stage.addChild(i.currentState)}),100);case 7:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){y(i,n,r,a,u,"next",t)}function u(t){y(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),m=n(1),w=n(9),g=n(21),k=n(3),x=n(4),O=n(7);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _,E,M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(i,t);var e,n,r,o=R(i);function i(t,e){var n,r,a,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=B(n),u=void 0,(a="sprite")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u;var c=g.a.from(k.db.WHITE);return c.anchor.set(.5),c.tint=0,c.alpha=.6,c.width=2*t,c.height=2*e,c.interactive=!0,n.addChild(c),n.sprite=g.a.from("assets/preloader.png"),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n}return e=i,(n=[{key:"show",value:function(){this.visible=!0,this.rotate()}},{key:"hide",value:function(){this.visible=!1,x.a.killTweensOf(this.sprite)}},{key:"rotate",value:function(){var t=this;this.sprite.rotation=0,x.a.to(this.sprite,{rotation:2*Math.PI,duration:5,ease:O.f.easeNone,onComplete:function(){t.rotate()}})}}])&&S(e.prototype,n),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(w.b);function A(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}h.a.registerPlugin(l.a),l.b.registerPlugin(f.b),l.b.registerPlugin(p.c);var L,I,F=[],N={started:!1,paused:!1,scale:1,realHeight:1,originalWidth:1,originalHeight:1,levels:[],particles:void 0,material:void 0,bounceMaterial:void 0,activeBallMaterial:void 0,slowmo:!1},z=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a={width:e,height:n,autoDensity:!0,resolution:2,backgroundColor:12309476};N.originalWidth=e,N.originalHeight=n,E=new h.a(a),document.body.appendChild(E.view),m.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,E.view.style.left="0%",E.view.style.top="0%",E.view.style.width="100%",E.view.style.height="100%",E.renderer.plugins.interaction,E.stage.interactive=!0,E.ticker.maxFPS=60;var u=new w.b;E.stage.addChild(u),_=new i.a.World({gravity:[0,-10]}),this.initContactListener();var c=new o.Material,s=new o.Material,l=new o.Material;N.material=c,N.bounceMaterial=l,N.activeBallMaterial=s,_.addContactMaterial(new o.ContactMaterial(c,c,{restitution:0,stiffness:o.Equation.DEFAULT_STIFFNESS/3})),_.addContactMaterial(new o.ContactMaterial(s,l,{restitution:1,stiffness:o.Equation.DEFAULT_STIFFNESS/3})),_.emitImpactEvent=!1,E.ticker.add((function(){if(!N.paused){var t=1/(N.slowmo?400:60);_.step(t,.1,3),_.bodies.forEach((function(t){var e=t.userData;if(e&&e.transform){var n=t.position;e.position.set(50*n[0],50*n[1]),e.rotation=t.angle}})),r.customLogic(t)}})),this.start(E,u),(I=new M(e,n)).hide(),u.addChild(I)}var e,n,r,a,u;return e=t,(n=[{key:"customLogic",value:function(t){F.forEach((function(t){return _.removeBody(t)})),this.clearBodyArray()}},{key:"clearBodyArray",value:function(){F=[]}},{key:"start",value:(a=regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new w.b,n.addChild(r),o=new w.b,n.addChild(o),L=new b(o),t.next=7,this.load();case 7:i=g.a.from(m.Texture.from("back1.png")),r.addChild(i),this.createStates(),a=function(){return{width:innerWidth,height:innerHeight}},u=function(){var t=a(),n=t.width,i=t.height;e.renderer.resize(n,i),N.realHeight=i,I.height=i,I.scale.x=I.scale.y;var u=i/N.originalHeight;N.scale=u,o.scale.set(u,u),r.scale.set(u,u),r.position.set(.5*n-.5*r.width,.5*i-.5*r.height),o.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height),I.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height)},window.addEventListener("resize",u),u();case 14:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){A(o,n,r,i,u,"next",t)}function u(t){A(o,n,r,i,u,"throw",t)}i(void 0)}))},function(t,e){return u.apply(this,arguments)})}])&&D(e.prototype,n),r&&D(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function H(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){W(i,r,o,a,u,"next",t)}function u(t){W(i,r,o,a,u,"throw",t)}a(void 0)}))}}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,o,i,a,u,c,s,l,f,p,h;return e=t,(n=[{key:"showGlobalLeaders",value:function(t){}},{key:"shouldLeadersShow",value:function(){return!1}},{key:"shouldPlayFirstAds",value:function(){return!1}},{key:"shouldShareShow",value:function(){return!1}},{key:"shouldScalePlayer",value:function(){return!1}},{key:"gameplayStart",value:function(){}},{key:"gameplayStop",value:function(){}},{key:"createShortcut",value:(h=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"showInvitePage",value:function(){}},{key:"shareScore",value:function(t){}},{key:"startLoading",value:function(){}},{key:"finishLoading",value:(p=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"loadingProgress",value:function(t){}},{key:"performHapticFeedback",value:function(){}},{key:"getFriends",value:(f=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getPlayerEntry",value:function(){}},{key:"setStorageData",value:(l=H(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"getStorageData",value:(s=H(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})},{key:"setScore",value:(c=H(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"getScore",value:(u=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"init",value:(a=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:!0,language:"en",gameKey:"",secretKey:""});case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"showInter",value:(i=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"showReward",value:(o=H(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"atatappLink",value:function(){return""}}])&&U(e.prototype,n),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var G;function V(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function K(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){V(i,r,o,a,u,"next",t)}function u(t){V(i,r,o,a,u,"throw",t)}a(void 0)}))}}!function(t){t[t.RewardedVideo=2]="RewardedVideo",t[t.Interstitial=4]="Interstitial"}(G||(G={}));var X,J=function(){try{return localStorage}catch(t){return}},q=!0,$=function(){var t=K(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){(X=new Y)&&X.init().then((function(e){t(e)})).catch((function(t){Ja({error:"initSocial"}),e()}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=K(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(r=J())||void 0===r||r.setItem(e,n),t.next=3,X.setStorageData(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Z=function(){var t=K(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getStorageData(e,n);case 2:return(r=t.sent)===n&&(r=(null===(o=J())||void 0===o?void 0:o.getItem(e))||n),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),tt=function(){var t=K(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,I&&I.show(),r=s.muteMusic,o=s.muteSounds,s.muteMusic=!0,s.muteSounds=!0,t.t0=e,t.next=t.t0===G.Interstitial?9:t.t0===G.RewardedVideo?13:17;break;case 9:return t.next=11,X.showInter();case 11:return n=!0,t.abrupt("break",17);case 13:return t.next=15,X.showReward();case 15:return n=t.sent,t.abrupt("break",17);case 17:return q=!1,I&&I.hide(),s.muteMusic=r,s.muteSounds=o,t.abrupt("return",n);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=K(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",X.finishLoading());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nt=function(){X.gameplayStart()};function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,t);var e,n,r,o=at(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,n&&ot(e.prototype,n),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(w.b);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ht(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ht(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mt(t)););return t}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt,kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(i,t);var e,n,r,o=dt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),wt(bt(n=o.call(this)),"normalTexture",void 0),wt(bt(n),"downTexture",void 0),wt(bt(n),"isDisabled",!1),wt(bt(n),"isDown",void 0),wt(bt(n),"btn",void 0),n.normalTexture=""===t?k.db.WHITE:k.db.from(t),n.downTexture=""===t?k.db.WHITE:k.db.from(e),n.btn=g.a.from(n.normalTexture),n.btn.anchor.set(.5,.5),n.addChild(n.btn),n.on("pointerdown",n.onButtonDown.bind(bt(n))).on("pointerup",n.onButtonUp.bind(bt(n))).on("pointerupoutside",n.onButtonUp.bind(bt(n))).on("pointerout",n.onButtonOut.bind(bt(n))),n.disabled=!1,n}return e=i,(n=[{key:"disabled",get:function(){return this.isDisabled},set:function(t){this.isDisabled=t,this.isDisabled?(this.interactive=!1,this.buttonMode=!1,this.btn.alpha=.5):(this.interactive=!0,this.buttonMode=!0,this.btn.alpha=1)}},{key:"onButtonOut",value:function(){this.isDisabled||this.isDown||(this.btn.texture=this.normalTexture)}},{key:"onButtonDown",value:function(t){this.isDisabled||(s.play("click"),this.isDown=!0,this.btn.texture=this.downTexture)}},{key:"onButtonUp",value:function(){this.isDisabled||(this.isDown=!1,this.btn.texture=this.normalTexture)}},{key:"destroy",value:function(t){this.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointerout"),pt(mt(i.prototype),"destroy",this).call(this,t)}}])&&ft(e.prototype,n),r&&ft(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(w.b);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=jt(t);if(e){var o=jt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rt(t)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.NO=0]="NO",t[t.WALLS=Math.pow(2,0)]="WALLS",t[t.BALLS=Math.pow(2,1)]="BALLS",t[t.MOVER=Math.pow(2,2)]="MOVER",t[t.OBSTACLES=Math.pow(2,3)]="OBSTACLES"}(gt||(gt={}));var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(a,t);var e,n,r,i=St(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Bt(Rt(e=i.call(this)),"body",void 0),Bt(Rt(e),"shape",void 0),Bt(Rt(e),"type",void 0),Bt(Rt(e),"view",void 0),e.type=t,e.view=e.createView(),e.view.anchor.set(.5,.5),e.addChild(e.view),e}return e=a,(n=[{key:"createBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.view.alpha=1;var n=[this.position.x/50,this.position.y/50];this.shape=this.createShape(),this.body=new o.Body({type:t,position:n,mass:e,damping:0,angularDamping:0}),this.body.addShape(this.shape),_.addBody(this.body),this.body.userData=this}},{key:"clean",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyBody(t),this.parent&&this.parent.removeChild(this)}},{key:"destroyBody",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.body&&(t?_.removeBody(this.body):F.push(this.body),this.body=void 0)}},{key:"correctType",value:function(){return 0!==this.type&&(this.type<20||250===this.type||251===this.type||this.type===Zt.skullType)}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(w.b);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nt(t);if(e){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return It(this,n)}}function It(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ft(t)}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(u,t);var e,n,r,o,i,a=Lt(u);function u(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Mt(this,u),zt(Ft(t=a.call(this)),"art",void 0),u.createTextures(),t.art=m.Sprite.from(u.textures[0]),t.art.anchor.set(.5,.5),t.addChild(t.art),t.scale.set(0,0),e&&t.animate(n),t}return e=u,n=[{key:"animate",value:(o=regeneratorRuntime.mark((function t(){var e,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.abrupt("return",new Promise((function(t){var r=0,o={a:0};x.a.to(o,{a:1,delay:e,duration:e+.4,onUpdate:function(){var t=Math.floor(2*o.a);t!==r&&(r=t,n.art.texture=u.textures[r])}}),x.a.to(n.scale,{x:1,y:1,duration:e+.1}),x.a.to(n.scale,{x:1.3,y:1.3,delay:e+.2,duration:.3}),x.a.to(n,{alpha:0,delay:e+.2,duration:.5,onComplete:function(){t()}})})));case 2:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Et(i,n,r,a,u,"next",t)}function u(t){Et(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}],r=[{key:"createTextures",value:function(){u.textures||(u.textures=[m.Texture.from("game_explosion_0.png"),m.Texture.from("game_explosion_1.png"),m.Texture.from("game_explosion_2.png")])}}],n&&At(e.prototype,n),r&&At(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Vt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Vt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(t,e){if(e&&("object"===Ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qt(t)}function qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}zt(Wt,"textures",void 0);var Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(a,t);var e,n,r,i=Xt(a);function a(t,e,n){var r,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Ut(this,a),Qt(qt(r=i.call(this,n)),"sameColorNeighbors",new Map),Qt(qt(r),"stepsAmount",3),Qt(qt(r),"steps",1),Qt(qt(r),"savedType",-1),Qt(qt(r),"skullMeter",1),Qt(qt(r),"_kinematic",!1),Qt(qt(r),"permanentSkull",!1),Qt(qt(r),"busy",!1),Qt(qt(r),"sensorShape",void 0),r.permanentSkull=n===a.skullType,r.position.set(t,e),u&&r.createBody(o.Body.DYNAMIC),r}return e=a,(n=[{key:"kinematic",get:function(){return this._kinematic},set:function(t){this._kinematic=t}},{key:"createBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;Gt($t(a.prototype),"createBody",this).call(this,t,e),this.sensorShape=new o.Circle({radius:(this.getRadius()+5)/50}),this.sensorShape.sensor=!0,this.sensorShape.material=N.material,this.sensorShape.data=!0,this.body.addShape(this.sensorShape)}},{key:"animateAndDestroy",value:function(){var t=this;this.killTween(),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}},{key:"killTween",value:function(){x.a.killTweensOf(this.view.scale)}},{key:"clean",value:function(){this.busy=!1,Gt($t(a.prototype),"clean",this).call(this)}},{key:"decreaseSkullMeter",value:function(){this.type!==a.skullType||this.permanentSkull||(this.skullMeter-=1,-1===this.skullMeter&&(this.type=this.savedType,this.savedType=-1,this.view.texture=m.Texture.from("".concat(this.type,".png"))))}},{key:"setSkull",value:function(){this.savedType=this.type,this.skullMeter=3,this.kinematic=!1,this.type=a.skullType,this.view.texture=m.Texture.from("".concat(this.type,".png"))}},{key:"setBomb",value:function(){var t=this;this.busy||(this.type=a.bombType,this.view.texture=m.Texture.from("bomb.png"),this.killTween(),this.busy=!0,x.a.to(this.view.scale,{x:.4,y:.4,duration:1,onUpdate:function(){t.updateShape()}}),x.a.to(this.view.scale,{x:1.2,y:1.2,delay:1,duration:.2,onUpdate:function(){t.updateShape()},onComplete:function(){var e=new Wt;t.addChild(e),t.animateAndDestroy()}}))}},{key:"boom",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.increase(this.stepsAmount-this.steps,t)}},{key:"getRadius",value:function(){return 35}},{key:"createView",value:function(){var t=new m.Sprite(m.Texture.from("".concat(this.type,".png")));return t.scale.set(.5,.5),t}},{key:"createShape",value:function(){var t=new o.Circle({radius:this.getRadius()/50});return t.material=N.material,t}},{key:"increase",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.busy||!this.body)return 0;var r=0;if(this.busy=!0,t+=Math.max(0,this.sameColorNeighbors.size-1),this.steps+=t,this.steps>=this.stepsAmount)n&&(r=1),this.killTween(),this.sameColorNeighbors.forEach((function(t,o){if(o!==e){var i=o.increase(e.stepsAmount-o.steps,n);n&&(r+=i)}})),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){e.clean()}}),this.destroyBody(n);else{var o=a.scaleFactor*this.steps;x.a.to(this.view.scale,{x:o,y:o,duration:.2,onUpdate:function(){e.updateShape()},onComplete:function(){e.busy=!1}})}return r}},{key:"updateShape",value:function(){this.shape.radius=this.getRadius()/a.scaleFactor*this.view.scale.x/50,this.shape.updateBoundingRadius(),this.sensorShape.radius=(this.getRadius()+5)/a.scaleFactor*this.view.scale.x/50,this.sensorShape.updateBoundingRadius(),this.body.updateBoundingRadius(),this.body.updateMassProperties()}}])&&Yt(e.prototype,n),r&&Yt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ct);Qt(Zt,"goalType",1e3),Qt(Zt,"endType",500),Qt(Zt,"bombType",2e3),Qt(Zt,"skullType",3e3),Qt(Zt,"scaleFactor",.5);var te=n(2);function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ae(t);if(e){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(t,e){if(e&&("object"===ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(a,t);var e,n,r,i=oe(a);function a(t,e,n,r,u){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,0)).position.set(t,e),c.view.width=n,c.view.height=r,c.createBody(o.Body.STATIC),c.body.mass=0,c.body.angle=te.b*u,c}return e=a,(n=[{key:"createShape",value:function(){return new o.Box({width:this.view.width/50,height:this.view.height/50})}},{key:"createView",value:function(){var t=new g.a(m.Texture.WHITE);return t.anchor.set(.5),t.tint=0,t.visible=!1,t.alpha=0,t}},{key:"isObstacle",value:function(){return!1}},{key:"correctType",value:function(){return!1}},{key:"animateAndDestroy",value:function(){var t=this;x.a.killTweensOf(this.view.scale),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}}])&&ne(e.prototype,n),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ct);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(t,e){if(e&&("object"===ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(c,t);var e,n,r,i,a,u=pe(c);function c(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),ve(ye(i=u.call(this,300)),"rocket",!0),ve(ye(i),"startX",void 0),ve(ye(i),"startY",void 0),ve(ye(i),"endX",void 0),ve(ye(i),"endY",void 0),i.startX=t,i.startY=e,i.endX=n,i.endY=r,i.position.set(t,e),t!==n&&(i.view.angle=90),i.createBody(o.Body.DYNAMIC),i}return e=c,(n=[{key:"createShape",value:function(){var t=new o.Box({width:4,height:4});return t.sensor=!0,t}},{key:"createView",value:function(){return new m.Sprite(m.Texture.from("powerup_rocket.png"))}},{key:"animate",value:(i=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n={x:e.startX,y:e.startY};x.a.to(n,{x:e.endX,y:e.endY,duration:1,ease:O.b.easeIn,onComplete:function(){e.clean(),t()},onUpdate:function(){e.body.position=[n.x/50,n.y/50]}})})));case 1:case"end":return t.stop()}}),t)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){se(o,n,r,a,u,"next",t)}function u(t){se(o,n,r,a,u,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&le(e.prototype,n),r&&le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(Ct);function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ke(){return(ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=xe(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function xe(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Re(t)););return t}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Re(t);if(e){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){if(e&&("object"===me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Te(t)}function Te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(i,t);var e,n,r,o=Pe(i);function i(t,e,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return we(this,i),je(Te(r=o.call(this,t,e,n,a)),"delay",void 0),r}return e=i,(n=[{key:"resetDeathCounter",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0)}},{key:"startCountDeath",value:function(){var t=this;this.delay||(this.delay=x.a.delayedCall(4,(function(){t.delay=void 0,t.emit("gameover")})))}},{key:"destroyBody",value:function(t){this.resetDeathCounter(),this.off("gameover"),ke(Re(i.prototype),"destroyBody",this).call(this,t)}},{key:"createView",value:function(){return new m.Sprite(m.Texture.from("hero.png"))}},{key:"getRadius",value:function(){return 50}}])&&ge(e.prototype,n),r&&ge(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Zt);function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ee(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_e(i,r,o,a,u,"next",t)}function u(t){_e(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function De(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fe(t);if(e){var o=Fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(t,e){if(e&&("object"===Ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ie(t)}function Ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ae(t,e)}(u,t);var e,n,r,o,i,a=De(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Ne(Ie(t=a.call(this,"","")),"_id",void 0),Ne(Ie(t),"icon",void 0),Ne(Ie(t),"txt",void 0),Ne(Ie(t),"amount",void 0),t.amount=1,t.txt=new m.Text(t.amount.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,.5),t.txt.x=90,t.txt.y=90,t.addChild(t.txt),t.icon=m.Sprite.from(m.Texture.from("bonus_ads.png")),t.icon.x=15,t.icon.y=35,t.addChild(t.icon),t.icon.visible=!1,t.on("pointerup",(function(){t.onPressed()})),t}return e=u,n=[{key:"id",get:function(){return this._id}},{key:"setData",value:(i=Ee(regeneratorRuntime.mark((function t(e,n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._id=e,this.normalTexture=n,this.downTexture=r,this.btn.texture=this.normalTexture,this.icon.visible=!1,t.next=7,Z(u.getStorageId(this.id),void 0);case 7:if(void 0!==(o=t.sent)){t.next=12;break}return o="1",t.next=12,Q(u.getStorageId(this.id),o);case 12:this.amount=parseInt(o),this.txt.text=o,this.updateTxt(),this.scale.set(.6,.6);case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"updateTxt",value:function(){0===this.amount?(this.btn.alpha=.6,this.icon.visible=!0,this.txt.visible=!1):(this.btn.alpha=1,this.icon.visible=!1,this.txt.visible=!0)}},{key:"onPressed",value:(o=Ee(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.amount>0)){t.next=8;break}return this.amount--,t.next=4,Q(u.getStorageId(this.id),this.amount.toString());case 4:this.updateTxt(),this.emit("activate",this.id),t.next=14;break;case 8:return N.paused=!0,t.next=11,tt(G.RewardedVideo);case 11:e=t.sent,N.paused=!1,e&&this.emit("activate",this.id);case 14:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r=[{key:"getStorageId",value:function(t){return"powerup_"+t.toString()}}],n&&Me(e.prototype,n),r&&Me(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(kt);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ke(t);if(e){var o=Ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(t,e){if(e&&("object"===We(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ve(t)}function Ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(i,t);var e,n,r,o=Ye(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Xe(Ve(t=o.call(this)),"bar",void 0),Xe(Ve(t),"barMask",void 0),Xe(Ve(t),"initialWidth",596),Xe(Ve(t),"initialHeight",30),Xe(Ve(t),"isFrozen",void 0),Xe(Ve(t),"delay",void 0),Xe(Ve(t),"frozen",void 0),Xe(Ve(t),"frozenBack",void 0),Xe(Ve(t),"back",void 0),Xe(Ve(t),"barBorder",void 0),t.back=m.Sprite.from(m.Texture.from("timer_1.png")),t.addChild(t.back),t.frozenBack=m.Sprite.from(m.Texture.from("timer_frozen_1.png")),t.frozenBack.visible=!1,t.addChild(t.frozenBack),t.bar=m.Sprite.from(m.Texture.from("timer_2.png")),t.addChild(t.bar),t.barMask=new m.Sprite(m.Texture.WHITE),t.barMask.x=16,t.barMask.width=0,t.barMask.height=t.bar.height,t.addChild(t.barMask),t.bar.mask=t.barMask,t.barBorder=m.Sprite.from(m.Texture.from("timer_0.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.x=100,t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.frozen=new m.Sprite(m.Texture.from("timer_frozen_0.png")),t.frozen.visible=!1,t.addChild(t.frozen),t}return e=i,(n=[{key:"setProgress",value:function(t){this.barMask.width=this.initialWidth*t,this.barBorder.visible=t>.01&&t<.99,this.barBorder.x=this.barMask.x+this.initialWidth*t}},{key:"unFreeze",value:function(){var t=this;this.isFrozen=!1,x.a.killTweensOf(this.frozen),x.a.to(this.frozenBack,{alpha:0,duration:.3}),x.a.to(this.back,{alpha:1,duration:.3}),x.a.to(this.frozen,{alpha:0,duration:.3,onComplete:function(){t.frozen.visible=!1,t.frozenBack.visible=!1}})}},{key:"freeze",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.isFrozen=!0,this.frozen.visible=!0,this.frozen.alpha=0,this.frozenBack.visible=!0,this.frozenBack.alpha=0,x.a.killTweensOf(this.frozen),x.a.killTweensOf(this.frozenBack),x.a.killTweensOf(this.back),x.a.to(this.frozen,{alpha:1,duration:.3}),x.a.to(this.frozenBack,{alpha:1,duration:.3}),x.a.to(this.back,{alpha:0,duration:.3}),this.delay&&this.delay.kill(),-1!==e&&(this.delay=x.a.delayedCall(e,(function(){t.unFreeze()})))}},{key:"clear",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0),x.a.killTweensOf(this.frozen),this.frozen.visible=!1,this.frozenBack.visible=!1,this.back.alpha=1,this.isFrozen=!1}}])&&He(e.prototype,n),r&&He(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qe(t,e){return(Qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ze(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nn(t);if(e){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tn(this,n)}}function tn(t,e){if(e&&("object"===qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return en(t)}function en(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var on=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(i,t);var e,n,r,o=Ze(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),rn(en(t=o.call(this)),"bar",void 0),rn(en(t),"max",void 0),rn(en(t),"current",void 0),rn(en(t),"initialWidth",170),rn(en(t),"barMask",void 0),rn(en(t),"barBorder",void 0),rn(en(t),"barShine",void 0);var e=m.Sprite.from(m.Texture.from("battery_empty.png"));return t.addChild(e),t.bar=m.Sprite.from(m.Texture.from("battery_full.png")),t.addChild(t.bar),t.barMask=new m.Sprite(m.Texture.WHITE),t.barMask.width=0,t.barMask.height=t.bar.height,t.barMask.x=27,t.addChild(t.barMask),t.barBorder=m.Sprite.from(m.Texture.from("battery_border.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.barShine=new m.AnimatedSprite([m.Texture.from("battery_charging0.png"),m.Texture.from("battery_charging1.png"),m.Texture.from("battery_charging2.png"),m.Texture.from("battery_charging1.png")]),t.addChild(t.barShine),t.barShine.animationSpeed=.3,t.barShine.visible=!1,t.bar.mask=t.barMask,t.current=0,t.max=10,t}return e=i,(n=[{key:"maximum",set:function(t){this.max=t}},{key:"reset",value:function(t){x.a.killTweensOf(this.barMask),this.current=0,t?this.barMask.width=0:x.a.to(this.barMask,{width:0,duration:.1}),this.barBorder.visible=!1}},{key:"update",value:function(t){var e=this;this.current+=t,this.current=Math.min(this.current,this.max),this.barShine.visible=!0,this.barShine.gotoAndPlay(0);var n=this.current>=this.max,r=this.current/this.max;return this.barBorder.visible=r>.05&&r<.9,x.a.killTweensOf(this.barMask),x.a.to(this.barMask,{width:this.initialWidth*r,duration:.2}),x.a.to(this.barBorder,{x:this.barMask.x+this.initialWidth*r,duration:.2,onComplete:function(){e.barShine.visible=!1,e.barShine.stop()}}),n&&(this.barShine.visible=!1,this.barShine.stop(),this.current=0,x.a.to(this.barMask,{width:0,delay:.2,duration:.2}),x.a.to(this.barBorder,{x:this.barMask.x,duration:.2,onUpdate:function(){e.barBorder.visible=r>.05&&r<.9}})),n}}])&&$e(e.prototype,n),r&&$e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function an(t){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cn(t,e){return(cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pn(t);if(e){var o=pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(t,e){if(e&&("object"===an(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fn(t)}function fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pn(t){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cn(t,e)}(i,t);var e,n,r,o=sn(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),hn(fn(t=o.call(this)),"back",void 0),hn(fn(t),"blocks",void 0),hn(fn(t),"startX",void 0),hn(fn(t),"startY",void 0),hn(fn(t),"txt",void 0),t.blocks=[],t.back=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50),t.back.width=.96*N.originalWidth,t.back.height=300,t.back.position.set(.5*-t.back.width,0),t.addChild(t.back),t.txt=new m.Text("From: Leopold",{fontSize:25,fill:0,fontWeight:"bold",align:"left"}),t.txt.anchor.set(0,.5),t.txt.position.set(.5*-t.back.width+40,30),t.addChild(t.txt),t.clear(),t}return e=i,(n=[{key:"setLines",value:function(t){this.txt.text="From: "+i.senders[Math.floor(Math.random()*i.senders.length)];var e=t.length;this.back.height=75*e+70,this.startX=-300,this.startY=95;for(var n=0;n<e;n++){for(var r=this.startX,o=0;o<t[n].length;o++){var a=new Zt(r,this.startY,t[n][o],!1);this.addBlock(a),r+=74}this.startY+=70}}},{key:"addBlock",value:function(t){this.blocks.push(t),this.addChild(t),t.visible=!1}},{key:"show",value:function(){this.blocks.forEach((function(t){t.visible=!0}))}},{key:"clear",value:function(){var t=this;this.blocks.forEach((function(e){t.removeChild(e)})),this.blocks=[]}}])&&un(e.prototype,n),r&&un(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bn(t,e){return(bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kn(t);if(e){var o=kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gn(t)}function gn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}hn(yn,"senders",["Mom","Dad","Boss","Red Hair","Stupid guy","Handsome stranger","Vampire","Lady Hamilton","Dude","Sis","Bro","Grany","Kurt","Kristin","Leo Di","Emergency"]);var xn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bn(t,e)}(i,t);var e,n,r,o=mn(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=gn(t),r=void 0,(n="txt")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=new m.Sprite(m.Texture.from("letter_button.png"));return a.anchor.set(.5,.5),t.addChild(a),t.txt=new m.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:60,fill:0,align:"center",fontWeight:"bold"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"letter",set:function(t){" "===t&&(t="*"),this.txt.text=t}}])&&vn(e.prototype,n),r&&vn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(t,e){return(Tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cn(t);if(e){var o=Cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jn(this,n)}}function jn(t,e){if(e&&("object"===On(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bn(t)}function Bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cn(t){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var En=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(u,t);var e,n,r,o,i,a=Rn(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),_n(Bn(t=a.call(this)),"bound",new m.Rectangle),_n(Bn(t),"back",void 0),_n(Bn(t),"letters",void 0),_n(Bn(t),"stringLetters",void 0),_n(Bn(t),"getPoint",void 0),t.back=m.Sprite.from(m.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.addChild(t.back),t.stringLetters=t.getLetters(),t.letters=[];for(var e=0;e<t.stringLetters.length;e++){var n=new xn;n.visible=!1,t.addChild(n),t.letters.push(n)}return t}return e=u,(n=[{key:"start",value:(o=regeneratorRuntime.mark((function t(e){var n,r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.getPoint=e,this.visible=!0,this.back.alpha=0,n=[],r=0,o=0;o<this.stringLetters.length;o++)r++," "===this.stringLetters[o]&&(n.push(r),r=0);return 0===n.length?n.push(this.stringLetters.length):n.push(r),t.abrupt("return",new Promise((function(t){x.a.to(i.back,{alpha:.7,duration:1});for(var e=0,r=-30,o=n[e],a=60/(o-1),u=100*o,c=.5*-u,s=u/(o-1),l=-400,f=[],p=i.stringLetters.length,h=0;h<p;h++){var y=i.letters.pop();f.push(y),y.visible=!0,y.letter=i.stringLetters[h],y.position.set(-400,700),y.scale.set(.1,.1),y.angle=r-30,x.a.to(y,{angle:r,x:c,y:l,delay:.1*h,duration:.5}),x.a.to(y.scale,{x:1,y:1,delay:.1*h,duration:.5})," "===i.stringLetters[h]?(e++,r=-30,a=60/((o=n[e])-1),c=.5*-(u=100*o),l+=140,s=u/(o-1)):(r+=a,c+=s)}x.a.to(i.back,{alpha:0,delay:1.2,duration:.5}),x.a.delayedCall(1+.1*(i.stringLetters.length-1),(function(){i.animate(f).then((function(){t()}))}))})));case 8:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Pn(i,n,r,a,u,"next",t)}function u(t){Pn(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"clean",value:function(){this.getPoint=void 0,x.a.killTweensOf(this.back)}},{key:"goOut",value:function(){}}])&&Sn(e.prototype,n),r&&Sn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(){return(Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=In(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function In(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hn(t)););return t}function Fn(t,e){return(Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hn(t);if(e){var o=Hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zn(this,n)}}function zn(t,e){if(e&&("object"===Mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wn(t)}function Wn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fn(t,e)}(i,t);var e,n,r,o=Nn(i);function i(){var t;An(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Un(Wn(t=o.call.apply(o,[this].concat(n))),"points",[]),t}return e=i,(n=[{key:"activeBound",get:function(){if(this.points.length>0){for(var t=[],e=0;e<this.points.length;e++){var n=this.points[e];t.push(new m.Rectangle(n[0]-1,n[1]-1,2,2))}return this.points=[],t}}},{key:"clean",value:function(){this.points=[],Ln(Hn(i.prototype),"clean",this).call(this)}},{key:"getLetters",value:function(){return["B","O","O","M"," ","B","O","N","U","S"]}},{key:"animate",value:function(t){var e=this;return this.points=[],new Promise((function(n){if(e.getPoint){for(var r=function(n){var r=e.getPoint();if(!r)return"continue";x.a.to(t[n].scale,{x:0,y:0,duration:.2}),x.a.to(t[n],{x:50*r[0],y:50*r[1],duration:.2,onComplete:function(){e.points.push(r)}})},o=0;o<t.length;o++)r(o);x.a.delayedCall(.25,(function(){n()}))}else n()}))}}])&&Dn(e.prototype,n),r&&Dn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(En);function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$n(t);if(e){var o=$n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jn(this,n)}}function Jn(t,e){if(e&&("object"===Gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qn(t)}function qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kn(t,e)}(i,t);var e,n,r,o=Xn(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Qn(qn(t=o.call(this)),"scoreTxt",void 0),Qn(qn(t),"scoreNumber",void 0);var e=m.Sprite.from(m.Texture.from("score_place.png"));return t.addChild(e),t.scoreNumber=0,t.scoreTxt=new m.Text(t.scoreFormatted(0),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:16777215,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.position.set(.5*e.width,.5*e.height),t.addChild(t.scoreTxt),t}return e=i,(n=[{key:"score",set:function(t){var e=this,n={score:this.scoreNumber};this.scoreTxt.text=this.scoreFormatted(this.scoreNumber),x.a.to(n,{score:t,duration:.1,ease:O.f.easeNone,onUpdate:function(){e.scoreTxt.text=e.scoreFormatted(Math.floor(n.score))}}),this.scoreNumber=t}},{key:"scoreFormatted",value:function(t){for(var e=t.toString(),n=6-e.length,r=0;r<n;r++)e="0"+e;return e}}])&&Vn(e.prototype,n),r&&Vn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nr(t,e){return(nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ir(t);if(e){var o=ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return or(this,n)}}function or(t,e){if(e&&("object"===tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nr(t,e)}(i,t);var e,n,r,o=rr(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"pause_button.png","pause_button.png")}return e=i,n&&er(e.prototype,n),r&&er(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(kt);function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var o=hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){if(e&&("object"===ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pr(t)}function pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e)}(i,t);var e,n,r,o=lr(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),yr(pr(t=o.call(this)),"rect",void 0),yr(pr(t),"laser",void 0),t.laser=m.Sprite.from(m.Texture.WHITE),t.laser.width=500,t.laser.height=10,t.laser.tint=5085951,t.laser.alpha=0,t.laser.anchor.set(.5,.5),t.addChild(t.laser),t.laser.visible=!1,t}return e=i,(n=[{key:"activeBound",get:function(){if(this.rect)return[this.rect]}},{key:"getLetters",value:function(){return["{","}"]}},{key:"animate",value:function(t){var e=this;return new Promise((function(n){if(e.getPoint||2!==t.length){var r=e.getPoint();x.a.to(t[0],{x:-300,angle:0,y:50*r,duration:.2}),x.a.to(t[1],{x:300,angle:0,y:50*r,duration:.2}),x.a.delayedCall(.2,(function(){e.laser.visible=!0,e.laser.y=50*r,e.rect=new m.Rectangle(-7,r-.5,14,1),x.a.to(e.laser,{alpha:.6,duration:.1}),x.a.delayedCall(.1,(function(){e.rect=void 0,x.a.to(t[0],{alpha:0,duration:.1}),x.a.to(t[1],{alpha:0,duration:.1}),x.a.to(e.laser,{alpha:0,duration:.1}),x.a.delayedCall(.1,(function(){n()}))}))}))}else n()}))}}])&&cr(e.prototype,n),r&&cr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(En);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xr(t);if(e){var o=xr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}function kr(t,e){if(e&&("object"===vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xr(t){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Or,Pr,Sr,Tr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wr(t,e)}(i,t);var e,n,r,o=gr(i);function i(){return br(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"getLetters",value:function(){return i.all[Math.floor(Math.random()*i.all.length)]}}])&&mr(e.prototype,n),r&&mr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Yn);function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cr(t,e){return(Cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mr(t);if(e){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Er(this,n)}}function Er(t,e){if(e&&("object"===Rr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mr(t){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Or=Tr,Pr="all",Sr=["YOU ARE JUST GREAT".split(""),"YOU ARE GREAT".split(""),"SUPER PUPER BOOM".split(""),"WISH YOU LUCK, DUDE!".split("")],Pr in Or?Object.defineProperty(Or,Pr,{value:Sr,enumerable:!0,configurable:!0,writable:!0}):Or[Pr]=Sr;var Ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(i,t);var e,n,r,o=_r(i);function i(){return jr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"isObstacle",value:function(){return!0}}])&&Br(e.prototype,n),r&&Br(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ue);function Dr(t){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ir(t,e){return(Ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zr(t);if(e){var o=zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nr(this,n)}}function Nr(t,e){if(e&&("object"===Dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zr(t){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ir(t,e)}(a,t);var e,n,r,i=Fr(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t[0],t[1],100,100,0)).view.scale.set(1,1),e.type=250,e}return e=a,(n=[{key:"createView",value:function(){var t=new m.Sprite(m.Texture.from("app_static.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new o.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&Lr(e.prototype,n),r&&Lr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ar);function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xr(t);if(e){var o=Xr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vr(this,n)}}function Vr(t,e){if(e&&("object"===Hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kr(t)}function Kr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xr(t){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qr,$r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yr(t,e)}(a,t);var e,n,r,i=Gr(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Jr(Kr(n=i.call(this,t[0],t[1],100,100,0)),"moving",!1),Jr(Kr(n),"lives",void 0),Jr(Kr(n),"txt",void 0),Jr(Kr(n),"explosion",void 0),n.type=251,n.lives=e,n.txt=new m.Text(n.lives.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),n.txt.anchor.set(.5,.5),n.txt.y=20,n.view.addChild(n.txt),n.view.scale.set(1,1),n.explosion=new Wt(!1),n.explosion.visible=!1,n.addChild(n.explosion),n}return e=a,(n=[{key:"changePosition",value:function(){var t=this;if(!this.moving){this.lives--;var e=this.lives<=0;this.moving=!0;var n=this.view.scale.x;x.a.to(this.view.scale,{x:.01,y:.01,duration:.1,onUpdate:function(){t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),t.body.updateBoundingRadius(),t.body.updateMassProperties()},onComplete:function(){if(e)t.destroyBody(),t.explosion.visible=!0,t.explosion.animate().then((function(){t.clean()}));else{t.txt.text=t.lives.toString();var r=9*Math.random()-4.5,o=5*-Math.random();t.body.position=[r,o],x.a.to(t.view.scale,{x:n,y:n,duration:.4,onUpdate:function(){t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),t.body.updateBoundingRadius(),t.body.updateMassProperties()},onComplete:function(){t.moving=!1}})}}})}}},{key:"createView",value:function(){var t=new m.Sprite(m.Texture.from("app_random.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new o.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&Ur(e.prototype,n),r&&Ur(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ar);function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||to(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(t,e){if(t){if("string"==typeof t)return eo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eo(t,e):void 0}}function eo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function no(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ro(t,e){return(ro=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=uo(t);if(e){var o=uo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return io(this,n)}}function io(t,e){if(e&&("object"===Qr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ao(t)}function ao(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uo(t){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function co(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.Begin="begin",t.Moving="moving",t.Heart="heart",t.NewLine="newLine",t.Recharge="recharge",t.Unbreak="unbreak",t.IAPBonus="iapbonus",t.IAPBonus2="iapbonus2",t.ChangePosition="changed",t.Skull="skull"}(qr||(qr={}));var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ro(t,e)}(i,t);var e,n,r,o=oo(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),co(ao(t=o.call(this)),"allConditions",void 0),co(ao(t),"textMap",void 0),co(ao(t),"tutorial",void 0),co(ao(t),"txt",void 0),co(ao(t),"back",void 0),t.allConditions=new Map,t.textMap=new Map,t.textMap.set(qr.Begin,"Save the Heart by moving it to the top!"),t.textMap.set(qr.Moving,"Tap the screen and move your finger to aim. Release to shoot."),t.textMap.set(qr.Heart,"The Heart is free and happy now!"),t.textMap.set(qr.NewLine,"It's time for a new emoji load!"),t.textMap.set(qr.Recharge,"Charge it fully to get a bonus!"),t.textMap.set(qr.Unbreak,"This app is invincible!"),t.textMap.set(qr.IAPBonus,"but this bonuses will help you."),t.textMap.set(qr.IAPBonus2,"and this one too!"),t.textMap.set(qr.ChangePosition,"This app should be destroyed! Aim to it!"),t.textMap.set(qr.Skull,"Do not touch this Skulls by Heart or by throwed Emoji!"),t.back=m.Sprite.from(m.Texture.WHITE),t.back.interactive=!0,t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.addChild(t.back),t.back.position.set(.5*-t.back.width,.5*-t.back.height),t.back.tint=0,t.back.alpha=.3,t.tutorial=new m.NineSlicePlane(m.Texture.from("tutorial.png"),52,52,90,93),t.addChild(t.tutorial),t.txt=new m.Text("",{fontSize:50,fontWeight:"bold",fill:16777215,wordWrap:!0,wordWrapWidth:300}),t.addChild(t.txt),t.visible=!1,t}return e=i,(n=[{key:"addCondition",value:function(t,e){this.allConditions.set(t,e)}},{key:"update",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=to(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.allConditions);try{for(e.s();!(t=e.n()).done;){var n=Zr(t.value,2),r=n[0],o=(0,n[1])();if(o.success){this.show(r,o.data),this.allConditions.delete(r);break}}}catch(t){e.e(t)}finally{e.f()}}},{key:"isDone",value:function(t){return void 0===this.allConditions.get(t)}},{key:"show",value:function(t,e){var n=this,r=this.textMap.get(t);this.txt.text=r,this.tutorial.scale.set(1,1),this.tutorial.pivot.set(this.txt.width+100,this.txt.height+100),this.tutorial.width=this.txt.width+100,this.tutorial.height=this.txt.height+100,this.tutorial.scale.set(0,0);var o={x:1,y:1},i=e.pos,a=e.scale;o.x*=a.x,o.y*=a.y,this.tutorial.position.copyFrom(i),this.txt.position.copyFrom(i),1===a.x?this.txt.x-=60+this.txt.width:this.txt.x+=60,1===a.y?this.txt.y-=60+this.txt.height:this.txt.y+=52,this.txt.scale.set(0,0),this.back.alpha=0;var u=o.x/30,c=o.y/30,s=window.setInterval((function(){n.back.alpha+=.01,n.tutorial.scale.x+=u,n.tutorial.scale.y+=c,n.txt.scale.x+=1/30,n.txt.scale.y+=1/30,n.back.alpha>=.3&&window.clearInterval(s)}),10);this.visible=!0,za(!0,!0),window.setTimeout((function(){za(!1,!0),x.a.globalTimeline.pause(),N.paused=!0,n.back.on("pointerup",(function(t){t.stopPropagation(),t.stopped=!0,n.hide()}))}),400)}},{key:"hide",value:function(){var t=this;N.paused=!1,x.a.globalTimeline.resume(),x.a.to(this,{alpha:0,duration:.3,onComplete:function(){t.visible=!1,t.alpha=1}}),this.back.off("pointerup")}}])&&no(e.prototype,n),r&&no(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container),lo=n(198);function fo(t){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ho(t,e){return(ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mo(t);if(e){var o=mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vo(this,n)}}function vo(t,e){if(e&&("object"===fo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bo(t)}function bo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mo(t){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var go=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}(i,t);var e,n,r,o=yo(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),wo(bo(t=o.call(this)),"iconL0",void 0),wo(bo(t),"iconR0",void 0),wo(bo(t),"iconL1",void 0),wo(bo(t),"iconR1",void 0);var e=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);e.tint=0,e.width=370,e.height=250,e.pivot.set(185,100),t.addChild(e),e.y=-50;var n=new m.Text("level powerups:",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:35,fill:16777215,align:"center",fontWeight:"bold"});n.anchor.set(.5,.5),n.position.set(0,-115),t.addChild(n);var r=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);r.pivot.set(80,80),r.width=160,r.height=160,t.addChild(r);var a=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);a.pivot.set(80,80),a.width=160,a.height=160,t.addChild(a),r.position.set(-85,0),a.position.set(85,0);var u=new m.Container,c=new m.Container;t.addChild(u),t.addChild(c),u.position.x=-85,c.position.x=85;var s=m.Sprite.from(m.Texture.WHITE);s.anchor.set(0,.5),s.width=140,s.height=140,t.addChild(s);var l=m.Sprite.from(m.Texture.WHITE);return l.anchor.set(0,.5),l.width=140,l.height=140,t.addChild(l),s.position.x=-145,l.position.x=5,u.mask=s,c.mask=l,t.iconL0=m.Sprite.from(i.randomTexture),t.iconL0.anchor.set(.5,.5),t.iconL0.scale.set(.5,.5),u.addChild(t.iconL0),t.iconR0=m.Sprite.from(i.randomTexture),t.iconR0.anchor.set(.5,.5),t.iconR0.scale.set(.5,.5),c.addChild(t.iconR0),t.iconL1=m.Sprite.from(i.randomTexture),t.iconL1.anchor.set(.5,.5),t.iconL1.scale.set(.5,.5),u.addChild(t.iconL1),t.iconL1.y=140,t.iconR1=m.Sprite.from(i.randomTexture),t.iconR1.anchor.set(.5,.5),t.iconR1.scale.set(.5,.5),c.addChild(t.iconR1),t.iconR1.y=140,t}return e=i,r=[{key:"prepareTextures",value:function(){this.allTextures=new Map,this.allTextures.set(ii.RocketUp,m.Texture.from("powerup_rocket.png")),this.allTextures.set(ii.Kill,m.Texture.from("powerup_bomb.png")),this.allTextures.set(ii.Freeze,m.Texture.from("powerup_freeze.png"))}},{key:"getTexture",value:function(t){return this.allTextures.get(t)}},{key:"randomTexture",get:function(){var t=Array.from(this.allTextures.keys()),e=t[Math.floor(Math.random()*t.length)];return this.getTexture(e)}}],(n=[{key:"start",value:function(t){var e=this;x.a.to({a:0},{a:1,duration:2,onUpdate:function(){if(e.iconL0.y>=140){e.iconL0.texture=i.randomTexture,e.iconR0.texture=i.randomTexture;var t=e.iconL0;e.iconL0=e.iconL1,e.iconL1=t,t=e.iconR0,e.iconR0=e.iconR1,e.iconR1=t,e.iconL0.y=0,e.iconR0.y=0}e.iconL0.y+=10,e.iconR0.y+=10,e.iconL1.y=e.iconL0.y-140,e.iconR1.y=e.iconR0.y-140},onComplete:function(){e.iconL0.y=0,e.iconR0.y=0,e.iconR1.y=140,e.iconL1.y=140,e.iconL0.texture=i.getTexture(t[0]),e.iconR0.texture=i.getTexture(t[1])}})}}])&&po(e.prototype,n),r&&po(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function ko(t){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Oo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Po(t,e){return(Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function So(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=jo(t);if(e){var o=jo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return To(this,n)}}function To(t,e){if(e&&("object"===ko(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ro(t)}function Ro(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}wo(go,"allTextures",void 0);var Co=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Po(t,e)}(u,t);var e,n,r,o,i,a=So(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Bo(Ro(t=a.call(this)),"back",void 0),Bo(Ro(t),"popup",void 0),Bo(Ro(t),"callback",void 0),Bo(Ro(t),"scoreTxt",void 0),Bo(Ro(t),"title",void 0),Bo(Ro(t),"stars",void 0),Bo(Ro(t),"emitter",void 0),Bo(Ro(t),"prizeIcon",void 0),Bo(Ro(t),"onTickEvent",(function(e){t.emitter.update(e/70)})),t.back=m.Sprite.from(m.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.back.tint=0,t.back.alpha=0,t.addChild(t.back);var e=new m.Container;t.addChild(e),t.popup=new m.Container,t.popup.scale.set(0,0),t.addChild(t.popup);var n=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);n.pivot.set(300,400),n.width=600,n.height=800,t.popup.addChild(n),t.title=new m.Text("Well done!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"}),t.title.anchor.set(.5,.5),t.title.position.y=-340,t.popup.addChild(t.title),t.scoreTxt=new m.Text("0",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:120,fill:0,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.y=40,t.popup.addChild(t.scoreTxt),t.stars=[];for(var r=-120,o=0;o<3;o++){var i=m.Sprite.from(m.Texture.from("like.png"));i.anchor.set(.5,.5),i.position.set(r,-150),t.popup.addChild(i),t.stars.push(i),i.visible=!1,r+=120}t.popup.addChild(t.stars[1]),t.prizeIcon=new m.Sprite,t.prizeIcon.anchor.set(.5,.5),t.prizeIcon.scale.set(.5,.5),t.prizeIcon.position.copyFrom(t.stars[2]),t.prizeIcon.x+=50,t.prizeIcon.y-=50,t.popup.addChild(t.prizeIcon),t.prizeIcon.visible=!1;var c=new kt("ok_button.png","ok_button.png");return c.on("pointerup",(function(){t.hide()})),c.position.y=300,t.popup.addChild(c),t.emitter=new lo.a(e,"like.png",N.particles),t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n,r,o,i,a){var u,c,s,l,f,p,h,y=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(i.toString(),a),this.title.text=e?"Well done!":"So sorry...",!(void 0!==(u=a?a[0]:void 0)&&n>=r[2])){t.next=20;break}return t.next=6,Z("powerupDone"+i.toString(),"0");case 6:if(c=t.sent,console.log("pd",c),"0"!==c){t.next=20;break}return this.prizeIcon.visible=!0,this.prizeIcon.scale.set(0,0),this.prizeIcon.texture=go.getTexture(u),t.next=14,Z(ze.getStorageId(u),"0");case 14:return s=t.sent,l=parseInt(s),t.next=18,Q(ze.getStorageId(u),(l+1).toString());case 18:return t.next=20,Q("powerupDone"+i.toString(),"1");case 20:for(f=0;f<this.stars.length;f++)(p=this.stars[f]).visible=!0,p.scale.set(0,0),p.showed=!1;this.callback=o,this.visible=!0,this.back.alpha=0,this.popup.scale.set(0,0),h={s:0},this.scoreTxt.text="0",x.a.to(h,{s:n,delay:1,duration:2,onUpdate:function(){y.scoreTxt.text=Math.round(h.s).toString();for(var t=0;t<r.length;t++){var e=y.stars[t];if(h.s>=r[t]&&!e.showed){e.showed=!0;var n=1===t?1.5:1;x.a.to(e.scale,{x:n,y:n,duration:.2,ease:O.a.easeOut}),y.prizeIcon.visible&&2===t&&x.a.to(y.prizeIcon.scale,{x:.5,y:.5,duration:.2,ease:O.a.easeOut})}}}}),x.a.to(this.back,{alpha:.5,duration:.5}),x.a.to(this.popup.scale,{x:1,y:1,duration:1,ease:O.a.easeOut}),e&&x.a.delayedCall(1,(function(){y.emitter.emit=!0,m.Ticker.shared.add(y.onTickEvent)}));case 31:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){xo(i,n,r,a,u,"next",t)}function u(t){xo(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n,r,o,a){return i.apply(this,arguments)})},{key:"hide",value:function(){var t=this;x.a.to(this.back,{alpha:0,duration:.2}),x.a.to(this.popup.scale,{x:0,y:0,duration:.2,onComplete:function(){t.emitter.emit=!1,t.emitter.cleanup(),m.Ticker.shared.remove(t.onTickEvent),t.prizeIcon.visible=!1,t.visible=!1,t.callback()}})}}])&&Oo(e.prototype,n),r&&Oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Mo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ao(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Do(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lo(t,e){return(Lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zo(t);if(e){var o=zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fo(this,n)}}function Fo(t,e){if(e&&("object"===_o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return No(t)}function No(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zo(t){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ho=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lo(t,e)}(u,t);var e,n,r,o,i,a=Io(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Wo(No(t=a.call(this)),"texts",void 0),Wo(No(t),"usingTexts",void 0),Wo(No(t),"back",void 0),Wo(No(t),"wheelbox",void 0),Wo(No(t),"tween",void 0),Wo(No(t),"nameBack",void 0),t.back=m.Sprite.from(m.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.back.alpha=0,t.addChild(t.back),t.nameBack=new m.NineSlicePlane(m.Texture.from("name_back.png"),80,80,80,80),t.nameBack.width=600,t.nameBack.alpha=0,t.addChild(t.nameBack),t.texts=[],t.usingTexts=[];for(var e=0;e<4;e++){var n=t.getNewText();t.texts.push(n)}return t.wheelbox=new go,t.addChild(t.wheelbox),t.visible=!1,t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r.visible=!0,r.back.alpha=0,r.nameBack.alpha=0,r.wheelbox.position.y=1e3;var o=n&&n.length>0?5:3;x.a.to(r.back,{alpha:.7,duration:.5}),x.a.to(r.nameBack,{alpha:1,duration:.5});for(var i=e.name.split(" "),a=-70*i.length/2+35-100,u=a,c=function(t){var e=i[t],n=void 0;(n=r.texts.length>0?r.texts.pop():r.getNewText()).alpha=1,n.visible=!0,n.text=e,r.addChild(n),r.usingTexts.push(n),n.y=a,n.x=t%2?-500-n.width/2:500+n.width/2,x.a.to(n,{x:0,duration:1,ease:O.d.easeOut}),x.a.to(n,{alpha:0,delay:o-1,duration:.5,onComplete:function(){r.texts.push(n)}}),a+=70},s=0;s<i.length;s++)c(s);x.a.to(r.back,{alpha:0,delay:o-1,duration:.5}),x.a.to(r.nameBack,{alpha:0,delay:o-1,duration:.5}),n&&n.length>0&&(r.wheelbox.visible=!0,r.wheelbox.alpha=1,x.a.to(r.wheelbox,{y:a+140,delay:1,duration:.5,ease:O.d.easeOut,onComplete:function(){r.wheelbox.start(n)}}),x.a.to(r.wheelbox,{alpha:0,delay:o-1,duration:.5}),a+=120+r.wheelbox.height/2);var l=Math.max(400,a-u+100);r.nameBack.pivot.set(300,l/2),r.nameBack.height=l,n&&n.length>0?r.nameBack.y=u-80+l/2:r.nameBack.y=-100,r.tween=x.a.delayedCall(o,(function(){r.usingTexts=[],r.visible=!1,r.tween=void 0,t()}))})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Ao(i,n,r,a,u,"next",t)}function u(t){Ao(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"clear",value:function(){this.tween&&(this.tween.kill(),this.tween=void 0),x.a.killTweensOf(this.wheelbox),x.a.killTweensOf(this.back);var t,e=Eo(this.usingTexts);try{for(e.s();!(t=e.n()).done;){var n=t.value;x.a.killTweensOf(n),this.removeChild(n)}}catch(t){e.e(t)}finally{e.f()}this.visible=!1}},{key:"getNewText",value:function(){var t=new m.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});return t.anchor.set(.5,.5),t}}])&&Do(e.prototype,n),r&&Do(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function Uo(t){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var o=Jo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ko(this,n)}}function Ko(t,e){if(e&&("object"===Uo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xo(t)}function Xo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jo(t){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Go(t,e)}(i,t);var e,n,r,o=Vo(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Xo(t=o.call(this)),"callback",void 0);var e=m.Sprite.from(m.Texture.WHITE);e.anchor.set(.5,.5),e.width=N.originalWidth,e.height=N.originalHeight,e.tint=0,e.alpha=.6,t.addChild(e);var n=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);n.width=500,n.height=360,n.pivot.set(250,180),t.addChild(n);var r=new m.Text("Exit?",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});r.anchor.set(.5,.5),r.position.y=-120,t.addChild(r);var a=new kt("ok_button.png","ok_button.png");a.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!0)})),a.position.set(-110,110),a.scale.set(.8,.8),t.addChild(a);var u=new kt("x_button.png","x_button.png");return u.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!1)})),u.position.set(110,110),u.scale.set(.8,.8),t.addChild(u),t.visible=!1,t}return e=i,(n=[{key:"show",value:function(t){this.callback=t,this.alpha=1,this.visible=!0}},{key:"hide",value:function(t){var e=this;this.callback(t),this.callback=void 0,x.a.to(this,{alpha:0,duration:.4,onComplete:function(){e.visible=!1}})}}])&&Yo(e.prototype,n),r&&Yo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function $o(t){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zo(t,e){return(Zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ti(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ri(t);if(e){var o=ri(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ei(this,n)}}function ei(t,e){if(e&&("object"===$o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ni(t)}function ni(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ii,ai,ui,ci=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zo(t,e)}(i,t);var e,n,r,o=ti(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),oi(ni(t=o.call(this)),"part0",void 0),oi(ni(t),"part1",void 0),t.part0=m.Sprite.from(m.Texture.from("direction.png")),t.part0.anchor.set(.5,1),t.addChild(t.part0),t.part0.height=1200,t.part1=m.Sprite.from(m.Texture.from("direction.png")),t.part1.anchor.set(.5,1),t.addChild(t.part1),t.part1.height=700,t}return e=i,(n=[{key:"draw",value:function(t){var e=xi.BottomPoint,n=Math.atan2(t.y-e,t.x);this.part0.rotation=n+Math.PI/2;var r=1200*Math.cos(n),o=e+1200*Math.sin(n),i=1200;r<-315||r>315?(r=(i=Math.abs(r)/r*315/Math.cos(n))*Math.cos(n),o=i*Math.sin(n),this.part1.visible=!0,this.part1.position.set(r,o),this.part1.rotation=-n-Math.PI/2):this.part1.visible=!1,this.part0.height=i}}])&&Qo(e.prototype,n),r&&Qo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function fi(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){li(i,r,o,a,u,"next",t)}function u(t){li(i,r,o,a,u,"throw",t)}a(void 0)}))}}function pi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gi(t);if(e){var o=gi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mi(this,n)}}function mi(t,e){if(e&&("object"===si(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wi(t)}function wi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.Kill=1]="Kill",t[t.Freeze=2]="Freeze",t[t.RocketUp=3]="RocketUp"}(ii||(ii={})),function(t){t[t.None=0]="None",t[t.BoomLetters=1]="BoomLetters",t[t.LaserLetters=2]="LaserLetters",t[t.BigBoomLetters=3]="BigBoomLetters",t[t.All=4]="All"}(ai||(ai={})),function(t){t[t.None=0]="None",t[t.Random=1]="Random",t[t.Static=2]="Static",t[t.HeartMiddle=3]="HeartMiddle",t[t.Skulls=4]="Skulls"}(ui||(ui={}));var xi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vi(t,e)}(g,t);var e,n,r,i,a,u,c,s,l,f,p,h,y,d,v,b,w=bi(g);function g(){var t;yi(this,g);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ki(wi(t=w.call.apply(w,[this].concat(n))),"gameContainer",void 0),ki(wi(t),"fxContainer",void 0),ki(wi(t),"frontContainer",void 0),ki(wi(t),"backContainer",void 0),ki(wi(t),"moveBox",void 0),ki(wi(t),"staticBox",void 0),ki(wi(t),"bottomOpenWall",void 0),ki(wi(t),"activeBlock",void 0),ki(wi(t),"maxY",void 0),ki(wi(t),"tick",0),ki(wi(t),"moving",void 0),ki(wi(t),"isActivePowerup",void 0),ki(wi(t),"preview",void 0),ki(wi(t),"nextLines",void 0),ki(wi(t),"previewBlocks",void 0),ki(wi(t),"nextType",void 0),ki(wi(t),"nextBlock",void 0),ki(wi(t),"isTransition",void 0),ki(wi(t),"powerup1",void 0),ki(wi(t),"powerup2",void 0),ki(wi(t),"nextTimer",void 0),ki(wi(t),"randomBodiesPositions",void 0),ki(wi(t),"activeBonus",void 0),ki(wi(t),"boomMeter",void 0),ki(wi(t),"scorePlace",void 0),ki(wi(t),"pad",void 0),ki(wi(t),"padRect",void 0),ki(wi(t),"downRect",void 0),ki(wi(t),"topRect",void 0),ki(wi(t),"levelId",void 0),ki(wi(t),"meterBonus",void 0),ki(wi(t),"obstacles",void 0),ki(wi(t),"score",void 0),ki(wi(t),"tutorial",void 0),ki(wi(t),"goalBlock",void 0),ki(wi(t),"boltsActive",void 0),ki(wi(t),"levelFinished",void 0),ki(wi(t),"levelStart",void 0),ki(wi(t),"pausePopup",void 0),ki(wi(t),"waitForOver",void 0),t}return e=g,(n=[{key:"create",value:function(){var t=this;go.prepareTextures(),this.backContainer=new m.Container,this.addChild(this.backContainer),this.gameContainer=new m.Container,this.addChild(this.gameContainer),this.fxContainer=new m.Container,this.addChild(this.fxContainer),this.frontContainer=new m.Container,this.addChild(this.frontContainer),this.levelFinished=new Co,this.frontContainer.addChild(this.levelFinished),this.levelFinished.visible=!1,this.pad=new m.Sprite(m.Texture.from("launchpad.png")),this.pad.anchor.set(.5,1),this.pad.position.y=.5*N.originalHeight-30,this.gameContainer.addChild(this.pad);var e=new m.NineSlicePlane(m.Texture.from("phone.png"),104,100,104,100);e.width=N.originalWidth+50,e.height=N.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e);var n=new m.Container;n.position.set(0,.5*-N.originalHeight+40),this.gameContainer.addChild(n);var r=new ar;r.position.set(-230,30),r.on("pointerup",(function(){t.showPause()})),n.addChild(r),this.powerup1=new ze,this.powerup1.position.set(-255,620),this.gameContainer.addChild(this.powerup1),this.powerup1.on("activate",(function(e){t.startPowerup(e)})),this.powerup2=new ze,this.powerup2.position.set(255,620),this.gameContainer.addChild(this.powerup2),this.powerup2.on("activate",(function(e){t.startPowerup(e)})),this.powerup1.visible=!1,this.powerup2.visible=!1,this.preview=new ci,this.gameContainer.addChild(this.preview),this.preview.visible=!1,this.previewBlocks=new yn,this.gameContainer.addChild(this.previewBlocks),this.previewBlocks.y=-900-this.previewBlocks.height;var o=new m.NineSlicePlane(m.Texture.from("progress_bar.png"),6,4,6,4);o.width=600,o.height=15,o.position.set(-300,500),this.gameContainer.addChild(o),this.nextTimer=new Je,this.nextTimer.position.set(-316,-637),this.gameContainer.addChild(this.nextTimer),this.boomMeter=new on,this.boomMeter.position.set(165,-725),this.boomMeter.scale.set(.85,.85),this.gameContainer.addChild(this.boomMeter),this.scorePlace=new Zn,this.scorePlace.position.set(-150,-725),this.gameContainer.addChild(this.scorePlace),this.padRect=new m.Rectangle(-140,610,280,150),this.downRect=new m.Rectangle(-400,500,800,300),this.topRect=new m.Rectangle(.5*-N.originalWidth,.5*-N.originalHeight,N.originalWidth,180),this.tutorial=new so,this.frontContainer.addChild(this.tutorial),this.levelStart=new Ho,this.frontContainer.addChild(this.levelStart),this.pausePopup=new qo,this.frontContainer.addChild(this.pausePopup),this.tutorial.addCondition(qr.Begin,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible&&(null==n?void 0:n.y)<-100,data:{pos:n,scale:{x:(null==n?void 0:n.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(qr.Moving,(function(){return{success:t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible,data:{pos:{x:40,y:0},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(qr.Heart,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.isTransition,data:{pos:n,scale:{x:(null==n?void 0:n.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(qr.NewLine,(function(){return{success:t.moving,data:{pos:{x:290,y:-550},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(qr.Recharge,(function(){return{success:t.boltsActive,data:{pos:{x:300,y:-650},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(qr.Unbreak,(function(){return{success:t.bottomOpenWall&&t.powerup1.visible&&6===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(qr.IAPBonus,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(qr.Unbreak)&&t.bottomOpenWall&&t.powerup1.visible&&6===t.levelId&&1===t.obstacles.length,data:{pos:{x:-255,y:620},scale:{x:-1,y:1}}}})),this.tutorial.addCondition(qr.IAPBonus2,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(qr.IAPBonus)&&t.bottomOpenWall&&t.powerup1.visible&&6===t.levelId&&1===t.obstacles.length,data:{pos:{x:255,y:620},scale:{x:1,y:1}}}})),this.tutorial.addCondition(qr.ChangePosition,(function(){return{success:t.bottomOpenWall&&t.powerup1.visible&&7===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(qr.Skull,(function(){var e,n,r={x:25,y:-125},o=pi(_.bodies);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i&&i.userData&&i.userData.type===Zt.skullType){r=i.userData.position;break}}}catch(t){o.e(t)}finally{o.f()}return{success:t.bottomOpenWall&&13===t.levelId&&!t.levelStart.visible,data:{pos:r,scale:{x:(null===(e=r)||void 0===e?void 0:e.x)<-20?-1:1,y:-1}}}}))}},{key:"start",value:(b=fi(regeneratorRuntime.mark((function t(){var e,n,r,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(nt(),this.waitForOver=!1,this.boltsActive=!1,this.score=0,this.scorePlace.score=0,e=i.length,n=new Array(e),r=0;r<e;r++)n[r]=i[r];return this.levelId=n[0][0],this.activeBonus=ai.None,this.randomBodiesPositions=[],this.obstacles=[],this.isTransition=!1,this.nextType=void 0,this.nextLines=[],this.isActivePowerup=!1,this.generateLineBlocks(),this.tick=0,this.maxY=-800,this.moving=!1,this.nextTimer.freeze(),Xa("start","game","level"),Va(La.Start),N.paused=!1,t.next=24,this.generateStartBlocks();case 24:return o=this.generateIAPS(),t.next=27,this.levelStart.show(this.currentLevelData,o);case 27:this.currentLevelData.iaps&&(this.powerup1.setData(o[0],go.getTexture(o[0]),go.getTexture(o[0])),this.powerup2.setData(o[1],go.getTexture(o[1]),go.getTexture(o[1])),this.powerup1.visible=!0,this.powerup2.visible=!0),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.addActiveBlock(),this.nextTimer.unFreeze(),E.stage.on("pointerup",this.onClick,this),E.stage.on("pointerdown",this.onTapStart,this);case 33:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"close",value:(v=fi(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){E.stage.off("pointerup"),E.stage.off("pointerdown"),N.paused=!1,e.waitForOver=!0,za(!1),e.boltsActive=!1,e.nextTimer.clear(),e.boomMeter.reset(!0),e.levelStart.clear(),e.moveBox&&e.moveBox.clean(),e.staticBox&&e.staticBox.clean(),e.bottomOpenWall&&e.bottomOpenWall.clean(),e.activeBlock&&e.activeBlock.clean(),e.activeBonus=ai.None,e.tick=0,e.moving=!1,e.isActivePowerup=!1,e.previewBlocks&&e.previewBlocks.clear(),e.nextBlock&&e.nextBlock.clean(),e.preview.visible=!1,e.powerup1.visible=!1,e.powerup2.visible=!1,e.nextLines=[],e.randomBodiesPositions=[],e.obstacles=[],e.fxContainer.removeChildren(),_.bodies.forEach((function(t){t&&t.userData&&t.userData.clean()}));for(var n=e.gameContainer.children.length-1;n>=0;n--){var r=e.gameContainer.children[n];r.createBody&&e.gameContainer.removeChild(r)}x.a.globalTimeline.clear();var o=window.setInterval((function(){var e=_.bodies.filter((function(t){return t&&t.userData}));0===e.length?(window.clearInterval(o),t()):console.log(e)}),50)})));case 1:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)})},{key:"showPause",value:function(){x.a.globalTimeline.pause(),N.paused=!0,this.pausePopup.show((function(t){N.paused=!1,x.a.globalTimeline.resume(),t&&L.start(Gi)}))}},{key:"generateIAPS",value:function(){if(this.currentLevelData.iaps){for(var t=[ii.Kill,ii.RocketUp,ii.Freeze],e=[],n=0;n<2;n++){var r=Math.floor(Math.random()*t.length);e.push(t[r]),t.splice(r,1)}return e}}},{key:"unusedBlocksRemoved",value:function(t,e){if(!this.isTransition){var n=5*t;t>=5&&e&&(this.fireMissle(1,e),n+=50),this.addScore(n),this.activeBonus||this.levelId>1&&this.playBolts(t,e)}}},{key:"addToBoomMeter",value:function(t){if(!this.activeBonus&&this.boomMeter.update(t)){var e=this.getRandomBonus();this.setActiveBonus(e)}}},{key:"playBolts",value:(d=fi(regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<2)&&n){t.next=2;break}return t.abrupt("return");case 2:this.boltsActive=!0,r=e,e=Math.min(e,6),o=r/e,i=regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(4*Math.random()),(i=new m.Sprite(m.Texture.from("bolt".concat(r,".png")))).anchor.set(.5,.5),i.scale.set(.1,.1),i.rotation=Math.PI/2+Math.atan2(-680-n.y,270-n.x),i.position.copyFrom(n),u.fxContainer.addChild(i),x.a.to(i.scale,{x:1.5,y:1.5,duration:.4,ease:O.f.easeNone}),x.a.to(i.scale,{x:0,y:0,delay:.4,duration:.4,ease:O.f.easeNone}),x.a.to(i.position,{x:270,y:-680,duration:.8,ease:O.f.easeNone,onComplete:function(){u.addToBoomMeter(o),u.fxContainer.removeChild(i)}}),t.next=12,u.delay(.1);case 12:case"end":return t.stop()}}),t)})),a=0;case 9:if(!(a<e)){t.next=14;break}return t.delegateYield(i(a),"t0",11);case 11:a++,t.next=9;break;case 14:this.boltsActive=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)})},{key:"addScore",value:function(t){this.score+=t,this.scorePlace.score=this.score}},{key:"currentLevelData",get:function(){return N.levels[this.levelId]}},{key:"getRandomPosition",value:function(){if(!this.isTransition){var t=Math.floor(Math.random()*this.randomBodiesPositions.length),e=this.randomBodiesPositions[t];if(this.randomBodiesPositions.splice(t,1),!(Math.abs(e[1])>=20))return e}}},{key:"setActiveBonus",value:(y=fi(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.activeBonus=e,this.nextTimer.freeze(),this.addScore(100),n=void 0,t.t0=e,t.next=t.t0===ai.BoomLetters||t.t0===ai.BigBoomLetters?7:t.t0===ai.LaserLetters?10:13;break;case 7:return this.meterBonus=e===ai.BoomLetters?new Yn:new Tr,n=function(){return r.getRandomPosition()},t.abrupt("break",14);case 10:return this.meterBonus=new dr,n=function(){var t=r.getRandomPosition();if(t)return t[1]},t.abrupt("break",14);case 13:return t.abrupt("return");case 14:return this.frontContainer.addChild(this.meterBonus),t.next=17,this.meterBonus.start(n);case 17:this.clearMeterBonus(!1),this.nextTimer.unFreeze();case 19:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"getRandomBonus",value:function(){var t=this.currentLevelData.bonuses;return t[Math.floor(Math.random()*t.length)]}},{key:"fireMissle",value:(h=fi(regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isTransition){t.next=2;break}return t.abrupt("return");case 2:za(!0),e=Math.min(e,this.randomBodiesPositions.length),r=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i.getRandomPosition())&&!i.isTransition){t.next=3;break}return t.abrupt("return","continue");case 3:return(o=new m.Sprite(m.Texture.from("like.png"))).anchor.set(.5,.5),o.scale.set(.1,.1),o.position.copyFrom(n),i.fxContainer.addChild(o),x.a.to(o.scale,{x:1.5,y:1.5,duration:.5,ease:O.f.easeNone}),x.a.to(o.scale,{x:0,y:0,delay:.5,duration:.5,ease:O.f.easeNone}),x.a.to(o.position,{x:50*r[0],y:50*r[1],duration:1,ease:O.f.easeNone,onComplete:function(){i.createExplosion(o.position,0),Fa.push(r),i.fxContainer.removeChild(o)}}),t.next=13,i.delay(.2);case 13:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<e)){t.next=15;break}return t.delegateYield(r(o),"t0",9);case 9:if("continue"!==t.t0){t.next=12;break}return t.abrupt("continue",12);case 12:o++,t.next=7;break;case 15:x.a.delayedCall(.2,(function(){za(!1)}));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"createExplosion",value:function(t,e){var n=new Wt(!0,e);n.position.copyFrom(t),this.fxContainer.addChild(n)}},{key:"clearActiveBlocks",value:function(){this.nextBlock&&(this.pad.removeChild(this.nextBlock),this.nextBlock.clean()),this.activeBlock&&(this.gameContainer.removeChild(this.activeBlock),this.activeBlock.clean(),this.preview.visible=!1),this.activeBlock=void 0,this.nextBlock=void 0,this.nextType=void 0}},{key:"stopBonuses",value:function(){this.activeBonus=ai.None,this.clearActiveBlocks()}},{key:"levelComplete",value:function(){this.stopBonuses(),this.isTransition=!0,this.moving=!1,this.obstacles.forEach((function(t){t.clean()})),this.obstacles=[],this.previewBlocks.y=-900-this.previewBlocks.height,this.previewBlocks&&this.previewBlocks.clear(),this.bottomOpenWall&&this.bottomOpenWall.animateAndDestroy(),this.bottomOpenWall=void 0,this.moveBox&&this.moveBox.animateAndDestroy(),this.staticBox&&this.staticBox.animateAndDestroy()}},{key:"moveBalls",value:function(){var t=this;if(!this.isTransition){this.moving=!0;var e=this.nextLines.length,n=this.moveBox.body.position,r={x:n[0],y:n[1]};this.previewBlocks.show(),x.a.to(this.previewBlocks,{y:-570,duration:1.1}),x.a.to(r,{y:(70*e-500)/50,delay:.1,duration:1,ease:O.f.easeNone,onUpdate:function(){t.moveBox.body?t.moveBox.body.position=[r.x,r.y]:x.a.killTweensOf(r)},onComplete:function(){t.moveBox.body.position=[0,-11.5],t.addLineBlocks(),t.generateLineBlocks(),x.a.to(t.previewBlocks,{y:-900-t.previewBlocks.height,duration:.5}),t.moving=!1}})}}},{key:"update",value:function(t){var e=this;if(!N.paused&&!this.waitForOver){this.drawMouse();var n=this.meterBonus&&this.meterBonus.activeBound||void 0;this.maxY=-800;var r=!1,i=!1,a=void 0,u=[];if(this.randomBodiesPositions=[],_.bodies.forEach((function(t){var c=t.position;t.userData.kinematic&&t!==e.moveBox.body&&(c[1]<-9.1||c[1]>(g.BottomPoint+10)/50)&&(t.userData.shape.material=N.material,t.gravityScale=1),t.type===o.Body.DYNAMIC&&c[1]>-g.BottomPoint/50&&t.userData&&t.userData.type!==Zt.goalType&&e.randomBodiesPositions.push(t.position),!e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]>e.maxY&&(e.maxY=c[1]),e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]>-g.BottomPoint/50&&(r=!0),e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]<3*-g.BottomPoint/50&&t.userData.clean(),t.type===o.Body.DYNAMIC&&t.userData&&t.userData.type===Zt.goalType&&(a=t.userData,!e.isTransition&&c[1]>9&&(i=!0)),!e.isTransition&&n&&t.type===o.Body.DYNAMIC&&t.userData&&t.userData.type!==Zt.goalType&&n.forEach((function(e){e.contains(c[0],c[1])&&u.push(t)}))})),a&&!i&&a.resetDeathCounter(),this.goalBlock=a,this.tutorial.update(),!this.isTransition||r||this.levelFinished.visible||(this.previewBlocks.y=-900-this.previewBlocks.height,this.nextTimer.clear(),this.boomMeter.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1,this.levelFinished.show(!0,this.score,this.currentLevelData.starsConditions,(function(){e.moveToNextLevel()}),this.levelId,this.generateIAPS()),this.nextTimer.freeze(),this.obstacles=[]),!this.moving&&!this.isTransition){if(a&&i&&a.startCountDeath(),!this.nextTimer.isFrozen){this.tick+=Math.floor(60*t);var c=this.tick%this.currentLevelData.time;this.nextTimer.setProgress(c/this.currentLevelData.time),0===c&&(this.nextTimer.setProgress(1),u=[],this.moveBalls())}if(u.length>0){var s=0;u.forEach((function(t){var n=t.userData;s+=n.boom(!1),e.createExplosion(n.position,.2*Math.random())})),console.log(s),this.unusedBlocksRemoved(s)}}}}},{key:"moveToNextLevel",value:function(){var t=this;console.log("finished",this.levelId,this.score),N.levels.length>this.levelId+1&&((this.score>this.currentLevelData.score||!this.currentLevelData.score)&&(this.currentLevelData.score=this.score,Q(this.currentLevelData.name,this.score.toString()),console.log("set score")),this.levelId+=1,this.currentLevelData.score||0===this.currentLevelData.score||(this.currentLevelData.score=0,Q(this.currentLevelData.name,"0"))),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.score=0,this.scorePlace.score=0,this.createMoveWalls(),this.generateNewBlocks().then((function(){var e=t.generateIAPS();t.levelStart.show(t.currentLevelData,e).then((function(){t.currentLevelData.iaps&&(t.powerup1.setData(e[0],go.getTexture(e[0]),go.getTexture(e[0])),t.powerup2.setData(e[1],go.getTexture(e[1]),go.getTexture(e[1])),t.powerup1.visible=!0,t.powerup2.visible=!0),t.generateLineBlocks(),t.addActiveBlock(),t.previewBlocks.y=-900-t.previewBlocks.height,t.nextTimer.unFreeze()}))})),this.isTransition=!1,N.paused=!1}},{key:"startPowerup",value:(p=fi(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.isActivePowerup||N.paused||this.isTransition)){t.next=2;break}return t.abrupt("return");case 2:this.isActivePowerup=!0,t.t0=e,t.next=t.t0===ii.RocketUp?6:t.t0===ii.Kill?9:t.t0===ii.Freeze?12:14;break;case 6:return t.next=8,this.startVerticalRocket();case 8:return t.abrupt("break",14);case 9:return n=this.getRandomType(),_.bodies.forEach((function(t){var e=t.userData;e&&e.type===n&&e.setBomb()})),t.abrupt("break",14);case 12:return this.nextTimer.freeze(10),t.abrupt("break",14);case 14:this.isActivePowerup=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"startVerticalRocket",value:(f=fi(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=560*Math.random()-280,t.next=3,this.startRocket(e,g.BottomPoint,e,-450);case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"startRocket",value:(l=fi(regeneratorRuntime.mark((function t(e,n,r,o){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new be(e,n,r,o),this.gameContainer.addChild(i),t.next=4,i.animate();case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return l.apply(this,arguments)})},{key:"generateActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextBlock&&this.pad.removeChild(this.nextBlock),this.nextType=-1!==t?t:this.getRandomType(),this.nextBlock=new Zt(-90,-20,this.nextType,!1),this.pad.addChild(this.nextBlock),-1===t&&(this.nextBlock.alpha=0,x.a.to(this.nextBlock,{alpha:1,duration:.3}))}},{key:"getRandomType",value:function(){return this.obstacles.filter((function(t){return t.type===ui.Skulls})).length>0&&Math.random()<.01?Zt.skullType:Math.floor(Math.random()*this.currentLevelData.blocks)+1}},{key:"addActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextType||(this.nextType=this.getRandomType()),this.activeBlock=new Zt(0,g.BottomPoint,this.nextType,!1),this.activeBlock.kinematic=!0,this.gameContainer.addChild(this.activeBlock),this.generateActiveBlock(t),this.preview.position.copyFrom(this.activeBlock.position),this.preview.visible=!0,-1===t&&(this.activeBlock.alpha=0,this.preview.alpha=0,x.a.to(this.activeBlock,{alpha:1,duration:.3}),x.a.to(this.preview,{alpha:.8,duration:.3}))}},{key:"switchBlockes",value:(s=fi(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.activeBlock.type,n=this.nextType,t.next=4,new Promise((function(t){x.a.to(r.nextBlock,{x:0,y:-50,duration:.2}),x.a.to(r.activeBlock,{x:-90,y:700,duration:.2,onComplete:function(){t()}})}));case 4:this.clearActiveBlocks(),this.nextType=n,this.addActiveBlock(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"drawMouse",value:function(){var t=this.toLocal(E.renderer.plugins.interaction.eventData.data.global);this.preview.draw(t)}},{key:"onTapStart",value:function(t){var e=this.toLocal(t.data.global);this.isTransition||N.paused||this.topRect.contains(e.x,e.y)||(this.padRect.contains(e.x,e.y)?this.switchBlockes():this.downRect.contains(e.x,e.y)||this.drawMouse())}},{key:"onClick",value:function(t){var e=this,n=this.toLocal(t.data.global);if(!(this.isTransition||N.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(n.x,n.y)||this.topRect.contains(n.x,n.y))){this.activeBlock.createBody(o.Body.DYNAMIC,30),this.activeBlock.shape.material=N.activeBallMaterial;var r=this.activeBlock;this.activeBlock=void 0,this.preview.visible=!1;var i=Math.atan2((n.y-g.BottomPoint)/50,n.x/50);r.body.gravityScale=0,r.body.applyImpulse([450*Math.cos(i),450*Math.sin(i)]),x.a.delayedCall(.2,(function(){e.addActiveBlock()})),_.bodies.forEach((function(t){t&&t.userData&&t.userData.type===Zt.skullType&&t.userData.decreaseSkullMeter()}))}}},{key:"generateLineBlocks",value:function(){var t=this.currentLevelData.lines;this.previewBlocks.clear(),this.nextLines=[];for(var e=0;e<t;e++){this.nextLines[e]=[];for(var n=0;n<9;n++)this.nextLines[e][n]=Math.floor(Math.random()*this.currentLevelData.blocks)+1}this.previewBlocks.setLines(this.nextLines)}},{key:"addLineBlocks",value:function(){for(var t,e=-500,n=0;n<this.nextLines.length;n++){t=-300;for(var r=0;r<this.nextLines[n].length;r++){var o=new Zt(t,e,this.nextLines[n][r]);this.gameContainer.addChild(o),t+=74}e+=70}}},{key:"delay",value:(c=fi(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){x.a.delayedCall(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"generateNewBlocks",value:(u=fi(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,c,s,l,f,p,h,y,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this.currentLevelData,n=e.startAmount,r=e.blocks,o=e.obstacles,i=!1,a=0,o&&o.length>0&&o.forEach((function(t){d.createObstacle(t),t.type===ui.HeartMiddle?i=!0:t.type===ui.Skulls&&(a=t.amount)})),u=[],c=0;c<a;c++){for(s=Math.floor(Math.random()*(n-19));u.includes(s);)s=Math.floor(Math.random()*(n-19));u.push(s)}l=0;case 7:if(!(l<n)){t.next=23;break}return f=-1,f=u.includes(l)?Zt.skullType:Math.floor(Math.random()*r)+1,p=new Zt(50*Math.random()-25,900,f),this.gameContainer.addChild(p),t.next=14,this.delay(.001);case 14:if(!i||l!==Math.floor(n/2)){t.next=20;break}return(h=new Be(0,1100,Zt.goalType)).on("gameover",this.onGameOver,this),this.gameContainer.addChild(h),t.next=20,this.delay(1);case 20:l++,t.next=7;break;case 23:if(i){t.next=29;break}return t.next=26,this.delay(1);case 26:(y=new Be(0,1100,Zt.goalType)).on("gameover",this.onGameOver,this),this.gameContainer.addChild(y);case 29:return t.next=31,this.delay(1);case 31:this.createBottomExit();case 32:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"createObstacle",value:function(t){if(t.type!==ui.HeartMiddle&&t.type!==ui.Skulls){var e=void 0;switch(t.type){case ui.Static:e=new Wr(t.position);break;case ui.Random:e=new $r(t.position,t.lives)}this.gameContainer.addChild(e),this.obstacles.push(e)}}},{key:"onGameOver",value:function(){var t,e,n,r=this;null===(t=this.nextTimer)||void 0===t||t.clear(),null===(e=this.boomMeter)||void 0===e||e.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1,this.score=0,this.levelFinished.show(!1,this.score,this.currentLevelData.starsConditions,(function(){r.restartLevel()}),this.levelId,void 0),null===(n=this.nextTimer)||void 0===n||n.freeze(),this.obstacles=[],N.paused=!0}},{key:"restartLevel",value:function(){this.isTransition=!0,L.restart(this.levelId)}},{key:"generateStartBlocks",value:(a=fi(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.createMoveWalls(),(e=new ue(-400,-50,100,1800,0)).shape.material=N.bounceMaterial,this.gameContainer.addChild(e),(n=new ue(400,-50,100,1800,0)).shape.material=N.bounceMaterial,this.gameContainer.addChild(n),r=new ue(-225,800,250,100,0),this.gameContainer.addChild(r),o=new ue(225,800,250,100,0),this.gameContainer.addChild(o),i=new ue(-150,1100,100,500,0),this.gameContainer.addChild(i),a=new ue(150,1100,100,500,0),this.gameContainer.addChild(a),u=new ue(0,1300,200,100,0),this.gameContainer.addChild(u),t.next=19,this.generateNewBlocks();case 19:N.started=!0;case 20:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"createMoveWalls",value:function(){this.moveBox=new ue(0,-575,710,50,0),this.moveBox.type=Zt.endType,this.gameContainer.addChild(this.moveBox),this.staticBox=new ue(0,-625,710,50,0),this.gameContainer.addChild(this.staticBox)}},{key:"createBottomExit",value:function(){this.bottomOpenWall=new ue(0,800,200,100,0),this.gameContainer.addChild(this.bottomOpenWall)}},{key:"clearMeterBonus",value:(i=fi(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!(n.length>0&&void 0!==n[0])||n[0],!this.meterBonus){t.next=6;break}if(e){t.next=5;break}return t.next=5,this.meterBonus.goOut();case 5:this.meterBonus&&(this.meterBonus.clean(),this.frontContainer.removeChild(this.meterBonus),this.meterBonus=void 0);case 6:this.activeBonus=ai.None;case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}])&&di(e.prototype,n),r&&di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),g}(st);ki(xi,"BottomPoint",670);var Oi=n(199);function Pi(t){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Si(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ti(t,e){return(Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ri(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ci(t);if(e){var o=Ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ji(this,n)}}function ji(t,e){if(e&&("object"===Pi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bi(t)}function Bi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _i=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ti(t,e)}(i,t);var e,n,r,o=Ri(i);function i(t,e,n,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Bi(a=o.call(this,"","")),"id",void 0),a.id=t,a.btn.anchor.set(0,0);var u=new m.Text(e,{fontFamily:"Arial",fontSize:40,fill:0,fontWeight:"bold"});u.position.set(20,10),a.addChild(u);var c=new m.Text(n,{fontFamily:"Arial",fontSize:33,fill:0});return c.position.set(20,5+u.height+15),a.addChild(c),a.btn.tint=r?13421772:16777215,a.btn.width=N.originalWidth-30,a.btn.height=5+u.height+20+c.height+5,a}return e=i,n&&Si(e.prototype,n),r&&Si(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(kt);function Ei(t){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ai(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ai(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ai(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Di(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Li(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Di(i,r,o,a,u,"next",t)}function u(t){Di(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ui(t);if(e){var o=Ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wi(this,n)}}function Wi(t,e){if(e&&("object"===Ei(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hi(t)}function Hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ui(t){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ni(t,e)}(u,t);var e,n,r,o,i,a=zi(u);function u(){var t;Ii(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Yi(Hi(t=a.call.apply(a,[this].concat(n))),"scrollbox",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=new m.Text("LEVELS:",{fontFamily:"Arial",fontSize:75,fill:16777215,fontWeight:"bold"});t.position.set(.5*-N.originalWidth+30,.5*-N.originalHeight+40),this.addChild(t),this.scrollbox=new Oi.a({boxWidth:N.originalWidth-30,boxHeight:N.originalHeight-160}),this.scrollbox.position.set(.5*-N.originalWidth+18,.5*-N.originalHeight+130),this.addChild(this.scrollbox);var e=new m.NineSlicePlane(m.Texture.from("phone.png"),104,100,104,100);e.width=N.originalWidth+50,e.height=N.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e)}},{key:"start",value:(i=Li(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Xa("start","map","level"),e=N.levels,n=0,r=0,o=Mi(e),t.prev=5,a=regeneratorRuntime.mark((function t(){var e,o,a,c,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.value,t.next=3,Z(e.name,"");case 3:o=t.sent,a=void 0,""!==o&&(e.score=parseInt(o),a=Na(e.score,e.starsConditions)),a=3,c=0!==r&&void 0===a,s="",s=0===r&&0===a?"Let's start from here. Tap to play.":c?"...":0===a?"This is a good level to play today.":"The level is completed: "+" ".repeat(a),(l=new _i(r,e.name,s,r%2!=0)).on("pointerup",(function(){Xa("click","map","play"),L.start(xi,l.id)})),l.disabled=c,l.y=n,u.scrollbox.content.addChild(l),n+=l.height,r++;case 17:case"end":return t.stop()}}),t)})),o.s();case 8:if((i=o.n()).done){t.next=12;break}return t.delegateYield(a(),"t0",10);case 10:t.next=8;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(5),o.e(t.t1);case 17:return t.prev=17,o.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[5,14,17,20]])}))),function(){return i.apply(this,arguments)})},{key:"close",value:(o=Li(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Xa("close","map","level"),this.scrollbox.content.removeChildren();case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}])&&Fi(e.prototype,n),r&&Fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(st);function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ji(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qi(t);if(e){var o=Qi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(t,e){if(e&&("object"===Vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $i(t)}function $i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qi(t){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ta=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xi(t,e)}(i,t);var e,n,r,o=Ji(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Zi($i(t=o.call(this)),"explosion",void 0),Zi($i(t),"face",void 0),Zi($i(t),"logo",void 0),t.explosion=m.Sprite.from(m.Texture.from("splash_explosion.png")),t.explosion.anchor.set(.5),t.explosion.scale.set(0,0),t.explosion.position.y=.5*-N.originalHeight+516,t.explosion.alpha=0,t.addChild(t.explosion),t.face=m.Sprite.from(m.Texture.from("splash_logo_face.png")),t.face.position.set(-131,-350),t.face.alpha=0,t.addChild(t.face),t.logo=m.Sprite.from(m.Texture.from("splash_logo.png")),t.logo.anchor.set(.5),t.logo.position.set(0,-260),t.logo.scale.set(3,3),t.logo.alpha=0,t.addChild(t.logo),t}return e=i,(n=[{key:"start",value:function(){this.explosion.position.y=.5*-N.originalHeight+516,this.explosion.scale.set(0,0),this.explosion.alpha=0,this.face.position.set(-131,-350),this.face.alpha=0,this.logo.position.set(0,-260),this.logo.scale.set(3,3),this.logo.alpha=0,x.a.to(this.explosion,{alpha:1,duration:.2}),x.a.to(this.explosion.scale,{x:1,y:1,duration:1,ease:O.c.easeOut}),x.a.to(this.logo,{alpha:1,delay:.2,duration:.2}),x.a.to(this.logo.scale,{x:1,y:1,delay:.2,duration:1,ease:O.a.easeOut}),x.a.to(this.face,{alpha:1,delay:1.09,duration:.1}),x.a.to(this.face,{y:-448,delay:1.1,duration:2,ease:O.f.easeNone})}},{key:"stop",value:function(){x.a.killTweensOf(this.explosion),x.a.killTweensOf(this.explosion.scale),x.a.killTweensOf(this.logo),x.a.killTweensOf(this.logo.scale),x.a.killTweensOf(this.face)}}])&&Ki(e.prototype,n),r&&Ki(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function ea(t){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ra(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){na(i,r,o,a,u,"next",t)}function u(t){na(i,r,o,a,u,"throw",t)}a(void 0)}))}}function oa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aa(t,e){return(aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ua(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=la(t);if(e){var o=la(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ca(this,n)}}function ca(t,e){if(e&&("object"===ea(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sa(t)}function sa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function la(t){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aa(t,e)}(u,t);var e,n,r,o,i,a=ua(u);function u(){var t;oa(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return fa(sa(t=a.call.apply(a,[this].concat(n))),"logo",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=this;this.logo=new ta,this.addChild(this.logo);var e=new kt("start_button.png","start_button.png");e.position.y=N.originalHeight/3-30,this.addChild(e),e.on("pointerup",(function(){Xa("click","menu","play"),t.onPlayClicked()}))}},{key:"start",value:function(){Xa("start","menu","level"),this.logo.start()}},{key:"close",value:(i=ra(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Xa("close","menu","level"),this.logo.stop();case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onPlayClicked",value:(o=ra(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!q||!X.shouldPlayFirstAds()){t.next=3;break}return t.next=3,tt(G.Interstitial);case 3:L.start(Gi);case 4:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}])&&ia(e.prototype,n),r&&ia(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(st),ha=n(201);function ya(t){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function va(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ma(t,e){return(ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xa(t);if(e){var o=xa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ga(this,n)}}function ga(t,e){if(e&&("object"===ya(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ka(t)}function ka(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xa(t){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ma(t,e)}(u,t);var e,n,r,o,i,a=wa(u);function u(){var t;va(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Oa(ka(t=a.call.apply(a,[this].concat(n))),"comics",void 0),Oa(ka(t),"step",void 0),Oa(ka(t),"nextBtn",void 0),Oa(ka(t),"prevBtn",void 0),Oa(ka(t),"okBtn",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=this;this.comics=m.Sprite.from(m.Texture.from("comic_00.png")),this.comics.anchor.set(.5,.5),this.addChild(this.comics),this.nextBtn=new kt("next_button.png","next_button.png"),this.nextBtn.position.set(160,N.originalHeight/2-this.nextBtn.height/2),this.addChild(this.nextBtn),this.nextBtn.on("pointerup",(function(){Xa("click","comics","next"),t.onNextClicked()})),this.prevBtn=new kt("back_button.png","back_button.png"),this.prevBtn.position.set(-160,this.nextBtn.y),this.addChild(this.prevBtn),this.prevBtn.on("pointerup",(function(){Xa("click","comics","prev"),t.onPrevClicked()})),this.okBtn=new kt("ok_button.png","ok_button.png"),this.okBtn.on("pointerup",(function(){L.start(pa)})),this.okBtn.position.y=this.nextBtn.y-50,this.addChild(this.okBtn),this.prevBtn.visible=!1,this.nextBtn.visible=!1,this.okBtn.visible=!1}},{key:"start",value:function(){Xa("start","menu","level"),this.step=0,this.prevBtn.visible=!1,this.nextBtn.visible=!0,this.okBtn.visible=!1}},{key:"close",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(Xa("close","menu","level"),e=0;e<6;e++)m.Texture.removeFromCache("comic_0".concat(e,".png"));this.removeChild(this.okBtn),this.okBtn=void 0,this.destroy({children:!0,texture:!0});case 5:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){da(i,n,r,a,u,"next",t)}function u(t){da(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"onNextClicked",value:function(){this.step++,this.step<5?(this.updateImage(),this.prevBtn.visible=!0,this.nextBtn.visible=!0):5===this.step&&(this.updateImage(),this.okBtn.visible=!0,this.prevBtn.visible=!1,this.nextBtn.visible=!1)}},{key:"onPrevClicked",value:function(){this.step--,this.prevBtn.visible=this.step>0,this.updateImage()}},{key:"updateImage",value:function(){this.comics.texture=m.Texture.from("comic_0".concat(this.step,".png"))}}])&&ba(e.prototype,n),r&&ba(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(st);function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ra(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ta(i,r,o,a,u,"next",t)}function u(t){Ta(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ja(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ba(t,e){return(Ba=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ca(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ea(t);if(e){var o=Ea(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _a(this,n)}}function _a(t,e){if(e&&("object"===Sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ea(t){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ma,Aa,Da,La,Ia=[],Fa=[],Na=function(t,e){for(var n=0,r=0;r<e.length&&t>e[r];r++)n++;return n},za=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N.slowmo=t,e||x.a.globalTimeline.timeScale(N.slowmo?.3:1)},Wa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ba(t,e)}(c,t);var e,n,r,o,i,a,u=Ca(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u.call(this,720,1500)}return e=c,(n=[{key:"createStates",value:function(){L.add(new Pa),L.add(new pa),L.add(new Gi),L.add(new xi),L.start(Pa)}},{key:"initContactListener",value:function(){var t=this;_.on("endContact",(function(t){if(t.shapeA.data&&t.shapeB.data){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;r.correctType&&o.correctType&&r.type===o.type&&0!==r.type&&r.type!==Zt.skullType&&(r.sameColorNeighbors.delete(o),o.sameColorNeighbors.delete(r))}})),_.on("beginContact",(function(e){var n=e.bodyA,r=e.bodyB,o=n.userData,i=r.userData;if(o.type===Zt.goalType&&i.type===Zt.endType||i.type===Zt.goalType&&o.type===Zt.endType)t.levelComplete();else if(o.type===Zt.goalType&&i.type===Zt.skullType||i.type===Zt.goalType&&o.type===Zt.skullType)t.gameOver();else{if(o.rocket||i.rocket){var a=void 0,u=void 0;o.rocket&&i.correctType()&&i.type!==Zt.goalType?(a=n,u=i):i.rocket&&o.correctType()&&o.type!==Zt.goalType&&(a=r,u=o),a&&u&&u.boom()}if(e.shapeA.data&&e.shapeB.data&&o.correctType&&i.correctType){o.type===i.type&&0!==o.type&&o.type!==Zt.skullType&&(o.sameColorNeighbors.set(i,!0),i.sameColorNeighbors.set(o,!0));var c=void 0,s=void 0,l=void 0;if(o.kinematic&&0!==o.type?(c=n,s=o,l=i):i.kinematic&&0!==i.type&&(c=r,s=i,l=o),c)if(c.gravityScale=1,s.shape.material=N.material,c.mass=5,c.updateMassProperties(),251===l.type&&l.changePosition(),o.type===i.type&&o.type!==Zt.skullType){var f=s.steps;s.animateAndDestroy(),Ia.push({block:s===o?i:o,steps:f})}else l.type===Zt.skullType&&s.setSkull();else if(o.type===i.type&&0!==o.type&&o.type!==Zt.skullType&&(o.steps!==i.steps||o.kinematic||i.kinematic))if(o.kinematic){n.gravityScale=1,o.shape.material=N.material;var p=o.steps;o.animateAndDestroy(),Ia.push({block:i,steps:p})}else{i.shape.material=N.material,r.gravityScale=1;var h=i.steps;i.animateAndDestroy(),Ia.push({block:o,steps:h})}else o.kinematic&&251===i.type||i.kinematic&&251===o.type?251===i.type?i.changePosition():o.changePosition():(o.kinematic&&i.type===Zt.skullType||i.kinematic&&o.type===Zt.skullType)&&(i.type===Zt.skullType?o.setSkull():i.setSkull())}}}))}},{key:"customLogic",value:function(t){var e=L.activeState,n=!e||!e.unusedBlocksRemoved,r=F.length,o=void 0;if(!n&&(e.update(t),r>0)){var i=F[Math.floor(Math.random()*r)];i&&(o=i.userData.position)}F.forEach((function(t){_.removeBody(t)})),this.clearBodyArray(),n||(Ia.forEach((function(t){return t.block.increase(t.steps)})),Ia=[],Fa.forEach((function(t){var e=_.hitTest(t,_.bodies,0);if(e&&e.length>0){var n=e[0].userData;n&&n.correctType&&n.type!==Zt.goalType&&n.boom&&(r+=n.boom())}})),r>0&&e.unusedBlocksRemoved(r,o)),Fa=[]}},{key:"levelComplete",value:function(){L.activeState.levelComplete()}},{key:"gameOver",value:function(){L.activeState.onGameOver()}},{key:"load",value:(a=Ra(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){s.init("assets/sounds"),X.startLoading();var r=new l.b;r.add("base0","assets/atlases/base0.json"),r.add("base1","assets/atlases/base1.json"),r.add("levels","assets/levels.json"),r.add("particles","assets/emitter.json"),s.add("music",{autoplay:!0,loop:!0,volume:.6}),r.onProgress.add((function(t){})),r.onError.add((function(t,e,r){Ja({error:"loading (".concat(r.url,")")}),n()})),r.load(Ra(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadFonts();case 2:return N.levels=r.resources.levels.data.levels,N.particles=r.resources.particles.data,n.next=6,e.startAfterLoading();case 6:t();case 7:case"end":return n.stop()}}),n)}))))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"loadFonts",value:(i=Ra(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){ha.load({custom:{families:["FontsFree-Net-AmericanTypewriterBold"],urls:["assets/fonts/font.css"]},active:function(){t()},timeout:6e4})})));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"startAfterLoading",value:(o=Ra(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.getElementById("preloader"))&&(e.style.display="none"),t.next=4,et();case 4:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}])&&ja(e.prototype,n),r&&ja(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(z);!function(t){t[t.Undefined=0]="Undefined",t[t.Clicked=1]="Clicked",t[t.Show=2]="Show",t[t.FailedShow=3]="FailedShow",t[t.RewardReceived=4]="RewardReceived"}(Ma||(Ma={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unknown=1]="Unknown",t[t.Offline=2]="Offline",t[t.NoFill=3]="NoFill",t[t.InternalError=4]="InternalError",t[t.InvalidRequest=5]="InvalidRequest",t[t.UnableToPrecache=6]="UnableToPrecache"}(Aa||(Aa={})),function(t){t[t.Undefined=0]="Undefined",t[t.Video=1]="Video",t[t.RewardedVideo=2]="RewardedVideo",t[t.Playable=3]="Playable",t[t.Interstitial=4]="Interstitial",t[t.OfferWall=5]="OfferWall",t[t.Banner=6]="Banner"}(Da||(Da={})),function(t){t[t.Undefined=0]="Undefined",t[t.Start=1]="Start",t[t.Complete=2]="Complete",t[t.Fail=3]="Fail"}(La||(La={})),r.GameAnalytics.setEnabledInfoLog(!1);var Ha=!1,Ua="en";function Ya(t,e){r.GameAnalytics.initialize(t,e),console.log("Network: ".concat("0",", live: ").concat(Ha)),Xa("set","network","0",Ha?1:0),Xa("start","app","game"),new Wa}function Ga(t,e,n){r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e),n),gtag("event",t,{event_category:e,value:n})}function Va(t,e,n){r.GameAnalytics.addProgressionEvent(t,"level",n,void 0,e),gtag("event","progression",{event_category:t===La.Start?"start":t!==La.Fail?"complete":"fail",value:e})}function Ka(t,e,n){void 0===n?r.GameAnalytics.addAdEvent(t,e,"0","ad"):r.GameAnalytics.addAdEventWithNoAdReason(t,e,"0","ad",n);var o="",i="";switch(e){case Da.Interstitial:i="inter";break;case Da.RewardedVideo:i="reward"}switch(t){case Ma.FailedShow:o="showError";break;case Ma.Show:o="show";break;case Ma.RewardReceived:o="success"}gtag("event",o,{event_category:i})}function Xa(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e,":").concat(n),o),gtag("event",t,{event_category:e,event_label:n,value:o})}function Ja(t){var e=JSON.stringify(t);r.GameAnalytics.addErrorEvent(r.EGAErrorSeverity.Error,e),gtag("event","show",{event_category:"error",event_label:"error",value:e})}function qa(t){Ha=t}window.onfocus=function(){Howler.mute(!1)},window.onblur=function(){Howler.mute(!0)},window.onload=function(){$().then((function(t){Ua=t.language,Ha=t.success,Ya(t.gameKey,t.secretKey)})).catch((function(t){Ua="en",Ha=!1,Ya("858dec355a72c9195a2a9d7b5b236599","da73f2e7aa8cb82c345aa88235b57abb415e1cd5")}))},o.Broadphase.canCollide=function(t,e){var n,r,i=o.Body.KINEMATIC,a=o.Body.STATIC,u=t.type,c=e.type,s=null===(n=t.userData)||void 0===n?void 0:n.type,l=null===(r=e.userData)||void 0===r?void 0:r.type;return(u!==a||c!==a)&&(u===i&&c===a||u===a&&c===i?s>=250&&s<=260&&l<20||l>=250&&l<=260&&s<20:(u!==i||c!==i)&&((t.sleepState!==o.Body.SLEEPING||e.sleepState!==o.Body.SLEEPING)&&!(t.sleepState===o.Body.SLEEPING&&c===a||e.sleepState===o.Body.SLEEPING&&u===a)))}}});
//# sourceMappingURL=bundle.7c776cd80a08010b4dd9.js.map