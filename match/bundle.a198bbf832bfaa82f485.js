!function(t){function e(e){for(var r,a,u=e[0],c=e[1],s=e[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;i.push([200,1]),n()}({200:function(t,e,n){n(201),t.exports=n(408)},408:function(t,e,n){"use strict";n.r(e),n.d(e,"EGAAdAction",(function(){return za})),n.d(e,"EGAAdError",(function(){return Wa})),n.d(e,"EGAAdType",(function(){return Ua})),n.d(e,"EGAProgressionStatus",(function(){return Ha})),n.d(e,"live",(function(){return Ka})),n.d(e,"lang",(function(){return Xa})),n.d(e,"sendValueEvent",(function(){return qa})),n.d(e,"sendProgressionEvent",(function(){return $a})),n.d(e,"sendAdEvent",(function(){return Qa})),n.d(e,"sendEvent",(function(){return Za})),n.d(e,"sendError",(function(){return tu})),n.d(e,"setLive",(function(){return eu}));var r=n(43),o=n(10),i=n.n(o),a=n(193);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"path",void 0),c(this,"all",void 0),c(this,"musics",void 0),c(this,"mutedSounds",void 0),c(this,"mutedMusic",void 0)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.path=t,this.all={},this.musics={},this.mutedSounds=!1,this.mutedMusic=!1}},{key:"muteMusic",get:function(){return this.mutedMusic},set:function(t){var e;this.mutedMusic=t,null===(e=this.musics.music)||void 0===e||e.mute(t)}},{key:"muteSounds",get:function(){return this.mutedSounds},set:function(t){for(var e in this.mutedSounds=t,this.all)this.all[e]&&this.all[e].mute(t)}},{key:"add",value:function(t,e){var n=this;if(!this.all[t]){if(!this.path)throw new Error("setup path for sounds");var r=["mp3","ogg"].map((function(e){return"".concat(n.path,"/").concat(t,".").concat(e)})),o=new a.Howl({src:r,autoplay:null==e?void 0:e.autoplay,loop:null==e?void 0:e.loop,volume:(null==e?void 0:e.volume)||1});"music"!==t?this.all[t]=o:this.musics[t]=o}}},{key:"playRandom",value:function(t,e){for(var n=Math.floor(Math.random()*e),r=!1,o=0;o<e;o++)if(this.all[t+o.toString()].playing()){r=!0;break}r||this.play(t+n.toString())}},{key:"play",value:function(t){this.all[t]?this.all[t].play():console.error("no sound was found")}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()),l=n(16),f=n(69),p=n(70),h=n(51);function y(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"states",void 0),v(this,"currentState",void 0),v(this,"stage",void 0),this.stage=e,this.states=new Map}var e,n,r,o,i;return e=t,(n=[{key:"activeState",get:function(){return this.currentState}},{key:"add",value:function(t){this.states.set(t.constructor,t),t.create()}},{key:"start",value:function(t){var e=this.states.get(t);if(!e)throw new Error("No state ".concat(t));this.currentState&&(this.currentState.close(),this.stage.removeChild(this.currentState));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.start(r),this.currentState=e,this.stage.addChild(this.currentState)}},{key:"restart",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,o,i=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=a.length,n=new Array(e),r=0;r<e;r++)n[r]=a[r];if(o=this.currentState,!this.currentState){t.next=6;break}return t.next=5,this.currentState.close();case 5:this.stage.removeChild(this.currentState);case 6:window.setTimeout((function(){o.start(n),i.currentState=o,i.stage.addChild(i.currentState)}),100);case 7:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){y(i,n,r,a,u,"next",t)}function u(t){y(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),m=n(1),w=n(9),g=n(21),k=n(3),x=n(2),O=n(7);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _,E,M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(i,t);var e,n,r,o=B(i);function i(t,e){var n,r,a,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=j(n),u=void 0,(a="sprite")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u;var c=g.a.from(k.db.WHITE);return c.anchor.set(.5),c.tint=0,c.alpha=.6,c.width=2*t,c.height=2*e,c.interactive=!0,n.addChild(c),n.sprite=g.a.from("assets/preloader.png"),n.sprite.anchor.set(.5,.5),n.addChild(n.sprite),n}return e=i,(n=[{key:"show",value:function(){this.visible=!0,this.rotate()}},{key:"hide",value:function(){this.visible=!1,x.a.killTweensOf(this.sprite)}},{key:"rotate",value:function(){var t=this;this.sprite.rotation=0,x.a.to(this.sprite,{rotation:2*Math.PI,duration:5,ease:O.f.easeNone,onComplete:function(){t.rotate()}})}}])&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(w.b);function A(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}h.a.registerPlugin(l.a),l.b.registerPlugin(f.b),l.b.registerPlugin(p.c);var I,D,F=[],N={started:!1,paused:!1,scale:1,realHeight:1,originalWidth:1,originalHeight:1,levels:[],particles:void 0,material:void 0,bounceMaterial:void 0,activeBallMaterial:void 0,slowmo:!1},z=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a={width:e,height:n,autoDensity:!0,resolution:2,backgroundColor:12309476};N.originalWidth=e,N.originalHeight=n,E=new h.a(a),document.body.appendChild(E.view),m.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,E.view.style.left="0%",E.view.style.top="0%",E.view.style.width="100%",E.view.style.height="100%",E.renderer.plugins.interaction,E.stage.interactive=!0,E.ticker.maxFPS=60;var u=new w.b;E.stage.addChild(u),_=new i.a.World({gravity:[0,-10]}),this.initContactListener();var c=new o.Material,s=new o.Material,l=new o.Material;N.material=c,N.bounceMaterial=l,N.activeBallMaterial=s,_.addContactMaterial(new o.ContactMaterial(c,c,{restitution:0,stiffness:o.Equation.DEFAULT_STIFFNESS/3})),_.addContactMaterial(new o.ContactMaterial(s,l,{restitution:1,stiffness:o.Equation.DEFAULT_STIFFNESS/3})),_.emitImpactEvent=!1,E.ticker.add((function(){if(!N.paused){var t=1/(N.slowmo?400:60);_.step(t,.1,3),_.bodies.forEach((function(t){var e=t.userData;if(e&&e.transform){var n=t.position;e.position.set(50*n[0],50*n[1]),e.rotateView?e.rotateView(t.angle):e.rotation=t.angle}})),r.customLogic(t)}})),this.start(E,u),(D=new M(e,n)).hide(),u.addChild(D)}var e,n,r,a,u;return e=t,(n=[{key:"customLogic",value:function(t){var e=this.preCleanUnused(t);this.cleanUnusedBobies(),this.postCleanUnused(e)}},{key:"cleanUnusedBobies",value:function(){F.forEach((function(t){return _.removeBody(t)})),F=[]}},{key:"start",value:(a=regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new w.b,n.addChild(r),o=new w.b,n.addChild(o),I=new b(o),t.next=7,this.load();case 7:i=g.a.from(m.Texture.from("back1.png")),r.addChild(i),this.createStates(),a=function(){return{width:innerWidth,height:innerHeight}},u=function(){var t=a(),n=t.width,i=t.height;e.renderer.resize(n,i),N.realHeight=i,D.height=i,D.scale.x=D.scale.y;var u=i/N.originalHeight;N.scale=u,o.scale.set(u,u),r.scale.set(u,u),r.position.set(.5*n-.5*r.width,.5*i-.5*r.height),o.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height),D.position.set(r.position.x+.5*r.width,r.position.y+.5*r.height)},window.addEventListener("resize",u),u();case 14:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){A(o,n,r,i,u,"next",t)}function u(t){A(o,n,r,i,u,"throw",t)}i(void 0)}))},function(t,e){return u.apply(this,arguments)})}])&&L(e.prototype,n),r&&L(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){W(i,r,o,a,u,"next",t)}function u(t){W(i,r,o,a,u,"throw",t)}a(void 0)}))}}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var G=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,o,i,a,u,c,s,l,f,p,h;return e=t,(n=[{key:"showGlobalLeaders",value:function(t){}},{key:"shouldLeadersShow",value:function(){return!1}},{key:"shouldPlayFirstAds",value:function(){return!1}},{key:"shouldShareShow",value:function(){return!1}},{key:"shouldScalePlayer",value:function(){return!1}},{key:"gameplayStart",value:function(){}},{key:"gameplayStop",value:function(){}},{key:"createShortcut",value:(h=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"showInvitePage",value:function(){}},{key:"shareScore",value:function(t){}},{key:"startLoading",value:function(){}},{key:"finishLoading",value:(p=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"loadingProgress",value:function(t){}},{key:"performHapticFeedback",value:function(){}},{key:"getFriends",value:(f=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getPlayerEntry",value:function(){}},{key:"setStorageData",value:(l=U(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"getStorageData",value:(s=U(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})},{key:"setScore",value:(c=U(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"getScore",value:(u=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"init",value:(a=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:!0,language:"en",gameKey:"",secretKey:""});case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"showInter",value:(i=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"showReward",value:(o=U(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"atatappLink",value:function(){return""}}])&&H(e.prototype,n),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Y;function V(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function K(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){V(i,r,o,a,u,"next",t)}function u(t){V(i,r,o,a,u,"throw",t)}a(void 0)}))}}!function(t){t[t.RewardedVideo=2]="RewardedVideo",t[t.Interstitial=4]="Interstitial"}(Y||(Y={}));var X,J=function(){try{return localStorage}catch(t){return}},q=!0,$=function(){var t=K(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){(X=new G)&&X.init().then((function(e){t(e)})).catch((function(t){tu({error:"initSocial"}),e()}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=K(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(r=J())||void 0===r||r.setItem(e,n),t.next=3,X.setStorageData(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Z=function(){var t=K(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getStorageData(e,n);case 2:return(r=t.sent)===n&&(r=(null===(o=J())||void 0===o?void 0:o.getItem(e))||n),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),tt=function(){var t=K(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,D&&D.show(),r=s.muteMusic,o=s.muteSounds,s.muteMusic=!0,s.muteSounds=!0,t.t0=e,t.next=t.t0===Y.Interstitial?9:t.t0===Y.RewardedVideo?13:17;break;case 9:return t.next=11,X.showInter();case 11:return n=!0,t.abrupt("break",17);case 13:return t.next=15,X.showReward();case 15:return n=t.sent,t.abrupt("break",17);case 17:return q=!1,D&&D.hide(),s.muteMusic=r,s.muteSounds=o,t.abrupt("return",n);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=K(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",X.finishLoading());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nt=function(){X.gameplayStart()};function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,t);var e,n,r,o=at(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,n&&ot(e.prototype,n),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(w.b);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ht(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ht(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mt(t)););return t}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt,kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(i,t);var e,n,r,o=dt(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),wt(bt(n=o.call(this)),"normalTexture",void 0),wt(bt(n),"downTexture",void 0),wt(bt(n),"isDisabled",!1),wt(bt(n),"isDown",void 0),wt(bt(n),"btn",void 0),n.normalTexture=""===t?k.db.WHITE:k.db.from(t),n.downTexture=""===t?k.db.WHITE:k.db.from(e),n.btn=g.a.from(n.normalTexture),n.btn.anchor.set(.5,.5),n.addChild(n.btn),n.on("pointerdown",n.onButtonDown.bind(bt(n))).on("pointerup",n.onButtonUp.bind(bt(n))).on("pointerupoutside",n.onButtonUp.bind(bt(n))).on("pointerout",n.onButtonOut.bind(bt(n))),n.disabled=!1,n}return e=i,(n=[{key:"disabled",get:function(){return this.isDisabled},set:function(t){this.isDisabled=t,this.isDisabled?(this.interactive=!1,this.buttonMode=!1,this.btn.alpha=.5):(this.interactive=!0,this.buttonMode=!0,this.btn.alpha=1)}},{key:"onButtonOut",value:function(){this.isDisabled||this.isDown||(this.btn.texture=this.normalTexture)}},{key:"onButtonDown",value:function(t){this.isDisabled||(s.play("click"),this.isDown=!0,this.btn.texture=this.downTexture)}},{key:"onButtonUp",value:function(){this.isDisabled||(this.isDown=!1,this.btn.texture=this.normalTexture)}},{key:"destroy",value:function(t){this.off("pointerdown").off("pointerup").off("pointerupoutside").off("pointerout"),pt(mt(i.prototype),"destroy",this).call(this,t)}}])&&ft(e.prototype,n),r&&ft(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(w.b);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rt(t);if(e){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bt(t)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.NO=0]="NO",t[t.WALLS=Math.pow(2,0)]="WALLS",t[t.BALLS=Math.pow(2,1)]="BALLS",t[t.MOVER=Math.pow(2,2)]="MOVER",t[t.OBSTACLES=Math.pow(2,3)]="OBSTACLES"}(gt||(gt={}));var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(a,t);var e,n,r,i=Pt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),jt(Bt(e=i.call(this)),"body",void 0),jt(Bt(e),"shape",void 0),jt(Bt(e),"type",void 0),jt(Bt(e),"view",void 0),e.type=t,e.view=e.createView(),e.view.anchor.set(.5,.5),e.addChild(e.view),e}return e=a,(n=[{key:"createBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.view.alpha=1;var n=[this.position.x/50,this.position.y/50];this.shape=this.createShape(),this.body=new o.Body({type:t,position:n,mass:e,damping:0,angularDamping:0}),this.body.addShape(this.shape),_.addBody(this.body),this.body.userData=this}},{key:"clean",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyBody(t),this.parent&&this.parent.removeChild(this)}},{key:"isGoal",value:function(){return!1}},{key:"destroyBody",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.body&&(t?_.removeBody(this.body):F.push(this.body),this.body=void 0)}},{key:"correctType",value:function(){return 0!==this.type&&(this.type<20||250===this.type||251===this.type||this.type===Zt.skullType||this.type===Zt.anyType)}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(w.b);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nt(t);if(e){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dt(this,n)}}function Dt(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ft(t)}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lt(t,e)}(u,t);var e,n,r,o,i,a=It(u);function u(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Mt(this,u),zt(Ft(t=a.call(this)),"art",void 0),u.createTextures(),t.art=m.Sprite.from(u.textures[0]),t.art.anchor.set(.5,.5),t.addChild(t.art),t.scale.set(0,0),e&&t.animate(n),t}return e=u,n=[{key:"animate",value:(o=regeneratorRuntime.mark((function t(){var e,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.abrupt("return",new Promise((function(t){var r=0,o={a:0};x.a.to(o,{a:1,delay:e,duration:e+.4,onUpdate:function(){var t=Math.floor(2*o.a);t!==r&&(r=t,n.art.texture=u.textures[r])}}),x.a.to(n.scale,{x:1,y:1,duration:e+.1}),x.a.to(n.scale,{x:1.3,y:1.3,delay:e+.2,duration:.3}),x.a.to(n,{alpha:0,delay:e+.2,duration:.5,onComplete:function(){t()}})})));case 2:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Et(i,n,r,a,u,"next",t)}function u(t){Et(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}],r=[{key:"createTextures",value:function(){u.textures||(u.textures=[m.Texture.from("game_explosion_0.png"),m.Texture.from("game_explosion_1.png"),m.Texture.from("game_explosion_2.png")])}}],n&&At(e.prototype,n),r&&At(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(){return(Yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Vt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function Vt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qt(t)}function qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}zt(Wt,"textures",void 0);var Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(a,t);var e,n,r,i=Xt(a);function a(t,e,n){var r,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Ht(this,a),Qt(qt(r=i.call(this,n)),"sameColorNeighbors",new Map),Qt(qt(r),"stepsAmount",3),Qt(qt(r),"view2",void 0),Qt(qt(r),"steps",1),Qt(qt(r),"savedType",-1),Qt(qt(r),"skullMeter",1),Qt(qt(r),"_kinematic",!1),Qt(qt(r),"permanentSkull",!1),Qt(qt(r),"busy",!1),Qt(qt(r),"sensorShape",void 0),r.permanentSkull=n===a.skullType,r.position.set(t,e),u&&r.createBody(o.Body.DYNAMIC),r.view2=r.createView2(),r.view2.anchor.set(.5,.5),r.addChild(r.view2),r}return e=a,(n=[{key:"rotateView",value:function(t){this.view.rotation=t}},{key:"kinematic",get:function(){return this._kinematic},set:function(t){this._kinematic=t}},{key:"createBody",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;Yt($t(a.prototype),"createBody",this).call(this,t,e),this.sensorShape=new o.Circle({radius:(this.getRadius()+5)/50}),this.sensorShape.sensor=!0,this.sensorShape.material=N.material,this.sensorShape.data=!0,this.body.addShape(this.sensorShape)}},{key:"enableGravity",value:function(){this.body&&(this.body.gravityScale=1,this.body.mass=5,this.body.updateMassProperties(),this.shape.material=N.material)}},{key:"animateAndDestroy",value:function(){var t=this;this.killTween(),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),x.a.to(this.view2.scale,{x:0,y:0,duration:.2}),this.destroyBody()}},{key:"killTween",value:function(){x.a.killTweensOf(this.view.scale),x.a.killTweensOf(this.view2.scale)}},{key:"clean",value:function(){this.busy=!1,Yt($t(a.prototype),"clean",this).call(this)}},{key:"decreaseSkullMeter",value:function(){this.type!==a.skullType||this.permanentSkull||(this.skullMeter-=1,-1===this.skullMeter&&this.removeSkull())}},{key:"isSkull",value:function(){return this.type===a.skullType}},{key:"setSkull",value:function(){this.savedType=this.type,this.skullMeter=3,this.kinematic=!1,this.body.gravityScale=1,this.type=a.skullType,this.view.texture=m.Texture.from("".concat(this.type,".png")),this.view2.visible=!1}},{key:"removeSkull",value:function(){this.type=this.savedType,this.savedType=-1,this.view.texture=this.getTexture(),this.view2.visible=!0}},{key:"setBomb",value:function(){var t=this;this.busy||(this.type=a.bombType,this.view.texture=m.Texture.from("bomb.png"),this.view2.visible=!1,this.killTween(),this.busy=!0,x.a.to(this.view.scale,{x:.4,y:.4,duration:1,onUpdate:function(){t.updateShape()}}),x.a.to(this.view.scale,{x:1.2,y:1.2,delay:1,duration:.2,onUpdate:function(){t.updateShape()},onComplete:function(){var e=new Wt;t.addChild(e),t.animateAndDestroy()}}))}},{key:"boom",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.increase(this.stepsAmount-this.steps,t)}},{key:"getRadius",value:function(){return 35}},{key:"getTexture",value:function(){return m.Texture.from("".concat(this.type,".png"))}},{key:"getTexture2",value:function(){return m.Texture.from("".concat(this.type,"_.png"))}},{key:"createView",value:function(){var t=new m.Sprite(this.getTexture());return t.scale.set(.5,.5),t}},{key:"createView2",value:function(){var t=new m.Sprite(this.getTexture2());return t.scale.set(.5,.5),t}},{key:"createShape",value:function(){var t=new o.Circle({radius:this.getRadius()/50});return t.material=N.material,t}},{key:"increase",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.busy||!this.body)return 0;var r=0;this.busy=!0;var o=this.steps;if(t+=Math.max(0,this.sameColorNeighbors.size-1),this.steps+=t,this.steps>=this.stepsAmount){if(n&&(r=1),this.killTween(),this.sameColorNeighbors.forEach((function(t,o){if(o!==e){var i=o.increase(e.stepsAmount-o.steps,n);n&&(r+=i)}})),o<2)x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){e.clean()}}),x.a.to(this.view2.scale,{x:0,y:0,duration:.2});else{var i=this.view.width/2,u=0;x.a.to(this.view.scale,{x:0,y:0,duration:.3,onUpdate:function(){e.view.position.set(Math.cos(u)*i,Math.sin(u)*i),u+=Math.PI/15,i-=1},onComplete:function(){e.clean()}}),this.view2.scale.set(0,0)}this.destroyBody(n)}else{var c=a.scaleFactor*this.steps;x.a.to(this.view.scale,{x:c,y:c,duration:.2,onUpdate:function(){e.updateShape()},onComplete:function(){e.busy=!1}}),x.a.to(this.view2.scale,{x:c,y:c,duration:.2})}return r}},{key:"updateShape",value:function(){this.shape.radius=this.getRadius()/a.scaleFactor*this.view.scale.x/50,this.shape.updateBoundingRadius(),this.sensorShape.radius=(this.getRadius()+5)/a.scaleFactor*this.view.scale.x/50,this.sensorShape.updateBoundingRadius(),this.body.updateBoundingRadius(),this.body.updateMassProperties()}}])&&Gt(e.prototype,n),r&&Gt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ct);Qt(Zt,"BALL_SCORE",5),Qt(Zt,"BONUS_SCORE",100),Qt(Zt,"EXPLOSION_SCORE",50),Qt(Zt,"goalType",1e3),Qt(Zt,"endType",500),Qt(Zt,"bombType",2e3),Qt(Zt,"skullType",3e3),Qt(Zt,"anyType",4e3),Qt(Zt,"scaleFactor",.5);var te=n(4);function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ae(t);if(e){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(t,e){if(e&&("object"===ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(a,t);var e,n,r,i=oe(a);function a(t,e,n,r,u){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,0)).position.set(t,e),c.view.width=n,c.view.height=r,c.createBody(o.Body.STATIC),c.body.mass=0,c.body.angle=te.b*u,c}return e=a,(n=[{key:"createShape",value:function(){return new o.Box({width:this.view.width/50,height:this.view.height/50})}},{key:"createView",value:function(){var t=new g.a(m.Texture.WHITE);return t.anchor.set(.5),t.tint=0,t.visible=!1,t.alpha=0,t}},{key:"isObstacle",value:function(){return!1}},{key:"correctType",value:function(){return!1}},{key:"animateAndDestroy",value:function(){var t=this;x.a.killTweensOf(this.view.scale),x.a.to(this.view.scale,{x:0,y:0,duration:.2,onComplete:function(){t.clean()}}),this.destroyBody()}}])&&ne(e.prototype,n),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ct);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(t,e){if(e&&("object"===ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(c,t);var e,n,r,i,a,u=pe(c);function c(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),ve(ye(i=u.call(this,300)),"startX",void 0),ve(ye(i),"startY",void 0),ve(ye(i),"endX",void 0),ve(ye(i),"endY",void 0),i.startX=t,i.startY=e,i.endX=n,i.endY=r,i.position.set(t,e),t!==n&&(i.view.angle=90),i.createBody(o.Body.DYNAMIC),i}return e=c,(n=[{key:"createShape",value:function(){var t=new o.Box({width:4,height:4});return t.sensor=!0,t}},{key:"createView",value:function(){return new m.Sprite(m.Texture.from("powerup_rocket.png"))}},{key:"animate",value:(i=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n={x:e.startX,y:e.startY};x.a.to(n,{x:e.endX,y:e.endY,duration:1,ease:O.b.easeIn,onComplete:function(){e.clean(),t()},onUpdate:function(){e.body.position=[n.x/50,n.y/50]}})})));case 1:case"end":return t.stop()}}),t)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){se(o,n,r,a,u,"next",t)}function u(t){se(o,n,r,a,u,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&le(e.prototype,n),r&&le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(Ct);function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ge(){return(ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ke(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ke(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}function xe(t,e){return(xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Te(t);if(e){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){if(e&&("object"===me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pe(t)}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xe(t,e)}(i,t);var e,n,r,o=Oe(i);function i(t,e){var n,r,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e,Zt.goalType,!0),r=Pe(n),u=void 0,(a="delay")in r?Object.defineProperty(r,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[a]=u,n}return e=i,(n=[{key:"resetDeathCounter",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0)}},{key:"startCountDeath",value:function(){var t=this;this.delay||(this.delay=x.a.delayedCall(4,(function(){t.delay=void 0,t.emit("gameover")})))}},{key:"destroyBody",value:function(t){this.resetDeathCounter(),this.off("gameover"),ge(Te(i.prototype),"destroyBody",this).call(this,t)}},{key:"setSkull",value:function(){ge(Te(i.prototype),"setSkull",this).call(this),this.view.texture=m.Texture.from("3001.png")}},{key:"createView",value:function(){return new m.Sprite(this.getTexture())}},{key:"createView2",value:function(){return new m.Sprite(this.getTexture2())}},{key:"getTexture",value:function(){return m.Texture.from("hero.png")}},{key:"getTexture2",value:function(){return m.Texture.from("hero_.png")}},{key:"getRadius",value:function(){return 50}},{key:"isGoal",value:function(){return!0}}])&&we(e.prototype,n),r&&we(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Zt);function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Le(t);if(e){var o=Le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(t,e){if(e&&("object"===Re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ae(t)}function Ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var De=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_e(t,e)}(u,t);var e,n,r,o,i,a=Ee(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Ie(Ae(t=a.call(this,"","")),"_id",void 0),Ie(Ae(t),"icon",void 0),Ie(Ae(t),"txt",void 0),Ie(Ae(t),"amount",void 0),t.amount=1,t.txt=new m.Text(t.amount.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,.5),t.txt.x=90,t.txt.y=90,t.addChild(t.txt),t.icon=m.Sprite.from(m.Texture.from("bonus_ads.png")),t.icon.x=15,t.icon.y=35,t.addChild(t.icon),t.icon.visible=!1,t.on("pointerup",(function(){t.onPressed()})),t}return e=u,n=[{key:"id",get:function(){return this._id}},{key:"setData",value:(o=regeneratorRuntime.mark((function t(e,n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._id=e,this.normalTexture=n,this.downTexture=r,this.btn.texture=this.normalTexture,this.icon.visible=!1,t.next=7,Z(u.getStorageId(this.id),void 0);case 7:if(void 0!==(o=t.sent)){t.next=12;break}return o="1",t.next=12,Q(u.getStorageId(this.id),o);case 12:this.amount=parseInt(o),this.txt.text=o,this.updateTxt(),this.scale.set(.6,.6);case 16:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){je(i,n,r,a,u,"next",t)}function u(t){je(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n){return i.apply(this,arguments)})},{key:"updateTxt",value:function(){0===this.amount?(this.btn.alpha=.6,this.icon.visible=!0,this.txt.visible=!1):(this.btn.alpha=1,this.icon.visible=!1,this.txt.visible=!0),this.txt.text=this.amount.toString()}},{key:"onPressed",value:function(){this.amount>0?(this.amount--,Q(u.getStorageId(this.id),this.amount.toString()),this.updateTxt(),this.emit("activate",this.id)):(N.paused=!0,N.paused=!1,this.emit("activate",this.id))}}],r=[{key:"getStorageId",value:function(t){return"powerup_"+t.toString()}}],n&&Ce(e.prototype,n),r&&Ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(kt);function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function We(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ge(t);if(e){var o=Ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(t,e){if(e&&("object"===Fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return He(t)}function He(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(i,t);var e,n,r,o=We(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ye(He(t=o.call(this)),"bar",void 0),Ye(He(t),"barMask",void 0),Ye(He(t),"initialWidth",596),Ye(He(t),"initialHeight",30),Ye(He(t),"isFrozen",void 0),Ye(He(t),"delay",void 0),Ye(He(t),"frozen",void 0),Ye(He(t),"frozenBack",void 0),Ye(He(t),"back",void 0),Ye(He(t),"barBorder",void 0),t.back=m.Sprite.from(m.Texture.from("timer_1.png")),t.addChild(t.back),t.frozenBack=m.Sprite.from(m.Texture.from("timer_frozen_1.png")),t.frozenBack.visible=!1,t.addChild(t.frozenBack),t.bar=m.Sprite.from(m.Texture.from("timer_2.png")),t.addChild(t.bar),t.barMask=new m.Sprite(m.Texture.WHITE),t.barMask.x=16,t.barMask.width=0,t.barMask.height=t.bar.height,t.addChild(t.barMask),t.bar.mask=t.barMask,t.barBorder=m.Sprite.from(m.Texture.from("timer_0.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.x=100,t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.frozen=new m.Sprite(m.Texture.from("timer_frozen_0.png")),t.frozen.visible=!1,t.addChild(t.frozen),t}return e=i,(n=[{key:"setProgress",value:function(t){this.barMask.width=this.initialWidth*t,this.barBorder.visible=t>.01&&t<.99,this.barBorder.x=this.barMask.x+this.initialWidth*t}},{key:"unFreeze",value:function(){var t=this;this.isFrozen=!1,x.a.killTweensOf(this.frozen),x.a.to(this.frozenBack,{alpha:0,duration:.3}),x.a.to(this.back,{alpha:1,duration:.3}),x.a.to(this.frozen,{alpha:0,duration:.3,onComplete:function(){t.frozen.visible=!1,t.frozenBack.visible=!1}})}},{key:"freeze",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.isFrozen=!0,this.frozen.visible=!0,this.frozen.alpha=0,this.frozenBack.visible=!0,this.frozenBack.alpha=0,x.a.killTweensOf(this.frozen),x.a.killTweensOf(this.frozenBack),x.a.killTweensOf(this.back),x.a.to(this.frozen,{alpha:1,duration:.3}),x.a.to(this.frozenBack,{alpha:1,duration:.3}),x.a.to(this.back,{alpha:0,duration:.3}),this.delay&&this.delay.kill(),-1!==e&&(this.delay=x.a.delayedCall(e,(function(){t.unFreeze()})))}},{key:"clear",value:function(){this.delay&&(this.delay.kill(),this.delay=void 0),x.a.killTweensOf(this.frozen),this.frozen.visible=!1,this.frozenBack.visible=!1,this.back.alpha=1,this.isFrozen=!1}}])&&Ne(e.prototype,n),r&&Ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Je(t,e){return(Je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ze(t);if(e){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(t,e){if(e&&("object"===Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qe(t)}function Qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var en=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(i,t);var e,n,r,o=qe(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),tn(Qe(t=o.call(this)),"bar",void 0),tn(Qe(t),"max",void 0),tn(Qe(t),"current",void 0),tn(Qe(t),"initialWidth",170),tn(Qe(t),"barMask",void 0),tn(Qe(t),"barBorder",void 0),tn(Qe(t),"barShine",void 0);var e=m.Sprite.from(m.Texture.from("battery_empty.png"));return t.addChild(e),t.bar=m.Sprite.from(m.Texture.from("battery_full.png")),t.addChild(t.bar),t.barMask=new m.Sprite(m.Texture.WHITE),t.barMask.width=0,t.barMask.height=t.bar.height,t.barMask.x=27,t.addChild(t.barMask),t.barBorder=m.Sprite.from(m.Texture.from("battery_border.png")),t.barBorder.anchor.set(.5,.5),t.barBorder.y=.5*t.bar.height,t.addChild(t.barBorder),t.barBorder.visible=!1,t.barShine=new m.AnimatedSprite([m.Texture.from("battery_charging0.png"),m.Texture.from("battery_charging1.png"),m.Texture.from("battery_charging2.png"),m.Texture.from("battery_charging1.png")]),t.addChild(t.barShine),t.barShine.animationSpeed=.3,t.barShine.visible=!1,t.bar.mask=t.barMask,t.current=0,t.max=10,t}return e=i,(n=[{key:"maximum",set:function(t){this.max=t}},{key:"reset",value:function(t){x.a.killTweensOf(this.barMask),this.current=0,t?this.barMask.width=0:x.a.to(this.barMask,{width:0,duration:.1}),this.barBorder.visible=!1}},{key:"update",value:function(t){var e=this;this.current+=t,this.current=Math.min(this.current,this.max),this.barShine.visible=!0,this.barShine.gotoAndPlay(0);var n=this.current>=this.max,r=this.current/this.max;return this.barBorder.visible=r>.05&&r<.9,x.a.killTweensOf(this.barMask),x.a.to(this.barMask,{width:this.initialWidth*r,duration:.2}),x.a.to(this.barBorder,{x:this.barMask.x+this.initialWidth*r,duration:.2,onComplete:function(){e.barShine.visible=!1,e.barShine.stop()}}),n&&(this.barShine.visible=!1,this.barShine.stop(),this.current=0,x.a.to(this.barMask,{width:0,delay:.2,duration:.2}),x.a.to(this.barBorder,{x:this.barMask.x,duration:.2,onUpdate:function(){e.barBorder.visible=r>.05&&r<.9}})),n}}])&&Xe(e.prototype,n),r&&Xe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function an(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sn(t);if(e){var o=sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return un(this,n)}}function un(t,e){if(e&&("object"===nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cn(t)}function cn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sn(t){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ln(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&on(t,e)}(i,t);var e,n,r,o=an(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ln(cn(t=o.call(this)),"back",void 0),ln(cn(t),"blocks",void 0),ln(cn(t),"startX",void 0),ln(cn(t),"startY",void 0),ln(cn(t),"txt",void 0),t.blocks=[],t.back=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50),t.back.width=.96*N.originalWidth,t.back.height=300,t.back.position.set(.5*-t.back.width,0),t.addChild(t.back),t.txt=new m.Text("From: Leopold",{fontSize:25,fill:0,fontWeight:"bold",align:"left"}),t.txt.anchor.set(0,.5),t.txt.position.set(.5*-t.back.width+40,30),t.addChild(t.txt),t.clear(),t}return e=i,(n=[{key:"setLines",value:function(t){this.txt.text="From: "+i.senders[Math.floor(Math.random()*i.senders.length)];var e=t.length;this.back.height=75*e+70,this.startX=-300,this.startY=95;for(var n=0;n<e;n++){for(var r=this.startX,o=0;o<t[n].length;o++){var a=new Zt(r,this.startY,t[n][o],!1);this.addBlock(a),r+=74}this.startY+=70}}},{key:"addBlock",value:function(t){this.blocks.push(t),this.addChild(t),t.visible=!1}},{key:"show",value:function(){this.blocks.forEach((function(t){t.visible=!0}))}},{key:"clear",value:function(){var t=this;this.blocks.forEach((function(e){t.removeChild(e)})),this.blocks=[]}}])&&rn(e.prototype,n),r&&rn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yn(t,e){return(yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mn(t);if(e){var o=mn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vn(this,n)}}function vn(t,e){if(e&&("object"===pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bn(t)}function bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mn(t){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ln(fn,"senders",["Mom","Dad","Boss","Red Hair","Stupid guy","Handsome stranger","Vampire","Lady Hamilton","Dude","Sis","Bro","Grany","Kurt","Kristin","Leo Di","Emergency"]);var wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yn(t,e)}(i,t);var e,n,r,o=dn(i);function i(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),e=bn(t),r=void 0,(n="txt")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;var a=new m.Sprite(m.Texture.from("letter_button.png"));return a.anchor.set(.5,.5),t.addChild(a),t.txt=new m.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:60,fill:0,align:"center",fontWeight:"bold"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"letter",set:function(t){" "===t&&(t="*"),this.txt.text=t}}])&&hn(e.prototype,n),r&&hn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(t,e){return(On=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bn(t);if(e){var o=Bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pn(this,n)}}function Pn(t,e){if(e&&("object"===gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tn(t)}function Tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bn(t){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&On(t,e)}(u,t);var e,n,r,o,i,a=Sn(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Rn(Tn(t=a.call(this)),"bound",new m.Rectangle),Rn(Tn(t),"back",void 0),Rn(Tn(t),"letters",void 0),Rn(Tn(t),"stringLetters",void 0),Rn(Tn(t),"getPoint",void 0),t.back=m.Sprite.from(m.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.addChild(t.back),t.stringLetters=t.getLetters(),t.letters=[];for(var e=0;e<t.stringLetters.length;e++){var n=new wn;n.visible=!1,t.addChild(n),t.letters.push(n)}return t}return e=u,(n=[{key:"start",value:(o=regeneratorRuntime.mark((function t(e){var n,r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.getPoint=e,this.visible=!0,this.back.alpha=0,n=[],r=0,o=0;o<this.stringLetters.length;o++)r++," "===this.stringLetters[o]&&(n.push(r),r=0);return 0===n.length?n.push(this.stringLetters.length):n.push(r),t.abrupt("return",new Promise((function(t){x.a.to(i.back,{alpha:.7,duration:1});for(var e=0,r=-30,o=n[e],a=60/(o-1),u=100*o,c=.5*-u,s=u/(o-1),l=-400,f=[],p=i.stringLetters.length,h=0;h<p;h++){var y=i.letters.pop();f.push(y),y.visible=!0,y.letter=i.stringLetters[h],y.position.set(-400,700),y.scale.set(.1,.1),y.angle=r-30,x.a.to(y,{angle:r,x:c,y:l,delay:.1*h,duration:.5}),x.a.to(y.scale,{x:1,y:1,delay:.1*h,duration:.5})," "===i.stringLetters[h]?(e++,r=-30,a=60/((o=n[e])-1),c=.5*-(u=100*o),l+=140,s=u/(o-1)):(r+=a,c+=s)}x.a.to(i.back,{alpha:0,delay:1.2,duration:.5}),x.a.delayedCall(1+.1*(i.stringLetters.length-1),(function(){i.animate(f).then((function(){t()}))}))})));case 8:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){kn(i,n,r,a,u,"next",t)}function u(t){kn(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"clean",value:function(){this.getPoint=void 0,x.a.killTweensOf(this.back)}},{key:"goOut",value:function(){}}])&&xn(e.prototype,n),r&&xn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mn(){return(Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=An(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function An(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nn(t)););return t}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function In(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nn(t);if(e){var o=Nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Dn(this,n)}}function Dn(t,e){if(e&&("object"===Cn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fn(t)}function Fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ln(t,e)}(i,t);var e,n,r,o=In(i);function i(){var t;_n(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zn(Fn(t=o.call.apply(o,[this].concat(n))),"points",[]),t}return e=i,(n=[{key:"activeBound",get:function(){if(this.points.length>0){for(var t=[],e=0;e<this.points.length;e++){var n=this.points[e];t.push(new m.Rectangle(n[0]-1,n[1]-1,2,2))}return this.points=[],t}}},{key:"clean",value:function(){this.points=[],Mn(Nn(i.prototype),"clean",this).call(this)}},{key:"getLetters",value:function(){return["B","O","O","M"," ","B","O","N","U","S"]}},{key:"animate",value:function(t){var e=this;return this.points=[],new Promise((function(n){if(e.getPoint){for(var r=function(n){var r=e.getPoint();if(!r)return"continue";x.a.to(t[n].scale,{x:0,y:0,duration:.2}),x.a.to(t[n],{x:50*r[0],y:50*r[1],duration:.2,onComplete:function(){e.points.push(r)}})},o=0;o<t.length;o++)r(o);x.a.delayedCall(.25,(function(){n()}))}else n()}))}}])&&En(e.prototype,n),r&&En(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(jn);function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xn(t);if(e){var o=Xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vn(this,n)}}function Vn(t,e){if(e&&("object"===Un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kn(t)}function Kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gn(t,e)}(i,t);var e,n,r,o=Yn(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Jn(Kn(t=o.call(this)),"scoreTxt",void 0),Jn(Kn(t),"scoreNumber",void 0);var e=m.Sprite.from(m.Texture.from("score_place.png"));return t.addChild(e),t.scoreNumber=0,t.scoreTxt=new m.Text(t.scoreFormatted(0),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:16777215,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.position.set(.5*e.width,.5*e.height),t.addChild(t.scoreTxt),t}return e=i,(n=[{key:"score",set:function(t){var e=this,n={score:this.scoreNumber};this.scoreTxt.text=this.scoreFormatted(this.scoreNumber),x.a.to(n,{score:t,duration:.1,ease:O.f.easeNone,onUpdate:function(){e.scoreTxt.text=e.scoreFormatted(Math.floor(n.score))}}),this.scoreNumber=t}},{key:"scoreFormatted",value:function(t){for(var e=t.toString(),n=6-e.length,r=0;r<n;r++)e="0"+e;return e}}])&&Hn(e.prototype,n),r&&Hn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nr(t);if(e){var o=nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return er(this,n)}}function er(t,e){if(e&&("object"===$n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zn(t,e)}(i,t);var e,n,r,o=tr(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"pause_button.png","pause_button.png")}return e=i,n&&Qn(e.prototype,n),r&&Qn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(kt);function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ur(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lr(t);if(e){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(t,e){if(e&&("object"===or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sr(t)}function sr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ar(t,e)}(i,t);var e,n,r,o=ur(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),fr(sr(t=o.call(this)),"rect",void 0),fr(sr(t),"laser",void 0),t.laser=m.Sprite.from(m.Texture.from("direction.png")),t.laser.height=500,t.laser.rotation=Math.PI/2,t.laser.alpha=0,t.laser.anchor.set(.5,.5),t.addChild(t.laser),t.laser.visible=!1,t}return e=i,(n=[{key:"activeBound",get:function(){if(this.rect)return[this.rect]}},{key:"getLetters",value:function(){return["{","}"]}},{key:"animate",value:function(t){var e=this;return new Promise((function(n){if(e.getPoint||2!==t.length){var r=e.getPoint();x.a.to(t[0],{x:-300,angle:0,y:50*r,duration:.2}),x.a.to(t[1],{x:300,angle:0,y:50*r,duration:.2}),x.a.delayedCall(.2,(function(){e.laser.visible=!0,e.laser.y=50*r,e.rect=new m.Rectangle(-7,r-.5,14,1),x.a.to(e.laser,{alpha:1,duration:.2}),x.a.delayedCall(.2,(function(){e.rect=void 0,x.a.to(t[0],{alpha:0,duration:.2}),x.a.to(t[1],{alpha:0,duration:.2}),x.a.to(e.laser,{alpha:0,duration:.2}),x.a.delayedCall(.2,(function(){n()}))}))}))}else n()}))}}])&&ir(e.prototype,n),r&&ir(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(jn);function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function br(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wr(t);if(e){var o=wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mr(this,n)}}function mr(t,e){if(e&&("object"===hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gr,kr,xr,Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vr(t,e)}(i,t);var e,n,r,o=br(i);function i(){return yr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"getLetters",value:function(){return i.all[Math.floor(Math.random()*i.all.length)]}}])&&dr(e.prototype,n),r&&dr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Wn);function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Br(t,e){return(Br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cr(t);if(e){var o=Cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jr(this,n)}}function jr(t,e){if(e&&("object"===Sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}gr=Or,kr="all",xr=["YOU ARE JUST GREAT".split(""),"YOU ARE GREAT".split(""),"SUPER PUPER BOOM".split(""),"WISH YOU LUCK, DUDE!".split("")],kr in gr?Object.defineProperty(gr,kr,{value:xr,enumerable:!0,configurable:!0,writable:!0}):gr[kr]=xr;var _r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Br(t,e)}(i,t);var e,n,r,o=Rr(i);function i(){return Pr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"isObstacle",value:function(){return!0}}])&&Tr(e.prototype,n),r&&Tr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(ue);function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ar(t,e){return(Ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dr(t);if(e){var o=Dr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ir(this,n)}}function Ir(t,e){if(e&&("object"===Er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ar(t,e)}(a,t);var e,n,r,i=Lr(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t[0],t[1],100,100,0)).view.scale.set(1,1),e.type=250,e}return e=a,(n=[{key:"createView",value:function(){var t=new m.Sprite(m.Texture.from("app_static.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new o.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&Mr(e.prototype,n),r&&Mr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(_r);function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ur(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr(t);if(e){var o=Yr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr(this,n)}}function Hr(t,e){if(e&&("object"===Nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gr(t)}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kr,Xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wr(t,e)}(a,t);var e,n,r,i=Ur(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Vr(Gr(n=i.call(this,t[0],t[1],100,100,0)),"moving",!1),Vr(Gr(n),"lives",void 0),Vr(Gr(n),"txt",void 0),Vr(Gr(n),"explosion",void 0),n.type=251,n.lives=e,n.txt=new m.Text(n.lives.toString(),{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),n.txt.anchor.set(.5,.5),n.txt.y=20,n.view.addChild(n.txt),n.view.scale.set(1,1),n.explosion=new Wt(!1),n.explosion.visible=!1,n.addChild(n.explosion),n}return e=a,(n=[{key:"changePosition",value:function(){var t=this;if(!this.moving){this.lives--;var e=this.lives<=0;this.moving=!0;var n=this.view.scale.x;x.a.to(this.view.scale,{x:.01,y:.01,duration:.1,onUpdate:function(){t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),t.body.updateBoundingRadius(),t.body.updateMassProperties()},onComplete:function(){if(e)t.destroyBody(),t.explosion.visible=!0,t.explosion.animate().then((function(){t.clean()}));else{t.txt.text=t.lives.toString();var r=9*Math.random()-4.5,o=5*-Math.random();t.body.position=[r,o],x.a.to(t.view.scale,{x:n,y:n,duration:.4,onUpdate:function(){t.shape.width=t.shape.height=100*t.view.scale.x/50,t.shape.updateBoundingRadius(),t.body.updateBoundingRadius(),t.body.updateMassProperties()},onComplete:function(){t.moving=!1}})}}})}}},{key:"createView",value:function(){var t=new m.Sprite(m.Texture.from("app_random.png"));return t.anchor.set(.5),t}},{key:"createShape",value:function(){var t=new o.Box({width:this.view.width/50,height:this.view.height/50});return t.data=!0,t}}])&&zr(e.prototype,n),r&&zr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(_r);function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(t,e)||$r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(t,e){if(t){if("string"==typeof t)return Qr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qr(t,e):void 0}}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function to(t,e){return(to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function eo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oo(t);if(e){var o=oo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return no(this,n)}}function no(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ro(t)}function ro(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oo(t){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.Begin="begin",t.Moving="moving",t.Heart="heart",t.NewLine="newLine",t.Recharge="recharge",t.Unbreak="unbreak",t.IAPBonus="iapbonus",t.IAPBonus2="iapbonus2",t.ChangePosition="changed",t.Skull="skull",t.AnyType="anytype"}(Kr||(Kr={}));var ao=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&to(t,e)}(i,t);var e,n,r,o=eo(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),io(ro(t=o.call(this)),"allConditions",void 0),io(ro(t),"textMap",void 0),io(ro(t),"tutorial",void 0),io(ro(t),"txt",void 0),io(ro(t),"back",void 0),t.allConditions=new Map,t.textMap=new Map,t.textMap.set(Kr.Begin,"Save the Heart by moving it to the top!"),t.textMap.set(Kr.Moving,"Tap the screen and move your finger to aim. Release to shoot."),t.textMap.set(Kr.Heart,"The Heart is free and happy now!"),t.textMap.set(Kr.NewLine,"It's time for a new emoji load!"),t.textMap.set(Kr.Recharge,"Charge it fully to get a bonus!"),t.textMap.set(Kr.Unbreak,"This app is invincible!"),t.textMap.set(Kr.IAPBonus,"but this bonuses will help you."),t.textMap.set(Kr.IAPBonus2,"and this one too!"),t.textMap.set(Kr.ChangePosition,"This app should be destroyed! Aim to it!"),t.textMap.set(Kr.Skull,"Do not touch this Skulls by Heart or by throwed Emoji!"),t.textMap.set(Kr.AnyType,"This ball is matching with any emoji!"),t.back=m.Sprite.from(m.Texture.WHITE),t.back.interactive=!0,t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.addChild(t.back),t.back.position.set(.5*-t.back.width,.5*-t.back.height),t.back.tint=0,t.back.alpha=.3,t.tutorial=new m.NineSlicePlane(m.Texture.from("tutorial.png"),52,52,90,93),t.addChild(t.tutorial),t.txt=new m.Text("",{fontSize:50,fontWeight:"bold",fill:16777215,wordWrap:!0,wordWrapWidth:300}),t.addChild(t.txt),t.visible=!1,t}return e=i,(n=[{key:"addCondition",value:function(t,e){this.allConditions.set(t,e)}},{key:"update",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=$r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.allConditions);try{for(e.s();!(t=e.n()).done;){var n=qr(t.value,2),r=n[0],o=(0,n[1])();if(o.success){this.show(r,o.data),this.allConditions.delete(r);break}}}catch(t){e.e(t)}finally{e.f()}}},{key:"isDone",value:function(t){return void 0===this.allConditions.get(t)}},{key:"show",value:function(t,e){var n=this,r=this.textMap.get(t);this.txt.text=r,this.tutorial.scale.set(1,1),this.tutorial.pivot.set(this.txt.width+100,this.txt.height+100),this.tutorial.width=this.txt.width+100,this.tutorial.height=this.txt.height+100,this.tutorial.scale.set(0,0);var o={x:1,y:1},i=e.pos,a=e.scale;o.x*=a.x,o.y*=a.y,this.tutorial.position.copyFrom(i),this.txt.position.copyFrom(i),1===a.x?this.txt.x-=60+this.txt.width:this.txt.x+=60,1===a.y?this.txt.y-=60+this.txt.height:this.txt.y+=52,this.txt.scale.set(0,0),this.back.alpha=0;var u=o.x/15,c=o.y/15,s=window.setInterval((function(){n.back.alpha+=.02,n.tutorial.scale.x+=u,n.tutorial.scale.y+=c,n.txt.scale.x+=1/15,n.txt.scale.y+=1/15,n.back.alpha>=.3&&window.clearInterval(s)}),10);this.visible=!0,Ya(!0,!0),window.setTimeout((function(){Ya(!1,!0),x.a.globalTimeline.pause(),N.paused=!0,n.back.on("pointerup",(function(t){t.stopPropagation(),t.stopped=!0,n.hide()}))}),200)}},{key:"hide",value:function(){var t=this;N.paused=!1,x.a.globalTimeline.resume(),x.a.to(this,{alpha:0,duration:.3,onComplete:function(){t.visible=!1,t.alpha=1}}),this.back.off("pointerup")}}])&&Zr(e.prototype,n),r&&Zr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container),uo=n(198);function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lo(t,e){return(lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yo(t);if(e){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(t,e){if(e&&("object"===co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ho(t)}function ho(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yo(t){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e)}(i,t);var e,n,r,o=fo(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),vo(ho(t=o.call(this)),"iconL0",void 0),vo(ho(t),"iconR0",void 0),vo(ho(t),"iconL1",void 0),vo(ho(t),"iconR1",void 0);var e=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);e.tint=0,e.width=370,e.height=250,e.pivot.set(185,100),t.addChild(e),e.y=-50;var n=new m.Text("level powerups:",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:35,fill:16777215,align:"center",fontWeight:"bold"});n.anchor.set(.5,.5),n.position.set(0,-115),t.addChild(n);var r=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);r.pivot.set(80,80),r.width=160,r.height=160,t.addChild(r);var a=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);a.pivot.set(80,80),a.width=160,a.height=160,t.addChild(a),r.position.set(-85,0),a.position.set(85,0);var u=new m.Container,c=new m.Container;t.addChild(u),t.addChild(c),u.position.x=-85,c.position.x=85;var s=m.Sprite.from(m.Texture.WHITE);s.anchor.set(0,.5),s.width=140,s.height=140,t.addChild(s);var l=m.Sprite.from(m.Texture.WHITE);return l.anchor.set(0,.5),l.width=140,l.height=140,t.addChild(l),s.position.x=-145,l.position.x=5,u.mask=s,c.mask=l,t.iconL0=m.Sprite.from(i.randomTexture),t.iconL0.anchor.set(.5,.5),t.iconL0.scale.set(.5,.5),u.addChild(t.iconL0),t.iconR0=m.Sprite.from(i.randomTexture),t.iconR0.anchor.set(.5,.5),t.iconR0.scale.set(.5,.5),c.addChild(t.iconR0),t.iconL1=m.Sprite.from(i.randomTexture),t.iconL1.anchor.set(.5,.5),t.iconL1.scale.set(.5,.5),u.addChild(t.iconL1),t.iconL1.y=140,t.iconR1=m.Sprite.from(i.randomTexture),t.iconR1.anchor.set(.5,.5),t.iconR1.scale.set(.5,.5),c.addChild(t.iconR1),t.iconR1.y=140,t}return e=i,r=[{key:"prepareTextures",value:function(){this.allTextures=new Map,this.allTextures.set(Si.RocketUp,m.Texture.from("powerup_rocket.png")),this.allTextures.set(Si.Kill,m.Texture.from("powerup_bomb.png")),this.allTextures.set(Si.Freeze,m.Texture.from("powerup_freeze.png"))}},{key:"getTexture",value:function(t){return this.allTextures.get(t)}},{key:"randomTexture",get:function(){var t=Array.from(this.allTextures.keys()),e=t[Math.floor(Math.random()*t.length)];return this.getTexture(e)}}],(n=[{key:"start",value:function(t){var e=this;x.a.to({a:0},{a:1,duration:1,onUpdate:function(){if(e.iconL0.y>=140){e.iconL0.texture=i.randomTexture,e.iconR0.texture=i.randomTexture;var t=e.iconL0;e.iconL0=e.iconL1,e.iconL1=t,t=e.iconR0,e.iconR0=e.iconR1,e.iconR1=t,e.iconL0.y=0,e.iconR0.y=0}e.iconL0.y+=20,e.iconR0.y+=20,e.iconL1.y=e.iconL0.y-140,e.iconR1.y=e.iconR0.y-140},onComplete:function(){e.iconL0.y=0,e.iconR0.y=0,e.iconR1.y=140,e.iconL1.y=140,e.iconL0.texture=i.getTexture(t[0]),e.iconR0.texture=i.getTexture(t[1])}})}}])&&so(e.prototype,n),r&&so(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function go(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Po(t);if(e){var o=Po(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oo(this,n)}}function Oo(t,e){if(e&&("object"===mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return So(t)}function So(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function To(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}vo(bo,"allTextures",void 0);var Bo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(u,t);var e,n,r,o,i,a=xo(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),To(So(t=a.call(this)),"back",void 0),To(So(t),"popup",void 0),To(So(t),"callback",void 0),To(So(t),"scoreTxt",void 0),To(So(t),"timeBonusTxt",void 0),To(So(t),"title",void 0),To(So(t),"stars",void 0),To(So(t),"emitter",void 0),To(So(t),"prizeIcon",void 0),To(So(t),"heart",void 0),To(So(t),"onTickEvent",(function(e){t.emitter.update(e/70)})),t.back=m.Sprite.from(m.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.back.tint=0,t.back.alpha=0,t.addChild(t.back);var e=new m.Container;t.addChild(e),t.popup=new m.Container,t.popup.scale.set(0,0),t.addChild(t.popup);var n=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);n.pivot.set(300,400),n.width=600,n.height=800,t.popup.addChild(n),t.title=new m.Text("Well done!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"}),t.title.anchor.set(.5,.5),t.title.position.y=-310,t.popup.addChild(t.title),t.scoreTxt=new m.Text("0",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:120,fill:0,align:"center",letterSpacing:7,fontWeight:"bold"}),t.scoreTxt.anchor.set(.5,.5),t.scoreTxt.y=80,t.popup.addChild(t.scoreTxt),t.timeBonusTxt=new m.Text("+ Time Bonus!",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:40,fill:6242531,align:"center"}),t.timeBonusTxt.anchor.set(.5,.5),t.popup.addChild(t.timeBonusTxt),t.timeBonusTxt.visible=!1,t.heart=new m.Container;var r=new m.Sprite(m.Texture.from("hero.png"));r.anchor.set(.5,.5),t.heart.addChild(r);var o=new m.Sprite(m.Texture.from("hero_.png"));o.anchor.set(.5,.5),t.heart.addChild(o),t.heart.scale.set(1.3,1.3),t.heart.position.y=-1e3,t.addChild(t.heart),t.stars=[];for(var i=-120,c=0;c<3;c++){var s=m.Sprite.from(m.Texture.from("like.png"));s.anchor.set(.5,.5),s.position.set(i,-150),t.popup.addChild(s),t.stars.push(s),s.visible=!1,i+=120}t.popup.addChild(t.stars[1]),t.prizeIcon=new m.Sprite,t.prizeIcon.anchor.set(.5,.5),t.prizeIcon.scale.set(.5,.5),t.prizeIcon.position.copyFrom(t.stars[2]),t.prizeIcon.x+=50,t.prizeIcon.y-=50,t.popup.addChild(t.prizeIcon),t.prizeIcon.visible=!1;var l=new kt("ok_button.png","ok_button.png");return l.on("pointerup",(function(){t.hide()})),l.position.y=300,t.popup.addChild(l),t.emitter=new uo.a(e,"like.png",N.particles),t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n,r,o,i,a,u){var c,s,l,f,p,h,y,d,v,b,w=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timeBonusTxt.visible=!1,this.heart.position.y=-1e3,this.heart.alpha=1,c=N.levels[a].idealTime,s=e&&r<c?Math.round(1e3*(1-r/c)):0,console.log(a.toString(),u,r,s),this.title.text=e?"Well done!":"So sorry...",!(void 0!==(l=u?u[0]:void 0)&&n+s>=o[2])){t.next=25;break}return t.next=11,Z("powerupDone"+a.toString(),"0");case 11:if(f=t.sent,console.log("pd",f),"0"!==f){t.next=25;break}return this.prizeIcon.visible=!0,this.prizeIcon.scale.set(0,0),this.prizeIcon.texture=bo.getTexture(l),t.next=19,Z(De.getStorageId(l),"0");case 19:return p=t.sent,h=parseInt(p),t.next=23,Q(De.getStorageId(l),(h+1).toString());case 23:return t.next=25,Q("powerupDone"+a.toString(),"1");case 25:for(y=0;y<this.stars.length;y++)(d=this.stars[y]).visible=!0,d.scale.set(0,0),d.showed=!1;this.callback=i,this.visible=!0,this.back.alpha=0,this.popup.scale.set(0,0),v={s:0},this.scoreTxt.text="0",b=function(){w.scoreTxt.text=Math.round(v.s).toString();for(var t=0;t<o.length;t++){var e=w.stars[t];if(v.s>=o[t]&&!e.showed){e.showed=!0;var n=1===t?1.5:1;x.a.to(e.scale,{x:n,y:n,duration:.2,ease:O.a.easeOut}),w.prizeIcon.visible&&2===t&&x.a.to(w.prizeIcon.scale,{x:.5,y:.5,duration:.2,ease:O.a.easeOut})}}},x.a.to(v,{s:n,delay:1,duration:2,onUpdate:b,onComplete:function(){v.s=n,s>0&&(n+=s,w.timeBonusTxt.visible=!0,w.timeBonusTxt.scale.set(5,5),x.a.to(w.timeBonusTxt.scale,{x:1,y:1,duration:.5,onComplete:function(){x.a.to(v,{s:n,duration:1,onUpdate:b})}}))}}),x.a.to(this.back,{alpha:.5,duration:.5}),x.a.to(this.popup.scale,{x:1,y:1,duration:1,ease:O.a.easeOut}),e&&(x.a.to(this.heart,{y:-410,delay:1,duration:1.5,ease:O.a.easeOut}),x.a.delayedCall(1,(function(){w.emitter.emit=!0,m.Ticker.shared.add(w.onTickEvent)})));case 37:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){wo(i,n,r,a,u,"next",t)}function u(t){wo(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e,n,r,o,a,u){return i.apply(this,arguments)})},{key:"hide",value:function(){var t=this;x.a.to(this.back,{alpha:0,duration:.2}),x.a.to(this.heart,{alpha:0,duration:.2}),x.a.to(this.popup.scale,{x:0,y:0,duration:.2,onComplete:function(){t.emitter.emit=!1,t.emitter.cleanup(),m.Ticker.shared.remove(t.onTickEvent),t.prizeIcon.visible=!1,t.visible=!1,t.callback()}})}}])&&go(e.prototype,n),r&&go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function Ro(t){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Co(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Co(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Co(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _o(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mo(t,e){return(Mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ao(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Do(t);if(e){var o=Do(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lo(this,n)}}function Lo(t,e){if(e&&("object"===Ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Io(t)}function Io(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Do(t){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var No=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e)}(u,t);var e,n,r,o,i,a=Ao(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Fo(Io(t=a.call(this)),"texts",void 0),Fo(Io(t),"usingTexts",void 0),Fo(Io(t),"back",void 0),Fo(Io(t),"wheelbox",void 0),Fo(Io(t),"tween",void 0),Fo(Io(t),"nameBack",void 0),t.back=m.Sprite.from(m.Texture.WHITE),t.back.anchor.set(.5,.5),t.back.width=N.originalWidth,t.back.height=N.originalHeight,t.back.alpha=0,t.addChild(t.back),t.nameBack=new m.NineSlicePlane(m.Texture.from("name_back.png"),80,80,80,80),t.nameBack.width=600,t.nameBack.alpha=0,t.addChild(t.nameBack),t.texts=[],t.usingTexts=[];for(var e=0;e<4;e++){var n=t.getNewText();t.texts.push(n)}return t.wheelbox=new bo,t.addChild(t.wheelbox),t.visible=!1,t}return e=u,(n=[{key:"show",value:(o=regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r.visible=!0,r.back.alpha=0,r.nameBack.alpha=0,r.wheelbox.position.y=1e3;var o=n&&n.length>0?3:1.4;x.a.to(r.back,{alpha:.7,duration:.2}),x.a.to(r.nameBack,{alpha:1,duration:.2});for(var i=e.name.split(" "),a=-70*i.length/2+35-100,u=a,c=function(t){var e=i[t],n=void 0;(n=r.texts.length>0?r.texts.pop():r.getNewText()).alpha=1,n.visible=!0,n.text=e,r.addChild(n),r.usingTexts.push(n),n.y=a,n.x=t%2?-500-n.width/2:500+n.width/2,x.a.to(n,{x:0,duration:.5,ease:O.d.easeOut}),x.a.to(n,{alpha:0,delay:o-.2,duration:.5,onComplete:function(){r.texts.push(n)}}),a+=70},s=0;s<i.length;s++)c(s);x.a.to(r.back,{alpha:0,delay:o-.2,duration:.5}),x.a.to(r.nameBack,{alpha:0,delay:o-.2,duration:.5}),n&&n.length>0&&(r.wheelbox.visible=!0,r.wheelbox.alpha=1,x.a.to(r.wheelbox,{y:a+140,delay:.6,duration:.5,ease:O.d.easeOut,onComplete:function(){r.wheelbox.start(n)}}),x.a.to(r.wheelbox,{alpha:0,delay:o-.2,duration:.5}),a+=120+r.wheelbox.height/2);var l=Math.max(400,a-u+100);r.nameBack.pivot.set(300,l/2),r.nameBack.height=l,n&&n.length>0?r.nameBack.y=u-80+l/2:r.nameBack.y=-100,r.tween=x.a.delayedCall(o,(function(){r.usingTexts=[],r.visible=!1,r.tween=void 0,t()}))})));case 1:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){_o(i,n,r,a,u,"next",t)}function u(t){_o(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"clear",value:function(){this.tween&&(this.tween.kill(),this.tween=void 0),x.a.killTweensOf(this.wheelbox),x.a.killTweensOf(this.back);var t,e=jo(this.usingTexts);try{for(e.s();!(t=e.n()).done;){var n=t.value;x.a.killTweensOf(n),this.removeChild(n)}}catch(t){e.e(t)}finally{e.f()}this.visible=!1}},{key:"getNewText",value:function(){var t=new m.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});return t.anchor.set(.5,.5),t}}])&&Eo(e.prototype,n),r&&Eo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(m.Container);function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uo(t,e){return(Uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vo(t);if(e){var o=Vo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Go(this,n)}}function Go(t,e){if(e&&("object"===zo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yo(t)}function Yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vo(t){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uo(t,e)}(i,t);var e,n,r,o=Ho(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Yo(t=o.call(this)),"callback",void 0);var e=m.Sprite.from(m.Texture.WHITE);e.anchor.set(.5,.5),e.width=N.originalWidth,e.height=N.originalHeight,e.tint=0,e.alpha=.6,t.addChild(e);var n=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);n.width=500,n.height=360,n.pivot.set(250,180),t.addChild(n);var r=new m.Text("Exit?",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:70,fill:6242531,align:"center",fontWeight:"bold"});r.anchor.set(.5,.5),r.position.y=-120,t.addChild(r);var a=new kt("ok_button.png","ok_button.png");a.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!0)})),a.position.set(-110,110),a.scale.set(.8,.8),t.addChild(a);var u=new kt("x_button.png","x_button.png");return u.on("pointerup",(function(e){e.stopPropagation(),e.stopped=!0,t.hide(!1)})),u.position.set(110,110),u.scale.set(.8,.8),t.addChild(u),t.visible=!1,t}return e=i,(n=[{key:"show",value:function(t){this.callback=t,this.alpha=1,this.visible=!0}},{key:"hide",value:function(t){var e=this;this.callback(t),this.callback=void 0,x.a.to(this,{alpha:0,duration:.4,onComplete:function(){e.visible=!1}})}}])&&Wo(e.prototype,n),r&&Wo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function Xo(t){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qo(t,e){return(qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ti(t);if(e){var o=ti(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qo(this,n)}}function Qo(t,e){if(e&&("object"===Xo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zo(t)}function Zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qo(t,e)}(i,t);var e,n,r,o=$o(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ei(Zo(t=o.call(this)),"part0",void 0),ei(Zo(t),"part1",void 0),t.part0=m.Sprite.from(m.Texture.from("direction.png")),t.part0.anchor.set(.5,1),t.addChild(t.part0),t.part0.height=1200,t.part1=m.Sprite.from(m.Texture.from("direction.png")),t.part1.anchor.set(.5,1),t.addChild(t.part1),t.part1.height=700,t}return e=i,(n=[{key:"draw",value:function(t){var e=Wi.BottomPoint,n=Math.atan2(t.y-e,t.x);this.part0.rotation=n+Math.PI/2;var r=1200*Math.cos(n),o=e+1200*Math.sin(n),i=1200;r<-315||r>315?(r=(i=Math.abs(r)/r*315/Math.cos(n))*Math.cos(n),o=i*Math.sin(n),this.part1.visible=!0,this.part1.position.set(r,o),this.part1.rotation=-n-Math.PI/2):this.part1.visible=!1,this.part0.height=i+8}}])&&Jo(e.prototype,n),r&&Jo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ii(){return(ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ai(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ai(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fi(t)););return t}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ci(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fi(t);if(e){var o=fi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return si(this,n)}}function si(t,e){if(e&&("object"===ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return li(t)}function li(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ui(t,e)}(i,t);var e,n,r,o=ci(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),pi(li(r=o.call(this,t,e,Zt.anyType,n)),"currentIcon",void 0),pi(li(r),"temp",void 0),r.reGenerateTextures(),r}return e=i,(n=[{key:"reGenerateTextures",value:function(){var t=this;this.currentIcon?this.currentIcon++:this.currentIcon=1,this.currentIcon>7&&(this.currentIcon=1),this.view.texture=this.getTexture(),this.view2.texture=this.getTexture2(),this.temp=0,x.a.to(this,{temp:1,duration:.15,onComplete:function(){t.reGenerateTextures()}})}},{key:"getTexture",value:function(){return m.Texture.from("".concat(this.currentIcon||1,".png"))}},{key:"getTexture2",value:function(){return m.Texture.from("".concat(this.currentIcon||1,"_.png"))}},{key:"clean",value:function(){x.a.killTweensOf(this),ii(fi(i.prototype),"clean",this).call(this)}}])&&oi(e.prototype,n),r&&oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(Zt);function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gi(t);if(e){var o=gi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mi(this,n)}}function mi(t,e){if(e&&("object"===yi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wi(t)}function wi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vi(t,e)}(i,t);var e,n,r,o=bi(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ki(wi(t=o.call(this)),"txt",void 0),ki(wi(t),"score",void 0),t.txt=new m.Text("",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:40,fill:4073878,align:"center"}),t.txt.anchor.set(.5,.5),t.addChild(t.txt),t}return e=i,(n=[{key:"start",value:function(t,e,n){var r=this;this.score=n,this.txt.text="+"+n.toString(),this.x=t,this.y=e,x.a.to(this,{x:0,y:-700,duration:.7,delay:.15*Math.random(),ease:O.d.easeIn,onComplete:function(){r.finish()}})}},{key:"finish",value:function(){x.a.killTweensOf(this),this.emit("done",this.score)}},{key:"clean",value:function(){x.a.killTweensOf(this),this.off("done"),this.score=0,this.alpha=1,this.txt.text=""}}])&&di(e.prototype,n),r&&di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function Oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Si,Pi,Ti,Bi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"all",void 0),this.all=[];for(var n=0;n<e;n++)this.all.push(new xi)}var e,n,r;return e=t,(n=[{key:"obtain",value:function(){return 0===this.all.length&&this.all.push(new xi),this.all.pop()}},{key:"release",value:function(t){t.clean(),this.all.push(t)}}])&&Oi(e.prototype,n),r&&Oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ri(t){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ci(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ji(i,r,o,a,u,"next",t)}function u(t){ji(i,r,o,a,u,"throw",t)}a(void 0)}))}}function _i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ei(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ei(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ei(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Li(t,e){return(Li=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ni(t);if(e){var o=Ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Di(this,n)}}function Di(t,e){if(e&&("object"===Ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fi(t)}function Fi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.None=0]="None",t[t.Kill=1]="Kill",t[t.Freeze=2]="Freeze",t[t.RocketUp=3]="RocketUp"}(Si||(Si={})),function(t){t[t.None=0]="None",t[t.BoomLetters=1]="BoomLetters",t[t.LaserLetters=2]="LaserLetters",t[t.BigBoomLetters=3]="BigBoomLetters",t[t.All=4]="All"}(Pi||(Pi={})),function(t){t[t.None=0]="None",t[t.Random=1]="Random",t[t.Static=2]="Static",t[t.HeartMiddle=3]="HeartMiddle",t[t.Skulls=4]="Skulls"}(Ti||(Ti={}));var Wi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Li(t,e)}(k,t);var e,n,r,i,a,u,c,l,f,p,h,y,d,v,b,w,g=Ii(k);function k(){var t;Mi(this,k);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zi(Fi(t=g.call.apply(g,[this].concat(n))),"gameContainer",void 0),zi(Fi(t),"fxContainer",void 0),zi(Fi(t),"frontContainer",void 0),zi(Fi(t),"backContainer",void 0),zi(Fi(t),"moveBox",void 0),zi(Fi(t),"staticBox",void 0),zi(Fi(t),"bottomOpenWall",void 0),zi(Fi(t),"activeBlock",void 0),zi(Fi(t),"maxY",void 0),zi(Fi(t),"tick",0),zi(Fi(t),"levelStartTime",void 0),zi(Fi(t),"moving",void 0),zi(Fi(t),"isActivePowerup",void 0),zi(Fi(t),"preview",void 0),zi(Fi(t),"nextLines",void 0),zi(Fi(t),"previewBlocks",void 0),zi(Fi(t),"nextType",void 0),zi(Fi(t),"nextBlock",void 0),zi(Fi(t),"isTransition",void 0),zi(Fi(t),"powerup1",void 0),zi(Fi(t),"powerup2",void 0),zi(Fi(t),"nextTimer",void 0),zi(Fi(t),"randomBodiesPositions",void 0),zi(Fi(t),"activeBonus",void 0),zi(Fi(t),"boomMeter",void 0),zi(Fi(t),"scorePlace",void 0),zi(Fi(t),"pad",void 0),zi(Fi(t),"padRect",void 0),zi(Fi(t),"downRect",void 0),zi(Fi(t),"topRect",void 0),zi(Fi(t),"levelId",void 0),zi(Fi(t),"meterBonus",void 0),zi(Fi(t),"obstacles",void 0),zi(Fi(t),"score",void 0),zi(Fi(t),"tutorial",void 0),zi(Fi(t),"goalBlock",void 0),zi(Fi(t),"boltsActive",void 0),zi(Fi(t),"levelFinished",void 0),zi(Fi(t),"levelStart",void 0),zi(Fi(t),"pausePopup",void 0),zi(Fi(t),"waitForOver",void 0),zi(Fi(t),"activeBlockDelay",void 0),zi(Fi(t),"scorePool",void 0),zi(Fi(t),"increaseBlocks",[]),zi(Fi(t),"explodePoints",[]),zi(Fi(t),"allScore",void 0),t}return e=k,n=[{key:"create",value:function(){var t=this;bo.prepareTextures(),this.scorePool=new Bi(80),this.allScore=new Map,this.backContainer=new m.Container,this.addChild(this.backContainer),this.gameContainer=new m.Container,this.addChild(this.gameContainer),this.fxContainer=new m.Container,this.addChild(this.fxContainer),this.frontContainer=new m.Container,this.addChild(this.frontContainer),this.levelFinished=new Bo,this.frontContainer.addChild(this.levelFinished),this.levelFinished.visible=!1,this.pad=new m.Sprite(m.Texture.from("launchpad.png")),this.pad.anchor.set(.5,1),this.pad.position.y=.5*N.originalHeight-30,this.gameContainer.addChild(this.pad);var e=new m.NineSlicePlane(m.Texture.from("phone.png"),104,100,104,100);e.width=N.originalWidth+50,e.height=N.originalHeight+40,e.position.set(.5*-e.width,.5*-e.height),this.addChild(e);var n=new m.Container;n.position.set(0,.5*-N.originalHeight+40),this.gameContainer.addChild(n);var r=new rr;r.position.set(-230,30),r.on("pointerup",(function(){t.showPause()})),n.addChild(r),this.powerup1=new De,this.powerup1.position.set(-255,620),this.gameContainer.addChild(this.powerup1),this.powerup1.on("activate",(function(e){t.startPowerup(e)})),this.powerup2=new De,this.powerup2.position.set(255,620),this.gameContainer.addChild(this.powerup2),this.powerup2.on("activate",(function(e){t.startPowerup(e)})),this.powerup1.visible=!1,this.powerup2.visible=!1,this.preview=new ni,this.gameContainer.addChild(this.preview),this.preview.visible=!1,this.previewBlocks=new fn,this.gameContainer.addChild(this.previewBlocks),this.previewBlocks.y=-900-this.previewBlocks.height;var o=new m.NineSlicePlane(m.Texture.from("progress_bar.png"),6,4,6,4);o.width=600,o.height=15,o.position.set(-300,500),this.gameContainer.addChild(o),this.nextTimer=new Ve,this.nextTimer.position.set(-316,-637),this.gameContainer.addChild(this.nextTimer),this.boomMeter=new en,this.boomMeter.position.set(165,-725),this.boomMeter.scale.set(.85,.85),this.gameContainer.addChild(this.boomMeter),this.scorePlace=new qn,this.scorePlace.position.set(-150,-725),this.gameContainer.addChild(this.scorePlace),this.padRect=new m.Rectangle(-140,610,280,150),this.downRect=new m.Rectangle(-400,500,800,300),this.topRect=new m.Rectangle(.5*-N.originalWidth,.5*-N.originalHeight,N.originalWidth,180),this.tutorial=new ao,this.frontContainer.addChild(this.tutorial),this.levelStart=new No,this.frontContainer.addChild(this.levelStart),this.pausePopup=new Ko,this.frontContainer.addChild(this.pausePopup),this.tutorial.addCondition(Kr.Begin,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible&&(null==n?void 0:n.y)<-100,data:{pos:n,scale:{x:(null==n?void 0:n.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Kr.Moving,(function(){return{success:t.bottomOpenWall&&0===t.levelId&&!t.levelStart.visible,data:{pos:{x:40,y:0},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Kr.Heart,(function(){var e,n=null===(e=t.goalBlock)||void 0===e?void 0:e.position;return{success:t.isTransition,data:{pos:n,scale:{x:(null==n?void 0:n.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Kr.NewLine,(function(){return{success:t.moving,data:{pos:{x:290,y:-550},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Kr.Recharge,(function(){return{success:t.boltsActive,data:{pos:{x:300,y:-650},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Kr.Unbreak,(function(){return{success:t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Kr.IAPBonus,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Kr.Unbreak)&&t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:-255,y:620},scale:{x:-1,y:1}}}})),this.tutorial.addCondition(Kr.IAPBonus2,(function(){return{success:!t.tutorial.visible&&t.tutorial.isDone(Kr.IAPBonus)&&t.bottomOpenWall&&t.powerup1.visible&&5===t.levelId&&1===t.obstacles.length,data:{pos:{x:255,y:620},scale:{x:1,y:1}}}})),this.tutorial.addCondition(Kr.ChangePosition,(function(){return{success:t.bottomOpenWall&&t.powerup1.visible&&6===t.levelId&&1===t.obstacles.length,data:{pos:{x:25,y:-125},scale:{x:1,y:-1}}}})),this.tutorial.addCondition(Kr.Skull,(function(){var e,n,r={x:25,y:-125},o=_i(_.bodies);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i&&i.userData&&i.userData.type===Zt.skullType){r=i.userData.position;break}}}catch(t){o.e(t)}finally{o.f()}return{success:t.bottomOpenWall&&12===t.levelId&&!t.levelStart.visible,data:{pos:r,scale:{x:(null===(e=r)||void 0===e?void 0:e.x)<-20?-1:1,y:-1}}}})),this.tutorial.addCondition(Kr.AnyType,(function(){var e={x:-100,y:k.BottomPoint+20};return{success:t.bottomOpenWall&&t.powerup1.visible&&t.levelId>8&&t.nextType===Zt.anyType,data:{pos:e,scale:{x:-1,y:1}}}}))}},{key:"start",value:(w=Ci(regeneratorRuntime.mark((function t(){var e,n,r,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(nt(),this.waitForOver=!1,this.boltsActive=!1,this.score=0,this.scorePlace.score=0,e=i.length,n=new Array(e),r=0;r<e;r++)n[r]=i[r];return this.levelId=n[0][0],this.activeBonus=Pi.None,this.randomBodiesPositions=[],this.obstacles=[],this.isTransition=!1,this.nextType=void 0,this.nextLines=[],this.isActivePowerup=!1,this.generateLineBlocks(),this.tick=0,this.maxY=-800,this.moving=!1,this.nextTimer.freeze(),Za("start","game","level"),$a(Ha.Start),N.paused=!1,t.next=24,this.generateStartBlocks();case 24:return o=this.generateIAPS(),t.next=27,this.levelStart.show(this.currentLevelData,o);case 27:this.currentLevelData.iaps&&(this.powerup1.setData(o[0],bo.getTexture(o[0]),bo.getTexture(o[0])),this.powerup2.setData(o[1],bo.getTexture(o[1]),bo.getTexture(o[1])),this.powerup1.visible=!0,this.powerup2.visible=!0),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.addActiveBlock(),this.nextTimer.unFreeze(),this.levelStartTime=(new Date).getTime(),E.stage.on("pointerup",this.onClick,this),E.stage.on("pointerdown",this.onTapStart,this);case 34:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"close",value:(b=Ci(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){E.stage.off("pointerup"),E.stage.off("pointerdown"),N.paused=!1,e.waitForOver=!0,Ya(!1),e.allScore.clear(),e.boltsActive=!1,e.nextTimer.clear(),e.boomMeter.reset(!0),e.levelStart.clear(),e.moveBox&&e.moveBox.clean(),e.staticBox&&e.staticBox.clean(),e.bottomOpenWall&&e.bottomOpenWall.clean(),e.activeBlock&&e.activeBlock.clean(),e.activeBonus=Pi.None,e.tick=0,e.moving=!1,e.isActivePowerup=!1,e.previewBlocks&&e.previewBlocks.clear(),e.nextBlock&&e.nextBlock.clean(),e.preview.visible=!1,e.powerup1.visible=!1,e.powerup2.visible=!1,e.nextLines=[],e.randomBodiesPositions=[],e.obstacles=[],e.fxContainer.removeChildren(),_.bodies.forEach((function(t){t&&t.userData&&t.userData.clean()}));for(var n=e.gameContainer.children.length-1;n>=0;n--){var r=e.gameContainer.children[n];r.createBody&&e.gameContainer.removeChild(r)}x.a.globalTimeline.clear();var o=window.setInterval((function(){var e=_.bodies.filter((function(t){return t&&t.userData}));0===e.length?(window.clearInterval(o),t()):console.log(e)}),50)})));case 1:case"end":return t.stop()}}),t)}))),function(){return b.apply(this,arguments)})},{key:"showPause",value:function(){x.a.globalTimeline.pause(),N.paused=!0,this.pausePopup.show((function(t){N.paused=!1,x.a.globalTimeline.resume(),t&&I.start(wa)}))}},{key:"generateIAPS",value:function(){if(this.currentLevelData.iaps){for(var t=[Si.Kill,Si.RocketUp,Si.Freeze],e=[],n=0;n<2;n++){var r=Math.floor(Math.random()*t.length);e.push(t[r]),t.splice(r,1)}return e}}},{key:"unusedBlocksRemoved",value:function(t){var e=this;if(!this.isTransition){var n=t[Math.floor(Math.random()*t.length)],r=t.length;t.forEach((function(t){e.addScoreItem(t.x,t.y,Zt.BALL_SCORE)})),r>=5&&n&&(this.fireMissle(1,n),this.addScoreItem(n.x,n.y,Zt.EXPLOSION_SCORE)),this.activeBonus||this.levelId>1&&this.playBolts(r,n)}}},{key:"addToBoomMeter",value:function(t){if(!this.activeBonus&&this.boomMeter.update(t)){var e=this.getRandomBonus();this.setActiveBonus(e)}}},{key:"playBolts",value:(v=Ci(regeneratorRuntime.mark((function t(e,n){var r,o,i,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<2)&&n){t.next=2;break}return t.abrupt("return");case 2:this.boltsActive=!0,r=e,e=Math.min(e,6),o=r/e,i=regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(4*Math.random()),(i=new m.Sprite(m.Texture.from("bolt".concat(r,".png")))).anchor.set(.5,.5),i.scale.set(.1,.1),i.rotation=Math.PI/2+Math.atan2(-680-n.y,270-n.x),i.position.copyFrom(n),u.fxContainer.addChild(i),x.a.to(i.scale,{x:1.5,y:1.5,duration:.4,ease:O.f.easeNone}),x.a.to(i.scale,{x:0,y:0,delay:.4,duration:.4,ease:O.f.easeNone}),x.a.to(i.position,{x:270,y:-680,duration:.8,ease:O.f.easeNone,onComplete:function(){u.addToBoomMeter(o),u.fxContainer.removeChild(i)}}),t.next=12,u.delay(.1);case 12:case"end":return t.stop()}}),t)})),a=0;case 9:if(!(a<e)){t.next=14;break}return t.delegateYield(i(a),"t0",11);case 11:a++,t.next=9;break;case 14:this.boltsActive=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},{key:"addScore",value:function(t){this.score+=t,this.scorePlace.score=this.score}},{key:"addScoreItem",value:function(t,e,n){var r=this,o=this.scorePool.obtain();this.allScore.set(o,!0),this.fxContainer.addChild(o),o.on("done",(function(t){r.addScore(t),r.scorePool.release(o),r.allScore.delete(o)})),o.start(t,e,n)}},{key:"currentLevelData",get:function(){return N.levels[this.levelId]}},{key:"getRandomPosition",value:function(){if(!this.isTransition){var t=Math.floor(Math.random()*this.randomBodiesPositions.length),e=this.randomBodiesPositions[t];if(this.randomBodiesPositions.splice(t,1),!(Math.abs(e[1])>=20))return e}}},{key:"setActiveBonus",value:(d=Ci(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.activeBonus=e,this.nextTimer.freeze(),n=void 0,t.t0=e,t.next=t.t0===Pi.BoomLetters||t.t0===Pi.BigBoomLetters?6:t.t0===Pi.LaserLetters?9:12;break;case 6:return this.meterBonus=e===Pi.BoomLetters?new Wn:new Or,n=function(){return r.getRandomPosition()},t.abrupt("break",13);case 9:return this.meterBonus=new pr,n=function(){var t=r.getRandomPosition();if(t)return t[1]},t.abrupt("break",13);case 12:return t.abrupt("return");case 13:return this.frontContainer.addChild(this.meterBonus),t.next=16,this.meterBonus.start(n);case 16:this.clearMeterBonus(!1),this.nextTimer.unFreeze();case 18:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"getRandomBonus",value:function(){var t=this.currentLevelData.bonuses;return t[Math.floor(Math.random()*t.length)]}},{key:"fireMissle",value:(y=Ci(regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isTransition){t.next=2;break}return t.abrupt("return");case 2:Ya(!0),e=Math.min(e,this.randomBodiesPositions.length),r=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=i.getRandomPosition())&&!i.isTransition){t.next=3;break}return t.abrupt("return","continue");case 3:return(o=new m.Sprite(m.Texture.from("like.png"))).anchor.set(.5,.5),o.scale.set(.1,.1),o.position.copyFrom(n),i.fxContainer.addChild(o),x.a.to(o.scale,{x:1.5,y:1.5,duration:.5,ease:O.f.easeNone}),x.a.to(o.scale,{x:0,y:0,delay:.5,duration:.5,ease:O.f.easeNone}),x.a.to(o.position,{x:50*r[0],y:50*r[1],duration:1,ease:O.f.easeNone,onComplete:function(){i.createExplosion(o.position,0),i.explodePoints.push(r),i.fxContainer.removeChild(o)}}),t.next=13,i.delay(.2);case 13:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<e)){t.next=15;break}return t.delegateYield(r(o),"t0",9);case 9:if("continue"!==t.t0){t.next=12;break}return t.abrupt("continue",12);case 12:o++,t.next=7;break;case 15:x.a.delayedCall(.15,(function(){Ya(!1)}));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return y.apply(this,arguments)})},{key:"createExplosion",value:function(t,e){var n=new Wt(!0,e);n.position.copyFrom(t),this.fxContainer.addChild(n)}},{key:"clearActiveBlocks",value:function(){this.activeBlockDelay&&this.activeBlockDelay.kill(),x.a.killTweensOf(this.activeBlock),x.a.killTweensOf(this.nextBlock),x.a.killTweensOf(this.preview),this.nextBlock&&(this.pad.removeChild(this.nextBlock),this.nextBlock.clean()),this.activeBlock&&(this.gameContainer.removeChild(this.activeBlock),this.activeBlock.clean(),this.preview.visible=!1),this.activeBlock=void 0,this.nextBlock=void 0,this.nextType=void 0}},{key:"stopBonuses",value:function(){this.activeBonus=Pi.None,this.clearActiveBlocks()}},{key:"stopAllScores",value:function(){this.allScore.forEach((function(t,e){e.finish()}))}},{key:"levelComplete",value:function(){this.stopAllScores(),this.stopBonuses(),this.isTransition=!0,this.moving=!1,this.obstacles.forEach((function(t){t.clean()})),this.obstacles=[],this.previewBlocks.y=-900-this.previewBlocks.height,this.previewBlocks&&this.previewBlocks.clear(),this.bottomOpenWall&&this.bottomOpenWall.animateAndDestroy(),this.bottomOpenWall=void 0,this.moveBox&&this.moveBox.animateAndDestroy(),this.staticBox&&this.staticBox.animateAndDestroy()}},{key:"heartDeath",value:function(){this.goalBlock.isSkull()||(this.goalBlock.setSkull(),this.moveBalls())}},{key:"moveBalls",value:function(){var t=this;if(!this.isTransition&&!this.moving){this.moving=!0;var e=this.nextLines.length,n=this.moveBox.body.position,r={x:n[0],y:n[1]};this.previewBlocks.show(),x.a.to(this.previewBlocks,{y:-570,duration:1.1}),x.a.to(r,{y:(70*e-500)/50,delay:.1,duration:1,ease:O.f.easeNone,onUpdate:function(){t.moveBox.body?t.moveBox.body.position=[r.x,r.y]:x.a.killTweensOf(r)},onComplete:function(){t.moveBox.body.position=[0,-11.5],t.addLineBlocks(),t.generateLineBlocks(),x.a.to(t.previewBlocks,{y:-900-t.previewBlocks.height,duration:.5}),t.moving=!1}})}}},{key:"shakeScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(x.a.to(this,{x:"+5",yoyo:!0,repeat:3,duration:.05}),x.a.to(this,{x:"-5",yoyo:!0,repeat:3,duration:.05})):(x.a.to(this,{y:"+5",yoyo:!0,repeat:3,duration:.05}),x.a.to(this,{y:"-5",yoyo:!0,repeat:3,duration:.05}))}},{key:"update",value:function(t){var e=this;if(!N.paused&&!this.waitForOver){this.drawMouse();var n=this.meterBonus&&this.meterBonus.activeBound||void 0;this.maxY=-800;var r=!1,i=!1,a=void 0,u=[];if(this.randomBodiesPositions=[],_.bodies.forEach((function(t){var c=t.position;t.userData.kinematic&&t!==e.moveBox.body&&(c[1]<-9.1||c[1]>(k.BottomPoint+10)/50)&&(t.userData.shape.material=N.material,t.gravityScale=1),t.type===o.Body.DYNAMIC&&c[1]>-k.BottomPoint/50&&t.userData&&t.userData.type!==Zt.goalType&&e.randomBodiesPositions.push(t.position),!e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]>e.maxY&&(e.maxY=c[1]),e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]>-k.BottomPoint/50&&(r=!0),e.isTransition&&t.type===o.Body.DYNAMIC&&c[1]<3*-k.BottomPoint/50&&t.userData.clean(),t.type===o.Body.DYNAMIC&&t.userData&&t.userData.isGoal()&&(a=t.userData,!e.isTransition&&c[1]>9&&(i=!0)),!e.isTransition&&n&&t.type===o.Body.DYNAMIC&&t.userData&&t.userData.type!==Zt.goalType&&n.forEach((function(e){e.contains(c[0],c[1])&&u.push(t)}))})),a&&!i&&a.resetDeathCounter(),this.goalBlock=a,this.tutorial.update(),this.isTransition&&!r&&!this.levelFinished.visible){this.previewBlocks.y=-900-this.previewBlocks.height,this.nextTimer.clear(),this.boomMeter.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1;var c=(new Date).getTime()-this.levelStartTime;this.levelFinished.show(!0,this.score,c,this.currentLevelData.starsConditions,(function(){e.moveToNextLevel()}),this.levelId,this.generateIAPS()),this.nextTimer.freeze(),this.obstacles=[]}if(!this.moving&&!this.isTransition){if(a&&i&&a.startCountDeath(),!this.nextTimer.isFrozen){this.tick+=Math.floor(60*t);var s=this.tick%this.currentLevelData.time;this.nextTimer.setProgress(s/this.currentLevelData.time),0===s&&(this.nextTimer.setProgress(1),u=[],this.moveBalls())}if(u.length>0){var l=[];u.forEach((function(t){var n=t.userData;l.push(n.position);n.boom(!1);e.createExplosion(n.position,.2*Math.random())})),this.unusedBlocksRemoved(l)}}}}},{key:"moveToNextLevel",value:function(){var t=this;console.log("finished",this.levelId,this.score),N.levels.length>this.levelId+1&&((this.score>this.currentLevelData.score||!this.currentLevelData.score)&&(this.currentLevelData.score=this.score,Q(this.currentLevelData.name,this.score.toString()),console.log("set score")),this.levelId+=1,this.currentLevelData.score||0===this.currentLevelData.score||(this.currentLevelData.score=0,Q(this.currentLevelData.name,"0"))),this.boomMeter.maximum=this.currentLevelData.boomMeter,this.score=0,this.scorePlace.score=0,this.createMoveWalls(),this.generateNewBlocks().then((function(){var e=t.generateIAPS();t.levelStart.show(t.currentLevelData,e).then((function(){t.currentLevelData.iaps&&(t.powerup1.setData(e[0],bo.getTexture(e[0]),bo.getTexture(e[0])),t.powerup2.setData(e[1],bo.getTexture(e[1]),bo.getTexture(e[1])),t.powerup1.visible=!0,t.powerup2.visible=!0),t.generateLineBlocks(),t.addActiveBlock(),t.previewBlocks.y=-900-t.previewBlocks.height,t.nextTimer.unFreeze(),t.levelStartTime=(new Date).getTime()}))})),this.isTransition=!1,N.paused=!1}},{key:"startPowerup",value:(h=Ci(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.isActivePowerup||N.paused||this.isTransition)){t.next=2;break}return t.abrupt("return");case 2:this.isActivePowerup=!0,t.t0=e,t.next=t.t0===Si.RocketUp?6:t.t0===Si.Kill?9:t.t0===Si.Freeze?13:15;break;case 6:return t.next=8,this.startVerticalRocket();case 8:return t.abrupt("break",15);case 9:return n=this.getRandomType(),_.bodies.forEach((function(t){var e=t.userData;e&&e.type===n&&e.setBomb()})),x.a.delayedCall(1,(function(){r.shakeScreen()})),t.abrupt("break",15);case 13:return this.nextTimer.freeze(10),t.abrupt("break",15);case 15:this.isActivePowerup=!1;case 16:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"startVerticalRocket",value:(p=Ci(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=560*Math.random()-280,t.next=3,this.startRocket(e,k.BottomPoint,e,-450);case 3:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"startRocket",value:(f=Ci(regeneratorRuntime.mark((function t(e,n,r,o){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new be(e,n,r,o),this.gameContainer.addChild(i),t.next=4,i.animate();case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return f.apply(this,arguments)})},{key:"generateActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextBlock&&this.pad.removeChild(this.nextBlock),this.nextType=-1!==t?t:this.getRandomType(!0),this.nextBlock=this.createCircle(-90,40,this.nextType,!1),this.pad.addChild(this.nextBlock),-1===t&&x.a.to(this.nextBlock,{y:-20,duration:.3})}},{key:"getRandomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.levelId>9&&Math.random()<.1?Zt.anyType:Math.floor(Math.random()*this.currentLevelData.blocks)+1}},{key:"addActiveBlock",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.nextType||(this.nextType=this.getRandomType(!0)),this.activeBlock=this.createCircle(-90,k.BottomPoint+35,this.nextType,!1),this.activeBlock.kinematic=!0,this.gameContainer.addChild(this.activeBlock),this.generateActiveBlock(t),this.preview.position.set(0,k.BottomPoint),this.preview.visible=!0,-1===t&&(this.preview.alpha=0,x.a.to(this.activeBlock,{x:0,y:k.BottomPoint,duration:.15}),x.a.to(this.preview,{alpha:.6,duration:.15}))}},{key:"switchBlockes",value:(l=Ci(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.activeBlock.type,n=this.nextType,t.next=4,new Promise((function(t){x.a.to(r.nextBlock,{x:0,y:-50,duration:.2}),x.a.to(r.activeBlock,{x:-90,y:700,duration:.2,onComplete:function(){t()}})}));case 4:this.clearActiveBlocks(),this.nextType=n,this.addActiveBlock(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"drawMouse",value:function(){var t=this.toLocal(E.renderer.plugins.interaction.eventData.data.global);this.isTransition||N.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(t.x,t.y)||this.topRect.contains(t.x,t.y)||this.preview.draw(t)}},{key:"onTapStart",value:function(t){var e=this.toLocal(t.data.global);this.isTransition||N.paused||this.topRect.contains(e.x,e.y)||(this.padRect.contains(e.x,e.y)?this.switchBlockes():this.downRect.contains(e.x,e.y)||this.drawMouse())}},{key:"onClick",value:function(t){var e=this,n=this.toLocal(t.data.global);if(!(this.isTransition||N.paused||!this.activeBlock||this.isActivePowerup||this.downRect.contains(n.x,n.y)||this.topRect.contains(n.x,n.y))){this.activeBlock.createBody(o.Body.DYNAMIC,30),this.activeBlock.shape.material=N.activeBallMaterial;var r=this.activeBlock;this.activeBlock=void 0,this.preview.visible=!1;var i=Math.atan2((n.y-k.BottomPoint)/50,n.x/50);r.body.gravityScale=0,r.body.applyImpulse([450*Math.cos(i),450*Math.sin(i)]),this.activeBlockDelay=x.a.delayedCall(.4,(function(){e.activeBlockDelay=void 0,e.addActiveBlock()})),_.bodies.forEach((function(t){t&&t.userData&&t.userData.type===Zt.skullType&&t.userData.decreaseSkullMeter()}))}}},{key:"generateLineBlocks",value:function(){var t=this.currentLevelData.lines;this.previewBlocks.clear(),this.nextLines=[];for(var e=0;e<t;e++){this.nextLines[e]=[];for(var n=0;n<9;n++)this.nextLines[e][n]=Math.floor(Math.random()*this.currentLevelData.blocks)+1}this.previewBlocks.setLines(this.nextLines)}},{key:"addLineBlocks",value:function(){for(var t,e=-500,n=0;n<this.nextLines.length;n++){t=-300;for(var r=0;r<this.nextLines[n].length;r++){var o=this.createCircle(t,e,this.nextLines[n][r]);this.gameContainer.addChild(o),t+=74}e+=70}}},{key:"delay",value:(c=Ci(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){x.a.delayedCall(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"generateNewBlocks",value:(u=Ci(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,c,s,l,f,p,h,y,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this.currentLevelData,n=e.startAmount,r=e.blocks,o=e.obstacles,i=!1,a=0,o&&o.length>0&&o.forEach((function(t){d.createObstacle(t),t.type===Ti.HeartMiddle?i=!0:t.type===Ti.Skulls&&(a=t.amount)})),u=[],c=0;c<a;c++){for(s=Math.floor(Math.random()*(n-19));u.includes(s);)s=Math.floor(Math.random()*(n-19));u.push(s)}l=0;case 7:if(!(l<n)){t.next=23;break}return f=-1,f=u.includes(l)?Zt.skullType:Math.floor(Math.random()*r)+1,p=this.createCircle(50*Math.random()-25,900,f),this.gameContainer.addChild(p),t.next=14,this.delay(.001);case 14:if(!i||l!==Math.floor(n/2)){t.next=20;break}return(h=this.createCircle(0,1100,Zt.goalType)).on("gameover",this.onGameOver,this),this.gameContainer.addChild(h),t.next=20,this.delay(1);case 20:l++,t.next=7;break;case 23:if(i){t.next=29;break}return t.next=26,this.delay(1);case 26:(y=this.createCircle(0,1100,Zt.goalType)).on("gameover",this.onGameOver,this),this.gameContainer.addChild(y);case 29:return t.next=31,this.delay(1);case 31:this.createBottomExit();case 32:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"createObstacle",value:function(t){if(t.type!==Ti.HeartMiddle&&t.type!==Ti.Skulls){var e=void 0;switch(t.type){case Ti.Static:e=new Fr(t.position);break;case Ti.Random:e=new Xr(t.position,t.lives)}this.gameContainer.addChild(e),this.obstacles.push(e)}}},{key:"onGameOver",value:function(){var t,e,n,r=this;null===(t=this.nextTimer)||void 0===t||t.clear(),null===(e=this.boomMeter)||void 0===e||e.reset(),this.clearMeterBonus(),this.tick=0,this.maxY=-800,this.powerup1.visible=!1,this.powerup2.visible=!1,this.score=0,this.levelFinished.show(!1,this.score,Number.MAX_SAFE_INTEGER,this.currentLevelData.starsConditions,(function(){r.restartLevel()}),this.levelId,void 0),null===(n=this.nextTimer)||void 0===n||n.freeze(),this.obstacles=[],N.paused=!0}},{key:"restartLevel",value:function(){this.isTransition=!0,I.restart(this.levelId)}},{key:"generateStartBlocks",value:(a=Ci(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.createMoveWalls(),(e=new ue(-400,-50,100,1800,0)).shape.material=N.bounceMaterial,this.gameContainer.addChild(e),(n=new ue(400,-50,100,1800,0)).shape.material=N.bounceMaterial,this.gameContainer.addChild(n),r=new ue(-225,800,250,100,0),this.gameContainer.addChild(r),o=new ue(225,800,250,100,0),this.gameContainer.addChild(o),i=new ue(-150,1100,100,500,0),this.gameContainer.addChild(i),a=new ue(150,1100,100,500,0),this.gameContainer.addChild(a),u=new ue(0,1300,200,100,0),this.gameContainer.addChild(u),t.next=19,this.generateNewBlocks();case 19:N.started=!0;case 20:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"createMoveWalls",value:function(){this.moveBox=new ue(0,-575,710,50,0),this.moveBox.type=Zt.endType,this.gameContainer.addChild(this.moveBox),this.staticBox=new ue(0,-625,710,50,0),this.gameContainer.addChild(this.staticBox)}},{key:"createBottomExit",value:function(){this.bottomOpenWall=new ue(0,800,200,100,0),this.gameContainer.addChild(this.bottomOpenWall)}},{key:"createCircle",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n===Zt.goalType?new Be(t,e):n===Zt.anyType?new hi(t,e,r):new Zt(t,e,n,r)}},{key:"clearMeterBonus",value:(i=Ci(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!(n.length>0&&void 0!==n[0])||n[0],!this.meterBonus){t.next=6;break}if(e){t.next=5;break}return t.next=5,this.meterBonus.goOut();case 5:this.meterBonus&&(this.meterBonus.clean(),this.frontContainer.removeChild(this.meterBonus),this.meterBonus=void 0);case 6:this.activeBonus=Pi.None;case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"preCleanUnused",value:function(t){var e={step:t,other:{amount:0,positions:[]}};return e.other.amount=F.length,this.update(t),e.other.amount>0&&F.forEach((function(t){e.other.positions.push(t.userData.position)})),e}},{key:"postCleanUnused",value:function(t){this.increaseBlocks.forEach((function(t){return t.block.increase(t.steps)})),this.increaseBlocks=[],this.explodePoints.forEach((function(e){var n=_.hitTest(e,_.bodies,0);if(n&&n.length>0){var r=n[0].userData;r&&r instanceof Zt&&r.type!==Zt.goalType&&(t.other.amount+=r.boom()),n.forEach((function(e){var n=e.userData;t.other.positions.push(n.position)}))}})),t.other.amount>0&&this.unusedBlocksRemoved(t.other.positions),this.explodePoints=[]}},{key:"endContact",value:function(t){var e=t.bodyA,n=t.bodyB,r=e.userData,o=n.userData;r&&o&&r instanceof Zt&&o instanceof Zt&&k.sameType(r,o)&&(r.sameColorNeighbors.delete(o),o.sameColorNeighbors.delete(r))}},{key:"beginContact",value:function(t){var e=t.bodyA,n=t.bodyB,r=e.userData,i=n.userData;if(r&&i){if(k.getEnd(r,i))return void this.levelComplete();if(r instanceof be||i instanceof be){var a=k.getBlockByRocket(r,i);a&&a instanceof Zt&&(a.boom(),this.createExplosion(a.position,.15*Math.random()),this.addScoreItem(a.position.x,a.position.y,Zt.BALL_SCORE))}if(r instanceof Zt&&i instanceof Zt){k.sameType(r,i)&&(r.sameColorNeighbors.set(i,!0),i.sameColorNeighbors.set(r,!0));var u=k.getSkullByGoal(r,i);if(u&&u instanceof Zt)return u.boom(),void this.heartDeath();if(k.wasAnyAndSkull(r,i))return this.addScoreItem(r.position.x,r.position.y,Zt.BALL_SCORE),r.boom(),void i.boom()}if(!t.shapeA.data||!t.shapeB.data)return;if((50*o.vec2.distance(t.bodyA.position,t.bodyA.previousPosition)>.5||50*o.vec2.distance(t.bodyB.position,t.bodyB.previousPosition)>.5)&&s.playRandom("ball hit ",3),r&&i){var c=k.getKinematic(r,i);if(c&&c.body){var l=c===r?i:r;if(c.enableGravity(),l instanceof Xr&&251===l.type?(l.changePosition(),this.addScoreItem(l.position.x,l.position.y,Zt.BALL_SCORE),this.shakeScreen(Math.random()<.5)):250===l.type&&this.shakeScreen(Math.random()<.5),r.type!==Zt.goalType&&i.type!==Zt.goalType)if(k.sameType(r,i)&&r instanceof Zt&&i instanceof Zt){r.kinematic=!1,i.kinematic=!1,r.enableGravity(),i.enableGravity();var f=c.steps;c.animateAndDestroy(),this.increaseBlocks.push({block:c===r?i:r,steps:f})}else l.type===Zt.skullType&&c.setSkull()}else{if(r instanceof Zt&&r.kinematic&&r.enableGravity(),i instanceof Zt&&i.kinematic&&i.enableGravity(),r.type===Zt.goalType||i.type===Zt.goalType)return;if(r instanceof Zt&&i instanceof Zt&&k.sameType(r,i)&&(r.steps!==i.steps||r.kinematic||i.kinematic)){var p=r.kinematic?r:i,h=p===r?i:r;p.kinematic=!1,h.kinematic=!1,p.body&&(p.body.gravityScale=1),h.body&&(h.body.gravityScale=1);var y=p.steps;p.animateAndDestroy(),this.increaseBlocks.push({block:h,steps:y})}else{var d=k.getRandomObstacle(r,i);if(d)this.shakeScreen(Math.random()<.5),d.changePosition(),this.addScoreItem(d.position.x,d.position.y,Zt.BALL_SCORE);else if(r instanceof Zt&&i instanceof Zt){var v=k.getKinematicBySkull(r,i);v&&v.setSkull()}}}}}}}],r=[{key:"sameType",value:function(t,e){return(t.type===e.type||t.type===Zt.anyType||e.type===Zt.anyType)&&0!==t.type&&0!==e.type&&t.type!==Zt.goalType&&e.type!==Zt.goalType&&250!==t.type&&250!==e.type&&251!==t.type&&251!==e.type&&t.type!==Zt.skullType&&e.type!==Zt.skullType}},{key:"getEnd",value:function(t,e){if(t.type===Zt.goalType&&e.type===Zt.endType||e.type===Zt.goalType&&t.type===Zt.endType)return t.type===Zt.endType?t:void 0}},{key:"getSkullByGoal",value:function(t,e){if(t.type===Zt.goalType&&e.type===Zt.skullType||e.type===Zt.goalType&&t.type===Zt.skullType)return t.type===Zt.skullType?t:void 0}},{key:"wasAnyAndSkull",value:function(t,e){return t.type===Zt.anyType&&e.type===Zt.skullType||e.type===Zt.anyType&&t.type===Zt.skullType}},{key:"getBlockByRocket",value:function(t,e){return t instanceof be&&e.correctType()&&!e.isGoal()?e:e instanceof be&&t.correctType()&&!t.isGoal()?t:void 0}},{key:"getKinematic",value:function(t,e){return t instanceof Zt&&t.kinematic&&0!==t.type?t:e instanceof Zt&&e.kinematic&&0!==e.type?e:void 0}},{key:"getRandomObstacle",value:function(t,e){return t instanceof Zt&&t.kinematic&&e instanceof Xr&&251===e.type?e:e instanceof Zt&&e.kinematic&&t instanceof Xr&&251===t.type?t:void 0}},{key:"getKinematicBySkull",value:function(t,e){return t.kinematic&&e.type===Zt.skullType?t:e.kinematic&&t.type===Zt.skullType?e:void 0}}],n&&Ai(e.prototype,n),r&&Ai(e,r),Object.defineProperty(e,"prototype",{writable:!1}),k}(st);function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gi(t,e){return(Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xi(t);if(e){var o=Xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vi(this,n)}}function Vi(t,e){if(e&&("object"===Ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ki(t)}function Ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xi(t){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ji(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}zi(Wi,"BottomPoint",670);var qi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gi(t,e)}(i,t);var e,n,r,o=Yi(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ji(Ki(t=o.call(this)),"explosion",void 0),Ji(Ki(t),"face",void 0),Ji(Ki(t),"logo",void 0),t.explosion=m.Sprite.from(m.Texture.from("splash_explosion.png")),t.explosion.anchor.set(.5),t.explosion.scale.set(0,0),t.explosion.position.y=.5*-N.originalHeight+516,t.explosion.alpha=0,t.addChild(t.explosion),t.face=m.Sprite.from(m.Texture.from("splash_logo_face.png")),t.face.position.set(-131,-350),t.face.alpha=0,t.addChild(t.face),t.logo=m.Sprite.from(m.Texture.from("splash_logo.png")),t.logo.anchor.set(.5),t.logo.position.set(0,-260),t.logo.scale.set(3,3),t.logo.alpha=0,t.addChild(t.logo),t}return e=i,(n=[{key:"start",value:function(){this.explosion.position.y=.5*-N.originalHeight+516,this.explosion.scale.set(0,0),this.explosion.alpha=0,this.face.position.set(-131,-350),this.face.alpha=0,this.logo.position.set(0,-260),this.logo.scale.set(3,3),this.logo.alpha=0,x.a.to(this.explosion,{alpha:1,duration:.2}),x.a.to(this.explosion.scale,{x:1,y:1,duration:1,ease:O.c.easeOut}),x.a.to(this.logo,{alpha:1,delay:.2,duration:.2}),x.a.to(this.logo.scale,{x:1,y:1,delay:.2,duration:1,ease:O.a.easeOut}),x.a.to(this.face,{alpha:1,delay:1.09,duration:.1}),x.a.to(this.face,{y:-448,delay:1.1,duration:2,ease:O.f.easeNone})}},{key:"stop",value:function(){x.a.killTweensOf(this.explosion),x.a.killTweensOf(this.explosion.scale),x.a.killTweensOf(this.logo),x.a.killTweensOf(this.logo.scale),x.a.killTweensOf(this.face)}}])&&Hi(e.prototype,n),r&&Hi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zi(t,e){return(Zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ta(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ra(t);if(e){var o=ra(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ea(this,n)}}function ea(t,e){if(e&&("object"===$i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return na(t)}function na(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ra(t){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zi(t,e)}(i,t);var e,n,r,o=ta(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),oa(na(t=o.call(this)),"txt",void 0),oa(na(t),"lockedTxt",void 0),oa(na(t),"hearts",void 0),t.txt=new m.Text("Level 1",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:0,align:"center"}),t.txt.anchor.set(.5,1),t.txt.position.set(0,-75),t.addChild(t.txt);var e=new m.NineSlicePlane(m.Texture.from("top_back.png"),46,50,46,50);e.pivot.set(160,70),e.width=320,e.height=140,e.tint=14540253,t.addChild(e),t.lockedTxt=new m.Text("Locked",{fontFamily:"FontsFree-Net-AmericanTypewriterBold",fontSize:50,fill:11184810,fontWeight:"bold",align:"center"}),t.lockedTxt.anchor.set(.5,.5),t.lockedTxt.position.set(0,0),t.addChild(t.lockedTxt),t.hearts=[];for(var n=-90,r=0;r<3;r++){var a=new m.Sprite(m.Texture.from("like.png"));a.alpha=.3,a.anchor.set(.5,.5),a.scale.set(.6),a.position.x=n,t.addChild(a),t.hearts.push(a),n+=90}return t}return e=i,(n=[{key:"updateData",value:function(t,e){this.txt.text="Level ".concat(t+1);for(var n=0;n<3;n++)this.hearts[n].alpha=e>=n+1?1:e>=0||0===t?.3:0;this.lockedTxt.visible=0!==t&&-1===e}}])&&Qi(e.prototype,n),r&&Qi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(m.Container);function aa(t){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ua(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ca(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sa(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function la(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){sa(i,r,o,a,u,"next",t)}function u(t){sa(i,r,o,a,u,"throw",t)}a(void 0)}))}}function fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ha(t,e){return(ha=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ya(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ba(t);if(e){var o=ba(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return da(this,n)}}function da(t,e){if(e&&("object"===aa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return va(t)}function va(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ma(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ha(t,e)}(s,t);var e,n,r,o,i,a,u,c=ya(s);function s(){var t;fa(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ma(va(t=c.call.apply(c,[this].concat(n))),"logo",void 0),ma(va(t),"activeLevelItem",void 0),ma(va(t),"activeLevelId",void 0),ma(va(t),"left",void 0),ma(va(t),"right",void 0),ma(va(t),"canPlay",void 0),ma(va(t),"playBtn",void 0),t}return e=s,(n=[{key:"create",value:function(){var t=this;this.logo=new qi,this.addChild(this.logo),this.playBtn=new kt("start_button.png","start_button.png"),this.playBtn.position.y=N.originalHeight/3-30,this.addChild(this.playBtn),this.playBtn.on("pointerup",(function(){Za("click","menu","play"),t.onPlayClicked()})),this.createMapItems()}},{key:"start",value:function(){Za("start","menu","level"),this.logo.start(),this.setActiveLevel()}},{key:"close",value:(u=la(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Za("close","menu","level"),this.logo.stop();case 2:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"setActiveLevel",value:(a=la(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=N.levels,n=0,r=-1,o=ua(e),t.prev=4,o.s();case 6:if((i=o.n()).done){t.next=20;break}return a=i.value,t.next=10,Z(a.name,"");case 10:if(u=t.sent,r=-1,""!==u&&(a.score=parseInt(u),r=Ga(a.score,a.starsConditions)),0!==r&&-1!==r){t.next=17;break}return t.abrupt("break",20);case 17:n++;case 18:t.next=6;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(4),o.e(t.t0);case 25:return t.prev=25,o.f(),t.finish(25);case 28:this.activeLevelId=n,this.canPlay=0===n||-1!==r,this.activeLevelItem.updateData(this.activeLevelId,r),this.updateButtons();case 32:case"end":return t.stop()}}),t,this,[[4,22,25,28]])}))),function(){return a.apply(this,arguments)})},{key:"updateButtons",value:function(){this.playBtn.disabled=!this.canPlay,this.left.visible=this.activeLevelId>0,this.right.visible=this.activeLevelId<N.levels.length-1}},{key:"createMapItems",value:function(){var t=this;this.activeLevelItem=new ia,this.activeLevelItem.position.set(0,N.originalHeight/3-230),this.addChild(this.activeLevelItem),this.left=new kt("back_button.png","back_button.png"),this.left.position.set(-240,this.activeLevelItem.y),this.addChild(this.left),this.right=new kt("next_button.png","next_button.png"),this.right.position.set(250,this.activeLevelItem.y+5),this.addChild(this.right),this.left.scale.set(.5,.5),this.right.scale.set(.5,.5),this.left.on("pointerup",(function(){Za("click","menu","left"),t.activeLevelId--,t.updateActive()})),this.right.on("pointerup",(function(){Za("click","menu","right"),t.activeLevelId++,t.updateActive()}))}},{key:"updateActive",value:(i=la(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=N.levels[this.activeLevelId],t.next=3,Z(e.name,"");case 3:n=t.sent,r=-1,""!==n&&(e.score=parseInt(n),r=Ga(e.score,e.starsConditions)),this.canPlay=-1!==r,this.activeLevelItem.updateData(this.activeLevelId,r),this.updateButtons();case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onPlayClicked",value:(o=la(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canPlay){t.next=2;break}return t.abrupt("return");case 2:if(!q||!X.shouldPlayFirstAds()){t.next=5;break}return t.next=5,tt(Y.Interstitial);case 5:I.start(Wi,this.activeLevelId);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}])&&pa(e.prototype,n),r&&pa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(st),ga=n(199);function ka(t){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Oa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pa(t,e){return(Pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ba(this,n)}}function Ba(t,e){if(e&&("object"===ka(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ra(t)}function Ra(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ja(t){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ca(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pa(t,e)}(u,t);var e,n,r,o,i,a=Ta(u);function u(){var t;Oa(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ca(Ra(t=a.call.apply(a,[this].concat(n))),"comics",void 0),Ca(Ra(t),"step",void 0),Ca(Ra(t),"nextBtn",void 0),Ca(Ra(t),"prevBtn",void 0),Ca(Ra(t),"okBtn",void 0),t}return e=u,(n=[{key:"create",value:function(){var t=this;this.comics=m.Sprite.from(m.Texture.from("comic_00.png")),this.comics.anchor.set(.5,.5),this.addChild(this.comics),this.nextBtn=new kt("next_button.png","next_button.png"),this.nextBtn.position.set(160,N.originalHeight/2-this.nextBtn.height/2),this.addChild(this.nextBtn),this.nextBtn.on("pointerup",(function(){Za("click","comics","next"),t.onNextClicked()})),this.prevBtn=new kt("back_button.png","back_button.png"),this.prevBtn.position.set(-160,this.nextBtn.y),this.addChild(this.prevBtn),this.prevBtn.on("pointerup",(function(){Za("click","comics","prev"),t.onPrevClicked()})),this.okBtn=new kt("ok_button.png","ok_button.png"),this.okBtn.on("pointerup",(function(){Q("skipcomics","1"),I.start(wa)})),this.okBtn.position.y=this.nextBtn.y-50,this.addChild(this.okBtn),this.prevBtn.visible=!1,this.nextBtn.visible=!1,this.okBtn.visible=!1}},{key:"start",value:function(){Za("start","menu","level"),this.step=0,this.prevBtn.visible=!1,this.nextBtn.visible=!0,this.okBtn.visible=!1}},{key:"close",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(Za("close","menu","level"),e=0;e<6;e++)m.Texture.removeFromCache("comic_0".concat(e,".png"));this.removeChild(this.okBtn),this.okBtn=void 0,this.destroy({children:!0,texture:!0});case 5:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){xa(i,n,r,a,u,"next",t)}function u(t){xa(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"onNextClicked",value:function(){this.step++,this.step<5?(this.updateImage(),this.prevBtn.visible=!0,this.nextBtn.visible=!0):5===this.step&&(this.updateImage(),this.okBtn.visible=!0,this.prevBtn.visible=!1,this.nextBtn.visible=!1)}},{key:"onPrevClicked",value:function(){this.step--,this.prevBtn.visible=this.step>0,this.updateImage()}},{key:"updateImage",value:function(){this.comics.texture=m.Texture.from("comic_0".concat(this.step,".png"))}}])&&Sa(e.prototype,n),r&&Sa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(st);function Ea(t){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ma(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Aa(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ma(i,r,o,a,u,"next",t)}function u(t){Ma(i,r,o,a,u,"throw",t)}a(void 0)}))}}function La(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ia(t,e){return(Ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Na(t);if(e){var o=Na(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fa(this,n)}}function Fa(t,e){if(e&&("object"===Ea(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Na(t){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var za,Wa,Ua,Ha,Ga=function(t,e){for(var n=0,r=0;r<e.length&&t>e[r];r++)n++;return n},Ya=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N.slowmo=t,e||x.a.globalTimeline.timeScale(N.slowmo?.4:1)},Va=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ia(t,e)}(f,t);var e,n,r,o,i,a,u,c=Da(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.call(this,720,1500)}return e=f,(n=[{key:"createStates",value:(u=Aa(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z("skipcomics","0");case 2:e=t.sent,I.add(new wa),I.add(new Wi),"0"===e?(I.add(new _a),I.start(_a)):I.start(wa);case 6:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"initContactListener",value:function(){_.on("endContact",(function(t){t.shapeA.data&&t.shapeB.data&&I.activeState instanceof Wi&&I.activeState.endContact(t)})),_.on("beginContact",(function(t){I.activeState instanceof Wi&&I.activeState.beginContact(t)}))}},{key:"preCleanUnused",value:function(t){var e=I.activeState;return e&&e instanceof Wi?e.preCleanUnused(t):{step:t,other:void 0}}},{key:"postCleanUnused",value:function(t){var e=I.activeState;e&&e instanceof Wi&&e.postCleanUnused(t)}},{key:"load",value:(a=Aa(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){s.init("assets/sounds"),X.startLoading();var r=new l.b;r.add("base0","assets/atlases/base0.json"),r.add("base1","assets/atlases/base1.json"),r.add("levels","assets/levels.json"),r.add("particles","assets/emitter.json"),s.add("music",{autoplay:!0,loop:!0,volume:.6}),s.add("ball hit 0",{volume:.4}),s.add("ball hit 1",{volume:.4}),s.add("ball hit 2",{volume:.4}),r.onProgress.add((function(t){})),r.onError.add((function(t,e,r){tu({error:"loading (".concat(r.url,")")}),n()})),r.load(Aa(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadFonts();case 2:return N.levels=r.resources.levels.data.levels,N.particles=r.resources.particles.data,n.next=6,e.startAfterLoading();case 6:t();case 7:case"end":return n.stop()}}),n)}))))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"loadFonts",value:(i=Aa(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){ga.load({custom:{families:["FontsFree-Net-AmericanTypewriterBold"],urls:["assets/fonts/font.css"]},active:function(){t()},timeout:6e4})})));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"startAfterLoading",value:(o=Aa(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.getElementById("preloader"))&&(e.style.display="none"),t.next=4,et();case 4:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}])&&La(e.prototype,n),r&&La(e,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(z);!function(t){t[t.Undefined=0]="Undefined",t[t.Clicked=1]="Clicked",t[t.Show=2]="Show",t[t.FailedShow=3]="FailedShow",t[t.RewardReceived=4]="RewardReceived"}(za||(za={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unknown=1]="Unknown",t[t.Offline=2]="Offline",t[t.NoFill=3]="NoFill",t[t.InternalError=4]="InternalError",t[t.InvalidRequest=5]="InvalidRequest",t[t.UnableToPrecache=6]="UnableToPrecache"}(Wa||(Wa={})),function(t){t[t.Undefined=0]="Undefined",t[t.Video=1]="Video",t[t.RewardedVideo=2]="RewardedVideo",t[t.Playable=3]="Playable",t[t.Interstitial=4]="Interstitial",t[t.OfferWall=5]="OfferWall",t[t.Banner=6]="Banner"}(Ua||(Ua={})),function(t){t[t.Undefined=0]="Undefined",t[t.Start=1]="Start",t[t.Complete=2]="Complete",t[t.Fail=3]="Fail"}(Ha||(Ha={})),r.GameAnalytics.setEnabledInfoLog(!1);var Ka=!1,Xa="en";function Ja(t,e){r.GameAnalytics.initialize(t,e),console.log("Network: ".concat("0",", live: ").concat(Ka)),Za("set","network","0",Ka?1:0),Za("start","app","game"),new Va}function qa(t,e,n){r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e),n),gtag("event",t,{event_category:e,value:n})}function $a(t,e,n){r.GameAnalytics.addProgressionEvent(t,"level",n,void 0,e),gtag("event","progression",{event_category:t===Ha.Start?"start":t!==Ha.Fail?"complete":"fail",value:e})}function Qa(t,e,n){void 0===n?r.GameAnalytics.addAdEvent(t,e,"0","ad"):r.GameAnalytics.addAdEventWithNoAdReason(t,e,"0","ad",n);var o="",i="";switch(e){case Ua.Interstitial:i="inter";break;case Ua.RewardedVideo:i="reward"}switch(t){case za.FailedShow:o="showError";break;case za.Show:o="show";break;case za.RewardReceived:o="success"}gtag("event",o,{event_category:i})}function Za(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r.GameAnalytics.addDesignEvent("".concat(t,":").concat(e,":").concat(n),o),gtag("event",t,{event_category:e,event_label:n,value:o})}function tu(t){var e=JSON.stringify(t);r.GameAnalytics.addErrorEvent(r.EGAErrorSeverity.Error,e),gtag("event","show",{event_category:"error",event_label:"error",value:e})}function eu(t){Ka=t}window.onfocus=function(){Howler.mute(!1)},window.onblur=function(){Howler.mute(!0)},window.onload=function(){$().then((function(t){Xa=t.language,Ka=t.success,Ja(t.gameKey,t.secretKey)})).catch((function(t){Xa="en",Ka=!1,Ja("858dec355a72c9195a2a9d7b5b236599","da73f2e7aa8cb82c345aa88235b57abb415e1cd5")}))},o.Broadphase.canCollide=function(t,e){var n,r,i=o.Body.KINEMATIC,a=o.Body.STATIC,u=t.type,c=e.type,s=null===(n=t.userData)||void 0===n?void 0:n.type,l=null===(r=e.userData)||void 0===r?void 0:r.type;return(u!==a||c!==a)&&(u===i&&c===a||u===a&&c===i?s>=250&&s<=260&&l<20||l>=250&&l<=260&&s<20:(u!==i||c!==i)&&((t.sleepState!==o.Body.SLEEPING||e.sleepState!==o.Body.SLEEPING)&&!(t.sleepState===o.Body.SLEEPING&&c===a||e.sleepState===o.Body.SLEEPING&&u===a)))}}});
//# sourceMappingURL=bundle.a198bbf832bfaa82f485.js.map